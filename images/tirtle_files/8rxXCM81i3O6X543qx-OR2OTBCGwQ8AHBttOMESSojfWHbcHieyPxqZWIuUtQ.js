;/*FB_PKG_DELIM*/

__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("base64Binary").encode(new(o("XPlatReactTextEncoder")).TextEncoder().encode(e))}function s(e){return o("base64Binary").encode(new Uint8Array(e))}function u(e){return o("base64Binary").decode(e).buffer}l.encodeUnicode=e,l.fromArrayBuffer=s,l.toArrayBuffer=u}),98);
__d("EBBase64Encode",["Base64Utils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("Base64Utils").fromArrayBuffer(e)}l.default=e}),98);
__d("EBDeps",["FBLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){if(e==null)throw r("err")("EBDeps is not initialized");return e}function u(t,n){if(e==null){var o={},a=function(a){var e=t[a];if(e==null)return 1;e instanceof Function?o[a]=function(){r("FBLogger")("wmi_eb").info("EBDeps: function %s, reason %s",a,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return e.apply(t,i)}:(r("FBLogger")("wmi_eb").info("EBDeps: %s is not function",a),o[a]=e)};for(var i of Object.keys(t))a(i);e=o}}l.getDeps=s,l.setDeps=u}),98);
__d("EBGating",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!0}function s(){return r("gkx")("4877")}function u(){return r("gkx")("19324")}l.isEBSMv2Phase1Enabled=e,l.isFetchBackupIdsFromWorker=s,l.isGetEBSMDataFromRelay=u}),98);
__d("LSEncryptedBackupsBackupTenancy",[],(function(t,n,r,o,a,i){var e=Object.freeze({PRODUCTION:1,SHADOW:2,OPEN:3});i.default=e}),66);
__d("WAPubSub",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Set}var t=e.prototype;return t.publish=function(t){this.$1.forEach(function(e){return e(t)})},t.subscribe=function(t){var e=this;return this.$1.add(t),function(){e.$1.delete(t)}},e})(),s=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.publish=function(t,n){var e=this.$2(t);e.forEach(function(e){return e(n)})},t.$2=function(t){(!this.$1.has(t)||this.$1.get(t)==null)&&this.$1.set(t,new Set);var e=this.$1.get(t);if(e==null)throw r("err")("Key space should not be null");return e},t.subscribe=function(t,n){var e=this.$2(t);return e.add(n),function(){e.delete(n)}},e})();function u(){return new e}l.WAPubSub=e,l.WAKeyedPubSub=s,l.simplePubSub=u}),98);
__d("WAGenericStateManager",["Promise","WAPubSub"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$2=o("WAPubSub").simplePubSub(),this.$1=e}var r=t.prototype;return r.onSet=function(t){return this.$2.subscribe(t)},r.set=function(t){return this.$1=t,this.$2.publish(t),this.$1},r.get=function(){return this.$1},r.waitForValue=function(r){var t=this;return this.$1===r?(e||(e=n("Promise"))).resolve():new(e||(e=n("Promise")))(function(e){var n=t.onSet(function(t){t===r&&(n(),e())})})},t})();l.WAGenericStateManager=s}),98);
__d("MAWEBEnabledStateManager",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,null)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){return this.get()===!0},n.waitForEBEnabled=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager);l.MAWEBEnabledStateManager=e}),98);
__d("MAWEBSwitch",["EBGating","ExecutionEnvironment","MAWEBEnabledStateManager","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EBIsEbEnabledSubscriber").__setRef("MAWEBSwitch"),u=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager;((e||(e=r("ExecutionEnvironment"))).isInMainThread===!0||o("EBGating").isEBSMv2Phase1Enabled())&&s.load().then(function(e){return e.subscribeToEbChanges(function(e){u.set(e)})});var c=u;l.default=c}),98);
__d("MAWEncryptedBackupUtils",["FBLogger","I64","LSAuthorityLevel","LSDict","LSIntEnum","LSShape","LSVec","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.secure_encrypted_backups_client_state)).then(function(e){return c(e,t)})}function c(t,n){var a;if(t==null){n!=null&&n.addPoint("get_backup_tenancy_null_client_state_row");return}var i=(a=t.backupTenancy)!=null?a:(e||(e=o("I64"))).one,l=t.authorityLevel;if(n!=null&&n.addPoint("get_backup_tenancy",{int:{authorityLevel:(e||(e=o("I64"))).to_int32(l!=null?l:(e||(e=o("I64"))).zero),backupTenancy:e.to_int32(i!=null?i:(e||(e=o("I64"))).zero)}}),i!=null&&(e||(e=o("I64"))).equal((s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE),l))return i}function d(e,t){var n=new Set,o=e.length;for(var a of e.entries()){var i=a[0],l=a[1];n.has(l)&&r("FBLogger")("wmi_eb").warn("Duplicate messages returned from server for restoreType: %s, index: %s of batchSize: %s",t,i,o),n.add(l)}}function m(t){var n=t.map(function(t){var n=t.toplevelProtobuf,a=o("LSShape").ofRecord({decrypted_protobuf:n.decryptedProtobuf,protobuf_timestamp_ms:(e||(e=o("I64"))).of_float(n.protobufTimestampMS)}),i=new(r("LSDict"));return t.supplementalProtobufs.forEach(function(t,n){i.set(n,o("LSShape").ofRecord({decrypted_protobuf:t.decryptedProtobuf,protobuf_timestamp_ms:(e||(e=o("I64"))).of_float(t.protobufTimestampMS)}))}),o("LSShape").ofRecord({otid:t.otid,supplemental_protobufs:i,toplevel_protobuf:a})});return r("LSVec").ofArray(n)}function p(t){var n=r("LSVec").toArray(t),a=n.map(function(e){return o("LSShape").toRecord(e)});return a.map(function(t){var n=o("LSShape").toRecord(t.toplevel_protobuf),r={decryptedProtobuf:n.decrypted_protobuf,protobufTimestampMS:(e||(e=o("I64"))).to_float(n.protobuf_timestamp_ms)},a=new Map,i=t.supplemental_protobufs;return i.forEach(function(t,n){var r=o("LSShape").toRecord(t);a.set(n,{decryptedProtobuf:r.decrypted_protobuf,protobufTimestampMS:(e||(e=o("I64"))).to_float(r.protobuf_timestamp_ms)})}),{otid:t.otid,supplementalProtobufs:a,toplevelProtobuf:r}})}l.getBackupTenancy=u,l.getBackupTenancyFromClientStateRow=c,l.logIfDuplicateMessagesFoundInRestore=d,l.convertJSTypesToLSTypesForRestoreJob=m,l.convertLSTypesToJSTypesForRestoreJob=p}),98);
__d("EBIsEbEnabled",["EBDeps","FBLogger","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBSwitch","MAWEncryptedBackupUtils","WAResultOrError","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){return o("MAWEncryptedBackupUtils").getBackupTenancy(t,n).then(function(t){return t!=null&&(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}function c(){try{return o("WAResultOrError").makeResult(r("MAWEBSwitch").isEnabled())}catch(e){return r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Failed to check EB enabled"),o("WAResultOrError").makeResult(!1)}}async function d(){var e=await o("EBDeps").getDeps().getLSDB();return u(e.tables)}l.isEbEnabledLS=u,l.isEbEnabledEbSwitch=c,l.isEBEnabled=d}),98);
__d("EBIsEbEnabledSubscriber",["EBDeps","EBIsEbEnabled","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","ReQL","WAPubSub"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=o("WAPubSub").simplePubSub(),this.$4=e,this.$2=!1}var n=t.prototype;return n.initialize=async function(){this.$2=await o("EBIsEbEnabled").isEbEnabledLS(this.$4.tables),this.$5(this.$4)},n.$6=function(t){this.$2=t,this.$1.publish(t)},n.$5=function(n){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(n.tables.secure_encrypted_backups_client_state).take(1).subscribe(function(n,a){a.operation==="delete"&&t.$6(!1),(a.operation==="add"||a.operation==="put")&&(a.value.backupTenancy!=null&&(e||(e=o("I64"))).equal(a.value.backupTenancy,(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsBackupTenancy").PRODUCTION))?t.$6(!0):t.$6(!1))})),this.$3},n.subscribe=function(t){return this.$1.subscribe(t)},n.isEnabled=function(){return this.$2},t})(),c;async function d(e){if(c!=null)return Promise.resolve();c=new u(e),await c.initialize()}async function m(){if(c==null){var e=await o("EBDeps").getDeps().getLSDB();await d(e)}return c}async function p(e){if(c==null){var t=await o("EBDeps").getDeps().getLSDB();await d(t)}e(c.isEnabled());var n=c.subscribe(e);return n}async function _(){if(c==null){var e=await o("EBDeps").getDeps().getLSDB();await d(e)}return c.isEnabled()}l.initIsEbEnabledPubSub=d,l.isEbEnabledSubscriber=m,l.subscribeToEbChanges=p,l.isEBEnabledValueFromSubscriber=_}),98);
__d("EBMarkerIdToQPLEvent",["I64","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=(e||(e=o("I64"))).to_int32(t);switch(n){case 1021646192:return r("qpl")._(1021646192,"3099");case 1021656232:return r("qpl")._(1021656232,"3100");case 1021647318:return r("qpl")._(1021647318,"3101");case 1021651622:return r("qpl")._(1021651622,"3102");case 1021655799:return r("qpl")._(1021655799,"3103");case 1021648929:return r("qpl")._(1021648929,"3104");case 1021647593:return r("qpl")._(1021647593,"3105");case 1021653744:return r("qpl")._(1021653744,"3106");case 1021655355:return r("qpl")._(1021655355,"3107");case 1021648240:return r("qpl")._(1021648240,"3108");case 1021651939:return r("qpl")._(1021651939,"3109");case 1021656851:return r("qpl")._(1021656851,"3110");case 1021652813:return r("qpl")._(1021652813,"3111");case 1021653501:return r("qpl")._(1021653501,"3112");case 1021655710:return r("qpl")._(1021655710,"3114");case 1021655643:return r("qpl")._(1021655643,"3115");case 1021646076:return r("qpl")._(1021646076,"3116");case 1021642512:return r("qpl")._(1021642512,"3117");case 1021654781:return r("qpl")._(1021654781,"3118");case 1021649468:return r("qpl")._(1021649468,"3120");case 1021652080:return r("qpl")._(1021652080,"3121");case 1021652512:return r("qpl")._(1021652512,"3122");case 1021655828:return r("qpl")._(1021655828,"3124");case 1021642298:return r("qpl")._(1021642298,"3126");case 1021652377:return r("qpl")._(1021652377,"3127");case 521471316:return r("qpl")._(521471316,"2831");case 521478596:return r("qpl")._(521478596,"1329");case 521479468:return r("qpl")._(521479468,"3128");case 521473151:return r("qpl")._(521473151,"2593");case 521482563:return r("qpl")._(521482563,"3129");case 521482912:return r("qpl")._(521482912,"3131");case 521481876:return r("qpl")._(521481876,"1407");case 521471732:return r("qpl")._(521471732,"1454");case 521477507:return r("qpl")._(521477507,"1406");case 521478817:return r("qpl")._(521478817,"2806");case 521476801:return r("qpl")._(521476801,"3132");case 521484724:return r("qpl")._(521484724,"141");case 521473756:return r("qpl")._(521473756,"2768");case 521477113:return r("qpl")._(521477113,"2698");case 521478750:return r("qpl")._(521478750,"2850");case 521479165:return r("qpl")._(521479165,"3055");case 521484370:return r("qpl")._(521484370,"2995");case 521473213:return r("qpl")._(521473213,"27");case 521482281:return r("qpl")._(521482281,"2703");case 521476771:return r("qpl")._(521476771,"2454");case 521474469:return r("qpl")._(521474469,"2612");case 521471755:return r("qpl")._(521471755,"2586");case 521476367:return r("qpl")._(521476367,"2704");case 521473850:return r("qpl")._(521473850,"2910");case 521482558:return r("qpl")._(521482558,"2558");case 521482880:return r("qpl")._(521482880,"16");case 521473150:return r("qpl")._(521473150,"2143");case 521473369:return r("qpl")._(521473369,"2834");case 521485893:return r("qpl")._(521485893,"2835");case 521473922:return r("qpl")._(521473922,"2832");case 521479146:return r("qpl")._(521479146,"3133");case 521471468:return r("qpl")._(521471468,"2968");case 521480391:return r("qpl")._(521480391,"1167");case 521480745:return r("qpl")._(521480745,"3134");case 521481602:return r("qpl")._(521481602,"829");case 521475102:return r("qpl")._(521475102,"3135");case 521484676:return r("qpl")._(521484676,"2684");case 521485625:return r("qpl")._(521485625,"1876");case 521482085:return r("qpl")._(521482085,"409");case 521471024:return r("qpl")._(521471024,"2275");case 521474385:return r("qpl")._(521474385,"263");case 521479842:return r("qpl")._(521479842,"2163");case 521485383:return r("qpl")._(521485383,"2200");case 521478580:return r("qpl")._(521478580,"3136");case 521485815:return r("qpl")._(521485815,"3137");case 521482969:return r("qpl")._(521482969,"1519");case 521485406:return r("qpl")._(521485406,"272");case 521479972:return r("qpl")._(521479972,"3138");case 521484777:return r("qpl")._(521484777,"2715");case 521483076:return r("qpl")._(521483076,"3140");case 521482858:return r("qpl")._(521482858,"1290");case 521472542:return r("qpl")._(521472542,"295");case 521472456:return r("qpl")._(521472456,"1646");case 521476140:return r("qpl")._(521476140,"378");case 521473194:return r("qpl")._(521473194,"1331");case 521482763:return r("qpl")._(521482763,"296");case 521484295:return r("qpl")._(521484295,"1460");case 521476165:return r("qpl")._(521476165,"2432");case 521477947:return r("qpl")._(521477947,"2395");case 521486220:return r("qpl")._(521486220,"827");case 521482576:return r("qpl")._(521482576,"1069");case 521479124:return r("qpl")._(521479124,"1939");case 521476098:return r("qpl")._(521476098,"504");case 521472095:return r("qpl")._(521472095,"2859")}return null}l.markerIdToQPLEvent=s}),98);
__d("InstagramMediaProductTypeName",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({LIVE:"live",FEED:"feed",STORY:"story",DIRECT:"direct",IGTV:"igtv",NAMETAG:"nametag",DIRECT_AUDIO:"direct_audio",CAROUSEL_ITEM:"carousel_item",CAROUSEL_CONTAINER:"carousel_container",PROFILE_PIC:"profile_pic",AD:"ad",AR_EFFECT_PREVIEW:"ar_effect_preview",DIRECT_PERMANENT:"direct_permanent",SELFIE_STICKER:"selfie_sticker",COWATCH_LOCAL:"cowatch_local",CLIPS:"clips",GUIDE_MEDIA_FACADE:"guide_media_facade",FUNDRAISER_COVER:"fundraiser_cover",LIVE_ARCHIVE:"live_archive",HIGHLIGHT_POST_FACADE:"highlight_post_facade",DIRECT_THREAD:"direct_thread",SCHEDULED_LIVE:"scheduled_live",RATINGS_AND_REVIEWS:"ratings_and_reviews",DIRECT_HEADMOJI:"direct_headmoji",CLIPS_PREVIEW:"clips_preview",REPOST_MEDIA_FACADE:"repost_media_facade",STORY_INTERACTION_RESPONSE:"story_interaction_response",MEDIA_KIT:"media_kit",TEXT_POST:"text_post",NOTE_AUDIO:"note_audio",DIRECT_MESSAGE_COMMENT_FACADE:"direct_message_comment_facade"}),l=e;i.default=l}),66);
__d("IGDThreadTTLCUtils",["IGDInstamadilloUtils","InstagramMediaProductTypeName","LSThreadBitOffset","ZenonRTWebBrowserFeatureSupport","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=[225,235,226,227,228,229,230,231,232,233,234,236];function s(e,t){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:o("LSThreadBitOffset").has(t,e)}function u(e){return s(e,225)}function c(e){return!r("gkx")("2400")||!o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()?!1:s(e,235)}function d(e){return s(e,226)}function m(e){return s(e,227)}function p(e){return s(e,228)}function _(e){return s(e,229)}function f(e){return s(e,230)}function g(e){return s(e,231)}function h(e){return s(e,232)}function y(e){return s(e,233)}function C(e){return s(e,234)}function b(e){return s(e,236)}function v(e){return e==null||o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e)||!r("qex")._("954")?!1:S(e)}function S(t){return t==null?!1:e.some(function(e){return o("LSThreadBitOffset").has(e,t)})}function R(e,t){var n=e.isDisappearingModeSettingOn,o=e.isTTLCClipEnabled,a=e.isTTLCGenericXMAShareEnabled,i=e.isTTLCMediaShareEnabled,l=e.isTTLCStoryShareEnabled,s=r("InstagramMediaProductTypeName").cast(t);if(s==null||n||!r("qex")._("954"))return!1;switch(s){case"feed":case"carousel_container":case"ad":return i;case"clips":return o;case"story":return l;case"live":return a;default:return!1}}function L(e){return new Map([["Text",u(e)],["Clip",d(e)],["Reel Share",m(e)],["Media Share",p(e)],["Story Share",_(e)],["Link",f(e)],["Generic XMA",g(e)],["Profile",b(e)],["Image",h(e)],["Video",y(e)],["Audio",C(e)],["Gif/Sticker/Avatar",void 0],["Raven",void 0],["Media Collection",void 0],["Calling",c(e)],["Rest of Message Types",void 0]])}function E(e){return{is_instamadillo_ttlc:String(v(e)),is_instamadillo_ttlc_audio:String(C(e)),is_instamadillo_ttlc_clip:String(d(e)),is_instamadillo_ttlc_generic_xma:String(g(e)),is_instamadillo_ttlc_image:String(h(e)),is_instamadillo_ttlc_link:String(f(e)),is_instamadillo_ttlc_media_share:String(p(e)),is_instamadillo_ttlc_profile:String(b(e)),is_instamadillo_ttlc_reel_share:String(m(e)),is_instamadillo_ttlc_story_share:String(_(e)),is_instamadillo_ttlc_text:String(u(e)),is_instamadillo_ttlc_video:String(y(e))}}function k(e){return{is_instamadillo_ttlc:v(e),is_instamadillo_ttlc_audio:C(e),is_instamadillo_ttlc_clip:d(e),is_instamadillo_ttlc_generic_xma:g(e),is_instamadillo_ttlc_image:h(e),is_instamadillo_ttlc_link:f(e),is_instamadillo_ttlc_media_share:p(e),is_instamadillo_ttlc_profile:b(e),is_instamadillo_ttlc_reel_share:m(e),is_instamadillo_ttlc_story_share:_(e),is_instamadillo_ttlc_text:u(e),is_instamadillo_ttlc_video:y(e)}}function I(e,t){if(e==null)return!1;switch(e.__typename){case"XMSGIgReceiverFetchXmaFeedFetchParams":return p(t);case"XMSGIgReceiverFetchXmaProfileFetchParams":return g(t);case"XMSGIgReceiverFetchXmaClipFetchParams":return d(t);default:return!1}}function T(e){return e==null?!1:o("LSThreadBitOffset").has(261,e)}l.isInstamadilloTTLCTextEnabled=u,l.isInstamadilloTTLCCallingEnabled=c,l.isInstamadilloTTLCClipEnabled=d,l.isInstamadilloTTLCReelShareEnabled=m,l.isInstamadilloTTLCMediaShareEnabled=p,l.isInstamadilloTTLCStoryShareEnabled=_,l.isInstamadilloTTLCLinkEnabled=f,l.isInstamadilloTTLCGenericXmaEnabled=g,l.isInstamadilloTTLCImageEnabled=h,l.isInstamadilloTTLCVideoEnabled=y,l.isInstamadilloTTLCAudioEnabled=C,l.isInstamadilloTTLCProfileEnabled=b,l.isIGDTTLCEnabledForThread=v,l.threadHasInstamadilloTTLCCapability=S,l.isIGDTTLCEnabledForIGDCandidate=R,l.getTtlcMessageTypeMap=L,l.getTTLCLoggingExtraData=E,l.getTTLCBooleanAnnotations=k,l.isXmaReceiverFetchTTLCEnabled=I,l.isInstamadilloOptionalE2EE=T}),98);
__d("IGDInstamadilloUtils",["IGDThreadTTLCUtils","LSThreadBitOffset","gkx","isInstamadillo"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e==null?void 0:e.transportKey)==="Instamadillo"}function s(e){return e==null?!1:o("LSThreadBitOffset").has(214,e)}function u(e){return e==null?!1:o("LSThreadBitOffset").has(212,e)}function c(e){return e==null?!1:o("LSThreadBitOffset").has(38,e)}function d(e){return e==null?!1:o("LSThreadBitOffset").has(211,e)}function m(e){var t=s(e),n=p(e);return n||t}function p(e){if(r("gkx")("6650"))return!1;var t=c(e),n=s(e),a=o("IGDThreadTTLCUtils").threadHasInstamadilloTTLCCapability(e);return t&&(n||a)}function _(t,n){var r=e(t)&&t.ephemeralExpirationTs!=null;return n&&r||!n&&!r}function f(t){var n=e(t);return n?r("isInstamadillo")():!0}l.isInstamadilloMessage=e,l.isInstamadilloCutover=s,l.isInstamadilloDMToggleEnabled=u,l.isIGDDisappearingModeEnabled=c,l.isInstamadilloTransportEnabled=d,l.isInstamadilloHardblockEnabled=m,l.isDMHardblockedEnabled=p,l.shouldRenderMessageReply=_,l.canMutateIGDMessage=f}),98);
__d("IGDRouteProvider.react",["react","react-compiler-runtime","useCurrentRoute"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext;function m(e){var t,n=e==null||(t=e.params)==null?void 0:t.thread_key;return n!=null&&typeof n=="string"?n:null}var p=c();function _(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=r("useCurrentRoute")(),i;t[0]!==a?(i=m(a),t[0]=a,t[1]=i):i=t[1];var l=i,u;return t[2]!==n||t[3]!==l?(u=s.jsx(p.Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}function f(){return d(p)}l.IGDRouteContextProvider=_,l.useThreadKeyFromCurrentRoute=f}),98);
__d("IGDInteractionTraceAnnotations",["I64","IGDInstamadilloUtils","IGDRouteProvider.react","IGDThreadTTLCUtils","Int64Hooks","InteractionTracing","LSIntEnum","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e||(e=o("react"))).useEffect;function d(e){return babelHelpers.extends({},o("IGDThreadTTLCUtils").getTTLCBooleanAnnotations(e),{is_dm:o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e),is_instamadillo:o("IGDInstamadilloUtils").isInstamadilloTransportEnabled(e),is_instamadillo_tlc:o("IGDInstamadilloUtils").isInstamadilloCutover(e)})}function m(e,t){var n,r=o("IGDInstamadilloUtils").isInstamadilloCutover(e),a=o("IGDInstamadilloUtils").isInstamadilloTransportEnabled(e),i=o("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(e);t.addAnnotationBoolean("is_instamadillo",a),t.addAnnotationBoolean("is_instamadillo_tlc",r),t.addAnnotationBoolean("is_dm",i),t.addAnnotationBoolean("is_instamadillo_ttlc",(n=o("IGDThreadTTLCUtils")).isIGDTTLCEnabledForThread(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_audio",n.isInstamadilloTTLCAudioEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_clip",n.isInstamadilloTTLCClipEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_generic_xma",n.isInstamadilloTTLCGenericXmaEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_image",n.isInstamadilloTTLCImageEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_link",n.isInstamadilloTTLCLinkEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_media_share",n.isInstamadilloTTLCMediaShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_profile",n.isInstamadilloTTLCProfileEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_reel_share",n.isInstamadilloTTLCReelShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_story_share",n.isInstamadilloTTLCStoryShareEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_text",n.isInstamadilloTTLCTextEnabled(e)),t.addAnnotationBoolean("is_instamadillo_ttlc_video",n.isInstamadilloTTLCVideoEnabled(e))}function p(e){var t=o("react-compiler-runtime").c(3),n,a;t[0]!==e?(n=function(){r("InteractionTracing").getPendingInteractions().forEach(function(t){m(e,t)})},a=[e],t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]),o("Int64Hooks").useEffectInt64(n,a)}var _=new Set;function f(e){var t=o("react-compiler-runtime").c(7),n;t[0]!==e.consistentThreadFbid||t[1]!==e.threadKey||t[2]!==e.threadSubtype||t[3]!==e.threadType?(n=function(){var t=(s||(s=o("I64"))).to_string(e.threadKey);return r("InteractionTracing").getPendingInteractions().forEach(function(n){var r=_.has(t);n.addAnnotationBoolean("is_thread_visited",r),n.addAnnotation("thread_key",(s||(s=o("I64"))).to_string(e.threadKey)),e.consistentThreadFbid!=null&&n.addAnnotation("consistent_thread_fbid",(s||(s=o("I64"))).to_string(e.consistentThreadFbid)),n.addAnnotationInt("thread_type",(u||(u=o("LSIntEnum"))).toNumber(e.threadType)),e.threadSubtype!=null&&n.addAnnotation("thread_subtype",(s||(s=o("I64"))).to_string(e.threadSubtype))}),function(){_.add(t)}},t[0]=e.consistentThreadFbid,t[1]=e.threadKey,t[2]=e.threadSubtype,t[3]=e.threadType,t[4]=n):n=t[4];var a;t[5]!==e?(a=[e],t[5]=e,t[6]=a):a=t[6],o("Int64Hooks").useEffectInt64(n,a)}function g(){var e=o("react-compiler-runtime").c(3),t=o("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),n,a;e[0]!==t?(n=function(){r("InteractionTracing").getPendingInteractions().forEach(function(e){if(t==null){e.addAnnotationInt("rendered_direct_null_state",1),e.addAnnotationInt("has_thread_key",0);return}e.addAnnotationInt("has_thread_key",1),e.addAnnotationInt("rendered_direct_null_state",0)})},a=[t],e[0]=t,e[1]=n,e[2]=a):(n=e[1],a=e[2]),c(n,a)}l.getInstamadilloBooleanAnnotations=d,l.addInstamadilloAnnotationsToInteractionTrace=m,l.useAddInstamadilloAnnotationsToInteractionTraces=p,l.useAddThreadAnnotationToInteractionTraces=f,l.useAddThreadRouteAnnotations=g}),98);
__d("LSResult",[],(function(t,n,r,o,a,i){"use strict";function e(e){return[e]}i.default=e}),66);
__d("LSBase64Encode.nop",["EBBase64Encode","LSResult","LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(a?r("EBBase64Encode")(a):void 0))};e.__nop_name__="LSBase64Encode",l.default=e}),98);
__d("LSCheckIfAuthoritativeThreadMissingMiActMapping",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r("gkx")("4792")?t.sequence([function(r){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,r){var o=e.done,a=e.value;return o?n[3]=!1:(r=a.item,n[3]=t.i64.eq(r.authorityLevel,t.i64.cast([0,80])))})},function(e){return n[1]=n[3]}]):(o=i.item,n[1]=!1)})},function(e){return n[0]=n[1]}]):t.resolve(n[0]=!1)},function(e){return o[0]=n[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckIfAuthoritativeThreadMissingMiActMappingStoredProcedure",e.__tables__=["mi_act_mapping_table","threads"];var s=e;l.default=s}),98);
__d("LSContactUserBlockAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({MN_UNBLOCK:0,MN_BLOCK:1,FB_UNBLOCK:2,FB_BLOCK:3});i.default=e}),66);
__d("LSGroupParticipantJoinState",[],(function(t,n,r,o,a,i){var e=Object.freeze({MEMBER:0,PENDING:1,INVITED:2});i.default=e}),66);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,r){return new(u||(u=n("Promise")))(function(n,a){var i=o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(r).subscribe(function(t,r){if(r.operation!=="delete"&&(e||(e=o("I64"))).equal(r.value.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2)))return i(),n()})})}function d(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange(n)).then(function(r){if(!(r!=null&&(e||(e=o("I64"))).equal(r.syncStatus,(s||(s=o("LSIntEnum"))).ofNumber(2))))return c(t,n)})}function m(e){return c(e,(s||(s=o("LSIntEnum"))).ofNumber(1))}l.maybeWaitForSyncGroup=d,l.use=m}),98);
__d("LSIsEncryptionVersionSecure",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.i64.eq(e[0],t.i64.cast([0,4]))?n[0]=!1:(t.i64.eq(e[0],t.i64.cast([0,3]))?n[1]=!0:(t.i64.eq(e[0],t.i64.cast([0,2]))?n[2]=!0:(t.i64.eq(e[0],t.i64.cast([0,0]))?n[3]=!0:(t.i64.eq(e[0],t.i64.cast([0,99])),n[4]=!1,n[3]=n[4]),n[2]=n[3]),n[1]=n[2]),n[0]=n[1]),r[0]=n[0],t.resolve(r)}e.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueNewEbTaskAndGetTaskIDV2",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],void 0,void 0,t.i64.cast([0,0]),e[3],e[4],void 0,e[5],e[7]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsIssueNewEbTaskAndGetTaskIDV2StoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3226"),s=o("FalcoLoggerInternal").create("meb_client_logs",e),u=s;l.default=u}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){return r("MebClientLogsFalcoEvent").log(function(){return{calling_class:l,device_family_id:void 0,device_registration_id:void 0,log_level:(s||(s=o("I64"))).to_string(d),msg:u,trace_ids:r("LSVec").toArray(c)}}),(e||(e=n("Promise"))).resolve()};u.__nop_name__="LSLogMebClientEvent",l.default=u}),98);
__d("LSQplAnnotateInt.nop",["EBMarkerIdToQPLEvent","I64","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c,d){try{var t,m=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),p=o("WAHashStringToNumber").hashStringToNumber(u);return r("QPLUserFlow").addAnnotations(m,{int:(t={},t[c]=(s||(s=o("I64"))).to_int32(d),t)},{instanceKey:p}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};u.__nop_name__="LSQplAnnotateInt",l.default=u}),98);
__d("LSQplAnnotateString.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{string:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateString",l.default=s}),98);
__d("LSQplMarkPoint.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),c=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addPoint(t,u,{instanceKey:c}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplMarkPoint",l.default=s}),98);
__d("LSQplStartTrace.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),d=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").start(t,{instanceKey:d}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplStartTrace",l.default=s}),98);
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCheckIfAuthoritativeThreadMissingMiActMapping","LSCreateOfflineThreadingID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){var o;return t.i64.neq(e[1],void 0)?t.sequence([function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(t,n){var o,a,i=t.done,l=t.value;return i?(o=[void 0,void 0],r[3]=o[0],r[4]=o[1],o):(n=l.item,a=[e[1],n.authorityLevel],r[3]=a[0],r[4]=a[1])})},function(e){var t;return t=[r[3],r[4]],r[0]=t[0],r[1]=t[1],t}]):t.resolve((o=[void 0,void 0],r[0]=o[0],r[1]=o[1],o))},function(o){return t.i64.neq(r[0],void 0)?t.sequence([function(o){return t.i64.neq(r[1],void 0)?t.sequence([function(e){return t.storedProcedure(n("LSCheckIfAuthoritativeThreadMissingMiActMapping"),r[0]).then(function(e){var t;return t=e,r[3]=t[0],t})},function(n){return t.i64.gt(e[2],r[1])?t.forEach(t.db.table(9).fetch([[[r[0]]]]),function(t){var n=t.update,r=t.item;return n({authorityLevel:e[2]})}):t.resolve()},function(o){return r[3]||t.i64.gt(e[2],r[1])?(r[4]=new t.Map,r[4].set("thread_fbid",r[0]),r[4].set("force_upsert",!1),r[4].set("use_open_messenger_transport",!1),r[4].set("sync_group",t.i64.cast([0,95])),r[4].set("metadata_only",!1),r[4].set("preview_only",!1),r[5]=r[4].get("thread_fbid"),r[6]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[5]),t.i64.cast([0,209]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()}]):t.resolve()},function(e){return r[2]=r[0]}]):t.sequence([function(o){return t.i64.neq(e[1],void 0)?t.sequence([function(o){return t.i64.neq(e[2],t.i64.cast([0,20]))?(r[11]=new t.Map,r[11].set("thread_fbid",e[1]),r[11].set("force_upsert",!1),r[11].set("use_open_messenger_transport",!1),r[11].set("sync_group",t.i64.cast([0,95])),r[11].set("metadata_only",!1),r[11].set("preview_only",!1),r[12]=r[11].get("thread_fbid"),r[13]=t.toJSON(r[11]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[12]),t.i64.cast([0,209]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(t){return r[3]=e[1]}]):t.sequence([function(e){return r[11]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[11]).then(function(e){var t;return t=e,r[12]=t[0],t})},function(e){return r[3]=r[12]}])},function(n){var o,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v;return t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))?(o=["inbox",t.i64.cast([0,0])],r[4]=o[0],r[5]=o[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,1]))?(a=["pending",t.i64.cast([-1,4294967295])],r[11]=a[0],r[12]=a[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,2]))?(i=["other",t.i64.cast([-1,4294967294])],r[13]=i[0],r[14]=i[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,3]))?(l=["spam",t.i64.cast([-1,4294967293])],r[15]=l[0],r[16]=l[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,5]))?(s=["hidden",t.i64.cast([-1,4294967292])],r[17]=s[0],r[18]=s[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,4]))?(u=["archived",t.i64.cast([-1,4294967286])],r[19]=u[0],r[20]=u[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,15]))?(c=["restricted",t.i64.cast([-1,4294967281])],r[21]=c[0],r[22]=c[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,19]))?(d=["interop",t.i64.cast([-1,4294967277])],r[23]=d[0],r[24]=d[1]):(t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,29]))?(m=["interop_pending",t.i64.cast([-1,4294967267])],r[25]=m[0],r[26]=m[1]):(p=["inbox",t.i64.cast([0,0])],r[25]=p[0],r[26]=p[1]),_=[r[25],r[26]],r[23]=_[0],r[24]=_[1]),f=[r[23],r[24]],r[21]=f[0],r[22]=f[1]),g=[r[21],r[22]],r[19]=g[0],r[20]=g[1]),h=[r[19],r[20]],r[17]=h[0],r[18]=h[1]),y=[r[17],r[18]],r[15]=y[0],r[16]=y[1]),C=[r[15],r[16]],r[13]=C[0],r[14]=C[1]),b=[r[13],r[14]],r[11]=b[0],r[12]=b[1]),v=[r[11],r[12]],r[4]=v[0],r[5]=v[1]),r[6]=t.i64.cast([0,1083495711]),r[7]=t.i64.cast([0,1024]),r[8]=t.i64.cast([0,0]),r[9]=t.i64.cast([0,0]),r[10]=t.i64.cast([0,134217728]),t.forEach(t.filter(t.db.table(9).fetch([[[r[3]]]]),function(n){return t.i64.eq(n.threadKey,r[3])&&t.i64.lt(n.authorityLevel,e[2])}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[3],mailboxType:t.i64.cast([0,4096]),threadType:e[0],folderName:r[4],lastActivityTimestampMs:t.i64.cast([-1,4294967295]),lastReadWatermarkTimestampMs:t.i64.cast([-1,4294967295]),removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),parentThreadKey:r[5],authorityLevel:e[2],capabilities:r[6],capabilities2:r[7],capabilities3:r[8],capabilities4:r[9],capabilities5:r[10],unsendLimitMs:t.i64.cast([-1,4294967295]),syncGroup:t.i64.cast([0,95]),isHidden:!0,clientThreadKey:r[3]})},function(e){return r[2]=r[3]}])},function(e){return o[0]=r[2]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxVerifyE2EEMetadataThreadExistsV2StoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure",["LSSynchronousPromise","LSVerifyE2EEMetadataThreadExistsV2","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyE2EEMetadataThreadExistsV2"),a.threadType,a.threadKey,a.authorityLevel);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWBlockUtils",["I64","LSContactUserBlockAction","LSIntEnum","LSThreadBitOffset","ReQL","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback,m=[0,31,35,55,56,58,24,25,19,85],p=[0,31,35,55,56,58,24,25,19,85,8,22],_=[35,19,85,56,24,25];function f(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(t,a){r("promiseDone")((async function(){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.participants).getKeyRange(t));if(e!=null){var l=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(e.threadKey).filter(g));if(l!=null){var c=(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").MN_BLOCK))?o("LSThreadBitOffset").clear(m,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5):(s||(s=o("I64"))).equal(a,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactUserBlockAction").FB_BLOCK))?o("LSThreadBitOffset").clear(p,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5):o("LSThreadBitOffset").set(_,l.capabilities,l.capabilities2,l.capabilities3,l.capabilities4,l.capabilities5),d=c[0],f=c[1];await n.runInTransaction(function(e){var t=babelHelpers.extends({},l,{capabilities:d,capabilities2:f});return e.threads.put(t)},"readwrite",void 0,void 0,i.id+":137")}}})())},t[0]=n,t[1]=a):a=t[1],a}function g(e){return(s||(s=o("I64"))).equal(e.threadType,(u||(u=o("LSIntEnum"))).ofNumber(15))}l.clearedMnBlockCapabilities=m,l.clearedFbBlockCapabilities=p,l.useChangeThreadBlockCapabilities=f}),98);
__d("MAWReliabilityMonitor",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["PENDING","OK","ERROR","UNKNOWN"]),l=(function(){function e(){this.$1=new Map,this.$2=new Map,this.$3=[]}var t=e.prototype;return t.startMonitoring=function(t,n){var e=new u(t,n,this);return this.$1.set(t,e),this.recordReport(e),e},t.stopMonitoring=function(t){this.$1.delete(t.identifier),this.$2.delete(t.identifier)},t.recordReport=function(t){this.$2.set(t.identifier,babelHelpers.extends({},t.selfAssessmentFn(),{identifier:t.identifier,timestamp:Date.now()})),this.$4()},t.onAggregatedReportChange=function(t){this.$3.push(t)},t.$4=function(){var e=this.getAggregatedReportEntity();this.$3.forEach(function(t){return t(e)})},t.getAggregatedReportEntity=function(){return new s(this.$2)},t.triggerAllSelfAssessments=function(){var e=this;this.$1.forEach(function(t){e.recordReport(t)})},t.getAggregatedReport=function(){return this.triggerAllSelfAssessments(),this.$2},t.TEST_ONLY_reset=function(){this.$1.clear(),this.$2.clear(),this.$3=[]},e})(),s=(function(){function e(e){this.$1=e}var t=e.prototype;return t.toAckPayloadFormat=function(){return Array.from(this.$1.values())},t.toString=function(){var e=Object.fromEntries(this.$1);return JSON.stringify(e)},e})(),u=(function(){function e(e,t,n){this.identifier=e,this.selfAssessmentFn=t,this.$1=n}var t=e.prototype;return t.stopMonitoring=function(){this.$1.stopMonitoring(this)},t.updateState=function(){this.$1.recordReport(this)},e})(),c=new l;i.HealthReportState=e,i.ReliabilityAggregatedReport=s,i.ReportableModule=u,i.MAWReliabilityMonitorSingleton=c}),66);
__d("MAWSetupWorkerAuxStateForLogging",["nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=[],s=3,u={getWorkerAge:function(){if(u.workerStartTime!=null)return Math.floor((Date.now()-r("nullthrows")(u.workerStartTime))/1e3)},restartMessageTypes:[],restartReasons:[],workerStartTime:null,workerTerminatedPermanently:!1};function c(){u.workerStartTime=Date.now()}function d(t){e.push(t),e.length>s&&e.shift()}function m(){return e.join(",")}l.HEART_BEAT_HISTORY=e,l.WorkerLifeCycleState=u,l.resetWorkerCreationTime=c,l.addWorkerHeartbeatToHistory=d,l.getHeartbeatHistoryAsString=m}),98);
__d("MAWTrackPendingOccamadilloThreads",["Deferred","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSIntEnum","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","QuickPerformanceLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e={},e[o("MAWMICSchema").ANNOTATIONS.occamadilloBatchesSentToWorker]=0,e[o("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync]=0,e[o("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads]=0,e);(function(){Object.keys(d).forEach(function(e){o("MAWMIC").addIntAnnotation(e,0)})})();function m(e){o("MAWMIC").addIntAnnotation(e,++d[e])}function p(){return d.occamadilloBatchesSentToWorker}var _=new(r("Deferred")),f=new Set,g=new Set,h=new Set,y=new Set;function C(e){var t=e.callingSource;y.add((c||(c=o("LSIntEnum"))).toNumber(t)),o("MAWMIC").addIntArrayAnnotation(o("MAWMICSchema").ANNOTATIONS.occamadilloCallingSources,Array.from(y))}var b=null;function v(e){if(o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_start),f.has(e)){m(o("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads);return}g.add(e),o("LSPlatformLsInitLog").LsSync.isRunning()&&h.add(e),b=(s||(s=r("QuickPerformanceLogger"))).currentTimestamp(),f.add(e),o("MAWMIC").addIntAnnotation("occamadilloThreadCount",f.size),o("LSPlatformLsInitLog").LsSync.hasEnded()&&m(o("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync)}function S(){o("MAWMIC").addBoolAnnotation("threadMappingAcked",!0)}async function R(e){if(r("gkx")("2661"))await _.getPromise();else{var t=await(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton;await o("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(t,(c||(c=o("LSIntEnum"))).ofNumber(95))}g.delete(e),h.delete(e),o("MAWMIC").addIntAnnotation("occamadilloCompleteThreadCount",f.size-g.size),E()}function L(){_.resolve(),E()}function E(){if(o("MAWMIC").addIntAnnotation("occamadilloThreadCount",f.size),o("LSPlatformLsInitLog").LsSync.hasEnded()&&h.size===0){o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end);return}g.size===0&&o("MAWMIC").addPoint(o("MAWMICSchema").POINTS.thread_mapping_end)}l.incrementCounter=m,l.getBatchesSentNumber=p,l.markThreadPassedToNativeOp=C,l.addPendingThread=v,l.markBridgeCallAcked=S,l.removePendingThread=R,l.completeSync=L,l.maybeEndOccamadilloThreadMapping=E}),98);
__d("MAWInitError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.error=void 0,r.name="MAWInitError",r.message=t,r.error=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MAWInitError=e}),66);
__d("MAWInit",["MAWCurrentUser","MAWInitError","MAWMIC","MWQPLJoinId","MultipleTabsLogger","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","gkx","qpl","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(25310776,"6155"),u=!1,c=[],d=[],m=!1;function p(){m||(m=!0,r("QPLUserFlow").addAnnotations(s,{bool:{armadillo_init_sync_api_improvements:r("gkx")("24025"),isArmadilloPublicLaunchUser:r("gkx")("23405"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}}))}var _=!1,f=function(){return document.visibilityState!==void 0?document.visibilityState==="hidden":document.hidden},g=function(){y("visibility_change_"+(f()?"hidden":"visible"))};function h(){_||(o("MAWMIC").addPoint("maw_init_start"),_=!0,r("QPLUserFlow").start(s,babelHelpers.extends({annotations:{bool:{initiallyHidden:f()},string:{hostname:window.location.hostname}},cancelOnUnload:!0},o("MWQPLJoinId").allowJoinId?{joinOptions:{joinId:o("MWQPLJoinId").MWQPLJoinId}}:{})),r("QPLUserFlow").addAlignmentPointForJoin(s,0,{requestId:o("MWQPLJoinId").MWQPLJoinId}),o("MultipleTabsLogger").addAnnotationToQPLEvent(s),o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){r("QPLUserFlow").addAnnotations(s,e)}),p(),document.addEventListener("visibilitychange",g),c.forEach(function(e){return e()}),d.forEach(function(e){return e()}),c.splice(0,c.length),d.splice(0,d.length))}function y(t,n){if(!_||u){if(!_&&n!=null&&n.allowEarlyLogPoints){var o=(e||(e=r("QuickPerformanceLogger"))).currentTimestamp();d.push(function(){r("QPLUserFlow").addPoint(s,t,{timestamp:o})})}return}p(),r("QPLUserFlow").addPoint(s,t)}function C(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{bool:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{bool:(o={},o[e]=t,o)})}function b(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{string:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{string:(o={},o[e]=t,o)})}function v(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{string_array:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{string_array:(o={},o[e]=t,o)})}function S(e,t,n){var o;if(!_||u){!_&&n!=null&&n.allowEarlyAnnotations&&c.push(function(){var n;r("QPLUserFlow").addAnnotations(s,{int:(n={},n[e]=t,n)})});return}r("QPLUserFlow").addAnnotations(s,{int:(o={},o[e]=t,o)})}function R(){p(),u=!0,m=!1,document.removeEventListener("visibilitychange",g)}function L(e,t){R();var n=t instanceof o("MAWInitError").MAWInitError&&t.error?t.error:t;r("QPLUserFlow").addAnnotations(s,{string:{errorDescription:n==null?void 0:n.message}}),r("QPLUserFlow").endFailure(s,e,{error:n}),o("MAWMIC").fail(e,n)}function E(e,t){R(),r("QPLUserFlow").addAnnotations(s,{string:{cancelReason:e}}),t&&r("QPLUserFlow").markError(s,"maw_init_cancel_with_error",{error:t}),r("QPLUserFlow").endCancel(s),o("MAWMIC").addStringAnnotation("mawInitCancelReason",e),o("MAWMIC").cancel("maw_init_cancel",t),r("QPLUserFlow").addAnnotations(r("qpl")._(29818881,"6702"),{string:{maw_cancel_reason:e,maw_error_message:t==null?void 0:t.message}})}function k(t){u||(R(),o("MAWMIC").addStringAnnotation("mawInitDropReason",t),(e||(e=r("QuickPerformanceLogger"))).markerDrop(s))}function I(){R(),r("QPLUserFlow").endSuccess(s),o("MAWMIC").addPoint("maw_init_end")}async function T(e,t){var n=e+"_start",r=e+"_end";y(n);var o=await t();return y(r),o}var D={isCompleted:function(){return u}},x={addBoolAnnotation:C,addIntAnnotation:S,addStringAnnotation:b,addStringArrayAnnotation:v,cancel:E,drop:k,endSuccess:I,fail:L,logPoint:y,measurePerformance:T,start:h};l.MAWInitState=D,l.MAWInit=x}),98);
__d("MAWStartupLoggingUtils",["FBLogger","MAWInit","MAWMIC","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a,i=(a=t==null?void 0:t.message)!=null?a:"";i.indexOf("Failed to execute 'importScripts'")>=0?o("MAWInit").MAWInit.fail("import_scripts_failure",r("getErrorSafe")(t)):o("MAWInit").MAWInit.fail("worker_error",r("getErrorSafe")(t)),r("FBLogger")("messenger_web").mustfix("[MAWWebWorkerSingletonAsync: "+e+"]: %s:%s:%s:%s:%s:%s:%s",JSON.stringify(t==null?void 0:t.message),t==null?void 0:t.lineno,t==null?void 0:t.colno,t==null?void 0:t.filename,JSON.stringify(t,window.Object.getOwnPropertyNames(t)),t==null?void 0:t.name,n)}function s(e){var t=function(o){var n=o==null?void 0:o.data;if(typeof n=="object")if((n==null?void 0:n.type)==="importScripts_error"){var a,i,l,s,u,c;e.removeEventListener("message",t);var d=r("FBLogger")("messenger_web");d=d.addMetadata("FBLOGGER","ERROR_STACK",(a=typeof(n==null?void 0:n.stack)=="string"?n==null?void 0:n.stack:JSON.stringify(n==null?void 0:n.stack))!=null?a:"no_stack");var m=n!=null?n:{},p=m.error_code,_=m.error_msg,f=m.error_name,g=m.source,h=(i=n==null?void 0:n.perfEntry)!=null?i:{},y=h.duration,C=h.encodedBodySize,b=h.responseStatus,v=h.transferSize;d.mustfix("[MAWWebWorkerSingletonAsync Script Import Error Details]: %s:%s:%s || errCode:%s || respStatus:%s || encBodySize:%s || duration:%s || transferSize:%s",g!=null&&JSON.stringify(g)||"no_source",f!=null&&JSON.stringify(f)||"no_name",_!=null&&JSON.stringify(_)||"no_msg",p!=null&&JSON.stringify(p)||"none",(l=JSON.stringify(b))!=null?l:"none",(s=JSON.stringify(C))!=null?s:"none",(u=JSON.stringify(y))!=null?u:"none",(c=JSON.stringify(v))!=null?c:"none")}else(n==null?void 0:n.type)==="importScripts_success"&&e.removeEventListener("message",t)};e.addEventListener("message",t)}var u=new Set(["worker_connection_established","worker_init_point_hsdp_end","worker_init_point_hblp_end","get_worker_rev_ack_received","old_worker_shutdown_end","old_worker_shutdown_start"]);function c(e){var t=e.data.annotations;if(t!=null){var n={allowEarlyAnnotations:!0};Object.keys(t).forEach(function(e){var r,a=(r=t[e])!=null?r:{};Object.entries(a).forEach(function(t){var r=t[0],a=t[1],i="workerInit"+r.charAt(0).toUpperCase()+r.substring(1);e==="int"&&typeof a=="number"?(o("MAWInit").MAWInit.addIntAnnotation(i,a,n),o("MAWMIC").addIntAnnotation(i,a)):e==="string"&&typeof a=="string"?(o("MAWInit").MAWInit.addStringAnnotation(i,a,n),o("MAWMIC").addStringAnnotation(i,a)):e==="bool"&&typeof a=="boolean"&&(o("MAWInit").MAWInit.addBoolAnnotation(i,a,n),o("MAWMIC").addBoolAnnotation(i,a))})})}var r={allowEarlyLogPoints:!0};if(e.type==="point"){if(u.has(e.data.event)){var a="worker_"+e.data.event;o("MAWInit").MAWInit.logPoint(a,r),o("MAWMIC").addPoint(a)}}else e.type==="end"&&(e.data.cancel===!0?o("MAWInit").MAWInit.logPoint("worker_creation_cancel",r):e.data.errorName!=null&&(o("MAWInit").MAWInit.addStringAnnotation("errorDescription",e.data.errorName,{allowEarlyAnnotations:!0}),o("MAWInit").MAWInit.logPoint("worker_creation_fail",r)))}l.logWorkerError=e,l.setImportScriptsErrorListener=s,l.logSharedWorkerQPLEvents=c}),98);
__d("MAWWorkerWatchdogRecovery",[],(function(t,n,r,o,a,i){"use strict";var e=null;function l(t){e=t}function s(){return e}i.setRecoveryForWatchdog=l,i.getWorkerRecoveryForWatchdog=s}),66);
__d("SharedWorkerDevChangeManager",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=!1,s=new Set;function u(e,t){var n=t.storageWorkerResource,r=t.tabResource;return!0}function c(e){return!1}function d(e){}l.shouldUseStorageWorkerForDev=u,l.shouldUpgradeWorkerForDevExperimental=c,l.trackCreatedWorker=d}),98);
__d("SharedWorkerEventManager",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=function(n){var e,o,a;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="console"&&typeof((o=n.data)==null?void 0:o.response)=="object"&&((a=n.data)==null?void 0:a.response)!=null){var i=n.data.response,l=i.method,s=i.args;if(typeof l!="string"||!["log","error","info","debug","warn"].includes(l)){r("FBLogger")("worker").mustfix("Unexpected console method: %s",String(l));return}if(!Array.isArray(s)){r("FBLogger")("worker").mustfix('Expected console args "%s" to be an array',JSON.stringify(s));return}t({method:l,args:s})}},o=e.port;return o.addEventListener("message",n),function(){return o.removeEventListener("message",n)}}function s(e,t){var n=function(n){var e;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="sw-uncaught-error"){var r,o,a=typeof((r=n.data)==null?void 0:r.e)=="object"?(o=n.data.e)!=null?o:{}:{},i=a.error,l=a.lineno,s=a.colno,u=a.filename,c=a.message;t({error:i instanceof Error?i:null,errorObject:{lineno:typeof l=="number"?l:null,colno:typeof s=="number"?s:null,filename:typeof u=="string"?u:null,message:typeof c=="string"?c:null}})}},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function u(e,t,n){var o=function(o){var e;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="sw-get-rev"&&typeof o.data.response=="object"){var a,i;t==null||t.markPoint("get_worker_rev_ack_received");var l=typeof o.data=="object"&&typeof((a=o.data)==null?void 0:a.response)=="object"?(i=o.data)==null?void 0:i.response:{},s=l==null?void 0:l.workerRevision,u=l==null?void 0:l.spinTime,c=l==null?void 0:l.workerChecksum;if(s==null||typeof s!="number"){t==null||t.addAnnotations({string:{malformedData:"rev is non-number"}}),r("FBLogger")("worker").mustfix("Expected worker rev to be non-null number, but instead received: %s",String(s));return}if(u==null||typeof u!="number"){t==null||t.addAnnotations({string:{malformedData:"spin_time is non-number"}}),r("FBLogger")("worker").mustfix("Expected worker spin time to be non-null number, but instead received: %s",String(u));return}n({rev:s,spinTime:u,workerChecksum:typeof c=="string"?c:void 0})}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function c(e,t,n){var r=function(a){var o;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="sw-shutdown"&&typeof a.data.response=="object"){var i,l,s,u,c,d,m=typeof((i=a.data.response)==null?void 0:i.reason)=="string"?(l=a.data.response)==null?void 0:l.reason:null,p=typeof((s=a.data.response)==null?void 0:s.workerID)=="string"?(u=a.data.response)==null?void 0:u.workerID:null,_=typeof((c=a.data.response)==null?void 0:c.isInitialized)=="boolean"?(d=a.data.response)==null?void 0:d.isInitialized:null;t({reason:m,workerID:p,isInitialized:_}),(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function d(e,t){e.port.addEventListener("message",function(e){var n,r,o;typeof e.data=="object"&&((n=e.data)==null?void 0:n.type)==="sw-uptime-tracking"&&typeof((r=e.data)==null?void 0:r.response)=="object"&&typeof((o=e.data)==null||(o=o.response)==null?void 0:o.trackerID)=="number"&&t({trackerID:e.data.response.trackerID})})}function m(e,t,n){var o=function(o){var e,a;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="execute-worker-ack"&&typeof((a=o.data)==null?void 0:a.response)=="object"){var i,l,s,u=typeof o.data=="object"&&typeof((i=o.data)==null?void 0:i.response)=="object"?(l=(s=o.data)==null?void 0:s.response)!=null?l:{}:{},c=u.workerRevision,d=u.spinMode,m=u.spinTime,p=u.firstInit,_=u.errorGettingSiteData,f=u.error;if(typeof p!="boolean"){t==null||t.addAnnotations({string:{malformedData:"firstInit is non-boolean"}}),r("FBLogger")("worker").mustfix("Expected firstInit to be a boolean, but instead received: %s",String(p));return}var g=_!=null?_:f;if(typeof g=="string")return n({err:g,isFirstInit:p});if(typeof c=="number"&&typeof d=="number"&&typeof m=="number")return n({workerRev:c,workerSpinTime:m,workerSpinMode:d,isFirstInit:p});t==null||t.addAnnotations({string:{malformedData:"workerRevision, spinMode, and/or spinTime are non-numbers"}}),r("FBLogger")("worker").mustfix("Expected workerRevision, spinMode, and spinTime to be non-null number, but instead received: %s %s %s",String(c),String(d),String(m))}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function p(e,t,n,o){var a=function(l){var i,s;if(typeof l.data=="object"&&((i=l.data)==null?void 0:i.type)==="execute-worker-imports"&&typeof((s=l.data)==null?void 0:s.response)=="object"){var u,c,d;(o==null?void 0:o.once)===!0&&e.port.removeEventListener("message",a),t==null||t.markPoint("bundle_imports_ack");var m=typeof l.data=="object"&&typeof((u=l.data)==null?void 0:u.response)=="object"?(c=(d=l.data)==null?void 0:d.response)!=null?c:{}:{},p=m.err,_=m.attempts;if(p!=null&&typeof p!="string"){t==null||t.addAnnotations({string:{malformedData:"err is neither null or a string"}}),r("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(p));return}if(_!=null&&typeof _!="number"){t==null||t.addAnnotations({string:{malformedData:"attempts is neither null or a number"}}),r("FBLogger")("worker").mustfix("Expected attempts to be a number or null, but instead receieved: %s",String(_));return}n({err:p,attempts:_})}},i=e.port;return i.addEventListener("message",a),function(){return i.removeEventListener("message",a)}}function _(e,t,n){var o=function(o){var e;if(typeof o.data=="object"&&((e=o.data)==null?void 0:e.type)==="ww-hrp-init"){var a,i,l;t==null||t.markEventEnd("hrp_init");var s=typeof o.data=="object"&&typeof((a=o.data)==null?void 0:a.response)=="object"?(i=(l=o.data)==null?void 0:l.response)!=null?i:{}:{},u=s.err;if(u!=null&&typeof u!="string"){t==null||t.addAnnotations({string:{malformedData:"err is neither null or a string"}}),r("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(u));return}n({err:u})}},a=e.port;return a.addEventListener("message",o),function(){return a.removeEventListener("message",o)}}function f(e,t){var n=function(n){var e,r,o;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="worker-init-mark"&&typeof((r=n.data)==null?void 0:r.response)=="object"&&typeof((o=n.data)==null||(o=o.response)==null?void 0:o.point)=="string"){var a;t((a=n.data)==null||(a=a.response)==null?void 0:a.point)}},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function g(e,t,n){var r=function(a){var o,i,l;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="self-terminate"&&typeof((i=a.data)==null?void 0:i.response)=="object"&&typeof((l=a.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c,d,m,p,_,f=(s=a.data)==null||(s=s.response)==null?void 0:s.from,g=typeof((u=a.data)==null||(u=u.response)==null?void 0:u.reason)=="string"?(c=a.data)==null||(c=c.response)==null?void 0:c.reason:"unknown",h=typeof((d=a.data)==null||(d=d.response)==null?void 0:d.workerID)=="string"?(m=a.data)==null||(m=m.response)==null?void 0:m.workerID:"unknown",y=typeof((p=a.data)==null||(p=p.response)==null?void 0:p.error)=="string"?(_=a.data)==null||(_=_.response)==null?void 0:_.error:void 0;(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r),t(f,g,h,y)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function h(e,t){var n=t!=null?t:{},r=n.reason,o=n.upgrade;e.port.postMessage({type:"sw-shutdown",args:[{reason:r,upgrade:o}]})}function y(e){e.port.postMessage({type:"sw-get-rev",args:[]})}function C(e,t){var n=t!=null?t:{},r=n.jsModuleResource,o=n.isDev;e.port.postMessage({type:"execute-worker",args:[r!=null?r:{},o]})}var b=["no-hrp","initialized","processed"];function v(e,t,n){var r=function(a){var o,i,l;if(typeof a.data=="object"&&((o=a.data)==null?void 0:o.type)==="connection-ack"&&typeof((i=a.data)==null?void 0:i.response)=="object"&&typeof((l=a.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c,d,m,p=typeof((s=a.data)==null||(s=s.response)==null?void 0:s.workerID)=="string"?(u=a.data)==null||(u=u.response)==null?void 0:u.workerID:void 0,_=typeof((c=a.data)==null||(c=c.response)==null?void 0:c.hrpStatus)=="string"?(d=a.data)==null||(d=d.response)==null?void 0:d.hrpStatus:void 0;t((m=a.data)==null||(m=m.response)==null?void 0:m.from,p,_!=null&&b.includes(_)?_:void 0),(n==null?void 0:n.once)===!0&&e.port.removeEventListener("message",r)}},o=e.port;return o.addEventListener("message",r),function(){return o.removeEventListener("message",r)}}function S(e,t){var n=function(n){t(n.data)},r=e.port;return r.addEventListener("message",n),function(){return r.removeEventListener("message",n)}}function R(e){e.port.postMessage({type:"ww-connection-ack"})}function L(e,t,n){var r=t.isDev,o=t.hrp,a=t.js_env;e.port.postMessage({type:"ww-hrp-init",hrp:o,is_dev:r,js_env:a,tiered:!0})}function E(e,t){var n=t.trackerID;e.port.postMessage({type:"sw-uptime-tracking",args:{trackerID:n}})}function k(t){var n=e(t,function(e){var t,n=e.args,r=e.method;(t=console)[r].apply(t,n)}),o=s(t,function(e){var t=e.error,n=e.errorObject;t!=null?r("FBLogger")("worker").catching(t).mustfix("Shared Worker uncaught error."):r("FBLogger")("worker").mustfix("Shared Worker uncaught error with no Error object. %s:%d:%d:%s",n.message,n.lineno,n.colno,n.filename)});return function(){n(),o()}}l.registerLogFowardingListener=e,l.registerUncaughtErrorForwardingListener=s,l.registerGetWorkerRevListener=u,l.registerWorkerShutdownListener=c,l.registerUptimeTrackerListener=d,l.registerExecuteWorkerAckListener=m,l.registerExecuteWorkerImportsListener=p,l.registerHrpInitListener=_,l.registerWorkerInitPointsListener=f,l.registerWorkerSelfTerminationListener=g,l.emitWorkerShutdown=h,l.emitGetRev=y,l.emitExecuteWorker=C,l.registerConnectionAckListener=v,l.registerAnyMessageListener=S,l.emitConnectionAckRequest=R,l.emitHrpInit=L,l.emitUptimeTracking=E,l.registerForwardListeners=k}),98);
__d("WebStorageLockManager",["FBLogger","LocalStorageWrapper","LockManager","Run","clearInterval","err","promiseDone","setInterval","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e){r("FBLogger")("messenger_web").mustfix(e)}function s(t,n){var a="Failed to execute 'request' on 'LockManager'",i="Lock broken by another request with the 'steal' option.",l=function(t,n,r){var e=t.get(n);if(e!=null)return e;var o=r();return t.set(n,o),o};try{var s=o("LocalStorageWrapper").getStorage(e),u=function(r,a){o("LocalStorageWrapper").setItemGuarded(s,r,a,e,n==null?void 0:n.onQuotaExceeded)},c=function(n){o("LocalStorageWrapper").removeItemGuarded(s,n,e)},d=function(n){return o("LocalStorageWrapper").getItemGuarded(s,n,e)},m=(function(){function e(e,t){this.lockName=e,this.tabId=t,this.lockA=this.lockName+"-a",this.lockB=this.lockName+"-b"}var t=e.prototype;return t.run=function(t){return this.$1(t,0)},t.$1=function(t,n){var e=this,o=function(o){return window.requestAnimationFrame(function(){return e.$1(t,n+1).then(o)})},a=function(t){return d(t)==null};return u(this.lockA,this.tabId),new Promise(function(i){var l=function(){try{t(),i()}finally{c(e.lockB),c(e.lockA)}};a(e.lockB)||n>10?(n>10&&r("FBLogger")("messenger_web").warn("web-lock polyfill: Had to steal lock"),u(e.lockB,e.tabId),d(e.lockA)===e.tabId?l():window.requestAnimationFrame(function(){d(e.lockB)===e.tabId?l():o(i)})):o(i)})},e})(),p=(function(){function e(t){this.tabId=t,this.lock=new m(e.tabsKey,t),r("promiseDone")(this.$1()),this.$2(),this.keepOnlyTabs(function(t){return e.isAlive(t)})}e.isAlive=function(n){var t=d(e.$3(n));return t==null?!1:Date.now()-parseFloat(t)<1e3};var t=e.prototype;return t.keepOnlyTabs=async function(n){await this.lock.run(function(){var t,r=JSON.parse((t=d(e.tabsKey))!=null?t:"[]").filter(n);r.length>0?u(e.tabsKey,JSON.stringify(r)):c(e.tabsKey)})},t.$2=function(){var t=e.$3(this.tabId);u(t,Date.now().toString());var n=r("setInterval")(function(){u(t,Date.now().toString())},500);o("Run").onUnload(function(){r("clearInterval")(n),c(t)})},t.$1=async function(){var t=this;await this.lock.run(function(){var n,r=JSON.parse((n=d(e.tabsKey))!=null?n:"[]");u(e.tabsKey,JSON.stringify([].concat(r,[t.tabId])))}),o("Run").onUnload(function(){return r("promiseDone")(t.keepOnlyTabs(function(e){return e!==t.tabId}))})},e.$3=function(t){return"$navigator.heartbeat-"+t},e})();p.tabsKey="$navigator.heartbeat-tabs";var _=(function(){function e(t,n){var a=this;this.requests=new Map,this.name=t,this.tabId=n,this.queueKey=e.storagePrefix+"-"+t+"-q",this.currentOwnerKey=e.storagePrefix+"-"+t+"-o",this.lock=new m(e.storagePrefix+"-"+t,this.tabId),o("Run").onUnload(function(){r("promiseDone")(a.keepOnlyRequests(function(e){return(e==null?void 0:e.t)!==a.tabId}))})}var t=e.prototype;return t.enqueue=async function(t,n,o){var e=this,a=r("uuidv4")().toString(),i={t:this.tabId,u:a},l=function(){t(null),e.markRequestReleased(a)},s=function(){t(a),e.markRequestReleased(a)};if(this.requests.set(a,[function(){return t(a)},function(){n(),e.markRequestReleased(a)}]),(o==null?void 0:o.signal)!=null&&(o.signal.onabort=function(){r("promiseDone")(e.keepOnlyRequests(function(e){return(e==null?void 0:e.u)!==a})),s()},o.signal.aborted))return s();await this.lock.run(function(){var t=e.getOwner();if((o==null?void 0:o.steal)===!0&&e.$1(t==null?void 0:t.u),t==null||(o==null?void 0:o.steal)===!0||!p.isAlive(t.t))e.$2(e.currentOwnerKey,babelHelpers.extends({},i,(o==null?void 0:o.steal)===!0?{s:!0}:{})),e.$3(a);else if((o==null?void 0:o.ifAvailable)!==!0){var n=e.getQueue();n.push(i),e.$2(e.queueKey,n)}else l()})},t.dequeue=async function(n){var t=this,r,o=null;await this.lock.run(function(){var r=t.getOwner();if(!((r==null?void 0:r.t)!==t.tabId||(r==null?void 0:r.u)!==n)){var a=t.getQueue(),i=e.getNextOwner(a),l=i[0],s=i[1];o=l,t.$2(t.currentOwnerKey,l),t.$2(t.queueKey,s)}}),this.$3((r=o)==null?void 0:r.u)},t.storageChangedOnOtherTab=async function(t,n){var e=this;t==="o"&&await this.lock.run(function(){var t=e.getOwner();if(t!=null&&(e.$3(t==null?void 0:t.u),t.s===!0)){var r=n==null?void 0:n.oldValue;if(r!=null){var o=JSON.parse(r);o.t===e.tabId&&e.$1(o.u)}}})},t.getQueue=function(){var e;return(e=this.$4(this.queueKey))!=null?e:[]},t.getOwner=function(){return this.$4(this.currentOwnerKey)},e.getQueueNameAndStorageType=function(n){if(!n.startsWith(e.storagePrefix))return null;var t=n.slice(e.storagePrefix.length+1,n.length-2),o=n.charAt(n.length-1);switch(o){case"q":case"o":case"a":case"b":break;default:throw r("err")("Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: "+n)}return[t,o]},e.getNextOwner=function(t){for(var e=0;e<t.length;e+=1)if(p.isAlive(t[e].t))return[t[e],t.slice(e+1)];return[null,[]]},t.$4=function(t){var e=d(t);return e!=null?JSON.parse(e):null},t.$2=function(t,n){var e=n==null||Array.isArray(n)&&n.length===0?null:JSON.stringify(n);e==null?c(t):u(t,e)},t.keepOnlyRequests=async function(n){var t=this;await this.lock.run(function(){var r=t.getOwner(),o=t.getQueue().filter(n);if(n(r))t.$2(t.queueKey,o);else{var a=e.getNextOwner(o),i=a[0],l=a[1];t.$2(t.currentOwnerKey,i),t.$2(t.queueKey,l)}})},t.markRequestReleased=function(t){t!=null&&this.requests.delete(t)},t.$3=function(t){if(t!=null){var e=this.requests.get(t);if(e!=null){var n=e[0];n()}}},t.$1=function(t){if(t!=null){var e=this.requests.get(t);if(e!=null){var n=e[0],r=e[1];r()}}},e})();_.storagePrefix="$navigator.locks";var f=(function(){function t(t){this.$1=new Map,this.storage=o("LocalStorageWrapper").getStorage(e),this.tabId=t;var n=new p(this.tabId);r("promiseDone")(this.$2()),this.$3()}var n=t.prototype;return n.request=function(){for(var e=this,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return new Promise(function(t,l){r("promiseDone")((async function(t){var s=n[0],u=n.length===3?n[1]:null,c=n.length===2?n[1]:n[2];if(s.startsWith("-"))throw new DOMException("Names cannot start with '-'.",a);if((u==null?void 0:u.ifAvailable)===!0&&(u==null?void 0:u.signal)!=null)throw new DOMException("The 'signal' and 'ifAvailable' options cannot be used together.",a);var d=e.$4(s),m=await new Promise(function(e){r("promiseDone")(d.enqueue(e,function(){l(new DOMException(i,a))},u))});if((u==null||(t=u.signal)==null?void 0:t.aborted)===!0)throw new DOMException("The request was aborted.",a);try{var p;await c(m!=null?{mode:(p=u==null?void 0:u.mode)!=null?p:o("LockManager").LockMode.Exclusive,name:s}:null)}finally{m!=null&&await d.dequeue(m),d.markRequestReleased(m)}})(),t,l)})},n.query=function(){var e=[],t=[];for(var n of this.$5())if(n!=null){var r={mode:o("LockManager").LockMode.Exclusive,name:n.name};if(n.getOwner()!=null)e.push(r);else for(var a of n.getQueue())t.push(r)}return Promise.resolve({held:e,pending:t})},n.$4=function(t){var e=this;return l(this.$1,t,function(){return new _(t,e.tabId)})},n.$3=function(){var e=this;window.addEventListener("storage",function(t){var n,o=t.key;if(!(t.storageArea!==e.storage||o==null)){var a=_.getQueueNameAndStorageType(o);if(a!=null){var i=a[0],l=a[1];r("promiseDone")((n=e.$4(i))==null?void 0:n.storageChangedOnOtherTab(l,t))}}})},n.$2=async function(){await Promise.all(this.$5().map(function(e){return e==null?void 0:e.keepOnlyRequests(function(e){return e==null?!1:p.isAlive(e.t)})}))},n.$5=function(){var e=this;return s==null?[]:Object.keys(s).map(function(t){var n=_.getQueueNameAndStorageType(t);if(n!=null){var r=n[0];return e.$4(r)}})},t})();return new f(t)}catch(e){return null}}l.make=s}),98);
__d("supportsNativeWebLock",[],(function(t,n,r,o,a,i){"use strict";function e(){return self.LockManager!=null&&self.navigator.locks instanceof self.LockManager}i.default=e}),66);
__d("SharedWorkerLockManager",["Deferred","FBLogger","WebStorageLockManager","emptyFunction","pageID","promiseDone","setTimeout","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e="shared_worker_mutex",s=6e5;function u(e){var t,n=(t=window)==null||(t=t.navigator)==null?void 0:t.locks;if(n!=null)return n;var a=o("WebStorageLockManager").make(r("pageID"));return a!=null?(e==null||e.addAnnotations({bool:{fallback_lock_manager:!0}}),{request:function(t,n){return a.request(t,n)}}):null}function c(e,t,n){r("setTimeout")(function(){e.isSettled()||(t==null||t.endFailure("lock_timeout"),r("FBLogger")("worker").warn("[SharedWorkerLockManager]: lock timed out in %s ms",s),e.resolve(),n==null||n())},s)}function d(t,n){var o=n.workerQPLLogger,a=n.onLockTimeout,i=n.onLockFail,l=u(o);if(o==null||o.addAnnotations({bool:{native_locks:l!=null?r("supportsNativeWebLock")():null}}),l==null){o==null||o.markPoint("no_lock_manager"),r("FBLogger")("worker").warn("Unable to initialize lock manager"),t(r("emptyFunction"));return}o==null||o.markPoint("lock_requested");var s=new(r("Deferred"));r("promiseDone")(l.request(e,function(){return o==null||o.markPoint("lock_obtained"),c(s,o,a),t(function(){o==null||o.markPoint("lock_released"),s.resolve()}),s.getPromise()}),void 0,i)}l.withWorkerLock=d}),98);
__d("SharedWorkerLoggingUtils",["ErrorSerializer","FBLogger","ODS","QPLUserFlow","getErrorSafe","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a){(e||(e=o("ODS"))).bumpEntityKey(6653,"shared_worker_infra","worker_self_termination."+n+"."+t),u(t,n,r,a,!0)}function u(e,t,n,o,a){a===void 0&&(a=!1);var i=r("qpl")._(931600201,"1438");r("QPLUserFlow").start(i),r("QPLUserFlow").endSuccess(i,{annotations:{string:{workerName:e,workerID:o,reason:n,location:t,pageID:r("pageID")},bool:{isSelfTermination:a}}})}function c(e,t,n,r,o,a){e==null||e.markEventEnd("execute_worker"),e==null||e.addAnnotations({int:{runningWorkerRev:o,runningWorkerSpinTime:t,runningWorkerSpinMode:a},string:{executeWorkerErr:n},bool:{isFirstInit:r}})}function d(e,t,n){var o,a,i,l,s,u,c=r("getErrorSafe")((o=t instanceof ErrorEvent&&(t==null?void 0:t.error))!=null?o:t);r("FBLogger")("worker").catching(c).warn("Worker %s onerror: %s type, %s message",n,String(t.type),r("ErrorSerializer").toReadableMessage(c)),e==null||e.addAnnotations({string_array:{onErrorHandler:[(a=JSON.stringify((i=c==null?void 0:c.message)!=null?i:t==null?void 0:t.message))!=null?a:"undefined",String((l=t==null?void 0:t.lineno)!=null?l:c==null?void 0:c.lineno),String((s=t==null?void 0:t.colno)!=null?s:c==null?void 0:c.colno),String((u=t==null?void 0:t.filename)!=null?u:c==null?void 0:c.filename)]}})}l.logSelfTermination=s,l.logShutdown=u,l.logExecuteAck=c,l.logSharedWorkerError=d}),98);
__d("validateSharedWorkerReference",["ConstUriUtils","isRelativeURL","isSameOrigin","memoize"],(function(t,n,r,o,a,i,l){"use strict";var e=r("memoize")(function(){return o("ConstUriUtils").getUri(window.location.href)});function s(t){var n=e(),a=o("ConstUriUtils").getUri(t),i=n!=null&&a!=null?r("isSameOrigin")(a,n):!1;return i||r("isRelativeURL")(t)}function u(e){if(e==null||typeof e!="object")return null;var t=e.rev,n=e.spin_time,r=e.url,o=e.version,a=e.rsrcBundleUrl,i=e.sandboxOnlyChecksum;return typeof t!="number"||typeof n!="number"||o!=null&&o!==1&&o!==2||!Number.isInteger(t)||!Number.isInteger(n)||typeof r!="string"||!s(r)||a!=null&&typeof a!="string"||i!=null&&typeof i!="string"?null:{rev:t,spin_time:n,url:r,version:o!=null?o:1,rsrcBundleUrl:a,sandboxOnlyChecksum:i}}l.default=u}),98);
__d("SharedWorkerStorageManager",["Deferred","FBLogger","Promise","WebAsyncStorage","promiseDone","validateSharedWorkerReference"],(function(t,n,r,o,a,i,l){"use strict";var e,s="__swbundle__",u={};function c(e){return""+s+e}function d(e){var t=new(r("Deferred"));return r("WebAsyncStorage").removeItem(c(e),function(n){if(n)return t.reject(n);u[e]=null,t.resolve()}),t.getPromise()}function m(e,t){var n=new(r("Deferred"));return r("WebAsyncStorage").setItem(c(e),t,function(r){if(r!=null)return n.reject(r);u[e]=t,n.resolve()}),n.getPromise()}function p(e){var t=new(r("Deferred"));return r("WebAsyncStorage").getItem(c(e),function(n,r){if(n)return t.reject(n);u[e]=r,t.resolve(r)}),t.getPromise()}function _(){return u}function f(e,t){return p(e).then(function(e){var t=r("validateSharedWorkerReference")(e);return t==null?null:t}).catch(function(n){throw r("FBLogger")("worker").catching(n).mustfix("Failed to getSharedWorkerReference for bundleName %s",e),t==null||t.addAnnotations({bool:{failedToGetSharedWorkerResource:!0}}),n})}function g(e,t){return d(e).catch(function(n){throw r("FBLogger")("worker").catching(n).mustfix("Failed to removeSharedWorkerReference for bundleName %s",e),t==null||t.addAnnotations({bool:{failedToDeleteSharedWorkerResource:!0}}),n})}function h(t,o,a){var i=r("validateSharedWorkerReference")(o);return i==null?(r("FBLogger")("worker").mustfix('Failed to save worker reference for bundle "%s". Invalid reference: %s',t,JSON.stringify(o)),(e||(e=n("Promise"))).resolve()):m(t,i).catch(function(e){throw r("FBLogger")("worker").catching(e).mustfix("Failed to saveSharedWorkerReference for bundleName %s",t),a==null||a.addAnnotations({bool:{failedToSaveSharedWorkerResource:!0}}),e})}function y(e,t,n){var o=r("WebAsyncStorage").isOpenPromiseSettled();n==null||n.addAnnotations({bool:{isWebAsyncStorageIndexedDBOpened:o}}),o&&r("promiseDone")(r("WebAsyncStorage").isOperational(),function(e){n==null||n.addAnnotations({string:{idb_open_error:e.success===!1?e.error.message:"No IDB open error"}})});var a=new(r("Deferred"));return r("WebAsyncStorage").upsertAndSaveAtomic(c(e),function(e){var n=r("validateSharedWorkerReference")(e);return t(n)},function(t,o){if(n==null||n.markPoint("worker_reference_db_response"),t)return r("FBLogger")("worker").catching(t).mustfix("Failed to getOrUpdateWorkerReference for bundleName %s",e),a.reject(t);u[e]=o,a.resolve(o)}),a.getPromise()}l.SHARED_WORKER_STORAGE_KEY_BASE=s,l.getDebugState=_,l.getSharedWorkerReference=f,l.removeSharedWorkerReference=g,l.saveSharedWorkerReference=h,l.getOrUpdateWorkerReference=y}),98);
__d("createSharedWorkerV2BundleUrlExperimental",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","nullthrows","supportsModuleWorker"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=r("supportsModuleWorker")(!0);return r("nullthrows")((t=r("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:n?"MODULE":"CLASSIC",name:e}))==null?void 0:t.toString())}l.default=e}),98);
__d("SharedWorkerMigrationUtils",["ConstUriUtils","Deferred","FBLogger","SharedWorkerEventManager","SharedWorkerStatusLock","SharedWorkerStorageManager","TrustedTypesWebWorkerScriptURLPolicy","clearTimeout","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){if(!r("supportsNativeWebLock")())return!0;var t=await self.navigator.locks.query();return t.held.some(function(t){return t.name===o("SharedWorkerStatusLock").getDynamicStringInitLockName(e)})}function s(){return r("supportsNativeWebLock")()}async function u(e){if(!r("supportsNativeWebLock")())return!0;var t=await self.navigator.locks.query();return t.held.some(function(t){return t.name===o("SharedWorkerStatusLock").getStatusLockName(e)})}async function c(e,t){if(!r("supportsNativeWebLock")())return!0;var n=await self.navigator.locks.query();return n.held.some(function(n){return n.name===o("SharedWorkerStatusLock").getWorkerIdStatusLockName(e,t)})}var d={SharedWorkerBundle:!0,MAWMainWebWorkerV2Bundle:!0};function m(e){var t;return(t=d[e])!=null?t:!1}async function p(t){if(!await e(t))return!1;var n=new(r("Deferred")),a=r("createSharedWorkerV2BundleUrlExperimental")(t),i=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),l=r("supportsModuleWorker")(!0)?new SharedWorker(i,{name:t,type:"module"}):new SharedWorker(i,t);return o("SharedWorkerEventManager").registerWorkerShutdownListener(l,function(e){n.resolve(!0)},{once:!0}),o("SharedWorkerEventManager").emitWorkerShutdown(l,{upgrade:!1,reason:"dynamic_string_worker_rollback"}),l.port.start(),n.getPromise()}function _(e){var t=o("ConstUriUtils").getUri(e);return t!=null&&t.getQueryParam("hash")!=null}async function f(t){var n=t.name,a=t.logger;try{var i=await Promise.all([u(n),e(n)]),l=i[0],s=i[1];if(!l||r("supportsNativeWebLock")()&&s){a.markPoint("legacy_termination_skipped"),a.addAnnotations({bool:{dynamicStringWorkerAlreadyRunning:s,workerAlreadyRunning:l,native_locks:r("supportsNativeWebLock")()}});return}var c=await o("SharedWorkerStorageManager").getSharedWorkerReference(n);if(a.markPoint("storage_read"),a.addAnnotations({bool:{storageResourceSet:c!=null}}),c==null)return;try{await o("SharedWorkerStorageManager").removeSharedWorkerReference(n),a.markPoint("storage_cleaned")}catch(e){a.markPoint("storage_error"),a.addAnnotations({string:{storageError:String(e)}}),r("FBLogger")("worker").catching(r("getErrorSafe")(e)).mustfix("Failed to remove reference from storage.")}var d=_(c.url);if(a.markPoint(d?"legacy_termination_start":"termination_skipped"),d){var m=new(r("Deferred")),p=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(c.url),f=r("supportsModuleWorker")(!0)?new SharedWorker(p,{name:n,type:"module"}):new SharedWorker(p,n),g=function(){a.markPoint("legacy_termination_end"),m.resolve(!0)};o("SharedWorkerEventManager").registerWorkerShutdownListener(f,g,{once:!0}),o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(f,g,{once:!0}),f.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(f,{upgrade:!1,reason:"maw-request-refresh"});var h=r("setTimeout")(function(){a.markPoint("legacy_termination_timeout"),m.reject(r("err")("Failed to close Shared Web Worker properly. SelfTerminationTimeout was exceeded."))},1e3);await m.getPromise(),r("clearTimeout")(h)}}catch(e){a.markPoint("legacy_check_and_termination_error"),a.addAnnotations({string:{legacyCheckError:String(e)}}),r("FBLogger")("worker").catching(r("getErrorSafe")(e)).mustfix("Failed to check storage and possibly terminate legacy worker.")}}l.isDynamicStringWorkerRunning=e,l.supportsNativeWebLocks=s,l.isStatusLockHeld=u,l.isWorkerIdStatusLockHeld=c,l.shouldCheckForDynamicStringWorker=m,l.maybeTerminateDynamicStringWorker=p,l.isLegacyWorkerURL=_,l.checkStorageAndTerminateLegacyWorker=f}),98);
__d("SharedWorkerUptimeTracker",["FBLogger","ODS","SharedWorkerEventManager","clearInterval","performanceNow","setInterval","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=1e4,c=45e3,d=new Map;function m(e){return Math.floor(((s||(s=r("performanceNow")))()-e)/1e3)}function p(t,n){var a=0,i={};return o("SharedWorkerEventManager").registerUptimeTrackerListener(t,function(t){var r=t.trackerID,a=i[r];a!=null&&((e||(e=o("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+n,1,0),e.bumpEntityKey(6653,"shared_worker_infra","worker_uptime_elapsed_time_to_response_sec."+m(a.createdMs)+"."+n),delete i[r])}),r("setInterval")(function(){var l=a++;r("setTimeout")(function(){var e=i[l];e!=null&&delete i[l]},c),i[l]={createdMs:(s||(s=r("performanceNow")))()},(e||(e=o("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+n,0,1),o("SharedWorkerEventManager").emitUptimeTracking(t,{trackerID:l})},u)}function _(e,t){if(d.has(t)){r("FBLogger")("worker").mustfix('Uptime tracking for worker "%s" already started.',t);return}d.set(t,{intervalID:p(e,t)})}function f(e){var t=d.get(e);t!=null&&(r("clearInterval")(t.intervalID),d.delete(e))}l.startUptimeTracking=_,l.stopUptimeTracking=f}),98);
__d("buildSharedWorkerInitQPLLogger",["QPLUserFlow","SiteData","checkForIndexedDbSupported","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(931595918,"2062"),s=0;function u(t){var n=!1,o=!1,a=s++;function i(i){var l=i.version,s=i.workerName,u=i.callReason,c=i.experimental_init,d=i.migrationEnabled;if(!(n||o)){n=!0;var m={int:{version:l,clientRev:r("SiteData").client_revision},bool:{isDev:!1,supportsIDB:r("checkForIndexedDbSupported")(),experimental_init:c!=null?c:!1,migrationEnabled:d!=null?d:!1},string:{workerName:s,hostname:window.location.hostname,callReason:u,pageID:r("pageID")}};r("QPLUserFlow").start(e,{onFlowTimeout:function(){r("QPLUserFlow").addAnnotations(e,{bool:{setupTimeout:!0}},{instanceKey:a}),o=!0},cancelOnUnload:!0,annotations:m,timeoutInMs:66e4,instanceKey:a}),t==null||t({type:"start",data:{annotations:m}})}}function l(i,l){var s=i+"_start";t==null||t({type:"point",data:{annotations:l,event:s}}),!(!n||o)&&r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a})}function u(i,l){var s=i+"_end";t==null||t({type:"point",data:{annotations:l,event:s}}),!(!n||o)&&(r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}}))}function c(i,l){t==null||t({type:"point",data:{annotations:l,event:i}}),!(!n||o)&&r("QPLUserFlow").addPoint(e,i,{data:l,instanceKey:a})}function d(i){t==null||t({type:"end",data:{annotations:i}}),!(!n||o)&&(r("QPLUserFlow").endSuccess(e,{annotations:i,instanceKey:a}),o=!0)}function m(i,l){t==null||t({type:"end",data:{errorName:i,annotations:l}}),!(!n||o)&&(r("QPLUserFlow").endFailure(e,i,{annotations:l,instanceKey:a}),o=!0)}function p(i){t==null||t({type:"end",data:{annotations:i,cancel:!0}}),!(!n||o)&&(r("QPLUserFlow").endCancel(e,{annotations:i,instanceKey:a}),o=!0)}function _(i){t==null||t({type:"annotate",data:{annotations:i}}),!(!n||o)&&r("QPLUserFlow").addAnnotations(e,i,{instanceKey:a})}return{start:i,endFailure:m,addAnnotations:_,endSuccess:d,endCancel:p,markEventStart:l,markEventEnd:u,markPoint:c}}l.default=u}),98);
__d("buildSharedWorkerTerminateQPLLogger",["QPLUserFlow","SiteData","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(931600201,"1438"),s=0;function u(t){var n=!1,o=!1,a=s++;function i(i){var l=i.workerName,s=i.callReason;if(!(n||o)){n=!0;var u={int:{clientRev:r("SiteData").client_revision},bool:{isDev:!1},string:{workerName:l,hostname:window.location.hostname,callReason:s,pageID:r("pageID")}};r("QPLUserFlow").start(e,{onFlowTimeout:function(){r("QPLUserFlow").addAnnotations(e,{bool:{setupTimeout:!0}},{instanceKey:a}),o=!0},cancelOnUnload:!0,annotations:u,timeoutInMs:3e4,instanceKey:a}),t==null||t({type:"start",data:{annotations:u}})}}function l(i,l){if(!(!n||o)){var s=i+"_start";r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}})}}function u(i,l){if(!(!n||o)){var s=i+"_end";r("QPLUserFlow").addPoint(e,s,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:s}})}}function c(i,l){!n||o||(r("QPLUserFlow").addPoint(e,i,{data:l,instanceKey:a}),t==null||t({type:"point",data:{annotations:l,event:i}}))}function d(i){!n||o||(r("QPLUserFlow").endSuccess(e,{annotations:i,instanceKey:a}),t==null||t({type:"end",data:{annotations:i}}),o=!0)}function m(i,l){!n||o||(r("QPLUserFlow").endFailure(e,i,{annotations:l,instanceKey:a}),t==null||t({type:"end",data:{errorName:i,annotations:l}}),o=!0)}function p(i){!n||o||(r("QPLUserFlow").endCancel(e,{annotations:i,instanceKey:a}),t==null||t({type:"end",data:{annotations:i,cancel:!0}}),o=!0)}function _(i){!n||o||(r("QPLUserFlow").addAnnotations(e,i,{instanceKey:a}),t==null||t({type:"annotate",data:{annotations:i}}))}return{start:i,endFailure:m,addAnnotations:_,endSuccess:d,endCancel:p,markEventStart:l,markEventEnd:u,markPoint:c}}l.default=u}),98);
__d("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/static_resources/sharedworker/init_script/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("getSharedWorkerHash",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("uuidv4")()}l.default=e}),98);
__d("createSharedWorkerBundleUrl",["XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e;return r("nullthrows")((e=r("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder").buildUri({hash:r("getSharedWorkerHash")()}).addQueryParams(r("getWorkerInitScriptSPINParams")()))==null?void 0:e.toString())}l.default=e}),98);
__d("createSharedWorkerV2BundleUrl",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","gkx","justknobx","nullthrows","supportsModuleWorker"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("supportsModuleWorker")(!0),n=r("getWorkerInitScriptSPINParams")();return n.set("hash",r("getSharedWorkerHash")()),n.set("use_broadcast",r("justknobx")._("4177")),n.set("worker_id_in_terminate",r("gkx")("12766")),r("nullthrows")((e=r("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:t?"MODULE":"CLASSIC"}))==null||(e=e.addQueryParams(n))==null?void 0:e.toString())}var s=function(){return e()};l.createSharedWorkerV2BundleUrl=s}),98);
__d("handleWorkerWriteError",["FBLogger","WebStorageCleanupReason"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e instanceof Error){r("FBLogger")("worker").catching(e).mustfix("Error occured checking in shared worker reference");return}if(e==="writes disabled"){var t;r("FBLogger")("worker").warn("Writes to WebAsyncStorage is disabled. Unable to save shared worker reference. Reason: %s",(t=o("WebStorageCleanupReason").getLastCleanupReason())!=null?t:"n/a");return}r("FBLogger")("worker").mustfix("Error occured checking in shared worker reference: %s",JSON.stringify(e))}l.default=e}),98);
__d("SharedWorkerInitFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4266"),s=o("FalcoLoggerInternal").create("shared_worker_init",e),u=s;l.default=u}),98);
__d("logSharedWorkerInitStep",["SharedWorkerInitFalcoEvent","SiteData","gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=r("uuidv4")();function s(t,n,o,a){r("gkx")("21115")&&r("SharedWorkerInitFalcoEvent").log(function(){return{client_id:e,bundle_name:t,client_rev:String(r("SiteData").client_revision),local_shared_worker_ref:n!=null?{bundle_url:n.url,rev:String(n.rev),spin_time:String(n.spin_time)}:null,new_shared_worker_ref:o!=null?{bundle_url:o}:null,init_step:a}})}l.default=s}),98);
__d("SharedWorkerBundleResource",["BootloaderPreloader","Deferred","FBLogger","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLockManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerStorageManager","SharedWorkerUptimeTracker","SharedWorkerV2ResourceExperimental","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","WebWorkerV2DynamicData","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerBundleUrl","createSharedWorkerV2BundleUrl","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","handleWorkerWriteError","justknobx","logSharedWorkerInitStep","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3,s="shared_worker_broadcast_channel",u=(function(e){function t(t){var n;return n=e.call(this)||this,n.name="SelfTerminationError",n.message="Worker self terminated with the reason: "+t,n.reason=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function c(e,t,n,a){a==null||a.markEventStart("shared_worker_construct");var i=new SharedWorker(r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),t);a==null||a.markEventEnd("shared_worker_construct"),i.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(a,e,t)});var l=new Set;o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(i,function(e,n,r){o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r)},{once:!0});var s=0;o("SharedWorkerEventManager").registerConnectionAckListener(i,function(e,t){if(s++,l.has("worker_connection_established")){a==null||a.addAnnotations({int:{connectionAckNum:s}});return}l.add("worker_connection_established"),a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),a==null||a.markPoint("worker_connection_established")}),o("SharedWorkerEventManager").registerWorkerInitPointsListener(i,function(e){l.has(e)||(l.add(e),a==null||a.markPoint("worker_init_point_"+e))}),i.port.start(),o("SharedWorkerEventManager").registerExecuteWorkerImportsListener(i,a,function(e){var t=e.err,n=e.attempts;a==null||a.addAnnotations({string:{importsError:t},int:{importAttempts:n}}),a==null||a.markPoint(t==null?"bundle_imports_success":"bundle_imports_failure")});var u=new(r("Deferred"));return o("SharedWorkerEventManager").registerExecuteWorkerAckListener(i,a,function(e){var t=e.workerSpinTime,n=e.err,i=e.isFirstInit,l=e.workerRev,s=e.workerSpinMode;o("SharedWorkerLoggingUtils").logExecuteAck(a,t,n,i,l,s),n!=null||t==null||l==null?u.reject(r("err")(n!=null?n:"no worker rev or spin time")):u.resolve({rev:l,spinTime:t})}),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(i,{jsModuleResource:n,isDev:!1}),u.getPromise().then(function(e){var t=e.rev,n=e.spinTime;return{worker:i,rev:t,spinTime:n}})}function d(e,t,n){n==null||n.markEventStart("worker_constructor");var o=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),a=r("supportsModuleWorker")(!0)?new SharedWorker(o,{name:t,type:"module"}):new SharedWorker(o,t);return n==null||n.markEventEnd("worker_constructor",{string:{workerUrl:o.toString()}}),a}function m(e,t,n){var r=[],a=new Set;r.push(o("SharedWorkerEventManager").registerWorkerInitPointsListener(e,function(e){a.has(e)||(a.add(e),n==null||n.markPoint("worker_init_point_"+e))})),r.push(o("SharedWorkerEventManager").registerHrpInitListener(e,n,function(){}));var i=function(r){o("SharedWorkerLoggingUtils").logSharedWorkerError(n,r,t)};return e.addEventListener("error",i),r.push(function(){return e.removeEventListener("error",i)}),r}function p(e,t,n,a){o("SharedWorkerMigrationUtils").shouldCheckForDynamicStringWorker(t)&&(a==null||a.markEventStart("dynamic_string_worker_check"),r("promiseDone")(o("SharedWorkerMigrationUtils").maybeTerminateDynamicStringWorker(t),function(e){a==null||a.markEventEnd("dynamic_string_worker_check",{bool:{didTerminateDynamicStringWorker:e}})}));var i=d(e,t,a);o("SharedWorkerEventManager").registerConnectionAckListener(i,function(e,t,n){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t,hrpStatus:n}}),a==null||a.markPoint("worker_connection_established")});var l=new(r("Deferred"));return o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(i,function(e,n,r,i){a==null||a.addAnnotations({string:{selfTerminationError:i}}),o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r),l.reject(new u(n))},{once:!0}),m(i,t,a),i.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(i),a==null||a.markPoint("read_dynamic_data"),r("promiseDone")(T(n,!1,a).then(function(e){var t=e.hrp;a==null||a.markEventStart("hrp_init"),o("SharedWorkerEventManager").emitHrpInit(i,{hrp:t.hrp,js_env:t.js_env,isDev:!1},a)},function(e){var t=r("getErrorSafe")(e);a==null||a.addAnnotations({string:{hrpInitErr:t.toString()}})})),o("SharedWorkerEventManager").registerExecuteWorkerAckListener(i,a,function(e){var t=e.workerSpinTime,n=e.err,i=e.isFirstInit,s=e.workerRev,u=e.workerSpinMode;o("SharedWorkerLoggingUtils").logExecuteAck(a,t,n,i,s,u),n!=null||s==null||t==null?l.reject(r("err")(n!=null?n:"no worker rev or spin time")):l.resolve({rev:s,spinTime:t})}),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(i),l.getPromise().then(function(e){var t=e.rev,n=e.spinTime;return{worker:i,rev:t,spinTime:n}})}function _(e,t,n,a,i,l){var s=new(r("Deferred"));return o("SharedWorkerEventManager").registerGetWorkerRevListener(e,l,function(e){var u=e.rev,c=e.spinTime;r("promiseDone")(o("SharedWorkerStorageManager").saveSharedWorkerReference(n,{url:t,rev:u,spin_time:c,version:i.version,rsrcBundleUrl:i.getJSModuleBundleResource().url,sandboxOnlyChecksum:i.sandboxOnlyChecksum},l).then(function(){return o("SharedWorkerStorageManager").getSharedWorkerReference(n,l)}).then(function(e){r("logSharedWorkerInitStep")(n,e,i.resourceUrlForLogging,"after_worker_reference_save")}),function(){l.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!0}}),s.resolve(),a()},function(e){l.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!1}}),s.reject(e),r("handleWorkerWriteError")(e),a()})}),l.markEventStart("get_worker_rev"),o("SharedWorkerEventManager").emitGetRev(e),s.getPromise()}function f(e,t,n,a){a===void 0&&(a=null);var i=[],l=function(r,a,l){i.forEach(function(e){return e()}),t(r,a,l),o("SharedWorkerUptimeTracker").stopUptimeTracking(n)};i.push(o("SharedWorkerEventManager").registerForwardListeners(e)),i.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(e){var t=e.reason,r=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(n,null,t,r);var a=t==="dynamic_string_worker_rollback"?"requested-upgrade":t;l(a,r,"sw-shutdown")})),i.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(e,function(e,t,n){l(t,n,"self-terminate")})),o("SharedWorkerDevChangeManager").trackCreatedWorker(n),o("SharedWorkerUptimeTracker").startUptimeTracking(e,n),r("logSharedWorkerInitStep")(n,null,null,"create_worker_end")}async function g(e,t,n,a,i,l){l.addAnnotations({string:{initFlow:"use_existing_ref"}}),r("logSharedWorkerInitStep")(e,null,null,"using_existing_worker_ref");var s=o("SharedWorkerMigrationUtils").isLegacyWorkerURL(t.url),u=await(t.version===2?s?p(t.url,e,n.getJSModuleBundleResource(),l):o("SharedWorkerV2ResourceExperimental").startV2Worker(t.url,e,n.getJSModuleBundleResource(),l):c(t.url,e,n.getJSModuleBundleResource(),l)),d=u.worker;return a(),t.version===2&&!s&&_(d,t.url,e,a,n,l),f(d,i,e),d}async function h(e,t,n,a){n.markPoint("terminate_on_upgrade");var i=new(r("Deferred")),l=o("SharedWorkerMigrationUtils").isStatusLockHeld(e);if(await o("SharedWorkerMigrationUtils").isDynamicStringWorkerRunning(e)&&r("supportsNativeWebLock")()&&a===!1)i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"not_needed_for_dynamic_string"}});else if(self.BroadcastChannel!=null){var s=k(e);s.postMessage({type:"terminate",reason:"requested-upgrade",pageID:r("pageID")}),i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"broadcast"}})}else if(await l){var u;t.version===2&&r("supportsModuleWorker")(!0)?u=new SharedWorker(t.url,{name:e,type:"module"}):u=new SharedWorker(t.url,e),o("SharedWorkerEventManager").registerWorkerShutdownListener(u,function(e){var t=e.workerID,l=e.isInitialized;a?r("setTimeout")(function(){n.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:t},bool:{oldWorkerWasInitialized:l}}),i.resolve()},o("SharedWorkerV2ResourceExperimental").DELAY_FOR_WORKER_SHUTDOWN_MS):(n.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:t},bool:{oldWorkerWasInitialized:l}}),i.resolve()),n.addAnnotations({string:{oldWorkerShutdown:"success"}})},{once:!0}),n.markEventStart("old_worker_shutdown"),u.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(u,{upgrade:!0})}else i.resolve(),n.addAnnotations({string:{oldWorkerShutdown:"not_needed"}});a===!0?await i.getPromise():i.resolve()}async function y(e,t,n,r,o,a,i){return a.addAnnotations({string:{initFlow:"upgrade_worker_ref"}}),await h(e,t,a,i),b(e,n,r,o,a,"upgrading_worker_ref")}function C(e,t,n,r,o){return o.addAnnotations({string:{initFlow:"new_worker_ref"}}),b(e,t,n,r,o,"new_worker_ref")}async function b(e,t,n,a,i,l){r("logSharedWorkerInitStep")(e,null,null,l),await o("SharedWorkerMigrationUtils").isStatusLockHeld(e)&&r("FBLogger")("worker").info("Trying to create a worker %s while old one is still running",e);var s=await t.createSharedWorker(),u=s[0],c=s[1].worker;return l==="upgrading_worker_ref"&&await o("SharedWorkerStorageManager").removeSharedWorkerReference(e,i),await _(c,u,e,n,t,i),f(c,a,e),c}function v(e,t){var n=o("SharedWorkerDevChangeManager").shouldUseStorageWorkerForDev(e.name,{storageWorkerResource:t,tabResource:e}),a=t.spin_time,i=t.version,l=t.rev;return l>=r("SiteData").client_revision&&(e.version===i||a>=r("SiteData")[r("StaticSiteData").spin_time_key])&&n}async function S(e,t,n,a,i){a.markEventStart("create_worker");var l=e.name;o("SharedWorkerUptimeTracker").stopUptimeTracking(l),a.addAnnotations({bool:{workerAlreadyRunning:r("supportsNativeWebLock")()?await o("SharedWorkerMigrationUtils").isStatusLockHeld(l):null}});var s=r("supportsNativeWebLock")()?await o("SharedWorkerMigrationUtils").isStatusLockHeld(l):!0;if(!i&&e.version===2)return P(e,t,n,a);var u=await o("SharedWorkerStorageManager").getSharedWorkerReference(l,a);r("logSharedWorkerInitStep")(l,u,e.resourceUrlForLogging,"create_worker_start");var c=u!=null&&o("SharedWorkerMigrationUtils").isLegacyWorkerURL(u==null?void 0:u.url),d=i&&s===!1&&c;if(u==null||d)return C(l,e,t,n,a);var m=u.spin_time,p=u.version,_=u.rev;return a.addAnnotations({int:{storageWorkerSpinTime:m,storageWorkerVersion:p,storageWorkerRev:_}}),v(e,u)?g(l,u,e,t,n,a):y(l,u,e,t,n,a,i)}function R(e,t,n){var a=n!=null?n:{},i=a.onQPLEvent,l=a.reason,s=e.name,u=r("buildSharedWorkerInitQPLLogger")(i);u.start({version:1,workerName:s,callReason:l});var d=new(r("Deferred"));return o("SharedWorkerLockManager").withWorkerLock(function(n){var o;r("promiseDone")(S({name:s,version:1,resourceUrlForLogging:(o=e.url)!=null?o:"",getJSModuleBundleResource:function(){return e},createSharedWorker:async function(){var t=r("createSharedWorkerBundleUrl")();return[t,await c(t,s,e,u)]}},n,t,u,!1),function(e){u.markEventEnd("create_worker"),u.endSuccess(),d.resolve(e)},function(e){var t=typeof e=="string"?r("err")(e):e;u.endFailure("worker_init_failure",{string:{workerInitFailureReason:t.message,errorName:t.name}}),d.reject(t),n()})},{workerQPLLogger:u,onLockTimeout:function(){return d.reject(r("err")("Worker lock timeout"))}}),d.getPromise()}function L(e,t,n,a){a===void 0&&(a=0);var i=e.name,l=n!=null?n:{},s=l.onQPLEvent,c=l.reason,d=r("buildSharedWorkerInitQPLLogger")(s);d.start({version:2,workerName:i,callReason:c,experimental_init:n==null?void 0:n.useDynamicStringInit}),d.addAnnotations({bool:{usingModuleWorker:r("supportsModuleWorker")(!0)}});var m=new(r("Deferred")),_=function(l){r("promiseDone")(S({name:i,version:2,getJSModuleBundleResource:function(){return e},sandboxOnlyChecksum:e.sandboxOnlyChecksum,createSharedWorker:(n==null?void 0:n.useDynamicStringInit)===!0?async function(){var t=r("createSharedWorkerV2BundleUrlExperimental")(i);return[t,await o("SharedWorkerV2ResourceExperimental").startV2Worker(t,i,e,d)]}:async function(){var t=o("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl();return[t,await p(t,i,e,d)]}},l,t,d,(n==null?void 0:n.useDynamicStringInit)===!0),function(e){d.markEventEnd("create_worker"),d.endSuccess(),m.resolve(e)},function(e){var t=typeof e=="string"?r("err")(e):e;m.reject(t),l()})};return o("SharedWorkerLockManager").withWorkerLock(_,{workerQPLLogger:d,onLockTimeout:function(){return m.reject(r("err")("Worker lock timeout"))},onLockFail:function(t){m.reject(t)}}),m.getPromise().catch(function(o){if(o instanceof u&&a<2)return d.endCancel({string:{workerInitCancelReason:o.message},int:{workerInitRetry:a}}),new Promise(function(o,i){r("setTimeout")(function(){r("promiseDone")(L(e,t,n,a+1),o,i)},a===0?200:500)});throw d.endFailure("worker_init_failure",{string:{workerInitFailureReason:o.message,errorName:o.name}}),o})}async function E(t,n,a){var i=n!=null?n:t.name,l=new(r("Deferred")),s=r("buildSharedWorkerTerminateQPLLogger")();if(s.start({workerName:i}),r("promiseDone")(r("supportsNativeWebLock")()?o("SharedWorkerMigrationUtils").isStatusLockHeld(i):Promise.resolve(void 0),function(e){return s.addAnnotations({bool:{workerAlreadyRunning:e}})}),s.addAnnotations({string:{reason:a,terminatingPageId:r("pageID")}}),self.BroadcastChannel!=null){var u=k(i);return u.postMessage({type:"terminate",reason:a,pageID:r("pageID")}),r("promiseDone")(o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s).then(function(){s.endSuccess(),l.resolve()})),l.getPromise()}return o("SharedWorkerLockManager").withWorkerLock(function(e){r("promiseDone")(o("SharedWorkerStorageManager").getSharedWorkerReference(i,s).then(function(e){if(s.markPoint("read_worker_reference",{int:{storageWorkerVersion:e==null?void 0:e.version},bool:{storageReferenceExists:e!=null}}),e!=null){var n=o("SharedWorkerMigrationUtils").isLegacyWorkerURL(e.url);s.addAnnotations({bool:{isLegacy:n}});var a=e.version===2?n?p(e.url,i,t,void 0).then(function(e){var t=e.worker;return t}):o("SharedWorkerV2ResourceExperimental").startV2Worker(e.url,i,t,void 0).then(function(e){var t=e.worker;return t}):c(e.url,i,t).then(function(e){var t=e.worker;return t}),l=r("justknobx")._("3569")?Promise.resolve(null):o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s);return l.then(function(){return a})}return s.markPoint("storage_resource_empty"),null}),function(t){try{if(e(),o("SharedWorkerUptimeTracker").stopUptimeTracking(i),t==null){s.endSuccess(),l.resolve();return}o("SharedWorkerEventManager").registerWorkerShutdownListener(t,function(e){var t=e.workerID,n=e.isInitialized;s.markPoint("worker_shut_down",{string:{workerID:t},bool:{wasInitialized:n}});var a=r("justknobx")._("3569")?o("SharedWorkerStorageManager").removeSharedWorkerReference(i,s):Promise.resolve(null);r("promiseDone")(a,function(){return s.endSuccess()},function(e){s.endFailure("failed_to_remove_worker_reference",{string:{errorDescription:e.toString()}})}),l.resolve()},{once:!0}),o("SharedWorkerEventManager").emitWorkerShutdown(t,{reason:a})}catch(e){s.endFailure("terminate_worker_failure",{string:{workerTerminateFailReason:e.message}}),l.reject(e.message)}},function(t){r("FBLogger")("worker").catching(r("getErrorSafe")(t)).mustfix("Failed to terminate worker"),s.endFailure("connect_to_worker_failure",{string:{workerTerminateFailReason:t.message}}),l.reject(t.message),e()})},{workerQPLLogger:s}),r("setTimeout")(function(){return l.reject()},e),l.getPromise()}function k(e){return new self.BroadcastChannel(s+"_"+e)}async function I(e){var t=await o("SharedWorkerStorageManager").getSharedWorkerReference(e.name);return t!=null}async function T(e,t,n){var a;n==null||n.markEventStart("load_hrp");var i=await o("WebWorkerV2DynamicData").readDynamicDataForWorker(e,t),l=i.data,s=i.time;n==null||n.markEventEnd("load_hrp");try{var u,c=r("justknobx")._("1979");n==null||n.markEventStart("prefetch_worker_scripts",{bool:{prefetchWorkerScripts:c},int:{resourcesCount:(u=l.hrp.allResources)==null?void 0:u.length}}),c&&o("BootloaderPreloader").preloadWorkerJSFromHRP(l.hrp)}catch(t){var d=r("getErrorSafe")(t);n==null||n.markPoint("prefetch_worker_scripts_fail",{string:{hrpInitErr:d.toString()}}),r("FBLogger")("worker").catching(d).warn("Failed to preload worker %s JS from HRP",e.name)}return n==null||n.markEventEnd("prefetch_worker_scripts"),{hrp:l,time:s,rev:(a=l.hrp.hsrp)==null||(a=a.hblp)==null||(a=a.consistency)==null?void 0:a.rev}}function D(e,t,n){return o("SharedWorkerStorageManager").getOrUpdateWorkerReference(e.name,function(r){return n.markPoint("worker_reference_retrieved"),r==null?t:v(e,r)?r:(h(e.name,r,n,!1),t)},n)}function x(e,t){if(self.BroadcastChannel!=null){var n=k(e),o=function(n){var e=n.data;if(typeof e=="object"&&(e==null?void 0:e.type)==="terminate"){var o=typeof e.reason=="string"?e.reason:"unknown",a=typeof e.pageID=="string"?e.pageID:null;if(a!=null&&a===r("pageID")&&o==="requested-upgrade")return;t(o)}};return n.addEventListener("message",o),function(){return n.removeEventListener("message",o)}}return function(){}}function $(e,t,n,a){var i=new(r("Deferred"));return o("SharedWorkerStorageManager").getOrUpdateWorkerReference(e,function(e){return e==null||e.url!==t?(i.resolve("url-was-changed"),e):e.rev!==n||e.spin_time!==a?babelHelpers.extends({},e,{rev:n,spin_time:a}):e}).then(function(){i.resolve("success")}),i.getPromise()}async function P(e,t,n,a){if(e.version!==2)throw r("err")("Worker version must be 2");var i=e.name,l=await T(e.getJSModuleBundleResource(),!1,a),s=l.rev;if(s==null)throw r("err")("HRP rev or spin time is null");var c={url:o("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl(),rev:s,spin_time:l.time,version:e.version,rsrcBundleUrl:e.getJSModuleBundleResource().url,sandboxOnlyChecksum:e.sandboxOnlyChecksum},p=new(r("Deferred")),_=new(r("Deferred")),g=[];try{var h=function(t){_.reject(t),p.reject(t)};g.push(x(i,function(e){h(new u("broadcast-"+e))})),a==null||a.markEventStart("get_worker_reference");var y=await D(e,c,a);a==null||a.markEventEnd("get_worker_reference");var C=d(y.url,i,a);g.push(o("SharedWorkerEventManager").registerConnectionAckListener(C,function(e,t,n){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),p.resolve({hrpStatus:n!=null?n:"no-hrp",workerID:t})})),g.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(C,function(e,t,n,r){a==null||a.addAnnotations({string:{selfTerminationError:r}}),o("SharedWorkerLoggingUtils").logSelfTermination(i,e,t,n),h(new u(t))},{once:!0})),g.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(C,function(e){var t=e.reason,n=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(i,null,t,n),h(new u(t!=null?t:"sw-shutdown-unknown"))})),g.push.apply(g,m(C,i,a)),a.markEventStart("worker_connection"),C.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(C);var b=await p.getPromise(),v=b.hrpStatus,S=b.workerID;if(a.markEventEnd("worker_connection"),v==="no-hrp"){a==null||a.markPoint("read_dynamic_data");var R=c.rev>=y.rev,L=R?Promise.resolve(l):T(e.getJSModuleBundleResource(),!0,a);r("promiseDone")(L.then(function(e){a==null||a.markEventStart("hrp_init"),o("SharedWorkerEventManager").emitHrpInit(C,{hrp:e.hrp.hrp,js_env:e.hrp.js_env,isDev:!1},a)},function(e){var t=r("getErrorSafe")(e);a==null||a.markPoint("hrp_init_fail",{string:{hrpInitErr:t.toString()}}),h(t)}))}g.push(o("SharedWorkerEventManager").registerExecuteWorkerAckListener(C,a,function(e){var t=e.workerSpinTime,n=e.err,i=e.isFirstInit,l=e.workerRev,s=e.workerSpinMode;o("SharedWorkerLoggingUtils").logExecuteAck(a,t,n,i,l,s),n!=null||t==null||l==null?_.reject(r("err")(n!=null?n:"no worker rev or spin time")):_.resolve({workerRev:l,workerSpinTime:t})})),a==null||a.markEventStart("execute_worker"),o("SharedWorkerEventManager").emitExecuteWorker(C);var E=await _.getPromise(),k=E.workerRev,I=E.workerSpinTime;a==null||a.markEventStart("update_worker_ref");var P=await $(i,y.url,k,I);if(a==null||a.markEventEnd("update_worker_ref",{string:{updateWorkerRef:P}}),P==="url-was-changed")throw o("SharedWorkerEventManager").emitWorkerShutdown(C,{reason:"url-was-changed"}),new u("url-was-changed");return t(),f(C,n,i,S),C}finally{g.forEach(function(e){return e()})}}l.SHARED_WORKER_BROADCAST_CHANNEL=s,l.SelfTerminationError=u,l.createPushSafeSharedWebWorkerAsync=R,l.createPushSafeSharedWebWorkerV2Async=L,l.terminateSharedWorker=E,l.doesSharedWorkerReferenceExist=I}),98);
__d("SharedWorkerV2ResourceExperimental",["Deferred","SharedWorkerBundleResource","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerUptimeTracker","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerV2BundleUrlExperimental","justknobx","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(t,n,r,o,a,i,l){"use strict";var e=50,s=5e3,u=2e3;function c(e,t,n,a){return o("SharedWorkerDevChangeManager").shouldUpgradeWorkerForDevExperimental(e)&&!a?!0:t<r("SiteData").client_revision&&n<r("SiteData")[r("StaticSiteData").spin_time_key]}async function d(t,n,a){var i=t.name,l=r("buildSharedWorkerInitQPLLogger")(a==null?void 0:a.onQPLEvent);l.start({version:2,workerName:i,experimental_init:!0,callReason:a==null?void 0:a.reason,migrationEnabled:!0}),l.markEventStart("create_worker"),r("supportsNativeWebLock")()&&r("promiseDone")(o("SharedWorkerMigrationUtils").isStatusLockHeld(i).then(function(e){l.addAnnotations({bool:{workerAlreadyRunning:e}})})),(a==null?void 0:a.migratedWorker)===!0&&await o("SharedWorkerMigrationUtils").checkStorageAndTerminateLegacyWorker({name:i,logger:l});var s=await m(t,l),u=s.worker,c=s.needsUpgrade;return new Promise(function(a,s){var d=function(t){return a(_(t,i,l,n))};c?(o("SharedWorkerEventManager").registerWorkerShutdownListener(u,function(n){var o=n.workerID,a=n.isInitialized;l.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:o},bool:{oldWorkerWasInitialized:a}}),r("setTimeout")(function(){return m(t,l).then(function(e){var t=e.worker;return d(t)})},e)},{once:!0}),l.markEventStart("old_worker_shutdown"),o("SharedWorkerEventManager").emitWorkerShutdown(u,{upgrade:!0})):d(u)})}function m(e,t){var n=e.name,a=r("createSharedWorkerV2BundleUrlExperimental")(n),i=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),l=r("supportsModuleWorker")(!0)?"module":"classic",s=new SharedWorker(i,{name:n,type:l}),u=new Set;o("SharedWorkerEventManager").registerWorkerInitPointsListener(s,function(e){u.has(e)||(u.add(e),t==null||t.markPoint("worker_init_point_"+e))});var d=new(r("Deferred"));return o("SharedWorkerEventManager").registerGetWorkerRevListener(s,t,function(r){var o=r.rev,a=r.spinTime,i=r.workerChecksum,l=c(n,o,a,e.sandboxOnlyChecksum===i);d.resolve(l),l?t.addAnnotations({int:{oldWorkerRev:o,oldWorkerSpinTime:a}}):t.addAnnotations({int:{workerRev:o,workerSpinTime:a}})}),p(s,n,t),s.port.start(),o("SharedWorkerEventManager").emitConnectionAckRequest(s),d.getPromise().then(function(e){return{worker:s,needsUpgrade:e}})}function p(e,t,n,r){return e.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(n,e,t)}),o("SharedWorkerEventManager").registerForwardListeners(e),o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(e,function(e,t,r,o){n.endFailure("worker_init_failure",{string:{selfTerminationError:o,selfTerminationReason:t}})},{once:!0}),o("SharedWorkerEventManager").registerConnectionAckListener(e,function(e,t){n==null||n.addAnnotations({string:{connectedFrom:e,workerID:t}}),n==null||n.markPoint("worker_connection_established")},{once:!0}),e}function _(e,t,n,a){return o("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(e){var n=e.reason,i=e.workerID;o("SharedWorkerLoggingUtils").logShutdown(t,null,n,i),n==="requested-upgrade"?r("setTimeout")(function(){return a==null?void 0:a(n,i)},1e3):n==="dynamic_string_worker_rollback"?a==null||a("maw_request_refresh",i):a==null||a(n,i),o("SharedWorkerUptimeTracker").stopUptimeTracking(t)}),n.markEventEnd("create_worker"),n.endSuccess(),o("SharedWorkerUptimeTracker").startUptimeTracking(e,t),o("SharedWorkerDevChangeManager").trackCreatedWorker(t),e}function f(e,t,n,a,i){i===void 0&&(i=0);var l=n.name,s=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),c=r("supportsModuleWorker")(!0)?"module":"classic",d=new SharedWorker(s,{name:l,type:c});a==null||a.markPoint("shared_worker_construct_done"),a==null||a.addAnnotations({string:{workerUrl:s.toString()}});var m=new(r("Deferred")),p=[];p.push(o("SharedWorkerEventManager").registerConnectionAckListener(d,function(e,t){a==null||a.addAnnotations({string:{connectedFrom:e,workerID:t}}),a==null||a.markPoint("worker_connection_established"),m.resolve()},{once:!0})),p.push(o("SharedWorkerEventManager").registerWorkerInitPointsListener(d,function(e){a==null||a.markPoint("worker_init_point_"+e)})),p.push(o("SharedWorkerEventManager").registerForwardListeners(d)),o("SharedWorkerEventManager").emitConnectionAckRequest(d),d.addEventListener("error",function(e){o("SharedWorkerLoggingUtils").logSharedWorkerError(a,e,t)});var _=new(r("Deferred"));return p.push(o("SharedWorkerEventManager").registerGetWorkerRevListener(d,a,function(e){var t=e.rev,n=e.spinTime;a==null||a.addAnnotations({int:{initialWorkerRev:t,initialSpinTime:n}}),_.resolve({worker:d,rev:t,spinTime:n})})),p.push(o("SharedWorkerEventManager").registerWorkerSelfTerminationListener(d,function(e,n,r,i){a==null||a.addAnnotations({string:{selfTerminationError:i}}),o("SharedWorkerLoggingUtils").logSelfTermination(t,e,n,r),_.reject(new(o("SharedWorkerBundleResource")).SelfTerminationError(n))},{once:!0})),p.push(o("SharedWorkerEventManager").registerWorkerShutdownListener(d,function(e){var n=e.reason,r=e.workerID;a==null||a.addAnnotations({string:{shutdownReason:n}}),o("SharedWorkerLoggingUtils").logShutdown(t,null,n,r),_.reject(new(o("SharedWorkerBundleResource")).SelfTerminationError(n!=null?n:"unknownShutdown"))},{once:!0})),d.port.start(),i===0&&r("justknobx")._("1707")&&Promise.race([m.getPromise().then(function(){return"success"}),new Promise(function(e){r("setTimeout")(function(){e("timeout")},u)})]).then(function(r){if(r==="timeout"){var o=d,l=f(e,t,n,a,i+1);l.then(function(e){return _.resolve(e)}),p.forEach(function(e){return e()}),o.port.close()}}),_.getPromise()}async function g(e,t){var n=e.name,a=new(r("Deferred")),i=await o("SharedWorkerMigrationUtils").isStatusLockHeld(n),l=r("buildSharedWorkerTerminateQPLLogger")();if(!i){l.start({workerName:n}),l.markPoint("no_worker_running"),l.endSuccess();return}l.start({workerName:n}),l.addAnnotations({string:{reason:t,terminatingPageId:r("pageID")}});var u=r("createSharedWorkerV2BundleUrlExperimental")(n),c=r("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(u),d=r("supportsModuleWorker")(!0)?"module":"classic",m=new SharedWorker(c,{workerName:n,type:d});return l.markPoint("worker_created"),o("SharedWorkerEventManager").registerWorkerShutdownListener(m,function(e){var t=e.workerID;l.markPoint("worker_shut_down",{string:{workerID:t}}),l.endSuccess(),o("SharedWorkerUptimeTracker").stopUptimeTracking(n),a.resolve()},{once:!0}),m.port.start(),o("SharedWorkerEventManager").emitWorkerShutdown(m,{reason:t}),r("setTimeout")(function(){return a.reject()},s),a.getPromise()}l.DELAY_FOR_WORKER_SHUTDOWN_MS=e,l.createPushSafeSharedWebWorkerV2Async=d,l.startV2Worker=f,l.terminateSharedWorker=g}),98);
__d("MAWWebWorkerSingleton",["Deferred","MAWInit","MAWMIC","MAWStartupLoggingUtils","MAWWaitForBackendSetup","MAWWorkerWatchdogRecovery","Promise","SharedWorkerBundleResource","SharedWorkerMigrationUtils","SharedWorkerV2ResourceExperimental","WAResolvable","WebWorkerV2Resource","clearTimeout","cr:6600","err","gkx","promiseDone","setTimeout","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=function(t){s=t},c=function(){return s},d=g,m=new(o("WAResolvable")).Resolvable,p=null;function _(){return o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?o("SharedWorkerMigrationUtils").isStatusLockHeld(n("cr:6600").name):(e||(e=n("Promise"))).resolve(p!==null)}function f(){var t={isSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),nativeLocksSupported:o("SharedWorkerMigrationUtils").supportsNativeWebLocks(),workerCreationPromiseExists:p!==null};if(t.isSharedWorker!==!0)return(e||(e=n("Promise"))).resolve(t.workerCreationPromiseExists===!0?{data:t,tag:"dedicated_exists"}:{data:t,tag:"dedicated_not_exists"});if(t.nativeLocksSupported!==!0)return(e||(e=n("Promise"))).resolve({data:t,tag:"shared_unknown_locks_not_supported"});var r=o("MAWWaitForBackendSetup").getCurrentWorkerID();return(e||(e=n("Promise"))).all([o("SharedWorkerMigrationUtils").isStatusLockHeld(n("cr:6600").name),r!=null?o("SharedWorkerMigrationUtils").isWorkerIdStatusLockHeld(n("cr:6600").name,r):(e||(e=n("Promise"))).resolve(!1)]).then(function(e){var n=e[0],r=e[1];return t.sharedLockHeld=n,t.workerIdLockHeld=r,n&&r?{data:t,tag:"shared_exists_and_connected"}:n?{data:t,tag:"shared_exists_not_connected"}:r?{data:t,tag:"shared_only_unique_lock_held"}:{data:t,tag:"shared_not_exists"}})}function g(){p=null}function h(e){return p?(o("MAWMIC").addPoint(e+"_wait_on_worker_creation"),o("MAWInit").MAWInit.logPoint(e+"_wait_on_worker_creation"),p):(o("MAWInit").MAWInit.logPoint(e+"_create_worker_start"),o("MAWMIC").addPoint(e+"_create_worker_start"),p=(o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?y(e):C().then(function(e){return{worker:e,workerID:"dedicated"}})).then(function(t){var n=t.worker,r=t.workerID;return o("MAWMIC").addPoint(e+"_create_worker_end"),o("MAWInit").MAWInit.logPoint(e+"_create_worker_end"),{worker:n,workerID:r}},function(e){throw p=null,e}),p)}function y(e){var t=function(t,n,o){r("promiseDone")(m.promise.then(function(){return d(t,n,o)}))};o("MAWWorkerWatchdogRecovery").setRecoveryForWatchdog(t);var a=new(r("Deferred")),i=r("gkx")("7313");o("MAWMIC").addBoolAnnotation("migrationEnabled",i);var l=i?o("SharedWorkerV2ResourceExperimental").createPushSafeSharedWebWorkerV2Async(n("cr:6600"),t,{migratedWorker:!0,onQPLEvent:o("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:e}):o("SharedWorkerBundleResource").createPushSafeSharedWebWorkerV2Async(n("cr:6600"),t,{onQPLEvent:o("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:e,useDynamicStringInit:r("gkx")("8737")});return l.then(function(e){u(e),o("MAWMIC").addPoint("shared_worker_bundle_created");var t=r("setTimeout")(function(){o("MAWMIC").addPoint("shared_worker_connection_ack_timeout"),a.reject(r("err")("Worker connection ack timeout"))},1e4),n=function(n){var e,i,l;if(typeof n.data=="object"&&((e=n.data)==null?void 0:e.type)==="connection-ack"&&typeof((i=n.data)==null?void 0:i.response)=="object"&&typeof((l=n.data)==null||(l=l.response)==null?void 0:l.from)=="string"){var s,u,c=typeof((s=n.data)==null||(s=s.response)==null?void 0:s.workerID)=="string"?(u=n.data)==null||(u=u.response)==null?void 0:u.workerID:void 0;c!=null?(o("MAWMIC").addPoint("shared_worker_workerID_received"),o("MAWMIC").addStringAnnotation("workerID",c),t!=null&&r("clearTimeout")(t),a.resolve(c)):(o("MAWMIC").addPoint("shared_worker_null_workerID_received"),o("MAWMIC").addStringAnnotation("workerID","unknown"))}};return e.port.addEventListener("message",n),e.port.postMessage({type:"ww-connection-ack"}),e.addEventListener("error",function(e){o("MAWStartupLoggingUtils").logWorkerError("Shared Worker",e,"")}),a.getPromise().then(function(t){return{worker:e.port,workerID:t}})})}function C(){return(e||(e=n("Promise"))).resolve(o("WebWorkerV2Resource").createDedicatedV2WebWorker(n("cr:6600"))).then(function(e){var t=e.url,n=e.worker;return n.onerror=function(e){return o("MAWStartupLoggingUtils").logWorkerError("Dedicated Worker",e,t)},o("MAWStartupLoggingUtils").setImportScriptsErrorListener(n),n})}function b(e){d=e,m.resolve()}l.getSharedWorkerInstance__TEST_ONLY=c,l.doesWorkerExist=_,l.getWorkerHealthStatus=f,l.resetWorkerCreation=g,l.createWorkerIfNone=h,l.setOnCloseForWorkerInstance=b}),98);
__d("MAWWaitForBackendSetup",["ErrorSerializer","MAWInit","MAWInitError","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWebWorkerSingleton","Promise","err","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=new(e||(e=n("Promise")))(function(e,t){s=e,u=t}),d=!1,m=!1,p=!1,_=!1,f=null,g=s,h=u;function y(t){return new(e||(e=n("Promise")))(function(e,n){c.then(e).catch(function(e){var a=t+" rejected because backend setup failed: "+e.message+".",i=e instanceof o("MAWInitError").MAWInitError?e.error:null;i!=null&&(a=a.concat(" More error detail: "+r("ErrorSerializer").toReadableMessage(i))),n(r("err")(a))})})}function C(e,t){r("promiseDone")(y(t).then(function(){e()}))}function b(){_&&(c=new(e||(e=n("Promise")))(function(e,t){s=e,u=t}),_=!1,d=!1,g=s,h=u,m=!0,p=!1)}function v(e){d=!0,_=!0,p=!1,g==null||g(e)}function S(e){d=!1,_=!0,p=!1,h==null||h(e)}function R(){return d}function L(){return _}function E(){return m}function k(e){e!=null&&f!==e&&o("MAWSetupWorkerAuxStateForLogging").resetWorkerCreationTime(),f=e}function I(e){f==null||f!==e||T()}function T(){f=null,o("MAWWebWorkerSingleton").resetWorkerCreation(),b(),o("MAWInit").MAWInit.logPoint("reset_current_worker"),o("MAWMIC").addPoint("reset_current_worker")}function D(){return f}function x(){p=!0}function $(){return p}l.waitForBackendSetup=y,l.runAfterBackendSetup=C,l.resetBackendSetup=b,l.resolveBackendSetup=v,l.rejectBackendSetup=S,l.isBackendSetupSuccessful=R,l.isBackendSetupSettled=L,l.wasBackendSetupReset=E,l.setCurrentWorker=k,l.resetCurrentWorkerWithId=I,l.resetCurrentWorkerSkipIdCheck=T,l.getCurrentWorkerID=D,l.markBackendSetupStarted=x,l.isBackendSetupInProgress=$}),98);
__d("MAWWorkerEvent",["FBLogger","MAWMIC","MAWReliabilityMonitor","MAWSetupWorkerAuxStateForLogging","MAWTrackPendingOccamadilloThreads","MAWWaitForBackendSetup","MultipleTabsLogger","QPLUserFlow","getErrorSafe","pageID","performanceNow","promiseDone","qpl","requireDeferred","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MAWBridgeObserver").__setRef("MAWWorkerEvent"),u=r("requireDeferred")("MAWWebWorkerSingleton").__setRef("MAWWorkerEvent"),c=new Set,d=new Set(["addEbUploadTrackingWorkerQPL","addMediaDownloadQpl","searchGetFTSRestoreSessionId","none"]),m=new Set(["bulkMaybeCreateOrUpdateThread","createOrUpdateThread"]),p=new Map,_=function(t){switch(t){case"sendAndReceive":return 1e4;case"fireAndForget":return 4e3;case"waitUntilCompleted":return 1e4;case"waitUntilPersisted":return 1e4;default:return 1e4}},f=function(n,o,a){var t=window.setTimeout(function(){E(n,"ack_timeout"),r("promiseDone")(s.load().then(function(t){t.notifyUnackedEvent({route:o,timestamp:(e||(e=r("performanceNow")))()})}))},_(a));return p.set(n,t),t},g=function(t){var e=p.get(t);e!=null&&(window.clearTimeout(e),r("promiseDone")(s.load().then(function(e){e.resetUnackedMessages()})),p.delete(t))};function h(e,t,n){c.has(n)||d.has(t)||(c.add(n),r("QPLUserFlow").start(r("qpl")._(1056842055,"807"),{annotations:{bool:{duringMIC:o("MAWMIC").duringMIC(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{key:n},string:{callType:e,event:t,pageID:r("pageID"),workerHeartbeatsOnStart:o("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:o("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:n}),o("MultipleTabsLogger").hasMultipleTabs().then(function(e){r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),{bool:{isMultiTabs:e}},{instanceKey:n})}),u.load().then(function(e){return e.getWorkerHealthStatus().then(function(e){r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),{string:{workerHealthStatusOnStart:e.tag}})})}))}function y(e){c.has(e)&&(c.delete(e),r("QPLUserFlow").endSuccess(r("qpl")._(1056842055,"807"),{instanceKey:e}))}function C(e,t){c.has(e)&&(c.delete(e),r("QPLUserFlow").endFailure(r("qpl")._(1056842055,"807"),"fail",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:t},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e}))}function b(e,t,n){c.has(e)&&(c.delete(e),r("QPLUserFlow").endFailure(r("qpl")._(1056842055,"807"),"timeout",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:t,workerHealthStatus:n.tag},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e}))}function v(e,t){c.has(e)&&r("QPLUserFlow").addAnnotations(r("qpl")._(1056842055,"807"),t,{instanceKey:e})}function S(e,t){if(c.has(e))try{if(Array.isArray(t)){var n,a=t.every(function(e){return typeof e=="object"&&e!=null&&"state"in e&&e.state===o("MAWReliabilityMonitor").HealthReportState.OK.valueOf()}),i=t.reduce(function(e,t){return typeof t=="object"&&t!=null&&"state"in t&&"identifier"in t&&"reason"in t&&t.state!==o("MAWReliabilityMonitor").HealthReportState.OK.valueOf()&&typeof t.state=="string"&&typeof t.reason=="string"&&typeof t.identifier=="string"&&e.push([t.identifier,t.state,t.reason].join(":")),e},[]);v(e,{bool:{workerHealthStatus:a},string:{error:(n=i[0])!=null?n:void 0},string_array:{errors:i}})}}catch(e){return r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Failed to log ack result annotations"),!1}}function R(e,t,n){if(typeof n=="object"&&typeof(n==null?void 0:n.timestamp)=="number"){var r=n.payload;g(e),E(e,"ack"),S(e,r),m.has(t)&&o("MAWTrackPendingOccamadilloThreads").markBridgeCallAcked()}}function L(e,t,n){d.has(t)||f(e,t,n),E(e,"send")}function E(e,t,n){c.has(e)&&r("QPLUserFlow").addPoint(r("qpl")._(1056842055,"807"),t,{instanceKey:e,timestamp:n})}l.getUnackedEventTimeout=_,l.logStart=h,l.logSuccess=y,l.logFailure=C,l.logTimeoutFailure=b,l.logAnnotations=v,l.logAck=R,l.logSend=L}),98);
__d("MAWBridgeLoggingUtils",["MAWWorkerEvent","ODS","Random","WAHashStringToNumber"],(function(t,n,r,o,a,i,l){"use strict";var e,s=3185,u="armadillo_worker_runtime",c="getWorkerHeartbeat",d=10,m=new Array(d);function p(t,n,r){(e||(e=o("ODS"))).bumpEntityKey(s,u,t+"_"+n+"_"+r)}function _(e){return o("WAHashStringToNumber").hashStringToNumber(e+Math.round(o("Random").random()*1e4)+1e4)}function f(t,n,r,a){p(n,r,"start"),r!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_start"),o("MAWWorkerEvent").logStart(t,r,a),m.length===d&&m.shift(),m.push(n+"_"+r))}function g(t){m.filter(Boolean).forEach(function(n){(e||(e=o("ODS"))).bumpEntityKey(s,u,n+t)})}function h(t,n,r){p(t,n,"success"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_success"),o("MAWWorkerEvent").logSuccess(r))}function y(t,n,r,a){p(t,n,"fail"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_fail"),o("MAWWorkerEvent").logFailure(a,r))}function C(t,n,r,a){p(t,n,"timeout"),n!==c&&((e||(e=o("ODS"))).bumpEntityKey(s,u,"route_timeout"),o("MAWWorkerEvent").logTimeoutFailure(r,"Route timeout",a))}function b(){g("_before_unresponsive"),m.fill(null)}l.CAT_ID=s,l.ENT=u,l.HEARTBEAT_ROUTE=c,l.RECENT_ROUTES_NUM=d,l.getBridgeEventInstanceKey=_,l.routeStart=f,l.logRecentRoutes=g,l.routeSuccess=h,l.routeFail=y,l.routeTimeoutFail=C,l.logRecentBridgeEvents=b}),98);
__d("WACustomError",[],(function(t,n,r,o,a,i){"use strict";var e=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function l(t,n,r){n===void 0&&(n=!0);function o(e){var r=Error.call(this,e);this.message=e,r.name=t,this.name=t,n&&(this.stack=r.stack)}return o.prototype=Object.create(r?r.prototype:e),o.prototype.constructor=o,o}function s(e){return e.length===0?"No errors":e.length===1?e[0].message:e.map(function(e){return"- "+e.message}).join("\n")}var u=(function(e){function t(t,n){var r,o=n!=null&&n.length>0?n:s(t);return r=e.call(this,o)||this,r.errors=t,r}return babelHelpers.inheritsLoose(t,e),t})(l("AggregateError",!0)),c=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(l("TimeoutError",!1)),d=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.code=n,r}return babelHelpers.inheritsLoose(t,e),t})(l("HttpError",!1)),m=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(l("UnimplementedMethod")),p=!1;function _(e){if(e==null||e.name!=="QuotaExceededError")throw e;p=!0}function f(){return p}function g(e){return JSON.stringify(e,Object.getOwnPropertyNames(e))}var h=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.inner=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.customError=l,i.AggregateError=u,i.TimeoutError=c,i.HttpError=d,i.UnimplementedMethod=m,i.supressQuotaExceededError=_,i.hasSupressedQuotaExceededError=f,i.obtainErrorSummary=g,i.WrappedError=h}),66);
__d("WAAbortError",["WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").customError("AbortError")),s="AbortError";function u(e){return function(t){if(t.name===s)return e(t);throw t}}l.AbortError=e,l.ABORT_ERROR=s,l.catchAbort=u}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,r){return new(e||(e=n("Promise")))(function(e,n){if(r!=null&&r.aborted)throw new(o("WAAbortError")).AbortError;var a=setTimeout(i,t);r==null||r.addEventListener("abort",l);function i(){r==null||r.removeEventListener("abort",l),e()}function l(){r==null||r.removeEventListener("abort",l),clearTimeout(a),n(new(o("WAAbortError")).AbortError)}})}function u(t,r,o){return new(e||(e=n("Promise")))(function(e,n){var a=setTimeout(function(){try{e(o())}catch(e){n(e)}},r);t.then(function(t){clearTimeout(a),e(t)},function(e){clearTimeout(a),n(e)})})}l.delayMs=s,l.withTimeout=u}),98);
__d("MAWMaybeWithTimeout",["MAWODSProxy","WAOdsEnums","WAPromiseDelays"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!0}function s(t,n,r,a){return e()?o("WAPromiseDelays").withTimeout(t.then(function(e){return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_NON_TIMEOUT,key:a!=null?a:"unknown"}),e}),n,function(){return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_TIMEOUT,key:a!=null?a:"unknown"}),r()}):t}l.maybeWithTimeout=s}),98);
__d("MAWTimedBridge",["MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=17e4;function u(t,n,r,a,i){return i===void 0&&(i=s),o("MAWWaitForBackendSetup").waitForBackendSetup(r).then(function(){return o("MAWMaybeWithTimeout").maybeWithTimeout(t(),i,function(){return o("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(t){throw o("MAWBridgeLoggingUtils").routeTimeoutFail(n,r,a,t),o("WALogger").COUNT(e||(e=babelHelpers.taggedTemplateLiteralLoose(["route.",""])),r).tags("bridge_timeout"),new c("Bridge route "+r+" timed out, WorkerHealthStatus: "+t.tag)})},r)})}var c=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="BridgeTimeoutError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));l.DEFAULT_MAW_BRIDGE_TIMEOUT_MS=s,l.bridgeTimeout=u,l.MAWBridgeTimeoutError=c}),98);
__d("MAWBridgeFireAndForget",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWaitForBackendSetup","MAWWorkerEvent","Promise","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("justknobx")._("1143");function u(t,r,a,i){return o("MAWWaitForBackendSetup").runAfterBackendSetup(function(){var l=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(r);i!==!0&&o("MAWBridgeLoggingUtils").routeStart("fireAndForget",t,r,l),o("MAWTimedBridge").bridgeTimeout(function(){return new(e||(e=n("Promise")))(function(e){o("MAWBridge").getBridge().fireAndForget(t,r,a,i,{onAck:function(a){i!==!0&&(o("MAWWorkerEvent").logAck(l,r,a),o("MAWBridgeLoggingUtils").routeSuccess(t,r,l)),e()},onSend:function(t){var e=t.queueMsgs,n=t.queueSize;i!==!0&&(o("MAWWorkerEvent").logSend(l,r,"fireAndForget"),o("MAWWorkerEvent").logAnnotations(l,{int:{bridgeSize:n},string_array:{bridgeMsgs:e}}))}},{bridgeQPLInstanceKey:l})})},t,r,l,s)},r)}l.fireAndForget=u}),98);
__d("MAWBridgeODSLogger",["ExecutionEnvironment","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){if(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_BRIDGE,key:(a?"sendAndReceive":"fireAndForget")+"."+t+"."+n+"."+((e||(e=r("ExecutionEnvironment"))).isInWorker?"worker":"ui")}),i!=null&&typeof i=="object"){var l=i.event;if(l!=null&&typeof l=="object"){var s=l==null?void 0:l.i;s!=null&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_BRIDGE,key:"qpl."+t+"."+n+"."+s+"."+((e||(e=r("ExecutionEnvironment"))).isInWorker?"worker":"ui")})}}}l.logCrossWorkerPortalODS=s}),98);
__d("MAWJids",["I64","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WAJids").createJidUtils({platform:"msgr"}),u=s.toUserJid,c=function(n,r){var t=(e||(e=o("I64"))).to_string(n);return r?o("WAJids").toGroupJid(t):u(t)};function d(e){return c(e,!1)}function m(e){return c(e,!0)}var p=function(n){var t=o("WAJids").threadIdForChatJid(n);return(e||(e=o("I64"))).of_string(t)};function _(e){return o("WAJids").unsafeCoerceToChatJid(e)}l.jidUtils=s,l.toUserJid=u,l.convertIntJidToChatJid=c,l.convertIntJidToOneToOneChatJid=d,l.convertIntJidToGroupJid=m,l.convertChatJidToIntJid=p,l.threadIdToChatJid=_}),98);
__d("MAWMiActMappingTableAPI",["I64","LSMessagingThreadTypeUtil","MAWJids","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return t==null?Promise.resolve(null):o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table).getKeyRange(t))}function u(e,t,n){return s(e,t).then(function(e){var t=e==null?void 0:e.jid;return t==null?null:o("MAWJids").convertIntJidToChatJid(t,o("LSMessagingThreadTypeUtil").isGroup(n))})}function c(e,t){return m(e,t).then(function(e){return e==null?void 0:e.serverThreadKey})}function d(e,t){return t==null?Promise.resolve(null):o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table.index("jid")).getKeyRange(t))}function m(e,t){return d(e,o("MAWJids").convertChatJidToIntJid(t))}async function p(e,t){var n=t.intJid,r=t.threadKey,o=await s(e,r);return o!=null?o:d(e,n)}function _(t){return(e||(e=o("I64"))).le(t,e.zero)}function f(e,t){return e.tables.mi_act_mapping_table.subscribe(function(e,n){var r=e[0],o=e[1],a=e[2],i=n.operation;i==="delete"&&!_(o)&&t(o,r)})}l.getMappingRowForThreadKey=s,l.getChatJidForThreadKey=u,l.getThreadKeyForChatJid=c,l.getMappingRowForIntJid=d,l.getMappingRowForChatJid=m,l.getMappingRowForThreadKeyOrJid=p,l.subscribeToMappingDeletion=f}),98);
__d("MAWMessageRequestUtil",["I64","LSContactBitOffset","LSContactViewerRelationship","LSIntEnum","LSMessagingThreadTypeUtil","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(t==="pending"||t==="other")return o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is "+t+", contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)),!0;var i=o("LSContactBitOffset").hasWithDefault(64,a,!0);return t==="inbox"&&(e||(e=o("I64"))).equal(a.contactViewerRelationship,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").NOT_CONTACT))&&!i?(n&&o("MWFBLogger").MWLogger().debug("isMessagerRequestV2 returns true: folderName is inbox, contactViewerRelationship is "+(e||(e=o("I64"))).to_string(a.contactViewerRelationship)+", isViewerUnconnected is false, hasActivity is true"),n):!1}function c(e){return e==="pending"||e==="other"}function d(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?c(e.folderName):!1}function m(t,n){return n!=null?u(t.folderName,(e||(e=o("I64"))).gt(t.lastActivityTimestampMs,e.zero),n[1]):!1}function p(e,t){return o("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?m(e,t):!1}function _(e){return o("LSMessagingThreadTypeUtil").isGroup(e.threadType)?c(e.folderName):!1}var f=[8,18,19,34,24,25,122],g=[21,48];l.isMessageRequestV2=u,l.isOneOnOneMessageRequest=d,l.isOneOnOneMessageRequestV2=p,l.isGroupMessageRequest=_,l.disabledThreadCapabilitiesForIncomingRequest=f,l.enabledThreadCapabilitiesForIncomingRequest=g}),98);
__d("clearedMAWMnRestrictCapabilities",[],(function(t,n,r,o,a,i){"use strict";var e=[0,31,35,55,56,58,24,25,35,19],l=e;i.default=l}),66);
__d("MAWUpdateLSThreadCapabilities",["fbt","I64","LSBitOffset","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWBlockUtils","MAWCurrentUser","MAWMessageRequestUtil","ReQL","clearedMAWMnRestrictCapabilities","emptyFunction"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=o("MAWCurrentUser").getID(),d=(e||(e=o("I64"))).of_string(c);function m(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t)).then(function(t){if(t==null)return Promise.resolve();var n=o("LSBitOffset").set((u||(u=o("LSIntEnum"))).ofNumber(27),t.capabilities),r=babelHelpers.extends({},t,{capabilities:n});return e.threads.put(r)}).then(r("emptyFunction"))}function p(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t)).then(function(t){if(t==null)return Promise.resolve();var n=o("LSBitOffset").clear((u||(u=o("LSIntEnum"))).ofNumber(27),t.capabilities),r=babelHelpers.extends({},t,{capabilities:n});return e.threads.put(r)}).then(r("emptyFunction"))}function _(t,n){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n)).then(function(r){if(r==null)return Promise.resolve([void 0,void 0]);var a=o("ReQL").firstAsync(o("LSMessagingThreadTypeUtil").isOneToOne(r.threadType)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.participants).getKeyRange(n),o("ReQL").fromTableAscending(t.contacts)).filter(function(t){var n=t[1];return!(e||(e=o("I64"))).equal(n.id,d)}).map(function(e){var t=e[1];return t}):o("ReQL").empty());return Promise.all([Promise.resolve(r),a])}).then(function(n){var a=n[0];if(a==null)return Promise.resolve();var i=n[1];if(i==null)return Promise.resolve();var l=(e||(e=o("I64"))).equal(i.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)),s=e.equal(i.blockedByViewerStatus,u.ofNumber(r("LSContactBlockedByViewerStatus").FULLY_BLOCKED)),c=o("LSContactBitOffset").has(66,i),d=s?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedFbBlockCapabilities,a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5):l?o("LSThreadBitOffset").clear(o("MAWBlockUtils").clearedMnBlockCapabilities,a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5):c?o("LSThreadBitOffset").clear(r("clearedMAWMnRestrictCapabilities"),a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5):[a.capabilities,a.capabilities2,a.capabilities3,a.capabilities4,a.capabilities5],m=d[0],p=d[1],_=d[2],f=d[3],g=d[4];return t.threads.put(babelHelpers.extends({},a,{capabilities:m,capabilities2:p,capabilities3:_,capabilities4:f,capabilities5:g})).then(r("emptyFunction"))})}async function f(e,t){var n=e.threads,r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n).getKeyRange(t));if(r==null)return Promise.resolve();var a=o("LSThreadBitOffset").set.apply(o("LSThreadBitOffset"),[o("MAWMessageRequestUtil").disabledThreadCapabilitiesForIncomingRequest].concat(o("LSThreadBitOffset").clear(o("MAWMessageRequestUtil").enabledThreadCapabilitiesForIncomingRequest,r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5))),i=a[0],l=a[1],s=a[2],u=a[3],c=a[4];await n.put(babelHelpers.extends({},r,{additionalThreadContext:void 0,capabilities:i,capabilities2:l,capabilities3:s,capabilities4:u,capabilities5:c}))}async function g(e,t,n){var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(r!=null){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.contacts,["name"]).getKeyRange(n));if(a!=null){var i=s._(/*BTDS*/"{Inviter Name} invited you to join",[s._param("Inviter Name",a.name)]).toString(),l=o("LSThreadBitOffset").set([105],r.capabilities,r.capabilities2,r.capabilities3,r.capabilities4,r.capabilities5),u=l[0],c=l[1],d=l[2],m=l[3],p=l[4];await e.threads.put(babelHelpers.extends({},r,{capabilities:u,capabilities2:c,capabilities3:d,capabilities4:m,capabilities5:p,snippet:i}))}}}async function h(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));if(n!=null){var r=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.group_invites).getKeyRange(t)),a=o("LSThreadBitOffset").clear([105],n.capabilities,n.capabilities2,n.capabilities3,n.capabilities4,n.capabilities5),i=a[0],l=a[1],s=a[2],u=a[3],c=a[4];await e.threads.put(babelHelpers.extends({},n,{capabilities:i,capabilities2:l,capabilities3:s,capabilities4:u,capabilities5:c,snippet:void 0})),await r.map(async function(t){await e.group_invites.delete(t.threadKey,t.inviterId,t.inviteeId)})}}l.enableAddMembersTxn=m,l.disableAddMembersTxn=p,l.disableBlockerCapabilitiesTxn=_,l.updateNonMessageRequestThreadTxn=f,l.setGroupInviteTxn=g,l.clearGroupInviteTxn=h}),226);
__d("uniqueArray",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(t,n){var r=n!=null?n:e,o=[],a=new Set;return t.forEach(function(e){var t=r(e);a.has(t)||(a.add(t),o.push(e))}),o}i.default=l}),66);
__d("MAWBridgeParticipantsUpdatedHandler",["fbt","I64","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MAWCurrentUser","MAWJids","MAWMiActMappingTableAPI","MAWUpdateLSThreadCapabilities","uniqueArray"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=o("MAWCurrentUser").getID(),d=(e||(e=o("I64"))).of_string(c);function m(e,t){var n=t.map(function(e){var t=e.chatJid,n=e.type,r=e.userJid;return babelHelpers.extends({chatJid:t},b(n),{userJid:r})});return _(e,n)}function p(e,t){var n=t.participants.map(function(e){return{chatJid:e.threadJid,isAdmin:e.isAdmin,isInvited:e.isInvited,isSuperAdmin:e.isSuperAdmin,userJid:o("MAWJids").toUserJid(e.fbid)}});return _(e,n)}async function _(e,t){var n=await g(e,t);await Promise.all(n.map(function(t){var n=t.mawParticipant,r=t.threadKey,a=o("MAWJids").convertChatJidToIntJid(n.userJid);return[e.participants.get(r,a).then(function(t){var o=y(t,n,r);return t!=null?e.participants.put(o):Promise.all([e.participants.add(o),f(e,a)])}),h(e,a,r,n.isAdmin)]}).flat(1/0))}async function f(t,n){await r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(t),{authorityLevel:(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:u.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:u.ofNumber(r("LSContactIdType").FBID),contactType:u.ofNumber(r("LSContactType").USER),contactViewerRelationship:u.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:u.ofNumber(r("LSContactGender").UNKNOWN),id:n,isBlocked:!1,isMemorialized:!1,isSelf:c===(e||(e=o("I64"))).to_string(n),workForeignEntityType:u.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})}async function g(e,t){var n=r("uniqueArray")(t.map(function(e){return e.chatJid})),a=new Map;return await Promise.all(n.map(function(t){return o("MAWMiActMappingTableAPI").getThreadKeyForChatJid(e,t).then(function(e){return e!=null&&a.set(t,e)})})),t.map(function(e){var t=a.get(e.chatJid);return t==null?null:{mawParticipant:e,threadKey:t}}).filter(Boolean)}async function h(t,n,r,a){await o("MAWUpdateLSThreadCapabilities").disableBlockerCapabilitiesTxn(t,r),(e||(e=o("I64"))).equal(d,n)&&(a?await o("MAWUpdateLSThreadCapabilities").enableAddMembersTxn(t,r):await o("MAWUpdateLSThreadCapabilities").disableAddMembersTxn(t,r))}function y(t,n,r){return t==null?babelHelpers.extends({},C(n),{authorityLevel:(e||(e=o("I64"))).zero,contactId:o("MAWJids").convertChatJidToIntJid(n.userJid),deliveredWatermarkTimestampMs:e.zero,isSuperAdmin:n.isSuperAdmin,nickname:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,readActionTimestampMs:e.zero,readWatermarkTimestampMs:e.zero,threadKey:r,threadRoles:e.zero}):babelHelpers.extends({},t,C(n))}function C(e){return{groupParticipantJoinState:e.isInvited?(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").INVITED):(u||(u=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").MEMBER),isAdmin:e.isAdmin,isModerator:!1,subscribeSource:e.isSuperAdmin?s._(/*BTDS*/"Group creator").toString():void 0}}function b(e){return{isAdmin:e==="superadmin"||e==="admin",isInvited:e==="invitedParticipant",isSuperAdmin:e==="superadmin"}}l.callFromMainThread=m,l.call=p,l.mawToLsParticipantTypeConversion=b}),226);
__d("MAWBridgeSendAndReceive",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWorkerEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=o("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(t),i=(r==null?void 0:r.isLoggingDisabled)!==!0,l=o("MAWTimedBridge").bridgeTimeout(function(){return i&&o("MAWBridgeLoggingUtils").routeStart("sendAndReceive",e,t,a),o("MAWBridge").getBridge().sendAndReceive(e,t,n,r==null?void 0:r.isLoggingDisabled,{onAck:function(n){i&&o("MAWWorkerEvent").logAck(a,t,n)},onSend:function(n){var e=n.queueMsgs,r=n.queueSize;i&&(o("MAWWorkerEvent").logSend(a,t,"sendAndReceive"),o("MAWWorkerEvent").logAnnotations(a,{int:{bridgeSize:r},string_array:{bridgeMsgs:e}}))}},{bridgeQPLInstanceKey:a}).then(function(n){return i&&o("MAWBridgeLoggingUtils").routeSuccess(e,t,a),n}).catch(function(n){throw i&&o("MAWBridgeLoggingUtils").routeFail(e,t,n.message,a),n})},e,t,a,r==null?void 0:r.timeoutMs);return l}l.sendAndReceive=e}),98);
__d("MAWBundleResource",["MAWMainWebWorkerV2Resource"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MAWMainWebWorkerV2Resource")}),98);
__d("WAShiftTimer",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this;this.$2=0,this.$3=0,this.ts=0,this.$4=0,this.$5=0,this.$6=0,this.$7=void 0,this.$8=function(){var e=t.$7,n=t.$1;t.$3=0,t.$2=0,t.ts=0,t.$4=0,t.$5=0,t.$6=0,t.$7=void 0,n(e)},this.onOrBefore=function(e,n){s(e);var r=Date.now(),o=r+e,a=t.$5;if(!(a!==0&&a<o)){var i=t.$6;i!==0&&o<i||(t.$5=o,!t.$3&&(!t.$2||o<t.ts)&&t.$9(o,e,n))}},this.forceRunNow=function(e){t.$2&&clearTimeout(t.$2),t.$3&&cancelAnimationFrame(t.$3),t.$7=e,t.$8()},this.cancel=function(){t.$2&&clearTimeout(t.$2),t.$3&&cancelAnimationFrame(t.$3),t.$2=0,t.$3=0,t.ts=0,t.$4=0,t.$5=0,t.$6=0,t.$7=void 0},this.$1=e}var t=e.prototype;return t.onOrBeforeRepaint=function(t){if(!this.$3){var e=Date.now(),n=this.$6;if(!(n!==0&&e<n)){var r=this.$5;(r===0||e<r)&&(this.$5=e),this.$2&&(clearTimeout(this.$2),this.$2=0),(!this.ts||this.ts>e)&&(this.ts=e),this.$7=t,this.$3=requestAnimationFrame(this.$8)}}},t.onOrAfter=function(t,n){s(t);var e=Date.now(),r=e+t,o=this.$6;if(!(o!==0&&r<o)){var a=this.$5;a!==0&&a<r||(this.$6=r,(!this.$2||this.ts<r)&&this.$9(r,t,n))}},t.debounce=function(t,n){s(t),this.$10(Date.now(),t,n)},t.debounceAndCap=function(t,n,r){s(t),s(n);var e=Date.now(),o=e+n,a=this.$6,i=this.$5;(a===0||a<=o)&&(i===0||o<i)&&(this.$5=o),this.$10(e,t,r)},t.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())},t.isScheduled=function(){return this.$2!==0||this.$3!==0},t.$10=function(t,n,r){var e=t+n,o=this.$6;if(!(o!==0&&e<o)){var a=this.ts,i=this.$5;i!==0&&i<e?a<i&&this.$9(i,i-t,r):a<e&&this.$9(e,n,r)}},t.$9=function(t,n,r){if(this.$3&&(cancelAnimationFrame(this.$3),this.$3=0),this.$7=r,this.ts=t,this.$2){var e=t-this.$4;if(-16<e&&e<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,n),this.$4=t},e})();function s(e){if(!(e>=0))throw r("err")("ShiftTimer must be given delayMs >= 0")}l.ShiftTimer=e}),98);
__d("WABridgeBatcher",["WAShiftTimer"],(function(t,n,r,o,a,i,l){"use strict";var e=20,s=1e3,u=(function(){function t(t,n,r){var a=this;this.$1=null,this.$6=Date.now(),this.$7=new(o("WAShiftTimer")).ShiftTimer(function(){var e=a.$1;e!=null&&(a.$1=null,a.$2(e))}),this.$2=n,this.$3=t,this.$5=r!=null?r:e,this.$4=this.$5}var n=t.prototype;return n.addEvent=function(t){var e=this.$1;if(this.$1=e?this.$3(e,t):[t],!this.$7.isScheduled()){var n=this.$4;if(n<1){var r=Date.now(),o=Math.max(r-this.$6,0)/s;n=Math.min(n+o,this.$5),this.$4=n,this.$6=r}var a;n>=1?(a=0,this.$4=n-1):(a=Math.ceil(s*(1-n)),this.$4=0),this.$7.onOrBefore(a)}},n.cancel=function(){this.$1=null,this.$7.cancel()},t})();l.BridgeBatcher=u}),98);
__d("WALruCache",["WALogger","WAShiftTimer","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){this.key=t,this.value=n,this.prev=null,this.next=null},u=(function(){function t(e){var t=this,n;this.$2=new Map,this.purgeNow=function(){for(var e=t.$6.prev;t.$4>t.$3&&e!==t.$5;e=e?e.prev:null){if(e==null)throw r("err")("The linked list is not constructed properly.");var n=e,o=n.key,a=n.value;t.$9(o,a)&&(t.delete(o),t.$10&&t.$10(o,a))}t.$8&&t.$8(t.$2)},this.$3=e.sizeLimit,this.$7=e.getSize,this.$8=e.onPurge,this.$9=(n=e.shouldEvict)!=null?n:function(){return!0},this.$10=e.onEvict,this.$11=e.onAdd,this.$12=e.onDelete,this.$4=0,this.$5=new s("placeholder-head",null),this.$6=new s("placeholder-tail",null),this.$5.next=this.$6,this.$6.prev=this.$5,this.$1=new(o("WAShiftTimer")).ShiftTimer(function(){return t.purgeNow()})}var n=t.prototype;return n.get=function(t){if(!this.$2.has(t))return null;var e=this.$2.get(t);if(e==null)return null;var n=e.prev,o=e.next;n&&(n.next=o),o&&(o.prev=n);var a=this.$5.next;if(a==null)throw r("err")("The linked list is not constructed properly.");return this.$5.next=e,a.prev=e,e.prev=this.$5,e.next=a,e.value},n.has=function(t){return this.$2.has(t)},n.touch=function(t){this.get(t)},n.put=function(n,r){if(this.$3!==0){if(this.$7(r)>this.$3){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."])));return}this.delete(n),this.$14(n,r),this.schedulePurge()}},n.$14=function(t,n){var e=new s(t,n);this.$2.set(t,e);var o=this.$5.next;if(o==null)throw r("err")("The linked list is not constructed properly.");this.$5.next=e,o.prev=e,e.prev=this.$5,e.next=o,this.$4+=this.$7(n),this.$11&&this.$11(t,n)},n.delete=function(t){if(this.$2.has(t)){var e=this.$2.get(t);if(e!=null){this.$4-=this.$7(e.value);var n=e.prev,r=e.next;n&&(n.next=r),r&&(r.prev=n),this.$2.delete(t),this.$12&&this.$12(t,e.value)}}},n.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()},n.schedulePurge=function(){this.$1.onOrBefore(1e3)},n.getCurrentSize=function(){return this.$4},n.getPlaceholderHead=function(){return this.$5},n.forEach=function(t){if(this.$4!==0){var e=this.$6.prev;if(e==null)throw r("err")("The linked list is not constructed properly.");for(;e!=null&&e!==this.$5;)t(e.value),e=e.prev}},t})();l.LruCache=u}),98);
__d("WACrossWorkerPortal",["FBLogger","Promise","WABridgeBatcher","WALogger","WALruCache","WAPromiseManagement","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b=(function(){function t(e,t,n,r,a){var i=this,l;if(this.port=null,this.$2=1,this.openRequests=new Map,this.listeners=new Set,(a==null?void 0:a.useLRUCache)===!0){var s,u=new(o("WALruCache")).LruCache({sizeLimit:(s=a.portalCacheSize)!=null?s:100,getSize:function(){return 1}});this.processedRequests={has:function(t){return u.has(t)},add:function(t){u.put(t,!0)}}}else{var c=new Set;this.processedRequests={has:function(t){return c.has(t)},add:function(t){c.add(t)}}}this.$1=e,this.clientId=r,this.config=a,this.sendStream=new(o("WABridgeBatcher")).BridgeBatcher(t,function(e){i.$3(e)},(l=this.config)==null?void 0:l.bridgeBatcherMaxTokens),n.forEach(function(t){e.setNamespaceHandler(t,i.$4(t))})}var a=t.prototype;return a.$5=function(){var e=this.clientId!=null?this.clientId+"_":"";return""+e+this.$2++},a.$6=function(t){var e=t.split("_");return e.length!==2?null:e[0]},a.addListener=function(t){var e=this;return this.listeners.add(t),function(){return e.listeners.delete(t)}},a.setPort=function(n){var t=this;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]))),this.port=n,this.sendStream.cancel(),n.onmessage=function(e){if(t.port!==n){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]))).devConsole(e.data);return}var r=e.data;!r||!Array.isArray(r)||r.forEach(function(e){t.$7(e,"incoming"),t.$8(n,e)})},this.openRequests.forEach(function(e){var n=e.request;o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"])),n.name),t.sendStream.addEvent({type:"request",content:n})})},a.getBridge=function(){return this.$1},a.$4=function(t){var e=this;return function(n,r,o,a,i,l){e.$9(t,n,r,o,a,i,l)}},a.$9=function(t,n,o,a,i,l,s){var e,u,d=this.$5(),m=babelHelpers.extends({fromClientId:(e=this.clientId)!=null?e:void 0},s),p={requestId:d,expectsResponse:!!a,namespace:t,name:n,arg:o,silentLog:i,opts:m};if(((u=this.config)==null?void 0:u.onSendAcross)!=null)try{this.config.onSendAcross(t,n,p.expectsResponse,o)}catch(e){var _=r("getErrorSafe")(e);r("FBLogger")("wmi").catching(_).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onSendAcross"])))}this.openRequests.set(d,{request:p,resolver:a,eventCallbacks:l}),this.sendStream.addEvent({type:"request",content:p})},a.$10=function(t,n){t===this.port&&this.sendStream.addEvent({type:"result",content:n})},a.$3=function(t){var e=this,n=this.port;if(!n){o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"])),t.length);return}n.postMessage(t);var r=t.map(function(e){var t,n,r,o=(t=(n=e.content.arg)==null?void 0:n.type)!=null?t:"";return""+((r=e.content.name)!=null?r:"")+(o?":"+o:"")}).filter(Boolean);t.forEach(function(n){var o;e.$7(n,"outgoing");var a=e.openRequests.get(n.content.requestId);(a==null||(o=a.eventCallbacks)==null?void 0:o.onSend)!=null&&a.eventCallbacks.onSend({queueSize:t.length,queueMsgs:r})})},a.$7=function(t,n){this.listeners.forEach(function(e){return e(t,n)})},a.$8=function(t,a){var e=this;if(a.type==="request"){var i=a.content,l=i.namespace,s=i.name,u=i.requestId,c=i.arg,d=i.expectsResponse,y=i.silentLog,b=i.opts;if(y||o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""])),u,s),(b==null?void 0:b.toClientId)!=null&&b.toClientId!==this.clientId){y||o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," not intended for client ",""])),u,this.clientId);return}var v=this.$1,S={type:"result",content:{requestId:u,type:"handled",result:{payload:v.getAckPayoad(),timestamp:Date.now()},silentLog:y,opts:b}};if(this.$7(S,"outgoing"),t.postMessage([S]),d){var R=v.sendAndReceive(l,s,c,y,void 0,b).then(function(n){e.$10(t,{requestId:u,type:"success",result:n,silentLog:y,opts:b})},function(n){e.$10(t,{requestId:u,type:"error",result:String(n),silentLog:y,opts:b})});o("WAPromiseManagement").preventGarbageCollection(R)}else v.fireAndForget(l,s,c,y,void 0,b)}else{a.type;var L=a.content,E=L.requestId,k=L.type,I=L.result,T=L.silentLog;T||o("WALogger").DEV(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""])),E,k);var D=this.$6(E);if(D!==this.clientId||this.processedRequests.has(E))return;var x=this.openRequests.get(E);if(!x){o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""])),E);return}switch(k){case"success":case"error":{this.openRequests.delete(E),this.processedRequests.add(E);var $=x.resolver;$?$(k==="success"?I:(C||(C=n("Promise"))).reject(r("err")(I!=null?I:""))):o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast: ",""])),I);break}case"handled":try{var P;(P=x.eventCallbacks)==null||P.onAck==null||P.onAck(I)}catch(e){var N=r("getErrorSafe")(e);o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onAck: ",""])),N.message)}x.resolver||(this.openRequests.delete(E),this.processedRequests.add(E));break}}},t})();function v(e,t,n,r,o){return new b(e,n,t,r,o)}function S(e){var t;(t=e.port)==null||t.close(),e.port=null,e.sendStream.cancel();var n=e.openRequests;e.openRequests=new Map;var r=e.getBridge();n.forEach(function(e){var t=e.request,n=e.resolver,a=t.namespace,i=t.name,l=t.arg,s=t.silentLog;o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""])),t.requestId),n?n(r.sendAndReceive(a,i,l,s)):r.fireAndForget(a,i,l,s)})}l.CrossWorkerPortal=b,l.attachPortal=v,l.killPortalAndSendPendingToBridge=S}),98);
__d("MAWCrossWorkerPortal",["FBLogger","MAWBridgeODSLogger","WACrossWorkerPortal","justknobx","pageID"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i){if(e!=null)return e;var l=babelHelpers.extends({},i);return r("justknobx")._("5256")&&(l=babelHelpers.extends({},i,{onSendAcross:o("MAWBridgeODSLogger").logCrossWorkerPortalODS})),e=o("WACrossWorkerPortal").attachPortal(t,n,a,r("pageID"),l),e}function u(){if(e==null){r("FBLogger")("messenger_web").warn("Trying to kill portal before its setup");return}o("WACrossWorkerPortal").killPortalAndSendPendingToBridge(e)}l.getOrCreateCrossWorkerPortal=s,l.killPortalWhenWorkerTerminating=u}),98);
__d("MAWMiActGetMappingWithMawTypes",["I64","MAWJids","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r=(e||(e=o("I64"))).to_string(t.jid),a=n?o("WAJids").toGroupJid(r):o("MAWJids").toUserJid(r);return{clientThreadPk:t.clientThreadPk,jid:a,serverThreadKey:t.serverThreadKey}}l.default=s}),98);
__d("MAWMiActThreadLifecycleState__DO_NOT_USE",[],(function(t,n,r,o,a,i){"use strict";var e={AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:"AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW",AUTHORITATIVE_THREAD_ONLY:"AUTHORITATIVE_THREAD_ONLY",CLIENT_PARTIAL_MI_THREAD:"CLIENT_PARTIAL_MI_THREAD",CLIENT_PARTIAL_MI_THREAD_WITH_ACT:"CLIENT_PARTIAL_MI_THREAD_WITH_ACT",JID_MISSING_MAPPING_ROW:"JID_MISSING_MAPPING_ROW",JID_MISSING_MI_THREAD:"JID_MISSING_MI_THREAD",MI_AND_ACT_THREAD_COMPLETE:"MI_AND_ACT_THREAD_COMPLETE",OPTIMISTIC_THREAD_NO_ACT:"OPTIMISTIC_THREAD_NO_ACT",OPTIMISTIC_THREAD_WITH_ACT:"OPTIMISTIC_THREAD_WITH_ACT",SERVER_PARTIAL_MI_THREAD:"SERVER_PARTIAL_MI_THREAD",THREAD_KEY_ONLY:"THREAD_KEY_ONLY"};i.MiActThreadStatesEnum=e}),66);
__d("MWLogSendToSentFailedError",["FBLogger","QuickPerformanceLogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,o,a,i){var l,s,u,c,d,m,p,_,f=t.qplEventType,g=t.qplInstanceKey,h=(e||(e=r("QuickPerformanceLogger"))).getMarker(f,g),y=h==null||(l=h.annotations)==null||(l=l.bool)==null?void 0:l.is_secure;r("FBLogger")("messenger_web_messaging","send_to_sent_failed").blameToPreviousFrame().blameToPreviousFrame().warn("send_to_sent failed with reason: %s. Caught error message: %s. Additional description: %s. Secure? %s. Error Code: %s. Application Error: %s.",n,(s=o==null?void 0:o.message)!=null?s:"",(u=(c=h==null||(d=h.annotations)==null||(d=d.string)==null?void 0:d.error_description)!=null?c:h==null||(m=h.annotations)==null||(m=m.string)==null?void 0:m.errorType)!=null?u:"",y===!0?"secure":y===!1?"open":"unknown",(p=a==null?void 0:a.toString())!=null?p:"",(_=i==null?void 0:i.toString())!=null?_:"")}l.default=s}),98);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video",Share:"share",NoteReply:"note_reply"});function l(t){var n=t.hasFile,r=n===void 0?!1:n,o=t.hasGif,a=o===void 0?!1:o,i=t.hasHotEmoji,l=i===void 0?!1:i,s=t.hasImage,u=s===void 0?!1:s,c=t.hasLinks,d=c===void 0?!1:c,m=t.hasNoteReply,p=m===void 0?!1:m,_=t.hasShare,f=_===void 0?!1:_,g=t.hasSticker,h=g===void 0?!1:g,y=t.hasVideo,C=y===void 0?!1:y,b=t.hasVoiceClip,v=b===void 0?!1:b,S=e.None;return u?S=e.Image:C?S=e.Video:l?S=e.HotEmoji:h?S=e.Sticker:a?S=e.Gif:v?S=e.Audio:r?S=e.File:f?S=e.Share:d?S=e.Link:p&&(S=e.NoteReply),S}i.AttachmentType=e,i.getAttachmentType=l}),66);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","MWChatInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a,i,l,s=o("MWChatInteraction").get((e||(e=o("I64"))).to_string(t)),u=s!=null?r("InteractionTracingMetrics").get(s):null,c=(n=u==null||(a=u.annotations.string)==null?void 0:a.inboxEntrypoint)!=null?n:u==null||(i=u.annotations.string)==null?void 0:i.entrypoint;if(c!=null&&c!=="unknown")return c;var d=o("MWChatInteraction").get("inbox_init");if(d!=null&&(e||(e=o("I64"))).equal(t,(e||(e=o("I64"))).of_string(d)))return"initInbox";var m=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN),p=m!=null?(l=r("InteractionTracingMetrics").get(m))==null||(l=l.annotations.string)==null?void 0:l.thread_id:null;return p===(e||(e=o("I64"))).to_string(t)?"auto_open":"unknown"}l.default=s}),98);
__d("MWMsgActionLogUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Send:"send",Reaction:"reaction",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply",Unsend:"unsend",GroupInvite:"group-invite",SenderKeyDistribution:"sender-key-distribution",EphemeralSetting:"ephemeral-setting",Edit:"edit",Bump:"bump",Retry:"retry"});function l(t){var n=t.hasEphemeralSetting,r=n===void 0?!1:n,o=t.hasGroupInvite,a=o===void 0?!1:o,i=t.hasReaction,l=i===void 0?!1:i,s=t.hasReply,u=s===void 0?!1:s,c=t.hasSenderKeyDistribution,d=c===void 0?!1:c,m=t.hasStoryReply,p=m===void 0?!1:m,_=t.isBump,f=_===void 0?!1:_,g=t.isEdit,h=g===void 0?!1:g,y=t.isForward,C=y===void 0?!1:y,b=t.isRetry,v=b===void 0?!1:b,S=t.isUnsend,R=S===void 0?!1:S,L=e.Send;return u?L=e.Reply:p?L=e.StoryReply:R?L=e.Unsend:l?L=e.Reaction:a?L=e.GroupInvite:r?L=e.EphemeralSetting:d?L=e.SenderKeyDistribution:h?L=e.Edit:C?L=e.Forward:f?L=e.Bump:v&&(L=e.Retry),L}i.ActionType=e,i.getActionType=l}),66);
__d("MWHasLinksUtil",["URLMatcher","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("isStringNullOrEmpty")(e)?!1:r("URLMatcher").match(e)!=null}l.getHasLinks=e}),98);
__d("MWVersion",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_string("2");l.v2=s}),98);
__d("MWSharedS2SBaseAnnotations",["$InternalEnum","I64","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","MWHasLinksUtil","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWPreloadableQueries","MWVersion","MultipleTabsLogger","ReQL","gkx","isStringNullOrEmpty","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e=["hasAttachment","hasEphemeralSetting","hasGroupInvite","hasReaction","hasReply","hasSenderKeyDistribution","hasStoryReply","hasText","isBump","isEdit","isForward","isRetry","isUnsend"],s=["db","threadKey"],u,c=n("$InternalEnum")({Text:"text",NonText:"non-text"});async function d(t,n,a,i,l){var s=t.hasAttachment,d=s===void 0?!1:s,p=t.hasEphemeralSetting,_=t.hasGroupInvite,f=t.hasReaction,g=t.hasReply,h=t.hasSenderKeyDistribution,y=t.hasStoryReply,C=t.hasText,b=C===void 0?!1:C,v=t.isBump,S=t.isEdit,R=t.isForward,L=t.isRetry,E=t.isUnsend,k=babelHelpers.objectWithoutPropertiesLoose(t,e);l===void 0&&(l=!1);var I=o("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:p,hasGroupInvite:_,hasReaction:f,hasReply:g,hasSenderKeyDistribution:h,hasStoryReply:y,isBump:v,isEdit:S,isForward:R,isRetry:L,isUnsend:E}),T=o("MWMsgMediaTypeLogUtils").getAttachmentType(k),D=b&&(!T||T===o("MWMsgMediaTypeLogUtils").AttachmentType.None)?c.Text:c.NonText,x=i!=null?parseInt(i,10):void 0;return isNaN(x)&&(x=void 0),{bool:{has_attachment:d,has_sticker:k.hasSticker,has_text:b,is_attachments_grouped:k.isAttachmentsGrouped,is_pdb:!!r("gkx")("8483"),is_pwa:l,is_tlc_public_user:r("gkx")("24028"),use_maw_shared_worker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},int:{number_of_attachments:k.numberOfAttachments,number_of_grouped_attachments:k.numberOfGroupedAttachments,offline_threading_id:x},string:{action_type:I,attachment_type:T,entrypoint:m(n),message_type:D,multipleTabs:await o("MultipleTabsLogger").getMultipleTabsAnnotation(),mw_version:(u||(u=o("I64"))).to_string(o("MWVersion").v2),offline_threading_id:i,root_component:a}}}function m(e){var t;return(t=Object.keys(r("LSMessagingThreadAttributionType")).find(function(t){return r("LSMessagingThreadAttributionType")[t]===e}))!=null?t:"UNKNOWN"}async function p(e){var t=e.db,n=e.threadKey,r=babelHelpers.objectWithoutPropertiesLoose(e,s),a=t!=null&&n!=null?await o("ReQL").toArrayAsync(o("MWPreloadableQueries").getMediaStagingQuery(t,n)):[];return{mediaStagings:a,messageTypeParams:_(babelHelpers.extends({},r,{mediaStagings:a}))}}function _(e){var t=e.externalAttachmentUrl,n=e.hotEmojiSize,a=e.isBump,i=e.isEdit,l=e.isEphemeralSetting,s=e.isForward,u=e.isGroupInvite,c=e.isReaction,d=e.isRetry,m=e.isSenderKeyDistribution,p=e.isUnsend,_=e.mediaGroupInfo,f=e.mediaStagings,g=e.messageText,h=e.reply,y=e.sentFromShareSheet,C=e.sticker,b=e.threadType,v=e.voiceClip,S=!r("isStringNullOrEmpty")(g),R=o("MWHasLinksUtil").getHasLinks(g),L=!1,E=v!=null;(E||t!=null)&&(L=!0);var k=!1,I=!1,T=!1,D=0,x=0,$;if(f!=null&&f.length>0){L=!0;for(var P of f){var N=P.mimeType;N.indexOf("image")!==-1&&(k=!0),N.indexOf("video")!==-1&&(I=!0),N.indexOf("application")!==-1&&(T=!0)}if(k&&b!=null){var M=o("LSMessagingThreadTypeUtil").isArmadilloSecure(b);$=!M}D=f.length}_!=null&&($=!0,x=_.messagesAndAttachments.length);var w=n!=null,A=h!=null,F=h!=null,O=C!=null&&!w,B=!O&&t!=null,W=y===!0,q=c===!0,U=u===!0,V=l===!0,H=m===!0;return{hasAttachment:L,hasEphemeralSetting:V,hasFile:T,hasGif:B,hasGroupInvite:U,hasHotEmoji:w,hasImage:k,hasLinks:R,hasReaction:q,hasReply:A,hasSenderKeyDistribution:H,hasShare:W,hasSticker:O,hasStoryReply:F,hasText:S,hasVideo:I,hasVoiceClip:E,isAttachmentsGrouped:$,isBump:a!=null?a:!1,isEdit:i!=null?i:!1,isForward:s!=null?s:!1,isRetry:d!=null?d:!1,isUnsend:p!=null?p:!1,numberOfAttachments:D,numberOfGroupedAttachments:x}}l.MsgType=c,l.getSendToSentBaseAnnotations=d,l.getEntrypointAnnotation=m,l.queryMediaStagingAndGetMessageTypeParams=p,l.getMessageTypeParams=_}),98);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","IGDInteractionTraceAnnotations","LSIntEnum","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWSharedS2SBaseAnnotations","MultipleTabsLogger","cr:6985","gkx","isArmadillo","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({Text:"text",NonText:"non-text"});async function c(t){var a=t.attachmentTypeParams,i=t.composerEntrypoint,l=t.isPwa,s=t.messageOfflineThreadingId,u=t.source,c=t.thread,d=n("cr:6985")!=null?await n("cr:6985").isCutoverThreadKey(c.threadKey):!1,m=await o("MWSharedS2SBaseAnnotations").getSendToSentBaseAnnotations(a,u,i,s,l);return{bool:babelHelpers.extends({},m.bool,o("IGDInteractionTraceAnnotations").getInstamadilloBooleanAnnotations(c),{is_community_event:c.eventStartTimestampMs!=null,is_cutover:r("isArmadillo")()&&d,is_message_request:o("LSMessagingThreadTypeUtil").isMessageRequest(c),is_secure:o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType)}),int:babelHelpers.extends({},m.int),string:babelHelpers.extends({},m.string,{consistent_thread_fbid:c.consistentThreadFbid!=null?(e||(e=o("I64"))).to_string(c.consistentThreadFbid):null,original_entrypoint:r("MWGetOriginalEntrypoint")(c.threadKey),thread_id:(e||(e=o("I64"))).to_string(c.threadKey),thread_subtype:c.threadSubtype!=null?(e||(e=o("I64"))).to_string(c.threadSubtype):null,thread_type:e.to_string(c.threadType)})}}function d(e,t,n,a){m(e,t,r("MWGetOriginalEntrypoint")(n.threadKey),n.threadKey,n.consistentThreadFbid,n.threadType,n.threadSubtype,a),o("IGDInteractionTraceAnnotations").addInstamadilloAnnotationsToInteractionTrace(n,e)}function m(t,a,i,l,s,c,d,m){var p=a.hasEphemeralSetting,_=p===void 0?!1:p,f=a.hasFile,g=f===void 0?!1:f,h=a.hasGif,y=h===void 0?!1:h,C=a.hasGroupInvite,b=C===void 0?!1:C,v=a.hasHotEmoji,S=v===void 0?!1:v,R=a.hasImage,L=R===void 0?!1:R,E=a.hasLinks,k=E===void 0?!1:E,I=a.hasReaction,T=I===void 0?!1:I,D=a.hasReply,x=D===void 0?!1:D,$=a.hasSenderKeyDistribution,P=$===void 0?!1:$,N=a.hasShare,M=N===void 0?!1:N,w=a.hasSticker,A=w===void 0?!1:w,F=a.hasStoryReply,O=F===void 0?!1:F,B=a.hasText,W=B===void 0?!1:B,q=a.hasVideo,U=q===void 0?!1:q,V=a.hasVoiceClip,H=V===void 0?!1:V,G=a.isAttachmentsGrouped,z=a.isBump,j=z===void 0?!1:z,K=a.isEdit,Q=K===void 0?!1:K,X=a.isForward,Y=X===void 0?!1:X,J=a.isRetry,Z=J===void 0?!1:J,ee=a.isUnsend,te=ee===void 0?!1:ee,ne=a.numberOfAttachments,re=ne===void 0?0:ne,oe=a.numberOfGroupedAttachments,ae=oe===void 0?0:oe,ie=o("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:_,hasGroupInvite:b,hasReaction:T,hasReply:x,hasSenderKeyDistribution:P,hasStoryReply:O,isBump:j,isEdit:Q,isForward:Y,isRetry:Z,isUnsend:te}),le=o("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:g,hasGif:y,hasHotEmoji:S,hasImage:L,hasLinks:k,hasShare:M,hasSticker:A,hasVideo:U,hasVoiceClip:H,numberOfAttachments:re,numberOfGroupedAttachments:ae}),se=W&&(!le||le===o("MWMsgMediaTypeLogUtils").AttachmentType.None)?u.Text:u.NonText;o("MultipleTabsLogger").addAnnotationWithInteractionUuid(t.getTraceId()),t.addAnnotation("attachment_type",le),t.addAnnotation("action_type",ie),t.addAnnotation("message_type",se),t.addAnnotation("original_entrypoint",i),m!=null&&t.addAnnotation("root_component",m),t.addAnnotationInt("number_of_attachments",re),G!=null&&t.addAnnotationBoolean("is_attachments_grouped",G),t.addAnnotation("thread_id",(e||(e=o("I64"))).to_string(l)),s!=null&&t.addAnnotation("consistent_thread_fbid",(e||(e=o("I64"))).to_string(s)),t.addAnnotation("thread_type",e.to_string(c)),d!=null&&t.addAnnotation("thread_subtype",(e||(e=o("I64"))).to_string(d)),n("cr:6985")!=null&&r("promiseDone")(n("cr:6985").isCutoverThreadKey(l),function(e){t.addAnnotationBoolean("is_cutover",e)}),t.addAnnotationBoolean("is_secure",o("LSMessagingThreadTypeUtil").isArmadilloSecure(c)),t.addAnnotationBoolean("is_eb_enabled",r("MAWEBSwitch").isEnabled()),t.addAnnotationBoolean("use_maw_shared_worker",o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()),t.addAnnotationBoolean("is_pdb",!!r("gkx")("8483"))}function p(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2))?"media":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4))?"audio":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4096))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(134217728))?"sticker":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(16384))?"gif":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(64))?"file":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1))?"text":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1024))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(536870912))?"XMA":"unknown"}l.MsgType=u,l.getSendToSentAnnotations=c,l.addSendMessageMetadataForInteractionTrace=d,l.addSendMessageMetadataForInteractionTraceWithThreadMetadata=m,l.getMessageTypeFromDisplayedContentType=p}),98);
__d("sendToSentQPLLogger",["LSDatabaseSingleton","LSIntEnum","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MWLogSendToSentFailedError","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","Network","QPLEvent","QPLUserFlow","QuickPerformanceLogger","Random","ReQL","WAExceededStorageQuota","WAGetSafeQPLError","WAGetStorageQplAnnotations","gkx","interaction-tracing","justknobx","mergeDeep","pageID","performance","promiseDone","qpl","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=r("requireDeferred")("MAWWebWorkerSingleton").__setRef("sendToSentQPLLogger"),p=r("qpl")._(25313175,"1551"),_=new Map;function f(e,t){r("QPLUserFlow").addAnnotations(p,t,{instanceKey:e})}function g(e,t){r("QPLUserFlow").endCancel(p,{annotations:t!=null?t:{},instanceKey:e}),S(e)}function h(e,t,n,a){var i=a!=null?a.type:t;r("MWLogSendToSentFailedError")({qplEventType:p,qplInstanceKey:e},i,n,a==null?void 0:a.errorCode,a==null?void 0:a.applicationErrorCode),r("QPLUserFlow").endFailure(p,i,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),useSentBytesCache:r("gkx")("33008"),wasBackendSetupReset:o("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:o("WAGetSafeQPLError").getSafeQPLErrorMessage(n)},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},error:n,instanceKey:e}),S(e)}function y(e,t,n,o){e!=null&&r("QPLUserFlow").addPoint(p,t,{data:o,debugInfo:n,instanceKey:e})}function C(e){(c||(c=r("QuickPerformanceLogger"))).markerEnd(p,160,e),S(e)}function b(e,t){y(e,t?"network_connection_online":"network_connection_offline"),t||C(e)}function v(e){var t=r("interaction-tracing").NetworkStatusTracker.onChange(function(t){var n=t.online;b(e,n)});if(_.set(e,t),b(e,r("interaction-tracing").NetworkStatusTracker.isOnline()),r("Network").containsNetworkInformation()){var n=r("Network").getRTT();n!=null&&f(e,{int:{network_rtt:n}});var o=r("Network").getEffectiveType();o!=null&&f(e,{string:{network_effective_type:String(o)}});var a=r("Network").getBandwidth();a!=null&&f(e,{int:{network_bandwidth:a}});var i=r("Network").getType();i!=null&&f(e,{string:{network_connectivity_type:String(i)}})}}function S(e){var t;(t=_.get(e))==null||t.remove(),_.delete(e)}function R(e){window.navigator&&window.navigator.hardwareConcurrency&&f(e,{int:{hardware_concurrency:window.navigator.hardwareConcurrency}})}function L(t,n){t===void 0&&(t=!0);var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);return r("QPLUserFlow").start(E(n),{annotations:{bool:{backendSetupReady:o("MAWWaitForBackendSetup").isBackendSetupSuccessful(),wasBackendSetupReset:o("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{timeMsSinceSessionStart:(d||(d=r("performance"))).now()},string:{hostname:window.location.hostname,pageID:r("pageID"),workerHeartbeatsOnStart:o("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:o("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a}),r("promiseDone")(o("MAWMIC").getState().then(function(e){f(a,{string:{mic_state:e}})})),t&&r("promiseDone")(o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){f(a,e)})),r("promiseDone")((e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){return o("ReQL").firstAsync(o("ReQL").fromTableDescending(e.tables.connectivity_status)).then(function(e){e&&f(a,{int:{connection_state_ls_transport:(s||(s=o("LSIntEnum"))).toNumber(e.internetConnectionState)}})})})),r("promiseDone")(m.load().then(function(e){return e.getWorkerHealthStatus().then(function(e){f(a,{string:{workerHealthStatusOnStart:e.tag}})})})),v(a),R(a),a}function E(e){if((u||(u=o("QPLEvent"))).getSamplingMethod(p)!==1||!k(e))return p;var t=(u||(u=o("QPLEvent"))).getSampleRate(p),n=r("justknobx")._("3946"),a=Math.max(1,Math.min(n,t));return{i:u.getMarkerId(p),m:u.getSamplingMethod(p),r:a}}function k(e){return e===o("MWMsgMediaTypeLogUtils").AttachmentType.Application||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Audio||e===o("MWMsgMediaTypeLogUtils").AttachmentType.File||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Gif||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Image||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Link||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Sticker||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Video||e===o("MWMsgMediaTypeLogUtils").AttachmentType.Share}function I(e){r("QPLUserFlow").endSuccess(p,{annotations:{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota()}},instanceKey:e}),S(e)}function T(e,t,n,a,i,l){i===void 0&&(i=!0);var s=L(i);if(e==null)return s;var u=o("MWSharedS2SBaseAnnotations").getMessageTypeParams(babelHelpers.extends({},t,{threadType:e.threadType}));return r("promiseDone")(o("MWSharedMsgLogUtils").getSendToSentAnnotations({attachmentTypeParams:u,messageOfflineThreadingId:l,source:n,thread:e}),function(e){var t=r("mergeDeep")(e,a);f(s,t)}),s}var D=async function(t,n,o){var e=t+"_start",a=t+"_end";r("QPLUserFlow").addPoint(p,e,{instanceKey:n});var i=await o();return r("QPLUserFlow").addPoint(p,a,{instanceKey:n}),i};l.addSendToSentAnnotations=f,l.markSendToSentCancel=g,l.markSendToSentFail=h,l.markSendToSentPoint=y,l.markSendToSentStart=L,l.markSendToSentSuccess=I,l.markSendToSentStartWithAnnotation=T,l.measureSendToSentPerformance=D}),98);
__d("MAWMiActGetThreadLifecycleState__DO_NOT_USE",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActGetMappingWithMawTypes","MAWMiActMappingTableAPI","MAWMiActThreadLifecycleState__DO_NOT_USE","MAWThreadLoadingState","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){var i=(e||(e=o("LSIntEnum"))).toNumber(t.authorityLevel);if(i===r("LSAuthorityLevel").OPTIMISTIC)return n!=null?babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT}):{serverThreadKey:t.threadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT};if(i===r("LSAuthorityLevel").CLIENT_PARTIAL)return n!=null?babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT}):{serverThreadKey:t.threadKey,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD};if(i===r("LSAuthorityLevel").SERVER_PARTIAL)return{serverThreadKey:t.threadKey,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD};if(i===r("LSAuthorityLevel").AUTHORITATIVE){if(n==null)return{serverThreadKey:t.threadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW};var l=o("MAWThreadLoadingState").getActState(n)===o("MAWThreadLoadingState").ActState.IN_PROGRESS;if(l){var u=r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType));return{jid:u.jid,jidInt64:n.jid,serverThreadKey:u.serverThreadKey,thread:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY}}else return babelHelpers.extends({},r("MAWMiActGetMappingWithMawTypes")(n,o("LSMessagingThreadTypeUtil").isGroup(t.threadType)),{type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE})}throw r("FBLogger")("messenger_web").mustfixThrow("[MiActMapping] Unknown thread lifecycle state for threadKey: %s, authorityLevel: %s, thread action: %s",(s||(s=o("I64"))).to_string(t.threadKey),i,a)}async function c(e,t,n){var r=await o("MAWMiActMappingTableAPI").getMappingRowForIntJid(e,t);if(r==null)return{jidInt64:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW};var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(r.serverThreadKey));return a==null?{jidInt64:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MI_THREAD}:u(a,r,n)}async function d(e,t,n){var r,a=await Promise.all([(r=o("ReQL")).firstAsync(r.fromTableAscending(e.threads).getKeyRange(t)),r.firstAsync(r.fromTableAscending(e.mi_act_mapping_table).getKeyRange(t))]),i=a[0],l=a[1];return i==null?{serverThreadKey:t,type:o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.THREAD_KEY_ONLY}:u(i,l,n)}async function m(e,t,n,r){var a=await c(e,t,r);return a.type===o("MAWMiActThreadLifecycleState__DO_NOT_USE").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW&&n!=null?d(e,(s||(s=o("I64"))).of_string(n),"MAWBridgeOccamadilloVerifyThreadExistsHandler"):a}l.getThreadLifecycleStateByJid=c,l.getThreadLifecycleStateByThreadKey=d,l.getThreadLifecycleStateByJidOrThreadKey=m}),98);
__d("MAWMiActOnActThreadReadyInstrumentation",["QPLUserFlow","Random","WAHashStringToNumber","isOfflineThreadingId","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WAHashStringToNumber").hashStringToNumber(e+Math.round(o("Random").random()*1e4)+1e4)}function s(e,t,n,o){r("QPLUserFlow").start(r("qpl")._(1056846543,"1530"),{annotations:{bool:{is_otid:r("isOfflineThreadingId")(n)},string:{apiName:o,description:t}},instanceKey:e})}function u(e,t){r("QPLUserFlow").addPoint(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function c(e,t){r("QPLUserFlow").addAnnotations(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}function d(e){r("QPLUserFlow").endSuccess(r("qpl")._(1056846543,"1530"),{instanceKey:e})}function m(e,t){r("QPLUserFlow").endFailure(r("qpl")._(1056846543,"1530"),t,{instanceKey:e})}l.getOnActThreadReadyInstanceKey=e,l.startQPL=s,l.addPointQPL=u,l.addAnnotationsQPL=c,l.endSuccessQPL=d,l.endFailureQPL=m}),98);
__d("MAWVerifyThreadExistsUtils",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","isOfflineThreadingId"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Map,c=6e4,d=1e4;function m(e){if(u.size>d){r("FBLogger")("messenger_web").mustfix("MAWVerifyThreadExistsUtils: requestedThreadKeys size exceeded limit");return}u.has(e)&&(window.clearTimeout(u.get(e)),u.delete(e)),u.set(e,window.setTimeout(function(){u.delete(e)},c))}function p(e){return u.has(e)}function _(t,n,a){var i=n.threadKey;return i!=null&&m((e||(e=o("I64"))).to_string(i)),i!=null&&r("isOfflineThreadingId")(i)&&(e||(e=o("I64"))).equal(n.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))&&r("FBLogger")("messenger_web").warn("MAWVerifyThreadExistsUtils: runVerifyThreadExistsSproc called with offline thread key - callsite: %s",a),r("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(t,n)}l.isThreadRequested=p,l.runVerifyThreadExistsSproc=_}),98);
__d("MAWMiActOnActThreadReadyQueue",["ExecutionEnvironment","I64","LSPlatformLsInitLog","MAWInit","MAWMIC","MAWMiActOnActThreadReadyInstrumentation","MAWThreadMappingQPL","MAWVerifyThreadExistsUtils","MWChatInteraction","MWFBLogger","clearTimeout","getErrorSafe","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]),p=new Map,_=3e4;function f(t,n,a,i,l,s){var u;if((d||(d=r("ExecutionEnvironment"))).isInBrowser){o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(s,"enqueue_by_thread_key_start");var f=(c||(c=o("I64"))).to_string(t),g=(u=p.get(f))!=null?u:[],h=r("setTimeout")(function(){var n=o("MWChatInteraction").getInteractionTraceForThreadKey((c||(c=o("I64"))).to_string(t));n==null||n.addMarkerPoint("timeout_when_waiting_for_act_thread","AppTiming"),n==null||n.addAnnotation("callsite_waiting_for_act_thread",i),n==null||n.addAnnotation("initial_thread_state",l),n==null||n.addAnnotationBoolean("is_mi_thread_requested",o("MAWVerifyThreadExistsUtils").isThreadRequested(f)),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(s,{bool:{during_mic:o("MAWMIC").duringMIC(),is_thread_requested:o("MAWVerifyThreadExistsUtils").isThreadRequested(f),ls_sync_has_ended:o("LSPlatformLsInitLog").LsSync.hasEnded(),maw_init_completed:o("MAWInit").MAWInitState.isCompleted()}}),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(s,"enqueue_by_thread_key_timeout"),m.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Took longer than "," ms to execute: "," in threadState: "," for threadKey: ",", onActThreadReady"])),_,i,l,f),a(l)},_);g.push({callback:n,description:i,telemetryInstanceKey:s,threadState:l,timeoutId:h}),p.set(f,g)}}function g(e,t,n,r){var a,i,l,s;if(!(e==null&&t==null)){var u=e!=null?t!=null?"both":"clientThreadKey":"authoritativeThreadKey",c=e==null?0:(a=(i=p.get(e))==null?void 0:i.length)!=null?a:0,d=t==null?0:(l=(s=p.get(t))==null?void 0:s.length)!=null?l:0;o("MAWThreadMappingQPL").addAnnotations({int:{authorativeThreadKeyCallbacksNum:d,clientThreadKeyCallbacksNum:c},string:{flushBasedOnKey:u,flushReason:r}},n),o("MAWThreadMappingQPL").addPoint("flush_awaiting_callbacks",n)}}async function h(e,t,n,a){var i=(c||(c=o("I64"))).to_string(e),l=p.get(i);if(!(l==null||l.length===0)){for(;l.length!==0;){var d=l.shift();if(d!=null){var _=d.callback,f=d.description,g=d.telemetryInstanceKey,h=d.threadState,y=d.timeoutId;o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(g,"enqueue_by_thread_key_end"),o("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(g,{string:{caller_identifier:n,processed_based_on_key:a}});try{m.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Executing queued "," for threadKey: ",""])),f,i),o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(g),await _(e,t),r("clearTimeout")(y)}catch(e){r("clearTimeout")(y),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(g,"process_queue_on_act_thread_ready_failure"),m.catching(r("getErrorSafe")(e)).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error executing callback on ACT thread ready: ",", original threadState: ",", threadKey: ",""])),f,h,i)}}}p.delete(i)}}l.enqueueByThreadKey=f,l.logOnFlushQueue=g,l.processQueueOnActThreadReady=h}),98);
__d("MAWMiActOnMiThreadExistsForJid__DO_NOT_USE",["MAWThreadLoadingState","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWLogger().tags(["MiActMapping","UIActions","ThreadReady"]);async function c(t,n,r,a){var i=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(t,n);if(i==null)throw u.mustfixThrow("Missing thread key or MI mapping for jid: %s, thread action: %s, MI mapping state %s",r,n);return u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Executing ",", jid: ",""])),r,n),a(t,i)}async function d(e,t,n,r){var a=await o("MAWThreadLoadingState").getThreadKeyIfMiThreadNotMissing(e,t);if(a!=null)return u.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Executing ",", jid: ",""])),n,t),r(e,a)}l.onMiThreadExistsForJid__DO_NOT_USE=c,l.onMiThreadExistsForJidNoThrow__DO_NOT_USE=d}),98);
__d("hasDefaultThreadOneToOneCapabilityDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("hasDefaultThreadOneToOneCapability").__setRef("hasDefaultThreadOneToOneCapabilityDeferred");l.default=e}),98);
__d("useCometMessengerhasDefaultThreadOneToOneCapability",["FBLogger","hasDefaultThreadOneToOneCapabilityDeferred","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){var n=o("react-compiler-runtime").c(7),a=c(!1),i=a[0],l=a[1],s;n[0]!==e||n[1]!==t?(s=function(){r("hasDefaultThreadOneToOneCapabilityDeferred").load().then(function(n){t==null?l(!1):n(t,e).then(function(e){l(e)}).catch(p)}).catch(m)},n[0]=e,n[1]=t,n[2]=s):s=n[2];var d;return n[3]!==e||n[4]!==i||n[5]!==t?(d=[e,i,t],n[3]=e,n[4]=i,n[5]=t,n[6]=d):d=n[6],u(s,d),i}function m(e){r("FBLogger")("messenger_web").warn("Error loading hasDefaultThreadOneToOneCapability. %s",e)}function p(){}l.default=d}),98);
__d("MAWThreadCutover",["I64","LSAuthorityLevel","LSContactBitOffset","LSDatabaseSingleton","LSMessagingThreadTypeUtil","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWPActor.react","MWPreloadableQueries","ReQL","ReQLSuspense","WAJids","react-compiler-runtime","useCometMessengerhasDefaultThreadOneToOneCapability","useMAWCanThreadBeCutoverOnDemand","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=(u||(u=r("useReStore")))(),a=R(e),i=r("useCometMessengerhasDefaultThreadOneToOneCapability")(n,e),l=t!=null&&o("LSMessagingThreadTypeUtil").isGroup(t);return l?!0:a||i}async function d(e){return await $(e)!=null}function m(e){var t=o("react-compiler-runtime").c(4),n=(u||(u=r("useReStore")))(),a,l;return t[0]!==n||t[1]!==e?(a=function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]),o("ReQLSuspense").useFirst(a,l,i.id+":62")!=null}function p(e){var t,n=(u||(u=r("useReStore")))(),a=(t=o("ReQLSuspense").useFirst(function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},[n,e],i.id+":74"))==null?void 0:t.showOpenMessageHistory;return a===!1}function _(e){var t=S(e);return p(t)}function f(e,t){return o("ReQL").fromTableAscending(e.tables.mi_act_mapping_table).getKeyRange(t)}function g(t,n){return o("ReQL").fromTableAscending(t.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,n)})}function h(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null?o("ReQL").empty():f(n,e)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":112"),c,d;return t[4]!==n||t[5]!==s?(c=function(){return s==null?o("ReQL").empty():g(n,s.jid)},d=[n,s],t[4]=n,t[5]=s,t[6]=c,t[7]=d):(c=t[6],d=t[7]),o("ReQLSuspense").useFirst(c,d,i.id+":120")}function y(e,t){return o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t.openThreadId)}function C(t){var n=b(t);if(!(n==null||(e||(e=o("I64"))).lt(n.authorityLevel,(e||(e=o("I64"))).of_int32(r("LSAuthorityLevel").SERVER_PARTIAL))))return n}function b(e){var t=o("react-compiler-runtime").c(4),n=(u||(u=r("useReStore")))(),a=h(e),l,s;return t[0]!==a||t[1]!==n?(l=function(){return a==null?o("ReQL").empty():y(n,a)},s=[n,a],t[0]=a,t[1]=n,t[2]=l,t[3]=s):(l=t[2],s=t[3]),o("ReQLSuspense").useFirst(l,s,i.id+":162")}function v(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null?o("ReQL").empty():f(n,e)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":174"),c=s==null?void 0:s.jid,d,m;t[4]!==n.tables.threads||t[5]!==c?(d=function(){return c!=null?o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(c):o("ReQL").empty()},m=[n.tables.threads,c],t[4]=n.tables.threads,t[5]=c,t[6]=d,t[7]=m):(d=t[6],m=t[7]);var p=o("ReQLSuspense").useFirst(d,m,i.id+":183"),_=r("useMAWCanThreadBeCutoverOnDemand")(c);return _?p:void 0}function S(e){var t=h(e);if(t!=null)return t.openThreadId}function R(e){return h(e)!=null}function L(t,n){var r=o("WAJids").threadIdForChatJid(n);return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange((e||(e=o("I64"))).of_string(r))).then(function(e){return e!=null})}function E(){var e=o("react-compiler-runtime").c(3),t=(u||(u=r("useReStore")))(),n=o("MWPActor.react").useActor(),a;if(e[0]!==n||e[1]!==t.tables.contacts){var l,s=o("ReQLSuspense").first(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(n),i.id+":223");a=s!=null&&((l=o("LSContactBitOffset").has(75,s))!=null?l:!1),e[0]=n,e[1]=t.tables.contacts,e[2]=a}else a=e[2];return a}function k(){var e=o("react-compiler-runtime").c(4),t=(u||(u=r("useReStore")))(),n;e[0]!==t.tables.experiences_shared_state?(n=function(){return o("ReQL").fromTableAscending(t.tables.experiences_shared_state).getKeyRange(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY)},e[0]=t.tables.experiences_shared_state,e[1]=n):n=e[1];var a;e[2]!==t?(a=[t],e[2]=t,e[3]=a):a=e[3];var l=o("ReQLSuspense").useFirst(n,a,i.id+":238"),s=o("MWEncryptedBackupsSharedState").getEntryValue({db:t,sharedStateRow:l,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY});return s!=null}function I(t){var n=o("react-compiler-runtime").c(7),a=(u||(u=r("useReStore")))(),l;n[0]!==t?(l=t!=null?(e||(e=o("I64"))).of_string(t):void 0,n[0]=t,n[1]=l):l=n[1];var s=l,c=m(s),d,p;return n[2]!==a||n[3]!==c||n[4]!==s?(d=function(){return c&&s!=null?o("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).filter(function(t){return(e||(e=o("I64"))).equal(t.jid,s)}).map(T):o("ReQL").empty()},p=[a,s,c],n[2]=a,n[3]=c,n[4]=s,n[5]=d,n[6]=p):(d=n[5],p=n[6]),o("ReQLSuspense").useFirst(d,p,i.id+":259")}function T(t){return(e||(e=o("I64"))).to_string(t.serverThreadKey)}function D(){return!0}function x(e){var t=o("react-compiler-runtime").c(8),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e!=null?o("MWPreloadableQueries").getCutoverThreadByThreadKey(n,e):o("ReQL").empty()},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useFirst(a,l,i.id+":286"),c=s==null?void 0:s.armadilloThreadId,d,m;t[4]!==n.tables.mi_act_mapping_table||t[5]!==c?(d=function(){return c!=null?o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table.index("jid")).getKeyRange(c):o("ReQL").empty()},m=[c,n.tables.mi_act_mapping_table],t[4]=n.tables.mi_act_mapping_table,t[5]=c,t[6]=d,t[7]=m):(d=t[6],m=t[7]);var p=o("ReQLSuspense").useFirst(d,m,i.id+":297");return p==null?void 0:p.serverThreadKey}async function $(t){var n=await(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.mi_act_mapping_table).getKeyRange(t));if(r!=null){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.cutover_threads).filter(function(t){return(e||(e=o("I64"))).equal(t.armadilloThreadId,r.jid)}));return a}}l.useShouldHideE2eeAttribution=c,l.isCutoverThreadKey=d,l.useIsCutoverOpenThread=m,l.useIsDualThreadCutoverOpenThread=p,l.useIsDualThreadCutoverSecureThread=_,l.getMiActMappings=f,l.getCutoverThreadsByJid=g,l.useGetCutoverMapping=h,l.getThreadByCutoverThread=y,l.useOpenThreadIfExistsFromCutoverThread=C,l.useCutoverOpenThread=b,l.useODCutoverEligibleOpenOneToOneThread=v,l.useGetCutoverOpenThreadKey=S,l.useIsCutoverSecureThread=R,l.isCutoverSecureThreadFromChatJid=L,l.useIsCurrentUserCutoverUser=E,l.useGetHasUserRestoredBefore=k,l.useGetCutoverSecureThreadKey=I,l.useSupportedCutoverEnvironment=D,l.useCutoverSecureThreadKeyForOpenThreadKey=x,l.getCutoverThreadBySecureThreadKey=$}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a,l=o("react-compiler-runtime").c(12),s=(e||(e=r("useReStore")))(),u,c;l[0]!==s||l[1]!==t?(u=function(){return t!=null?o("ReQL").fromTableAscending(s.tables.contacts,o("LSContactBitOffset").contactCapabilityFields).getKeyRange(t):o("ReQL").empty()},c=[s,t],l[0]=s,l[1]=t,l[2]=u,l[3]=c):(u=l[2],c=l[3]);var d=o("ReQLSuspense").useFirst(u,c,i.id+":34"),m;l[4]!==d?(m=d!=null&&o("LSContactBitOffset").has(76,d),l[4]=d,l[5]=m):m=l[5];var p=m,_,f;l[6]!==s||l[7]!==t?(_=function(){return t!=null?o("ReQL").fromTableAscending(s.tables.threads,["threadType"]).getKeyRange(t):o("ReQL").empty()},f=[s,t],l[6]=s,l[7]=t,l[8]=_,l[9]=f):(_=l[8],f=l[9]);var g=o("ReQLSuspense").useFirst(_,f,i.id+":53"),h;l[10]!==g?(h=g?o("LSMessagingThreadTypeUtil").isOpenOneToOne(g.threadType):!1,l[10]=g,l[11]=h):h=l[11];var y=h,C=((n=(a=o("ReQLSuspense").useFirst(function(){return t!=null?o("ReQL").fromTableAscending(s.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(t):o("ReQL").empty()},[s,t],i.id+":67"))==null?void 0:a.minMessageId)!=null?n:"")==="",b=o("MAWThreadCutover").useIsCutoverOpenThread(t),v=o("MAWThreadCutover").useIsCutoverSecureThread(t),S=b||v;return p&&y&&!C&&!S}l.default=s}),98);
__d("WAGlobals",["WAJids","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(e){s=e}function c(){if(s==null)throw r("err")("WaMsgr api called before set");return s}function d(){var e;return(e=c().myJids)==null?void 0:e.deviceJid}function m(){var e;return(e=c().myJids)==null?void 0:e.userJid}function p(e){return o("WAJids").extractUserJid(e)===o("WAJids").extractUserJid(d())}function _(){return c().config}function f(){return c().dependencies}var g="WAOneQueue is not defined";function h(){var t=c().waOneQueue;if(t==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),g),r("err")(g);return t}function y(){return c().hmacKey}l.setGlobals=u,l.getMyDeviceJid=d,l.getMyUserJid=m,l.isPeerDevice=p,l.getConfig=_,l.getDependencies=f,l.getWaOneQueue=h,l.getHMACKey=y}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("WAJids").toMsgrUserJid(o("MAWCurrentUser").getID());if((e||(e=r("ExecutionEnvironment"))).isInWorker){var n=o("WAGlobals").getMyUserJid();return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:n===t?"same":"different"}),n}return t}l.getMyUserJid=s}),98);
__d("WADbContact",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3;i.NON_CONTACT=e,i.ONE_WAY_CONTACT=l,i.REVERSED_ONE_WAY_CONTACT=s,i.TWO_WAY_CONTACT=u}),66);
__d("WADevToolMessageChannel",[],(function(t,n,r,o,a,i){"use strict";var e=new MessageChannel,l,s=function(){return e=new MessageChannel,l(e),e},u=function(){return e},c=function(n){l=n,l(e)};i.createNewChannel=s,i.getMostRecentChannel=u,i.onCreateNewChannel=c}),66);/*FB_PKG_DELIM*/
__d("BlobStorageWorkerClient",["BlobStorageWorkerResource","MAWQplProxy","Random","WACryptoUtils","WATagsLogger","WorkerBundleResource","WorkerClient","WorkerMessagePort","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("WATagsLogger").TAGS(["WebMediaStorageWorkerClient"]),p=o("WorkerBundleResource").createDedicatedWebWorker(r("BlobStorageWorkerResource")),_=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(p,"BlobStorageWorker");o("WorkerClient").init(_),m.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["initiated."])));var f=0;async function g(e){var t=e.blob,n=e.fileName,a=f++;m.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["writing to storage with request id: ",""])),a);var i=o("Random").uint32(),l=o("MAWQplProxy").startQplUserFlow(r("qpl")._(521482747,"3166"),{int:{blob_size:t.byteLength},string:{storage_type:"opfs"}},{providedInstanceKey:i});l.addPoint("port_connection_start");var c=await _.fullyConnected;l.addPoint("port_connection_end");var d=c.onMessageOnce("writeBlobToOpfsResponse",function(e){return e.requestId===a});c.postMessage({blob:t,fileName:n,requestId:a,type:"writeBlobToOpfsRequest"}),l.addPoint("write_start");var p=await d;p.output.success?(l.addPoint("write_end"),l.endSuccess()):(l.addAnnotations({string:{error_message:p.output.error}}),l.endFail("write_fail"));var g=p.output.success?p.output.value:p.output.error;m.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["received response from worker, requestId: ",", write result: ",""])),a,g)}async function h(e){var t,n,a=e.fileName,i=e.idbBlob,l=f++;m.DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["reading from storage with request id: ",""])),l);var s=o("Random").uint32(),u=o("MAWQplProxy").startQplUserFlow(r("qpl")._(521474002,"3167"),{int:{idb_blob_size:i==null?void 0:i.size},string:{storage_type:"opfs"}},{providedInstanceKey:s});u.addPoint("port_connection_start");var p=await _.fullyConnected;u.addPoint("port_connection_end");var g=p.onMessageOnce("readBlobFromOpfsResponse",function(e){return e.requestId===l});p.postMessage({fileName:a,requestId:l,type:"readBlobFromOpfsRequest"},[]),u.addPoint("read_start");var h=await Promise.all([g,i.arrayBuffer()]),y=h[0],C=h[1],b=(t=y.output)==null?void 0:t.value,v=b!=null?o("WACryptoUtils").arrayBuffersEqual(b,C):!1;return u.addAnnotations({bool:{blob_matches:v}}),m.DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["BlobStorageWorkerClient matches blob from storage: ",", hasBlob: "," for request id: ",""])),v,y.output!=null,l),y.output.success?(u.addPoint("read_end"),u.endSuccess()):(u.addAnnotations({string:{error_message:y.output.error}}),u.endFail("read_fail")),(n=y.output)==null?void 0:n.value}l.writeBlobToStorage=g,l.readBlobfromStorage=h}),98);
__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"10004682126249141",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("CometNotificationsBadgeCount.react",["fbt","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometPlaceholder.react","CometRelay","FBLogger","FDSNumberedBadge.react","hero-tracing","react","react-compiler-runtime","setupNotificationsLiveQuery","updateWidgetServiceWorker","useMaybeZeroNotificationsBadgeCount"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useEffect;function p(t){var a=o("react-compiler-runtime").c(14),i=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"}),l=i.viewer;if(l==null)throw r("FBLogger")("comet_feed").mustfixThrow("The viewer recieving these notifications cannot be null");var c=o("CometRelay").useFragment(u!==void 0?u:u=n("CometNotificationsBadgeCountFragment_viewer.graphql"),l),p=r("useMaybeZeroNotificationsBadgeCount")(c==null?void 0:c.notifications_unseen_count),_=t.isBadgeHidden,f=t.overflow,g=t.setBadgeCount,h=o("CometRelay").useRelayEnvironment(),y,C;a[0]!==h?(y=function(){var e=r("setupNotificationsLiveQuery")(h);return function(){return e.dispose()}},C=[h],a[0]=h,a[1]=y,a[2]=C):(y=a[1],C=a[2]),m(y,C);var b,v;a[3]!==p||a[4]!==g?(b=function(){g&&g(p),r("updateWidgetServiceWorker")()},v=[p,g],a[3]=p,a[4]=g,a[5]=b,a[6]=v):(b=a[5],v=a[6]),m(b,v);var S;a[7]===Symbol.for("react.memo_cache_sentinel")?(S=d.jsx("span",{}),a[7]=S):S=a[7];var R;a[8]!==p||a[9]!==_||a[10]!==f?(R=_!==!0&&p>0?d.jsx(o("hero-tracing").HeroPagelet,{name:"NotificationsBadge",children:function(t,n){return d.jsxs(d.Fragment,{children:[d.jsx(r("FDSNumberedBadge.react"),{accessibilityText:s._(/*BTDS*/"Number of unread notifications"),overflow:f,ref:t,testid:void 0,value:p}),d.jsx(n,{})]})}}):null,a[8]=p,a[9]=_,a[10]=f,a[11]=R):R=a[11];var L;return a[12]!==R?(L=d.jsx(r("CometPlaceholder.react"),{fallback:S,name:"FDSNumberedBadge",children:R}),a[12]=R,a[13]=L):L=a[13],L}l.default=p}),226);
__d("CometTopNavTabBadge.react",["fbt","FDSNumberedBadge.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(12),n=e.testid,a=e.value,i=e.isBadgeHidden,l=e.isTab,d=e.overflow,m=e.setBadgeCount,p,_;if(t[0]!==m||t[1]!==a?(p=function(){m==null||m(a)},_=[a,m],t[0]=m,t[1]=a,t[2]=p,t[3]=_):(p=t[2],_=t[3]),c(p,_),i===!0||a===0)return null;var f=l===!0?"red":void 0,g;t[4]!==a?(g=s._(/*BTDS*/"_j{\"*\":\"{number} items\",\"_1\":\"1 item\"}",[s._plural(a,"number")]),t[4]=a,t[5]=g):g=t[5];var h;return t[6]!==f||t[7]!==d||t[8]!==g||t[9]!==n||t[10]!==a?(h=u.jsx(r("FDSNumberedBadge.react"),{accessibilityText:g,color:f,overflow:d,testid:void 0,value:a}),t[6]=f,t[7]=d,t[8]=g,t[9]=n,t[10]=a,t[11]=h):h=t[11],h}l.default=d}),226);
__d("EBMainThreadListeners",["EBReenrollmentTriggerListener","LSDatabaseSingleton"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;o("EBReenrollmentTriggerListener").initEBReenrollmentTriggerListener(t)}l.initEBListeners=s}),98);
__d("FBIconCheckmarkCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:s.jsx(o("XPlatReactSVG").Path,{d:"m459.3 1078.26-3.718 4a.75.75 0 0 1-1.099 0l-1.79-1.925a.75.75 0 0 1 1.1-1.022l1.24 1.335 3.168-3.409a.75.75 0 0 1 1.098 1.022m-3.3-4.76c-3.308 0-6 2.69-6 6 0 3.308 2.692 6 6 6 3.31 0 6-2.692 6-6 0-3.31-2.69-6-6-6"})})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useFDSProgressRingSvg.react",["FDSProgressRingUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useRef,m=2;function p(e){var t=o("react-compiler-runtime").c(50),n=e.color,r=e.isHidden,a=e.size,i=d(null),l=d(null),u=d(null),c;t[0]!==n?(c=o("FDSProgressRingUtils").getRingColor(n),t[0]=n,t[1]=c):c=t[1];var p=c,_=p.backgroundColor,f=p.foregroundColor,g=(a-m)*Math.PI,h,y;t[2]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy"},t[2]=y):y=t[2];var C="0 0 "+a+" "+a,b=a/2,v=a/2,S=(a-m)/2,R;t[3]!==_||t[4]!==b||t[5]!==v||t[6]!==S?(R=s.jsx("circle",{cx:b,cy:v,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:S,stroke:_,strokeLinecap:"round",strokeWidth:m}),t[3]=_,t[4]=b,t[5]=v,t[6]=S,t[7]=R):R=t[7];var L;t[8]!==a||t[9]!==C||t[10]!==R?(L=s.jsx("svg",babelHelpers.extends({},y,{height:a,ref:i,viewBox:C,width:a,children:R})),t[8]=a,t[9]=C,t[10]=R,t[11]=L):L=t[11];var E,k;t[12]===Symbol.for("react.memo_cache_sentinel")?(E={className:"x1ey2m1c xtijo5x xbudbmw x6ikm8r x10wlt62 x10l6tqk x13vifvy"},k={className:"x1ey2m1c x9f619 xtijo5x xyj9dbu x10l6tqk x13vifvy x1jpgh95"},t[12]=E,t[13]=k):(E=t[12],k=t[13]);var I="0 0 "+a+" "+a,T=a/2,D=a/2,x=(a-m)/2,$=g/2,P=3*g/4,N=r?"hidden":void 0,M;t[14]!==N?(M={visibility:N},t[14]=N,t[15]=M):M=t[15];var w;t[16]!==f||t[17]!==T||t[18]!==D||t[19]!==x||t[20]!==$||t[21]!==P||t[22]!==M?(w=s.jsx("circle",{cx:T,cy:D,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:x,stroke:f,strokeDasharray:$,strokeDashoffset:P,strokeWidth:m,style:M}),t[16]=f,t[17]=T,t[18]=D,t[19]=x,t[20]=$,t[21]=P,t[22]=M,t[23]=w):w=t[23];var A;t[24]!==a||t[25]!==I||t[26]!==w?(A=s.jsx("div",babelHelpers.extends({},E,{children:s.jsx("svg",babelHelpers.extends({},k,{height:a,ref:l,viewBox:I,width:a,children:w}))})),t[24]=a,t[25]=I,t[26]=w,t[27]=A):A=t[27];var F,O;t[28]===Symbol.for("react.memo_cache_sentinel")?(F={className:"x1ey2m1c x1dkd41z x1o0tod x6ikm8r x10wlt62 x10l6tqk x13vifvy"},O={className:"x1ey2m1c x9f619 x1h4o2ik x1o0tod x10l6tqk x13vifvy x1jpgh95"},t[28]=F,t[29]=O):(F=t[28],O=t[29]);var B="0 0 "+a+" "+a,W=a/2,q=a/2,U=(a-m)/2,V=g/2,H=g/4,G=r?"hidden":void 0,z;t[30]!==G?(z={visibility:G},t[30]=G,t[31]=z):z=t[31];var j;t[32]!==f||t[33]!==W||t[34]!==q||t[35]!==U||t[36]!==V||t[37]!==H||t[38]!==z?(j=s.jsx("circle",{cx:W,cy:q,fill:"none","non-scaling-stroke":"non-scaling-stroke",r:U,stroke:f,strokeDasharray:V,strokeDashoffset:H,strokeWidth:m,style:z}),t[32]=f,t[33]=W,t[34]=q,t[35]=U,t[36]=V,t[37]=H,t[38]=z,t[39]=j):j=t[39];var K;t[40]!==a||t[41]!==B||t[42]!==j?(K=s.jsx("div",babelHelpers.extends({},F,{children:s.jsx("svg",babelHelpers.extends({},O,{height:a,ref:u,viewBox:B,width:a,children:j}))})),t[40]=a,t[41]=B,t[42]=j,t[43]=K):K=t[43];var Q;t[44]!==A||t[45]!==K||t[46]!==L?(Q=s.jsxs(s.Fragment,{children:[L,A,K]}),t[44]=A,t[45]=K,t[46]=L,t[47]=Q):Q=t[47],h=Q;var X=h,Y;return t[48]!==X?(Y={backgroundRef:i,leftCircleRef:u,progressRing:X,rightCircleRef:l},t[48]=X,t[49]=Y):Y=t[49],Y}l.default=p}),98);
__d("FDSProgressRingDeterminate.react",["BaseLoadingStateElement.react","react","useFDSProgressRingSvg.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect,c={rootDiv:{position:"x1n2onr6",$$css:!0},rootSizing:function(t){return[{height:t!=null?"x16ye13r":t,width:t!=null?"x5lhr3w":t,$$css:!0},{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}};function d(e){var t=e.color,n=e.percentage,o=e.size,a=e["aria-label"],i=e["aria-labelledby"],l=r("useFDSProgressRingSvg.react")({color:t,isHidden:!1,size:o}),d=l.leftCircleRef,m=l.progressRing,p=l.rightCircleRef;return u(function(){var e=p.current,t=d.current;if(!(e==null||t==null)&&!(!(e instanceof SVGSVGElement)||!(t instanceof SVGSVGElement))){var r=Math.max(0,Math.min(100,n))/100*360;e.style.transform="rotate("+Math.min(r,180)+"deg)",t.style.transform="rotate("+Math.max(r-180,0)+"deg)"}},[d,n,p]),s.jsx(r("BaseLoadingStateElement.react"),{"aria-label":a,"aria-labelledby":i,progress:n,xstyle:[c.rootDiv,c.rootSizing(o)],children:m})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("LSGetLatestThreadIds.nop",["I64","LSVec","MAWBridgeSafeActionsWorkerAndUI","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n){var a=[],i=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.mi_act_mapping_table)).then(function(t){return t.map(function(t){var n=t.jid;return(e||(e=o("I64"))).to_string(n)})});if(i.length>0){var l=new Set(i);t.forEach(function(e){l.has(e)&&a.push(e)})}return Promise.resolve([r("LSVec").ofArray(a),!0])}async function u(t){var n=await o("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestThreadIds",{numThreads:(e||(e=o("I64"))).to_int32(t)});return n}async function c(t,n,a,i,l){if(l===void 0&&(l=!1),(e||(e=o("I64"))).gt(i,(e||(e=o("I64"))).zero))try{var c=await u(i);return l?s(c,t):Promise.resolve([r("LSVec").ofArray(c),!0])}catch(e){return Promise.resolve([r("LSVec").ofArray([]),!1])}return Promise.resolve([r("LSVec").ofArray([]),!0])}var d=c;c.__nop_name__="getLatestThreadIds",l.default=d}),98);
__d("LSGetThreadDataFromTam.nop",["I64","LSMessagingThreadTypeUtil","LSResult","LSShape","LSVec","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n,a,i){var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.threads).filter(function(e){var t=e.threadType;return o("LSMessagingThreadTypeUtil").isArmadilloSecure(t)}).take((e||(e=o("I64"))).to_int32(i))),l=t.map(function(t,n){var r=t.lastActivityTimestampMs,a=t.lastReadWatermarkTimestampMs,i=t.threadKey,l=t.threadType;return o("LSShape").ofRecord({client_thread_pk:i,display_timestamp_ms:r,is_group_thread:o("LSMessagingThreadTypeUtil").isGroup(l),last_activity_timestamp_ms:r,last_read_watermark_timestamp_ms:a,server_thread_key:i,sort_order:(e||(e=o("I64"))).of_int32(n)})});return r("LSResult")(r("LSVec").ofArray(l))};s.__nop_name__="LSGetThreadDataFromTam",l.default=s}),98);
__d("LSPlatformClientSingleton",[],(function(t,n,r,o,a,i){"use strict";var e={contents:void 0};function l(t){e.contents=t}i.saveInstance=l}),66);
__d("maybeSetupMAWMainThreadLogger",["MessengerLogHistory","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("MessengerLogHistory").getInstance("client_init"),u=(e=n("cr:6999"))!=null?e:n("cr:7350"),c=function(){u!=null&&(r("isArmadillo")()||r("isRegisterArmadilloOnIgEnabled")())&&(s.debug("Starting MAW main thread logger setup..."),u.setupMainWaLogger(),s.debug("Starting MAW main thread logger setup success"))};l.maybeSetupMAWMainThreadLogger=c}),98);
__d("LSPlatformClientInstances",["ExecutionEnvironment","FBLogger","LSLocalize","LSPlatformArmadilloUtils","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWLoggerUtils","MAWMIC","MessengerLogHistory","PromiseAnnotate","cr:19622","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;n("LSLocalize"),o("MAWLoggerUtils").initMessengerWebLogging();var c=o("MessengerLogHistory").getInstance("client_init"),d=(u||(u=r("LSSuspense"))).makeCollection(),m=!1;function p(t,a,i){o("MAWMIC").startMAWMICFlow(),m||(c.debug("[Occamadillo] Beginning hardcoded init sync"),m=!0,o("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger()),o("LSPlatformArmadilloUtils").reportInitStart();var l=function(t){var e=r("getErrorSafe")(t);throw c.debug("Initializing LSPlatformClient failed"),o("LSPlatformLsInitLog").fail("client_setup_failure",e),o("MAWMIC").fail("client_setup_failure",e),r("FBLogger")("messenger_web").catching(e).warn("[LS] LSPlatformClient initialization failure"),e};return(u||(u=r("LSSuspense"))).getFromCollection(d,t,function(){return(e||(e=o("PromiseAnnotate"))).setDisplayName((async function(){o("LSPlatformLsInitLog").addAnnotations({bool:{canUseDOM:(s||(s=r("ExecutionEnvironment"))).canUseDOM,fromReact:i==null?void 0:i.fromReact},string:{configAppId:t.appId,configPlatformName:t.platformName}}),c.debug("Messenger loading UI suspending");try{var e=n("cr:19622")!=null?await n("cr:19622").maybeEvaluateInitSyncEagerly(t):!1;if(!(s||(s=r("ExecutionEnvironment"))).isInBrowser)return await t.getDb();var u=a(t,{didEvaluateInitSyncEagerly:e}).then(function(e){return o("LSPlatformLsInitLog").addPoint("start_client"),e.start().then(function(){return c.debug("Initializing LSPlatformClient success"),o("LSPlatformClientSingleton").saveInstance(e),o("LSPlatformArmadilloUtils").reportInitEnd(),e.db})});return await u}catch(e){l(e)}finally{c.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}var _={getOrInit:p};l.default=_}),98);
__d("LSPlatformClientMaybeEagerly",["LSEagerlyLoadOnMessenger","cr:12301"],(function(t,n,r,o,a,i,l){"use strict";var e=o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(n("cr:12301"));l.default=e}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","react-compiler-runtime","setTimeout","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useRef,m=r("justknobx")._("1134"),p=r("justknobx")._("1135"),_=r("gkx")("24156");function f(){var t=o("react-compiler-runtime").c(4),n=(e||(e=r("useReStore")))(),a=d(null),i=d(!1),l;t[0]!==n.tables.pending_tasks?(l=function(){var e=n.tables.pending_tasks.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.pending_tasks).take(m)),function(e){var t=e.length;if(t===m){if(a.current!=null)return;a.current=r("setTimeout")(function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),i.current=!0,_&&r("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",t,p)},p)}else r("clearTimeout")(a.current),i.current&&_&&r("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),i.current=!1})});return function(){e()}},t[0]=n.tables.pending_tasks,t[1]=l):l=t[1];var s;return t[2]!==n?(s=[n],t[2]=n,t[3]=s):s=t[3],c(l,s),null}l.default=f}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","LSPlatformLogTooManyPendingTasksForS337085.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:r("LSPlatformLogTooManyPendingTasksForS337085.react")!=null&&s.jsx(r("LSPlatformLogTooManyPendingTasksForS337085.react"),{})}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("gkx")("20836")?u.Fragment:(e=n("cr:3921"))!=null?e:u.Fragment,d=c;l.default=d}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(r("MAWCondSetup.react"),{}),t[0]=a):a=t[0];var i;return t[1]!==n?(i=s.jsx(r("MAWSetupWrapperOnce.react"),{setupComponent:a,children:n}),t[1]=n,t[2]=i):i=t[2],i}l.default=u}),98);
__d("LSPlatformClientProvider.react",["CometDOMOnlyBoundary.react","CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformErrorsCatcher.react","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react"));function d(t,n){var a=o("react-compiler-runtime").c(3),i;if(a[0]!==t||a[1]!==n){var l=(e||(e=r("LSSuspense"))).getOrSuspend(t);i=r("LSPlatformClientInstances").getOrInit(l,n,{fromReact:!0}),a[0]=t,a[1]=n,a[2]=i}else i=a[2];return i}function m(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.config,a=e.loadLSPlatformClient,i=d(r,a),l;return t[0]!==n||t[1]!==i?(l=i!=null?c.jsx((s||(s=o("ReStoreProvider.react"))).ReStoreProvider,{db:i,children:n}):n,t[0]=n,t[1]=i,t[2]=l):l=t[2],l}function p(e){var t=o("react-compiler-runtime").c(16),n=e.children,a=e.config,i=e.errorFallback,l=e.loadLSPlatformClient,s=e.placeholder,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(r("LSPlatformClientProviderAddons.react"),{}),t[0]=u):u=t[0];var d;t[1]!==n||t[2]!==s?(d=c.jsx(r("CometPlaceholder.react"),{fallback:s,name:"LSPlatformClientProvider.UISuspense",children:n}),t[1]=n,t[2]=s,t[3]=d):d=t[3];var p;t[4]!==a||t[5]!==l||t[6]!==d?(p=c.jsxs(m,{config:a,loadLSPlatformClient:l,children:[u,d]}),t[4]=a,t[5]=l,t[6]=d,t[7]=p):p=t[7];var _;t[8]!==s||t[9]!==p?(_=c.jsx(r("MAWCondWrapper.react"),{children:c.jsx(r("CometPlaceholder.react"),{fallback:s,name:"LSPlatformClientProvider.ClientProvider",children:p})}),t[8]=s,t[9]=p,t[10]=_):_=t[10];var f;t[11]!==i||t[12]!==_?(f=c.jsx(r("LSPlatformErrorsCatcher.react"),{fallback:i,children:_}),t[11]=i,t[12]=_,t[13]=f):f=t[13];var g=f,h;return t[14]!==g?(h=r("gkx")("12254")?c.jsx(r("CometDOMOnlyBoundary.react"),{children:g}):g,t[14]=g,t[15]=h):h=t[15],h}l.default=p}),98);
__d("LSWaitForTierThree",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSPlatformMqttRealtimeTransport").__setRef("LSWaitForTierThree");function s(){return e.load().then(function(){})}l.default=s}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientMaybeEagerly","LSPlatformClientProvider.react","LSPlatformLsInitLog","LSWaitForTierThree","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));async function u(e,t){o("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var n;return r("gkx")("20208")?n=await r("LSWaitForTierThree")().then(function(){return r("LSPlatformClientMaybeEagerly").load()}):n=await r("LSPlatformClientMaybeEagerly").load(),o("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded"),n.make(e,t)}function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.config,i=e.errorFallback,l=e.placeholder,c;return t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l?(c=s.jsx(r("LSPlatformClientProvider.react"),{config:a,errorFallback:i,loadLSPlatformClient:u,placeholder:l,children:n}),t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=c):c=t[4],c}l.default=c}),98);
__d("LSPlatformCometTransportMaybeEagerly",["CurrentMessengerUser","LSEagerlyLoadOnMessenger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("LSDedicatedMqttChannel").__setRef("LSPlatformCometTransportMaybeEagerly"),u=r("requireDeferred")("LSPlatformDGWTransport").__setRef("LSPlatformCometTransportMaybeEagerly"),c=r("requireDeferred")("LSPlatformMqttRealtimeTransport").__setRef("LSPlatformCometTransportMaybeEagerly");function d(){return(e||(e=n("Promise"))).all([o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(c).load(),o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(u).load(),o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(s).load()]).then(function(e){var t=e[0],n=e[1].LSPlatformDGWTransport,r=e[2];return{dgw:n,mqtt:function(n,a){return t(n,a,{getInstance:r.getInstance(o("CurrentMessengerUser").isLoggedInNow),shutdownAndClear:r.shutdownAndClear})}}})}l.default=d}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:t},params:{id:"8996647210435532",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("LSPlatformGraphQLLightspeedRequestQuery.graphql");l.query=s}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){return o("CometRelay").fetchQuery(o("XPlatRelayEnvironment").getRelayEnvironment(),o("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:e,requestId:t,requestPayload:n,requestType:r},a!=null?a:void 0).toPromise().then(function(e){var t,n=e==null||(t=e.viewer)==null?void 0:t.lightspeed_web_request;if(n!=null)return babelHelpers.extends({dependencies:void 0},n)})}l.default=e}),98);
__d("LSPlatformMessengerConfig",["LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSPlatformCometTransportMaybeEagerly","LSPlatformGraphQLLightspeedRequest","LSPlatformLsInitLog","LSPlatformMessengerSyncParams","LSSuspense","LSVersion","ServerAppID","cr:3239","cr:7358","getMWLSRegion","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e=n("cr:3239"))!=null?e:r("LSPlatformGraphQLLightspeedRequest");function d(){return(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton}function m(){return r("LSPlatformCometTransportMaybeEagerly")().then(function(e){return function(t,n){return o("LSPlatformLsInitLog").addAnnotations({int:{syncChannel:t}}),t===3?e.dgw(r("LSVersion"),n):e.mqtt(r("LSVersion"),n)}})}function p(){return r("LSDatascriptEvaluatorMaybeDeferred")()}var _={appId:r("ServerAppID").app_id,eagerEvaluatorForInitSync:n("cr:7358"),executeGraphQLLightSpeedRequest:r("gkx")("3889")?c:r("LSPlatformGraphQLLightspeedRequest"),getDb:d,getEval:p,platformName:"Messenger",realtimeUnderylingTransport:m,region:r("getMWLSRegion")(),schemaVersion:r("LSVersion"),sendHardcodedInitSync:!0,syncParams:r("LSPlatformMessengerSyncParams")},f=(s||(s=r("LSSuspense"))).makeWithValue(_);l.config=_,l.configEagerlyLoaded=f}),98);
__d("LSPlatformCometClientStartEagerly",["LSPlatformClientInstances","LSPlatformClientMaybeEagerly","LSPlatformLsInitLog","LSPlatformMessengerConfig"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){o("LSPlatformLsInitLog").addPoint("load_ls_platform_client");var n=await r("LSPlatformClientMaybeEagerly").load();return o("LSPlatformLsInitLog").addPoint("load_ls_platform_client_loaded"),n.make(e,t)}function s(){try{r("LSPlatformClientInstances").getOrInit(o("LSPlatformMessengerConfig").config,e)}catch(e){return}}l.start=s}),98);
__d("LSPlatformEvaluateInitSyncEagerly",["ExecutionEnvironment","FBLogger","LSClearEpochBeforeResumeSync","LSDatabaseProviderType","LSPlatformDeviceId","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","cr:3411","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(t,a){o("LSPlatformLsInitLog").addPoint("ds_eval_registration");var e=await a(),i;try{i=n("cr:3411")!=null?n("cr:3411").registerEval(e)()(t):e()(t)}catch(n){var l=r("getErrorSafe")(n);r("FBLogger")("ls_web_init").catching(l).mustfix("fail to register datascriptEvaluator"),i=e()(t)}return o("LSPlatformLsInitLog").addPoint("ds_eval_registration_end"),i};async function u(t){if(!(e||(e=r("ExecutionEnvironment"))).canUseDOM||!t.sendHardcodedInitSync)return!1;var n=t.eagerEvaluatorForInitSync;if(n==null)return!1;var a=await t.getDb();if(o("LSDatabaseProviderType").isProviderPersisted(a))return!1;o("LSPlatformLsInitLog").addPoint("evaluate_init_sync_start");var i=o("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral"),l=await s(a,n);return await o("LSClearEpochBeforeResumeSync").call(a),await o("LSPlatformHardcodedInitSync").sendHardcodedInitSync(t,l,a,i),o("LSPlatformLsInitLog").addPoint("evaluate_init_sync_end"),!0}l.getDatascriptEvaluator=s,l.maybeEvaluateInitSyncEagerly=u}),98);
__d("LSScheduleOccamThreadsIntegrityChecker",["LSGetCursor","LSGetThreadDataFromTam.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.storedProcedure(n("LSGetCursor"),t.i64.cast([0,95])).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return r[1]=t.createArray(),r[2]=t.createArray(),t.i64.neq(e[1],void 0)?r[3]=e[1]:r[3]=t.i64.cast([0,20]),t.forEach(t.db.table(220).fetch([[[t.i64.cast([0,95]),t.i64.cast([0,0])]]]),function(e){var n=e.item;return r[10]=n.minLastActivityTimestampMs,r[9]=new t.Map,r[9].set("has_more_before",n.hasMoreBefore),r[9].set("is_loading_before",n.isLoadingBefore),r[9].set("min_last_activity_timestamp_ms",r[10]),r[9].set("min_thread_key",n.minThreadKey),r[9].set("parent_thread_key",t.i64.cast([0,0])),r[11]=(r[2].push(r[9]),r[2]),t.forEach(t.islc(t.filter(t.db.table(9).fetch([[[{gte:r[10]}]],"lastActivityTimestampMs"]),function(e){return t.i64.ge(e.lastActivityTimestampMs,r[10])&&t.i64.eq(e.syncGroup,t.i64.cast([0,95]))&&t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(r[3])),function(e){var n=e.item;return r[11]=new t.Map,r[11].set("authority_level",n.authorityLevel),r[11].set("folder_name",n.folderName),r[11].set("last_activity_timestamp_ms",n.lastActivityTimestampMs),r[11].set("last_read_watermark_timestamp_ms",n.lastReadWatermarkTimestampMs),r[11].set("thread_key",n.threadKey),r[12]=(r[1].push(r[11]),r[1])})})},function(e){return r[4]=t.createArray(),t.nativeOperation(n("LSGetThreadDataFromTam.nop"),r[3]).then(function(e){var t;return t=e,r[5]=t[0],t})},function(e){return r[6]=t.createArray(),r[7]=new t.Map,r[7].set("cursor",r[0]),r[7].set("mi_act_mapping_columns_for_integrity_check",r[6]),r[7].set("occam_threads_columns_for_integrity_check",r[1]),r[7].set("threads_ranges_columns_for_integrity_check",r[2]),r[7].set("tam_threads_columns_for_integrity_check",r[5]),r[8]=t.toJSON(r[7]),t.storedProcedure(n("LSIssueNewTask"),"occam-threads-integrity-check",t.i64.cast([0,701]),r[8],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxScheduleOccamThreadsIntegrityCheckerStoredProcedure",e.__tables__=["sync_group_threads_ranges","threads"],a.exports=e}),null);
__d("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure",["LSScheduleOccamThreadsIntegrityChecker","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSScheduleOccamThreadsIntegrityChecker"),a.delayMs,a.maxThreadCount);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MessengerWaitForEvent",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r,o){var a,i=o;return new(e||(e=n("Promise")))(function(e){i?a=function(){i.apply(this,arguments)&&e.apply(this,arguments)}:a=e,t==null||t.addEventListener==null||t.addEventListener(r,a)}).finally(function(){t==null||t.removeEventListener==null||t.removeEventListener(r,a)})}i.waitForEvent=l}),66);
__d("LocalStorageMutex",["FBLogger","MessengerWaitForEvent","Promise","QPLUserFlow","emptyFunction","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=1e3,c=r("qpl")._(1056847375,"584"),d=(function(){function t(e){var t=this,n=e.mutexKey,o=e.localTakeoverKey,a=e.log,i=e.logError,l=e.getStorage,s=e.setItemGuarded,c=e.mutexTimeoutMs,d=c===void 0?u:c,m=e.mutexTimeoutCallback;this.mutexFilter=function(e){if(e.key!==t.$1)return!1;var n=e.newValue||"";return!n.includes(r("pageID"))},this.$1=n,this.$2=o,this.$5=l,this.$6=s,this.$3=a,this.$4=i,this.$7=d,this.$8=m}var a=t.prototype;return a.init=function(){r("QPLUserFlow").start(c),this.$3("APPMUTEX - this tab is "+r("pageID"));var t=this.getMutex();if(t===r("pageID"))return this.$3("APPMUTEX - WE ALREADY HAVE THE MUTEX LOCK WITHIN INIT"),r("QPLUserFlow").endSuccess(c),(e||(e=n("Promise"))).resolve(!0);if(t!=null)return this.$3("APPMUTEX - initiating localTAKEOVER"),this.localTakeover();this.$3("APPMUTEX - NO1 ELSE IS ALIVE, GET THE MUTEX");var o=this.$9(r("pageID")),a=this.$10(r("pageID"));return!o.success||!a.success?(r("QPLUserFlow").addAnnotations(c,{bool:{setMutexResult:a.success,setTakeoverResult:o.success},string:{setMutexError:a.error,setTakeoverError:o.error}}),r("QPLUserFlow").endFailure(c,"fail_to_set_takeover_or_mutex"),(e||(e=n("Promise"))).resolve(!1)):(r("QPLUserFlow").endSuccess(c),(e||(e=n("Promise"))).resolve(!0))},a.localTakeover=function(){var t,a=this,i=this.$9(r("pageID"));if(!i.success)return r("QPLUserFlow").addAnnotations(c,{string:{initTakeoverError:i.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_init_takeover_failure"),(e||(e=n("Promise"))).resolve(!1);var l,s=function(){l!=null&&clearTimeout(l)},d=o("MessengerWaitForEvent").waitForEvent(window,"storage",this.mutexFilter),m=(t=this.$7)!=null?t:u;return(e||(e=n("Promise"))).race([d,new e(function(e){l=setTimeout(function(){e()},m)}),this.$8?this.$8():new(e||(e=n("Promise")))(r("emptyFunction"))]).then(function(e){if(e==null){a.$3("AppMutex - Forcefully took the mutex and takeover lock");var t=a.$9(r("pageID")),n=a.$10(r("pageID"));return!t.success||!n.success?(r("QPLUserFlow").addAnnotations(c,{string:{setMutexError:n.error,setTakeoverError:t.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_forcefully_takeover_failure"),!1):(r("QPLUserFlow").endSuccess(c),!0)}a.$3("APPMUTEX - GOT MUTEX STORAGE EVENT CHANGE FROM ANOTHER TAB");var o=a.$11(e.newValue);if(!o&&a.hasTakeoverPermission()){a.$3("APPMUTEX - setting mutex on localtakeover");var i=a.$10(r("pageID"));return i.success?(r("QPLUserFlow").endSuccess(c),!0):(r("QPLUserFlow").addAnnotations(c,{string:{setMutexError:i.error}}),r("QPLUserFlow").endFailure(c,"local_takeover_set_mutex_failure"),!1)}else return a.hasTakeoverPermission()&&a.$12(),r("QPLUserFlow").endFailure(c,"local_takeover_no_takeover_permission"),!1}).then(function(e){return s(),e}).catch(function(e){return s(),a.$4("AppMutex - localTakeover error no permission - "+e),r("QPLUserFlow").endFailure(c,"local_takeover_general_failure"),!1})},a.onMutexDeath=function(){var e=this.getMutex();e!=null&&e===r("pageID")&&(this.$3("APPMUTEX - removing mutex on death"),this.$13(),this.hasTakeoverPermission()&&this.$12())},a.takeoverFilter=function(t){if(t.key!==this.$2)return!1;var e=t.newValue||"";return!e.includes(r("pageID"))},a.$14=function(){if(!s){var e=this.$5();if(!e)throw r("FBLogger")("messenger_web").mustfixThrow("Could not get localStorage");s=e}return s},a.getMutex=function(){return s=this.$14(),s.getItem(this.$1)},a.$10=function(t){return s=this.$14(),this.$6(s,this.$1,t)},a.$13=function(){s=this.$14(),s.removeItem(this.$1)},a.getTakeover=function(){return s=this.$14(),s.getItem(this.$2)},a.$9=function(t){return s=this.$14(),this.$6(s,this.$2,t)},a.$12=function(){s=this.$14(),s.removeItem(this.$2)},a.$11=function(t){return t!=null?t:""},a.hasTakeoverPermission=function(){var e=this.getTakeover();return e!=null&&e===r("pageID")},t})();l.THIS_TAB=r("pageID"),l.LocalStorageMutex=d}),98);
__d("MAWAppMutex",["LocalStorageMutex","MAWLocalStorage","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e="armadillo_msgr_mutex",s="armadillo_msgr_local_takeover",u=null;function c(){return u==null&&(u=new(o("LocalStorageMutex")).LocalStorageMutex({getStorage:o("MAWLocalStorage").getStorage,localTakeoverKey:s,log:function(t){o("WALogger").LOG([t])},logError:function(t){o("WALogger").ERROR([t])},mutexKey:e,setItemGuarded:o("MAWLocalStorage").setItemGuarded})),u}l.MAW_MUTEX_KEY=e,l.MAW_LOCALTAKEOVER_KEY=s,l.use=c}),98);
__d("MAWBridgeGetMinosEpochDataForUser",["EBMinosCheckWasmFeatureSupport","LSDatabaseSingleton","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(){var t=await o("EBMinosCheckWasmFeatureSupport").checkWasFeatureSupportAndQE();if(t)return Promise.resolve();var n=await(e||(e=o("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue(),r=await n.runInTransaction(function(e){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.secure_encrypted_backups_epochs))},"readonly",void 0,void 0,i.id+":24");return r}l.getMinosEpochDataForUser=s}),98);
__d("MAWBridgeRunMediaStorageShadowTestHandler",["Promise","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=n("Promise"))).resolve(o("WAResultOrError").makeError({errorName:"gk-inconsistency"}))}l.fetchMediaStorageResults=s}),98);
__d("MAWBridgeUIEventHandlerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWBridgeUIEventHandler").__setRef("MAWBridgeUIEventHandlerDeferred"),s=function(n,r){e.load().then(function(e){e.handleEvents(n,r)})},u=function(n,r,o){return e.load().then(function(e){return e.handleShimEvent(n,r,o)})};l.handleEvents=s,l.handleShimEvent=u}),98);
__d("MAWBridgeWriteMediaStorageHandler",["BlobStorageWorkerClient","Promise","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=t.blob,i=t.fileName;return r("gkx")("6236")?o("BlobStorageWorkerClient").writeBlobToStorage({blob:a,fileName:i}):(e||(e=n("Promise"))).resolve()}l.writeToMediaStorage=s}),98);
__d("MAWCommonBackendSetup",["EBIsEbEnabled","FBLogger","MAWAppMutex","MAWInitError","MAWLocalStorage","MAWLoggerUtils","MAWSetupWorker","MAWVaultMaterialsStorage","MAWWorkerReboot","getErrorSafe","gkx","requireDeferredForDisplay","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferredForDisplay")("MAWMainThreadLogger").__setRef("MAWCommonBackendSetup"),s=function(t,n){return n?Promise.resolve(!0):t.measurePerformance("acquire_mutex",function(){return o("MAWAppMutex").use().init()})};async function u(t,n,a,i,l,u){await t.measurePerformance("prepare_logger",async function(){var t=e.load();(await t).setupMainWaLogger()}),o("MAWLoggerUtils").initMessengerWebLogging();var c=o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker();c||await t.measurePerformance("detection_support",function(){if(!o("MAWLocalStorage").isLocalStorageAvailable())throw new(o("MAWInitError")).MAWInitError("localstorage_not_supported");return Promise.resolve()});var d=t.measurePerformance("setup_vault_materials",function(){return o("MAWVaultMaterialsStorage").setupVaultMaterials()}),m=await s(t,c);if(!m)throw t.logPoint("maw_appmutex_no_permission"),new(o("MAWInitError")).MAWInitError("maw_appmutex_no_permission");var p=await d,_;if(r("gkx")("1458"))try{_=await o("EBIsEbEnabled").isEBEnabled()}catch(e){var f=r("getErrorSafe")(e).message;t.addStringAnnotation("eb_state_fetch_error",f),r("FBLogger")("wmi_eb").mustfix("Failed to get EB state: %s",f),_=void 0}else _=void 0;await t.measurePerformance("setup_worker",function(){return o("MAWSetupWorker").getOrSetupWorker(p,n,a,i,l,u,_).catch(function(e){return t.logPoint("reboot_worker_on_backend_setup_failure"),t.addStringAnnotation("backend_setup_failure_reason",e.message),o("MAWWorkerReboot").rebootWorker(p,n,a,i,"backend_setup_failure",u).catch(function(e){throw new(o("MAWInitError")).MAWInitError("worker_setup_error",e)})})})}l.getMutexPermission=s,l.setupArmadilloBackend=u}),98);
__d("useMWEncryptedBackupsProcessBackupIdsDeferred",["promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=r("requireDeferred")("MWEncryptedBackupsProcessBackupIdsDEPRECATED").__setRef("useMWEncryptedBackupsProcessBackupIdsDeferred");function c(e){var t=o("react-compiler-runtime").c(4),n=r("useAsyncReStore")(),a,i;t[0]!==n||t[1]!==e?(a=function(){var t,o=!1;return u.onReadyImmediately(function(a){r("promiseDone")(n,function(n){o||(t=a.subscribeToEncryptedBackupsRow(n,e))})}),function(){o=!0,t==null||t()}},i=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=i):(a=t[2],i=t[3]),s(a,i)}l.default=c}),98);
__d("MAWCommonSetup",["EBMainThreadEBDBApiDeferred","EBMainThreadListeners","EBMinosCheckWasmFeatureSupport","ExecutionEnvironment","MAWBridgeFireAndForget","MAWCacheServiceDB","MAWCommonBackendSetup","MAWCurrentUser","MAWEncryptedBackupsStateManager","MAWIndexedDbMetadata","MAWInit","MAWInitError","MAWIsIDBOperational","MAWIssueNewUserVisibleErrors","MAWJobDefinitions","MAWLoggerUtils","MAWMIC","MAWStateContext.react","MAWUIJob","MAWWaitForBackendSetup","MessengerWebInitData","MpsReverbInit","WABridge","WADynamicRouterSync","WAJobOrchestratorTypes","WALogger","cr:13007","cr:7327","cr:8498","getErrorSafe","isMWAppsSubdomainExperiment","justknobx","performance","promiseDone","qpl","react","react-compiler-runtime","requireDeferred","useMWEncryptedBackupsProcessBackupIdsDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useContext,p=d.useEffect,_=r("requireDeferred")("FBLogger").__setRef("MAWCommonSetup"),f=n("cr:7327")||n("cr:8498"),g=n("cr:13007")==null?void 0:n("cr:13007").MAWInitialiseMAWDbInUI;r("requireDeferred")("MAWTimedJob").__setRef("MAWCommonSetup");var h=!1,y=function(){return(s||(s=r("performance"))).now()},C=function(t){o("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(t),o("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:t})};function b(){o("MAWBridgeFireAndForget").fireAndForget("backend","resendEBLSInWorkerEbEnabledState")}function v(){o("MAWBridgeFireAndForget").fireAndForget("backend","resendWorkerStateManagerValuesToMainThread")}function S(){b(),v()}function R(e){var t=o("react-compiler-runtime").c(8);o("MAWLoggerUtils").initMessengerWebLogging();var n=m(o("MAWStateContext.react").MAWDispatchContext),a=o("MAWIsIDBOperational").useIsIDBOperational(),i,l;t[0]!==n||t[1]!==a||t[2]!==e?(i=function(){a&&(u||(u=r("ExecutionEnvironment"))).isInBrowser&&r("promiseDone")(L(n,e))},l=[e,n,a],t[0]=n,t[1]=a,t[2]=e,t[3]=i,t[4]=l):(i=t[3],l=t[4]),p(i,l);var s,c;t[5]!==a?(s=function(){a&&r("promiseDone")(o("EBMainThreadListeners").initEBListeners())},c=[a],t[5]=a,t[6]=s,t[7]=c):(s=t[6],c=t[7]),p(s,c),r("useMWEncryptedBackupsProcessBackupIdsDeferred")(C),r("justknobx")._("4966")===!1&&S()}async function L(t,n){var a=n.logout,i=n.reregisterDevice,l=n.rotateCryptoAuthToken,s=n.setupBridge;if(h){_.load().then(function(e){e("messenger_web").warn("Armadillo already setup - return")});return}if(r("isMWAppsSubdomainExperiment")(!1)){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Armadillo is disabled on apps subdomain"])));return}h=!0,o("MAWMIC").startMAWMICFlow(),o("MAWInit").MAWInit.start(),(u||(u=r("ExecutionEnvironment"))).isInBrowser&&(await o("MpsReverbInit").initReverb({blockingErrorThreshold:r("justknobx")._("3218"),name:o("MAWIndexedDbMetadata").webReverDbbName(o("MAWCurrentUser").getID()),onBlockingError:function(){},qplEvent:r("qpl")._(1056840657,"2716"),strEncKey:r("MessengerWebInitData").accountKeyV2}),await o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),g!=null&&r("promiseDone")(g(t),function(){},function(e){return _.load().then(function(t){return t("messenger_web").catching(e).mustfix("UI Dexie initialisation failed: %s",e.message)})})),o("WABridge").makeWABridge(new(o("WADynamicRouterSync")).DynamicRouterSync);try{o("MAWIssueNewUserVisibleErrors").deleteAllErrors(),await o("MAWCommonBackendSetup").setupArmadilloBackend(o("MAWInit").MAWInit,function(e){return s({dispatch:t,logout:a,reregisterDevice:i,rotateCryptoAuthToken:l,worker:e})},function(){t({tag:"InitOfflineQueueSyncComplete",value:void 0}),t({tag:"IsDbMigrating",value:!1}),r("justknobx")._("4966")===!0&&S(),o("MAWMIC").onConnectToExistingWorker()},function(){t({tag:"InitOfflineQueueSyncComplete",value:void 0}),t({tag:"IsDbMigrating",value:!1})},"mawInit",function(e){}),o("MAWUIJob").UIJobStarters.fireAndForget(o("MAWJobDefinitions").jobSerializers.handleFutureproofMsg({priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW})),o("MAWInit").MAWInit.addIntAnnotation("endTimePageRelative",y()),o("MAWInit").MAWInit.endSuccess()}catch(e){var c,d=r("getErrorSafe")(e),m=d instanceof o("MAWInitError").MAWInitError?d.message:"maw_init_failure";d.message=(c=d.message)!=null?c:"Unknown";var p=d.message==="maw_appmutex_no_permission"&&document.visibilityState!=="visible";throw p?o("MAWInit").MAWInit.cancel(m,d):(o("MAWWaitForBackendSetup").rejectBackendSetup(d),o("MAWInit").MAWInit.fail(m,d)),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWGeneralErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER,d.message),d&&_.load().then(function(e){e("messenger_web").catching(d).mustfix("MAW backend setup failed -- %s",d.message)}),d}o("EBMainThreadEBDBApiDeferred").startListeningDeviceRegistrations();var C=await o("EBMinosCheckWasmFeatureSupport").checkWasmFeatureSupport();f!=null&&C&&f.initializeMinosDb()}l.useArmadillo=R}),98);
__d("MAWDBUsageMetrics",["FBLogger","WebStorageEstimator","getErrorSafe","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("WebStorageManagerEstimatesFalcoEvent").__setRef("MAWDBUsageMetrics");async function s(){try{var t=await o("WebStorageEstimator").estimateStorage();e.onReady(function(e){r("FBLogger")("messenger_web").debug("Sending storage manager estimates falco event, quota: %s, usage: %s, usage_details: %s",t==null?void 0:t.quota,t==null?void 0:t.usage,JSON.stringify(t==null?void 0:t.usageDetails)),e.log(function(){var e,n,r,o,a,i,l,s;return{quota:String((e=t==null?void 0:t.quota)!=null?e:0),usage:String((n=t==null?void 0:t.usage)!=null?n:0),usage_details:{caches:String((r=t==null||(o=t.usageDetails)==null?void 0:o.caches)!=null?r:0),indexedDB:String((a=t==null||(i=t.usageDetails)==null?void 0:i.indexedDB)!=null?a:0),serviceWorkerRegistrations:String((l=t==null||(s=t.usageDetails)==null?void 0:s.serviceWorkerRegistrations)!=null?l:0)}}})})}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(n).warn("Error while getting the storage manager estimate");return}}l.logMAWDBUsageMetrics=s}),98);
__d("toMsgrUserJid",["MAWJids"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("MAWJids").toUserJid}),98);
__d("MAWFetchContacts",["I64","LSContactTypeExact","LSIntEnum","MAWContactRelationshipType","ReQL","WAJids","requireDeferred","toMsgrUserJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWFetchContacts");async function c(t){var n=await u.load(),a=await n(),i=new Set(t.map(function(e){return o("WAJids").extractUserId(e)}));return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(a.tables.contacts).filter(function(t){return i.has((e||(e=o("I64"))).to_string(t.id))})).then(function(t){return new Map(t.map(function(t){return[r("toMsgrUserJid")((e||(e=o("I64"))).to_string(t.id)),t]}))})}function d(e){return c(e).then(function(e){var t=new Map;return e.forEach(function(e,n){t.set(n,o("MAWContactRelationshipType").getContactRelationshipType(e))}),t})}function m(t){return c(t).then(function(t){var n=new Map;return t.forEach(function(t,a){var i=t.contactTypeExact!=null&&(e||(e=o("I64"))).equal(t.contactTypeExact,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));n.set(a,i)}),n})}l.fetchContacts=c,l.fetchContactsRelationships=d,l.fetchContactsIsMsplit=m}),98);
__d("MWXProgressRing.react",["cr:4145","cr:6783","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),r=e.color,a=e.percentage,i=e.size;if(n("cr:4145")!=null){var l=r!=null?r:"light",u=a!=null?a:0,c=i!=null?i:16,d;return t[0]!==l||t[1]!==u||t[2]!==c?(d=s.jsx(n("cr:4145"),{color:l,percentage:u,size:c}),t[0]=l,t[1]=u,t[2]=c,t[3]=d):d=t[3],d}if(n("cr:6783")!=null){var m;return t[4]!==r||t[5]!==a||t[6]!==i?(m=s.jsx(n("cr:6783"),{color:r,percentage:a,size:i}),t[4]=r,t[5]=a,t[6]=i,t[7]=m):m=t[7],m}return null}l.default=u}),98);
__d("mwReplaceToast",["BaseToasterStateManager","MWXToast.react","err","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("BaseToasterStateManager").getInstance();function c(e){var t=e.body,n=e.icon,o=e.startAddOn,a=o===void 0?null:o,i=e.supressCloseButton,l=i===void 0?!1:i,c=e.title,d=e.toastId;if(d==null){r("err")("toastId or toasterStateManager is not provided");return}u.replace(d,s.jsx(r("MWXToast.react"),{body:t,icon:n,onDismiss:function(){return u.expire(d)},startAddOn:a,supressCloseButton:l,title:c}))}l.mwReplaceToast=c}),98);
__d("MAWLoadingSpinner.react",["BaseToasterStateManager","MWXIconCheckmarkCircle","MWXIconStrict.react","MWXProgressRing.react","MWXSpinner.react","mwPushToast","mwReplaceToast","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useLayoutEffect,m=u.useRef,p=r("BaseToasterStateManager").getInstance();function _(e,t,n,o){return o===void 0&&(o=0),e==="spinner"?{icon:{comet:s.jsx(r("MWXSpinner.react"),{color:t?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:n}:e==="progressRing"?{icon:{comet:s.jsx(r("MWXProgressRing.react"),{color:t?"light":"dark",size:24})},startAddOn:{source:o,type:"progressRing"},title:n}:{icon:{comet:s.jsx(r("MWXSpinner.react"),{color:t?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:n}}function f(e,t){o("mwReplaceToast").mwReplaceToast({icon:{comet:s.jsx(r("MWXIconStrict.react"),{icon:r("MWXIconCheckmarkCircle"),size:24}),mds:r("MWXIconCheckmarkCircle").component},title:t,toastId:e})}function g(e,t,n,a,i,l){var s=o("react-compiler-runtime").c(10),u=m(),g,h;s[0]!==a||s[1]!==t||s[2]!==l||s[3]!==n||s[4]!==i||s[5]!==e?(g=function(){if(i)u.current==null?u.current=o("mwPushToast").mwPushToast(_(e,t,n,l),Number.MAX_SAFE_INTEGER):o("mwReplaceToast").mwReplaceToast(babelHelpers.extends({},_(e,t,n,l),{toastId:u.current}));else if(u.current!=null){var s=u.current;f(s,a),r("setTimeout")(function(){p.expire(s),u.current=void 0},2750)}},h=[i,t,e,n,l,a],s[0]=a,s[1]=t,s[2]=l,s[3]=n,s[4]=i,s[5]=e,s[6]=g,s[7]=h):(g=s[6],h=s[7]),d(g,h);var y,C;s[8]===Symbol.for("react.memo_cache_sentinel")?(y=function(){return function(){u.current!=null&&p.expire(u.current)}},C=[],s[8]=y,s[9]=C):(y=s[8],C=s[9]),c(y,C)}l.useMAWLoadingSpinner=g}),98);
__d("MAWLoadingStateOutstandingOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return(function(e){var n=e.offlineQueueCount,r=e.offlineQueueSyncState,a=e.offlineQueueThreadStatus;if(t!=null&&Object.keys(a).length>0){var i;return a[t]!=null&&((i=a[t])==null?void 0:i.snippetStatus)!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}return n>0&&r!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete})};l.outstandingOfflineQueueSelector=e}),98);
__d("MAWLoadingStateSpinnerUtils",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(t){return s._(/*BTDS*/"{restoredPercentage}\u0025 of chats loaded...",[s._param("restoredPercentage",t.toFixed(0).toString())])},u=s._(/*BTDS*/"All chats loaded.");function c(e,t,n){if(n===0)return 100;var r=50*(e/n),o=50*(t/n);return Math.min(100,o+r)}l.getProgressMessage=e,l.completedMessage=u,l.getPercentage=c}),226);
__d("MAWLoadingStateToastSelectors",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){return t.offlineQueueCount},l=function(t){return t.offlineQueueProgressDownloaded},s=function(t){return t.offlineQueueProgressProcessed};i.offlineQueueCountSelector=e,i.offlineQueueProgressCountSelector=l,i.offlineQueueConsumerProgressCountSelector=s}),66);
__d("useMAWOfflineQueueLoadingIndicator",["Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWStateContext.react","react-compiler-runtime","useCometRouterState","useMAWOfflineQueueLoadingIndicatorThreadJid"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a=o("react-compiler-runtime").c(4),i=e===void 0?!1:e,l=n===void 0?o("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector:n,s=r("useMAWOfflineQueueLoadingIndicatorThreadJid")(t==null?void 0:t.threadKey,t==null?void 0:t.threadType),u=r("useCometRouterState")(),c,d;a[0]!==l||a[1]!==s?(c=function(){return l(s)},d=[l,s],a[0]=l,a[1]=s,a[2]=c,a[3]=d):(c=a[2],d=a[3]);var m=o("Int64Hooks").useMemoInt64(c,d),p=o("MAWStateContext.react").useMAWSelector(m),_=u==null?void 0:u.main.route.tabKey;return p&&(_==="messenger"||!i)}l.default=e}),98);
__d("MAWLoadingStateSpinner.react",["CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateSpinnerUtils","MAWLoadingStateToastSelectors","MAWStateContext.react","cr:19625","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicator"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.memo,d=u.useContext;function m(){var e=o("react-compiler-runtime").c(5),t=d(r("CometDarkModeContext")).currentSetting==="ENABLED",n=r("useMAWOfflineQueueLoadingIndicator")(!0),a=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueCountSelector),i=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueProgressCountSelector),l=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueConsumerProgressCountSelector),s,u;e[0]!==i||e[1]!==a||e[2]!==l?(s=o("MAWLoadingStateSpinnerUtils").getPercentage(i,l,a),u=o("MAWLoadingStateSpinnerUtils").getProgressMessage(s),e[0]=i,e[1]=a,e[2]=l,e[3]=s,e[4]=u):(s=e[3],u=e[4]);var c=u;return o("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",t,c,o("MAWLoadingStateSpinnerUtils").completedMessage,n,s),null}function p(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=n("cr:19625")!=null?s.jsx(n("cr:19625"),{}):s.jsx(m,{}),e[0]=t):t=e[0],t}var _=c(p);l.default=_}),98);
__d("MAWLoadingStateSpinnerWithQueueState",["CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateSpinnerUtils","MAWSharedProtocolQueueConst","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicatorShown","useMAWOfflineQueueState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(5),n=e.shouldDisplayLoadingIndicatorOnMessengerRoute,a=u(r("CometDarkModeContext")).currentSetting==="ENABLED",i=o("useMAWOfflineQueueState").useMAWOfflineQueueState(),l=i.offlineQueueCount,s=i.offlineQueueProgressDownloaded,c=i.offlineQueueProgressProcessed,d=l>0&&i.offlineQueueSyncState!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,m=d&&n,p,_;t[0]!==s||t[1]!==l||t[2]!==c?(p=o("MAWLoadingStateSpinnerUtils").getPercentage(s,c,l),_=o("MAWLoadingStateSpinnerUtils").getProgressMessage(p),t[0]=s,t[1]=l,t[2]=c,t[3]=p,t[4]=_):(p=t[3],_=t[4]);var f=_;return o("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",a,f,o("MAWLoadingStateSpinnerUtils").completedMessage,m,p),null}function d(){var e=o("react-compiler-runtime").c(2),t=r("useMAWOfflineQueueLoadingIndicatorShown")(!0),n;return e[0]!==t?(n=t?s.jsx(c,{shouldDisplayLoadingIndicatorOnMessengerRoute:t}):null,e[0]=t,e[1]=n):n=e[1],n}l.default=d}),98);
__d("getMAWIdentityKeys",["MAWBridgeSendAndReceive"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("MAWBridgeSendAndReceive").sendAndReceive("waapi","getIdentityKeys",void 0,{timeoutMs:6e4})}l.default=e}),98);
__d("MAWMainThreadEBDeps",["EBDeps","EBMainThreadEBDBApiDeferred","LSDatabaseSingleton","MAWWaitForBackendSetup","getMAWIdentityKeys","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("EBSMMainthreadAPI").__setRef("MAWMainThreadEBDeps");function u(){o("EBDeps").setDeps({getEBSMAPI:function(){return s.load()},getLSDB:function(){return(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton},getMAWIdentityKeys:r("getMAWIdentityKeys"),isBackendSetupSuccessful:function(){return o("MAWWaitForBackendSetup").isBackendSetupSuccessful()},trackAddingNewDevice:o("EBMainThreadEBDBApiDeferred").addNewDevice},"MAW MainThread")}l.initEBDeps=u}),98);
__d("MAWOccamadilloOnMutexChange",["I64","LSDefaultSyncGroups","LSIntEnum","LSSyncGroupsUtils","Promise","WALogger","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){var t=o("LSDefaultSyncGroups").e2eeMetadataSyncGroup;return t!=null?e.sync_groups.put(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultSyncGroup,{groupId:(c||(c=o("LSIntEnum"))).ofNumber(t.groupId)})):(s||(s=n("Promise"))).resolve()}function m(e){return e.network_requests.put({epochId:void 0,failureCount:(u||(u=o("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:u.zero,lastSyncRequestTimestampMs:u.zero,networkTaskIdentifier:void 0,syncDatabaseId:(c||(c=o("LSIntEnum"))).ofNumber(95),taskQueueName:""})}function p(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Resetting sync cursor and network request"]))),r("promiseDone")(t.runInTransaction(function(e){return(s||(s=n("Promise"))).all([d(e),m(e)])},"readwrite",void 0,void 0,i.id+":53"))}l.onOccamadilloMutexChange=p}),98);
__d("MAWPostOfflineQueueCompleteActions",["WAMediaWasmWorkerClient"],(function(t,n,r,o,a,i,l){"use strict";function e(){o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("mp4RepairMux"),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode")}function s(){e()}l.runPostOfflineQueueCompleteActions=s}),98);
__d("MAWPreloadSecureMessagesDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWPreloadSecureMessages").__setRef("MAWPreloadSecureMessagesDeferred"),s=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.load().then(function(e){return e.preloadSecureMessagesByThreadKey.apply(e,n)})};l.preloadSecureMessagesByThreadKey=s}),98);
__d("MAWReinit",["ExecutionEnvironment","MAWCurrentUser","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","gkx","qpl","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(25310984,"169");function c(t){var n=t!=null?{instanceKey:t}:void 0,a=!1,i=!1;function l(){i||(i=!0,r("QPLUserFlow").start(u,babelHelpers.extends({cancelOnUnload:!0,onFlowTimeout:function(){a=!0},timeoutInMs:(e||(e=r("ExecutionEnvironment"))).canUseDOM?6e4:0},n)),o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){r("QPLUserFlow").addAnnotations(u,e)}),y())}function c(e){!i||a||(y(),r("QPLUserFlow").addPoint(u,e,n))}function d(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{bool:(n={},n[e]=t,n)})}function m(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{string:(n={},n[e]=t,n)})}function p(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{string_array:(n={},n[e]=t,n)})}function _(e,t){var n;!i||a||r("QPLUserFlow").addAnnotations(u,{int:(n={},n[e]=t,n)})}function f(e){y(),a=!0,r("QPLUserFlow").addAnnotations(u,{string:{failReason:e}},n),r("QPLUserFlow").endFailure(u,"maw_init_fail",n),h=!1}function g(e){y(),a=!0,h=!1,r("QPLUserFlow").addAnnotations(u,{string:{dropReason:e}},n),(s||(s=r("QuickPerformanceLogger"))).markerDrop(u)}var h=!1;function y(){h||(h=!0,r("QPLUserFlow").addAnnotations(u,{bool:{armadillo_init_sync_api_improvements:r("gkx")("24025"),isArmadilloPublicLaunchUser:r("gkx")("23405"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}}))}function C(e){y(),a=!0,r("QPLUserFlow").addAnnotations(u,{string:{cancelReason:e}},n),r("QPLUserFlow").endCancel(u,n),h=!1}function b(){y(),a=!0,r("QPLUserFlow").endSuccess(u,n),h=!1}async function v(e,t){var n=e+"_start",r=e+"_end";c(n);var o=await t();return c(r),o}return{addBoolAnnotation:d,addIntAnnotation:_,addStringAnnotation:m,addStringArrayAnnotation:p,cancel:C,drop:g,endSuccess:b,fail:f,logPoint:c,measurePerformance:v,start:l}}l.getMAWReinit=c}),98);
__d("MAWReinitWorker",["MAWCommonBackendSetup","MAWOccamadilloOnMutexChange","MAWReinit"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.allTablesPersisted,n=e.db,r=e.dispatch,a=e.dispatchClearEphemeralSettings,i=e.instanceKey,l=e.logout,s=e.reregisterDevice,u=e.rotateCryptoAuthToken,c=e.setupBridge,d=e.workerCreateReason,m=o("MAWReinit").getMAWReinit(i);m.start();var p=function(){r({tag:"InitOfflineQueueSyncComplete",value:void 0})};await o("MAWCommonBackendSetup").setupArmadilloBackend(m,function(e){var a=c({dispatch:r,logout:l,reregisterDevice:s,rotateCryptoAuthToken:u,worker:e});return t||o("MAWOccamadilloOnMutexChange").onOccamadilloMutexChange(n),a},p,p,d,function(e){}),m.endSuccess(),a()}l.default=e}),98);
__d("MAWSetupBridgeOfflineConsumer",["InteractionTracingMetrics","MAWBridgeInitOfflineQueueSyncCompleteHandler","MAWMIC","MAWOfflineQueueStatus","MAWPostOfflineQueueCompleteActions","MAWSharedProtocolQueueConst","MWChatInteraction","MWFBLogger","interaction-tracing","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["ServerRPC","OfflineConsumer"]),m="has_pending_or_inprogress_oq_threads";async function p(e){return await e,o("MAWPostOfflineQueueCompleteActions").runPostOfflineQueueCompleteActions(),o("MAWBridgeInitOfflineQueueSyncCompleteHandler").call()}function _(e){o("MAWMIC").addIntAnnotation("offlineQueueSize",e);var t=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);t!=null&&r("InteractionTracingMetrics").addAnnotationInt(t,"offlineQueueSize",e)}function f(e,t){var n=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);n!=null&&r("InteractionTracingMetrics").addSubspan(n,"offline_queue","LONGTASK",e,t,{})}function g(){r("justknobx")._("3496")&&r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(e){e.addMarkerPoint("offline_queue_start","AppTiming"),e.addAnnotationBoolean(m,!0)})}function h(){r("justknobx")._("3496")&&r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(e){e.addMarkerPoint("offline_queue_end","AppTiming"),e.addAnnotationBoolean(m,!1)})}function y(t,n){return function(a){var i=a.chatJidStatus,l=a.status,m=a.timestamp,y=a.totalExpectedCount,C=a.totalProcessedCount;switch(l){case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing:g(),d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",""])),y),_(y),n({tag:"InitOfflineQueueSyncStart",value:y}),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Initializing),o("MAWMIC").addPoint("process_offline_queue_start",m),o("MAWOfflineQueueStatus").resetOfflineQueueState();return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing:d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Stats: expected: ",", processed: ",""])),y,C),n({tag:"InitOfflineQueueConsumerSyncProgress",value:{chatJidStatus:i,processed:C}}),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Processing);return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:d.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Stats end: expected: ",", processed: ",""])),y,C),a.startTime!=null&&f(a.startTime,m),h(),n({tag:"InitOfflineQueueSyncComplete",value:i}),r("promiseDone")(p(t)),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete),o("MAWMIC").addPoint("process_offline_queue_end",m),o("MAWOfflineQueueStatus").markOfflineQueueComplete();return;case o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed:d.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Stats failed: expected: ",", processed: ",""])),y,C),o("MAWMIC").addPoint("process_offline_queue_failed",m),n({tag:"InitOfflineQueueSyncComplete",value:void 0}),r("promiseDone")(p(t)),o("MAWOfflineQueueStatus").markThreadWithOfflineQueueStatus(i,o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed),o("MAWOfflineQueueStatus").markOfflineQueueComplete();return}}}l.default=y}),98);
__d("MAWSetupBridgeOfflineSnapshot",["InteractionTracingMetrics","MAWMIC","MWChatInteraction","MWFBLogger","WAOfflineUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["ServerRPC","Offline"]);function m(e){o("MAWMIC").addIntAnnotation("offlineQueueSize",e);var t=o("MWChatInteraction").get(o("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);t!=null&&r("InteractionTracingMetrics").addAnnotationInt(t,"offlineQueueSize",e)}var p=function(n){return async function(t){var r=t.downloaded,a=t.expected,i=t.status,l=t.timestamp;switch(i){case o("WAOfflineUtils").WAClientInfraOfflineProgress.Initializing:d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Stats start: ",", messages: ",""])),a.count,a.message),m(a.count),n({tag:"InitOfflineQueueSyncStart",value:a.count}),o("MAWMIC").addPoint("download_offline_queue_start",l);return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Processing:d.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Progress: "," / ",", messages: "," / ",""])),r.count,a.count,r.message,a.message),n({tag:"InitOfflineQueueSyncProgress",value:r.count});return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Complete:d.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Stats end: "," / ",", messages: "," / ",""])),r.count,a.count,r.message,a.message),o("MAWMIC").addIntAnnotation("offlineQueueDownloadedCount",r.count),n({tag:"InitOfflineQueueSyncProgress",value:a.count}),o("MAWMIC").addPoint("download_offline_queue_end",l);return;case o("WAOfflineUtils").WAClientInfraOfflineProgress.Failed:d.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WA infra offline connection lost"]))),o("MAWMIC").addPoint("download_offline_queue_failed",l);return}}},_=p;l.default=_}),98);
__d("MWWorkerOwnedDbKeychain",["Deferred","MAWCryptoConsts","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s={accountKey:null,databaseEncryptionKeys:new Map,dbReady:new(r("Deferred")),latestVersion:o("MAWCryptoConsts").VERSION},u=babelHelpers.extends({},s),c="uninitialized",d=o("MWFBLogger").MWLogger().tags(["MWWorkerOwnedDbKeychain"]);function m(){return u}function p(t){d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleEARKeyChange"]))),c="initialized",u=t}function _(){return c==="initialized"}function f(){return u.latestVersion}l.getEARKey=m,l.handleEARKeyChange=p,l.isInitialised=_,l.getLatestVersion=f}),98);
__d("MAWSetupBridge",["DTSG","EBDBMetricsConsistencyOperationEnum","EBMainThreadEBDBApiDeferred","LSDatabaseSingleton","LSGetLatestThreadIds.nop","LSInitSyncCompleteSubscription","LSPlatformGraphQLLightspeedRequest","MAWAbPropsClient","MAWBridgeGetMinosEpochDataForUser","MAWBridgeReceivedChatStateHandler","MAWBridgeRunMediaStorageShadowTestHandler","MAWBridgeUIEventHandlerDeferred","MAWBridgeUpdateClientMediaStatusHandler","MAWBridgeWriteMediaStorageHandler","MAWCommonSetupBridge","MAWEBLSInWorkerSwitch","MAWFetchContacts","MAWGetEphemeralSettings","MAWSetupBridgeOfflineConsumer","MAWSetupBridgeOfflineSnapshot","MAWStateManagerSyncToMainThread","MAWUnrecoverableDbErrors","MWWorkerOwnedDbKeychain","Run","Visibility","WAExceededStorageQuota","cr:3411","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("ArmadilloCutoverClientFalcoEvent").__setRef("MAWSetupBridge"),u=r("requireDeferred")("MAWBridgeUpdateDYIStatusV2").__setRef("MAWSetupBridge"),c=(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(o("LSInitSyncCompleteSubscription").use).then(function(){return(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton}),d=function(t){s.loadImmediately(function(e){var n=e.log;return n(function(){return{armadillo_thread_id:t.armadilloThreadId,domain:t.domain,event:t.event,event_details:t.eventDetails,open_thread_id:t.openThreadId,success:t.success,trace_id:t.traceId}})})};function m(t){var a=t.dispatch,l=t.logout,s=t.reregisterDevice,m=t.rotateCryptoAuthToken,p=t.worker;function _(){p.postMessage({type:"force-flush-data"})}return o("Run").onUnload(_),o("Run").onBeforeUnload(_,!1),r("Visibility").addListener(r("Visibility").HIDDEN,function(){p.postMessage({type:"force-flush-logs-only"})}),o("MAWCommonSetupBridge").initBridge({customizeEventHandlers:{abPropsUpdated:function(t){o("MAWAbPropsClient").rewrite(t.abProps)},earKeyChange:function(t){o("MWWorkerOwnedDbKeychain").handleEARKeyChange(t)},executeGraphQLLightSpeedRequest:function(t){var e=t.args;return r("LSPlatformGraphQLLightspeedRequest").apply(void 0,e)},getDTSGToken:function(){return Promise.resolve(o("DTSG").getToken())},getLSDBEphemeralSetting:function(t){return o("MAWGetEphemeralSettings").getEphemeralSetting(t.chatJid)},getLSDBLatestThreadIds:async function(n){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return t.runInTransaction(function(e){return r("LSGetLatestThreadIds.nop")(e,0,"",n.numThreads,n.miActMappingFilteredThreads)},"readonly",void 0,void 0,i.id+":122")},getLSDBUsersIsMsplit:function(t){return o("MAWFetchContacts").fetchContactsIsMsplit(t.users)},getLSDBUsersRelationships:function(t){return o("MAWFetchContacts").fetchContactsRelationships(t.users)},getMediaStorageResult:function(t){return o("MAWBridgeRunMediaStorageShadowTestHandler").fetchMediaStorageResults(t)},getMinosEpochDataForUser:function(){return o("MAWBridgeGetMinosEpochDataForUser").getMinosEpochDataForUser()},isDbMigrating:function(t){a({tag:"IsDbMigrating",value:!1})},logCutoverEvent:d,logout:l,offlineConsumerProgress:function(){return r("MAWSetupBridgeOfflineConsumer")(c,a).apply(void 0,arguments)},offlineSnapshot:r("MAWSetupBridgeOfflineSnapshot")(a),receivedChatState:async function(t){var e=await c;await e.runInTransaction(function(e){return o("MAWBridgeReceivedChatStateHandler").call(e,t)},"readwrite",void 0,void 0,i.id+":158")},reregisterDevice:s,resignCdnUrl:function(){return Promise.resolve()},rotateCryptoAuthToken:m,storageQuota:function(t){var e=t.exceededStorageQuota;o("WAExceededStorageQuota").setExceededStorageQuota(e)},trackEbConsistency:function(t){o("EBMainThreadEBDBApiDeferred").trackConsistency(o("EBDBMetricsConsistencyOperationEnum").EBConsistencyOperation.Upload,t.workerDeviceId)},uiUpdate:function(t){var e=t.events;a&&e.forEach(function(e){return a(e)}),n("cr:3411")==null||n("cr:3411").recordBridgeUIEvent(e),o("MAWBridgeUIEventHandlerDeferred").handleEvents(c,e)},unrecoverableDbError:function(t){var e=t.error;o("MAWUnrecoverableDbErrors").setError(e)},updateDYIStatus:function(t){var e=t.qplEvent,n=t.qplInstanceKeyE2E,o=t.status;r("promiseDone")(u.load().then(function(t){return t.call({qplEvent:e,qplInstanceKeyE2E:n,status:o})}))},updateEBLSInWokerStateInMainThread:function(t){r("MAWEBLSInWorkerSwitch").set(t.ebEnabled)},updateMediaStatus:async function(t){var e=await c;return o("MAWBridgeUpdateClientMediaStatusHandler").call(e,t)},updateStateManagerStateInMainThread:function(t){o("MAWStateManagerSyncToMainThread").updateStateManagerInMainThreadFromBridgeCall(t.stateManagerKey,t.value)},uploadOpenMessages:function(){return Promise.reject("this bridge should not be used for msgr")},writeToMediaStorage:function(t){return o("MAWBridgeWriteMediaStorageHandler").writeToMediaStorage(t)}},worker:p})}l.setupBridge=m}),98);
__d("MAWSetupMutex",["LocalStorageMutex","MAWAppMutex","MAWBridge","MAWInit","MAWIssueNewUserVisibleErrors","MAWLocalStorage","MAWMIC","MAWReinitWorker","MAWSetupWorker","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MWFBLogger","QPLUserFlow","Run","getErrorSafe","isInstamadillo","promiseDone","qpl","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=u.useMemo,p=o("MWFBLogger").MWLogger().tags(["MAWInit"]),_=!1,f=0;async function g(e){if(document.visibilityState!=="visible")return!1;var t=window.indexedDB!=null,n=o("MAWLocalStorage").isLocalStorageAvailable();return e?(p.debug("AppMutex - Shouldn't reinitialize, worker already exists"),!1):!(!t||!n)}function h(t,n){var a=t.logout,i=t.reregisterDevice,l=t.rotateCryptoAuthToken,s=t.setupBridge,u=m(function(){return o("MAWAppMutex").use()},[]),h=(e||(e=r("useReStore")))(),y=h.persistenceTypes.includes("indexeddb"),C=c(async function(e){var t=u.takeoverFilter(e);!t||e.newValue===o("LocalStorageMutex").THIS_TAB||e.newValue===""||(!y&&!r("isInstamadillo")()&&o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"DropAllSecureThreads",value:void 0}]}),await o("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleStoreChange"),o("MAWWaitForBackendSetup").resetBackendSetup(),o("MAWMIC").cancel("workerMutexLost"),o("MAWInit").MAWInit.cancel("workerMutexLost"),u.onMutexDeath())},[u,y]),b=c(function(){u.onMutexDeath(),r("promiseDone")(o("MAWSetupWorker").terminateDedicatedWorker("MAWSetupMutexV2:handleUnload"))},[u]),v=c(async function(){var e=await o("MAWWebWorkerSingleton").doesWorkerExist(),t=await g(e);if(!(!t||_)){_=!0,f++;try{await r("MAWReinitWorker")({allTablesPersisted:y,db:h,dispatch:n,dispatchClearEphemeralSettings:function(){},instanceKey:f,logout:a,reregisterDevice:i,rotateCryptoAuthToken:l,setupBridge:s,workerCreateReason:"mawReinitSetupMutex"}),o("MAWIssueNewUserVisibleErrors").deleteUserVisibleErrorByJSErrorMessage("maw_appmutex_no_permission")}catch(e){var u=r("getErrorSafe")(e);p.catching(u).mustfix("AppMutex - failed to reinitialize worker"),r("QPLUserFlow").endFailure(r("qpl")._(25310984,"169"),"failed_to_reinitialize_worker",{annotations:{string:{error:u.message}},error:u,instanceKey:f})}finally{_=!1}}},[y,h,n,a,i,l,s]);d(function(){window.addEventListener("storage",C);var e=o("Run").onBeforeUnload(b,!1),t=o("Run").onUnload(b);return window.addEventListener("visibilitychange",v),function(){window.removeEventListener("storage",C),e.remove(),t.remove(),window.removeEventListener("visibilitychange",v)}},[C,b,v])}l.useMutex=h}),98);
__d("MAWSetupMutex.react",["MAWSetupMutex"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.dispatch,n=e.platformSetupUtils;return o("MAWSetupMutex").useMutex(n,t),null}l.default=e}),98);
__d("MWChatFetchThreadMessageCounts",[],(function(t,n,r,o,a,i){"use strict";async function e(e){return{}}async function l(e,t){return 0}i.fetchArmadilloThreadMessageCounts=e,i.fetchArmadilloThreadMessageCount=l}),66);
__d("globalCryptoSubtle",[],(function(t,n,r,o,a,i){"use strict";var e=t.crypto.subtle,l=e;i.default=l}),66);
__d("useDataLossStatisticsStorageListener",["LSDatabaseSingleton","MWChatFetchThreadMessageCounts","Visibility","WebStorage","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(s||(s=o("react"))).useEffect,d="armadillo_msgr_data_loss_stats";function m(){var e=o("react-compiler-runtime").c(1),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],c(p,t)}function p(){var e;return window.setTimeout(function(){e=r("Visibility").addListener(r("Visibility").HIDDEN,_)},3e4),function(){var t;(t=e)==null||t.remove()}}function _(){r("promiseDone")((u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(f))}function f(e){return o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(e).then(g)}function g(t){(e||(e=r("WebStorage"))).setItemGuarded(e.getLocalStorage(),d,JSON.stringify(t))}l.DATA_LOSS_STATISTICS_STORAGE_KEY=d,l.useDataLossStatisticsStorageListener=m}),98);
__d("MWChatDataLossCheckerUtil",["FBLogger","I64","MWChatFetchThreadMessageCounts","QuickPerformanceLogger","WebStorage","getErrorSafe","globalCryptoSubtle","promiseDone","qpl","useDataLossStatisticsStorageListener"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){var t=Array.from(new Uint8Array(e));return t.map(function(e){return e.toString(16).padStart(2,"0")}).join("")}async function d(e){try{var t=new TextEncoder,n=t.encode(e).buffer,o=await r("globalCryptoSubtle").digest("SHA-256",n);return c(o)}catch(e){return r("getErrorSafe")(e).message}}async function m(e){var t=e.currentIDBCnt,n=e.currentMsgCnt,o=e.logThreadId,a=e.prevMsgCnt,i=e.qplEvent,l=e.threadId;if(o!=null&&o){var u=await d(l);t!=null?((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_idb_count:t,current_msg_count:n,prev_msg_count:a},string:{encrypted_threadId:u}}),s.markerEnd(i,2)):((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_msg_count:n,prev_msg_count:a},string:{encrypted_threadId:u}}),s.markerEnd(i,2))}else t!=null?((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_idb_count:t,current_msg_count:n,prev_msg_count:a}}),s.markerEnd(i,2)):((s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(i),s.markerAnnotate(i,{int:{current_msg_count:n,prev_msg_count:a}}),s.markerEnd(i,2))}function p(e){var t=e.currentMsgCnt,n=e.logThreadId,r=e.prevMsgCnt,o=e.qplEvent,a=e.threadId;return m({currentMsgCnt:t,logThreadId:n,prevMsgCnt:r,qplEvent:o,threadId:a})}async function _(t,n){try{var a,i=await o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCount(t,n),l=(u||(u=r("WebStorage"))).getAllowlistedKeyFromLocalStorage(o("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(l==null)return{isThreadMissingMessages:!1};var s=JSON.parse(l),c=(a=s[(e||(e=o("I64"))).to_string(n)])!=null?a:null;return c==null?{isThreadMissingMessages:!1}:c>0&&i===0?{currCount:i,isThreadMissingMessages:!0,prevCount:c}:{isThreadMissingMessages:!1}}catch(e){return r("FBLogger")("labyrinth").catching(r("getErrorSafe")(e)).warn("Failed to check for data loss"),{isThreadMissingMessages:!1}}}function f(e){var t=o("MWChatFetchThreadMessageCounts").fetchArmadilloThreadMessageCounts(e);return t.then(function(e){var t=(u||(u=r("WebStorage"))).getAllowlistedKeyFromLocalStorage(o("useDataLossStatisticsStorageListener").DATA_LOSS_STATISTICS_STORAGE_KEY);if(t==null)return Promise.resolve(null);var n=JSON.parse(t);return Promise.resolve({current:e,previous:n})}).then(function(e){if(e==null)return Promise.resolve();var t=e.current,n=e.previous;return g(n,t)}).catch(function(e){return r("FBLogger")("labyrinth").catching(r("getErrorSafe")(e)).warn("Failed to check for data loss")}),t.then(function(){})}async function g(e,t){var n=[];for(var o in e)Object.prototype.hasOwnProperty.call(t,o)&&n.push(o);for(var a=[],i=0;i<n.length;i++){var l=n[i],s={currentMsgCnt:t[l],prevMsgCnt:e[l],threadId:l};e[l]>0&&t[l]===0?(a.push(p(babelHelpers.extends({},s,{qplEvent:r("qpl")._(717553665,"1183")}))),a.push(p(babelHelpers.extends({},s,{logThreadId:!0,qplEvent:r("qpl")._(717562243,"1358")})))):(a.push(p(babelHelpers.extends({},s,{qplEvent:r("qpl")._(717553666,"1184")}))),a.push(p(babelHelpers.extends({},s,{logThreadId:!0,qplEvent:r("qpl")._(717556541,"1361")}))))}await Promise.all(a)}function h(e){var t=function(n){r("promiseDone")(d(n).then(function(t){(s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(r("qpl")._(717567419,"1383")),s.markerAnnotate(r("qpl")._(717567419,"1383"),{string:{encryptedThreadId:t,msg_count:e[n].toString()}}),s.markerEnd(r("qpl")._(717567419,"1383"),2)}))};for(var n in e)t(n)}l.qplLog=p,l.checkIsThreadMissingMessages=_,l.fetchCountsAndLogDataLoss=f,l.logThreadCompleteDataLoss=g,l.logLocalStatistics=h}),98);
__d("useOnMawSetupComplete.react",["emptyFunction","promiseDone","react","waitForMAWMIC"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t,n){t===void 0&&(t=r("emptyFunction")),s(function(){var n=!1;return r("promiseDone")(o("waitForMAWMIC").promise.then(function(){n||e()}).catch(function(){n||t()})),function(){n=!0}},n)}l.useOnMawSetupComplete=u}),98);
__d("useDataLossChecker",["FBLogger","I64","LSDatabaseSingleton","LSFactory","LSScheduleOccamThreadsIntegrityCheckerStoredProcedure","MWChatDataLossCheckerUtil","getErrorSafe","gkx","justknobx","promiseDone","react-compiler-runtime","useDataLossStatisticsStorageListener","useOnMawSetupComplete.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){var e=o("react-compiler-runtime").c(2);o("useDataLossStatisticsStorageListener").useDataLossStatisticsStorageListener();var t,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=m(),n=[],e[0]=t,e[1]=n):(t=e[0],n=e[1]),o("useOnMawSetupComplete.react").useOnMawSetupComplete(c,t,n)}function c(){r("promiseDone")(d()),m()}async function d(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;await o("MWChatDataLossCheckerUtil").fetchCountsAndLogDataLoss(t)}function m(){try{var t=r("gkx")("24061"),n=r("justknobx")._("1683");t&&n&&r("promiseDone")((async function(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return t.runInTransaction(function(e){return r("LSScheduleOccamThreadsIntegrityCheckerStoredProcedure")(r("LSFactory")(e),{delayMs:(s||(s=o("I64"))).of_int32(6e4),maxThreadCount:s.of_int32(20)})},"readonly",void 0,void 0,i.id+":62")})())}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").warn("Error running thread integrity checker",a.message)}}l.default=u}),98);
__d("useLegacyUserWatchdog",["MAWIssueNewUserVisibleErrors","clearTimeout","react","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=1440*60*1e3,c=5*u;function d(){s(m,void 0)}function m(){var e=r("setTimeout")(p,c);return function(){return r("clearTimeout")(e)}}function p(){var e;(e=o("MAWIssueNewUserVisibleErrors")).issueError(e.MAWLegacyUserErrorMsgBody,e.MAWLegacyUserErrorMsgTitle,e.MAWUserVisibleErrorPresentationType.BANNER)}l.default=d}),98);
__d("useMAWReregisterDeviceOnError",["FBLogger","LSPersistedDbGating","MAWEBSwitch","MAWIssueNewUserVisibleErrors","MAWLoggerUtils","MAWReinitWorker","MAWSetupWorker","MAWStateContext.react","MAWWaitForBackendSetup","MWEncryptedBackupsInitializeRestoreDeferred","ODS","WAOdsEnums","WMIWABridgeApi","emptyFunction","getErrorSafe","promiseDone","react","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useCallback,m=c.useContext,p=!1,_=typeof window!="undefined"?window:self;function f(){p=!0,r("promiseDone")(o("MAWSetupWorker").terminateWorkerPermanently(),function(){(u||(u=o("ODS"))).bumpEntityKey(3185,"armadillo_forced_reregister_fail",_.location.hostname),u.bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reregister_fail_logout"),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)})}function g(t){var n=t.rotateCryptoAuthToken,a=t.setupBridge,i=r("useAsyncReStore")(),l=m(o("MAWStateContext.react").MAWDispatchContext);return d(async function(){if(!p){(u||(u=o("ODS"))).bumpEntityKey(3185,"armadillo_forced_deregister",_.location.hostname),await r("WMIWABridgeApi").removeCurrentDevice(),await o("MAWSetupWorker").terminateWorker("useMAWReregisterDeviceOnError"),o("MAWWaitForBackendSetup").resetBackendSetup();try{var t=await i;(u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker"),await r("MAWReinitWorker")({allTablesPersisted:o("LSPersistedDbGating").allTablesPersisted,db:t,dispatch:l,dispatchClearEphemeralSettings:function(){},logout:f,reregisterDevice:f,rotateCryptoAuthToken:n,setupBridge:a,workerCreateReason:"mawReinitReregDevice"}),r("MAWEBSwitch").isEnabled()&&((u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"eb_initial_restore"),await o("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:t,onFailure:r("emptyFunction"),onSuccess:r("emptyFunction")}))}catch(t){var s,c=r("getErrorSafe")(t);o("MAWWaitForBackendSetup").rejectBackendSetup(c);var d=c.message;r("FBLogger")("wmi_wa").tags([(s=o("MAWLoggerUtils")).Tag.DeviceRegistration,s.Tag.LogoutHandler,s.Tag.WorkerSetup,s.Tag.MAWWorker,s.Tag.MAWInit]).catching(c).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to reinit worker: ",""])),d),(u||(u=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WA_REREGISTRATION,"reinit_worker_fail.${message}"),o("MAWIssueNewUserVisibleErrors").issueError(o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgBody,o("MAWIssueNewUserVisibleErrors").MAWLegacyUserErrorMsgTitle,o("MAWIssueNewUserVisibleErrors").MAWUserVisibleErrorPresentationType.BANNER)}}},[i,l,n,a])}l.default=g}),98);
__d("useStorageUsageMetricsLogger",["cr:20551","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(){var e=o("react-compiler-runtime").c(1),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],s(c,t)}function c(){n("cr:20551")==null||n("cr:20551").logMAWDBUsageMetrics()}l.default=u}),98);
__d("MAWSetupImpl.react",["BaseHeadingContext","CometRelay","MAWCommonSetup","MAWCryptoAuthToken","MAWSetupMutex.react","MAWStateContext.react","cr:6159","cr:6160","cr:8800","promiseDone","react","react-compiler-runtime","shouldUseMAWSharedWorker","useDataLossChecker","useLegacyUserWatchdog","useMAWReregisterDeviceOnError","useStorageUsageMetricsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useMemo;window.XPlatTesting=n("cr:6159"),window.XPlatTestingGroups=n("cr:6160"),window.XPlatMockServer=n("cr:8800");function p(e){var t=o("react-compiler-runtime").c(24),n=e.children,a=e.fbid,i=e.logout,l=e.setupBridge,u=d(o("MAWStateContext.react").MAWDispatchContext),c=o("CometRelay").useRelayEnvironment(),m;t[0]!==c?(m=function(){return o("MAWCryptoAuthToken").fetchFreshCAT(c)},t[0]=c,t[1]=m):m=t[1];var p=m,_;t[2]!==p||t[3]!==l?(_={rotateCryptoAuthToken:p,setupBridge:l},t[2]=p,t[3]=l,t[4]=_):_=t[4];var f=r("useMAWReregisterDeviceOnError")(_),g,h;t[5]!==i||t[6]!==f?(h=i!=null?i:function(){return r("promiseDone")(f())},t[5]=i,t[6]=f,t[7]=h):h=t[7];var y;t[8]!==f?(y=function(){return r("promiseDone")(f())},t[8]=f,t[9]=y):y=t[9];var C;t[10]!==p||t[11]!==l||t[12]!==h||t[13]!==y?(C={logout:h,reregisterDevice:y,rotateCryptoAuthToken:p,setupBridge:l},t[10]=p,t[11]=l,t[12]=h,t[13]=y,t[14]=C):C=t[14],g=C;var b=g;o("MAWCommonSetup").useArmadillo(b),r("useLegacyUserWatchdog")(),r("useDataLossChecker")(),r("useStorageUsageMetricsLogger")();var v=d(r("BaseHeadingContext")),S=!o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),R=v+1,L;t[15]!==u||t[16]!==c||t[17]!==a||t[18]!==b?(L=S?s.jsx(r("MAWSetupMutex.react"),{dispatch:u,environment:c,fbId:a,platformSetupUtils:b}):null,t[15]=u,t[16]=c,t[17]=a,t[18]=b,t[19]=L):L=t[19];var E;return t[20]!==n||t[21]!==R||t[22]!==L?(E=s.jsxs(r("BaseHeadingContext").Provider,{value:R,children:[n,L]}),t[20]=n,t[21]=R,t[22]=L,t[23]=E):E=t[23],E}l.default=p}),98);
__d("MAWSetup.react",["CometPlaceholder.react","CometRelay","CurrentUser","MAWMainThreadEBDeps","MAWOembedIframeContainer.react","MAWSetupBridge","MAWSetupImpl.react","cr:6809","cr:8510","deferredLoadComponent","isGroupInvitesEnabled","promiseDone","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect,c=n("cr:6809")!=null?n("cr:6809").CometLogoutProvider:function(e){var t=e.children;return s.jsx(s.Fragment,{children:t})},d=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MAWLoadingStateSpinner.react").__setRef("MAWSetup.react"));r("isGroupInvitesEnabled")();function m(e){var t=o("react-compiler-runtime").c(10),a=e.children,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[0]=i):i=t[0],u(p,i);var l=o("CometRelay").useRelayEnvironment(),m,_;t[1]!==l?(m=function(){n("cr:8510")&&r("promiseDone")(n("cr:8510").initOhaiWebClient(l))},_=[l],t[1]=l,t[2]=m,t[3]=_):(m=t[2],_=t[3]),u(m,_),o("MAWMainThreadEBDeps").initEBDeps();var f;t[4]===Symbol.for("react.memo_cache_sentinel")?(f=r("CurrentUser").getID(),t[4]=f):f=t[4];var g;t[5]!==a?(g=s.jsx(r("MAWSetupImpl.react"),{fbid:f,logout:void 0,setupBridge:o("MAWSetupBridge").setupBridge,children:a}),t[5]=a,t[6]=g):g=t[6];var h;t[7]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MAWSetup.LoadingState",children:s.jsx(d,{})}),t[7]=h):h=t[7];var y;return t[8]!==g?(y=s.jsxs(c,{children:[g,h]}),t[8]=g,t[9]=y):y=t[9],y}function p(){var e=o("MAWOembedIframeContainer.react").createMAWOembedIframeContainer();return function(){e==null||e.stopListening()}}l.default=m}),98);
__d("QPLE2ESessionMarkers",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NONE:"none",START:"start",END:"end"}),l=e;i.default=l}),66);
__d("QPLE2E",["QuickPerformanceLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){}var n=t.prototype;return n.logPointDeprecated=function(n,o,a,i){var t,l,s,u;i===void 0&&(i={});var c=(t=i.timestamp)!=null?t:(e||(e=r("QuickPerformanceLogger"))).currentTimestamp(),d=babelHelpers.extends({},i.pointData),m=(l=i.action)!=null?l:12524;if(i.secondaryOrder!=null&&(d.string||(d.string={}),d.string.qpl_e2e__secondary_order=i.secondaryOrder),i.sessionMarker&&i.sessionMarker!=="none"){var p;d.bool||(d.bool={}),d.bool=babelHelpers.extends({},d.bool,(p={},p.qpl_e2e__session_marker_start_point=i.sessionMarker==="start",p.qpl_e2e__session_marker_end_point=i.sessionMarker==="end",p))}(e||(e=r("QuickPerformanceLogger"))).markerStart(n,void 0,c,{samplingBasis:a}),e.markerPoint(n,o,{data:d,timestamp:c*2}),i.annotations&&(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(n,i.annotations),e.markerAnnotate(n,{string:(s={},s.join_id=a,s.qpl__source="client",s),bool:(u={},u.qpl_e2e__align_points=!0,u)}),e.markerEnd(n,m,void 0,c)},t})(),u=new s;l.default=u}),98);
__d("MWCMChatTabNotificationsQPLLoggingUtils",["QPLE2E","QPLUserFlow","Random","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(25298296,"1725"),s=r("qpl")._(25304846,"1726");function u(){var t=o("Random").uint32();return{logCancel:function(n){r("QPLUserFlow").endCancel(s,{annotations:{string:{cancelReason:n}},instanceKey:t})},logEventStreamReceived:function(o){o!=null&&r("QPLE2E").logPointDeprecated(e,"client:receive_event_stream",o,{action:2}),r("QPLUserFlow").start(s,{instanceKey:t})},logOpenChatTab:function(){r("QPLUserFlow").addPoint(s,"open_chat_tab",{instanceKey:t})},logOpenChatTabSuccess:function(){r("QPLUserFlow").endSuccess(s,{instanceKey:t})},logThreadLoaded:function(){r("QPLUserFlow").addPoint(s,"thread_loaded",{instanceKey:t})}}}l.createChatTabQPLLogger=u}),98);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],t=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recent_unread_count_with_e2ee",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatBadgeCountQuery",selections:t},params:{id:"9649973961748511",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("useMWJewelStartLoadingLogger",["CometBlendedInitialLoadTraceLog","qpl","react","react-compiler-runtime","useCometInteractionTracing"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState,m=r("qpl")._(30616158,"2565");function p(){var e=o("react-compiler-runtime").c(3),t=c(!1),n=d(),a=n[0],i=n[1],l=r("useCometInteractionTracing")(m,"slower","INTERACTION"),s,p;return e[0]!==l?(s=function(){t.current||(t.current=!0,l(function(e){r("CometBlendedInitialLoadTraceLog").logStart("mwj_badge",e.getInstanceKey(),e.getTrace()),i(e.getTraceId()),e.onVcMetricsComplete(function(t,n){r("CometBlendedInitialLoadTraceLog").logVc("mwj_badge",e.getInstanceKey(),t,n)}),e.onLog(_)},0))},p=[l],e[0]=l,e[1]=s,e[2]=p):(s=e[1],p=e[2]),u(s,p),a}function _(e,t){r("CometBlendedInitialLoadTraceLog").log("mwj_badge",t)}l.default=p}),98);
__d("useMWJewelStopLoadingLogger",["QPLEvent","interaction-tracing","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=r("qpl")._(30616158,"2565");function d(e,t,n){var a=o("react-compiler-runtime").c(5),i,l;a[0]!==t||a[1]!==e||a[2]!==n?(i=function(){n||r("interaction-tracing").InteractionTracingCore.getPendingInteractions().forEach(function(n){var r,a=n.getTrace();((r=a==null?void 0:a.completed)!=null?r:0)>0||n.getQPLEventMarkerId()===(s||(s=o("QPLEvent"))).getMarkerId(c)&&(n.addAnnotationInt("badgeCount",e),n.addAnnotationInt("badgeUnreadCount",t),e===0&&n.forceCompleteTrace())})},l=[n,e,t],a[0]=t,a[1]=e,a[2]=n,a[3]=i,a[4]=l):(i=a[3],l=a[4]),u(i,l)}l.default=d}),98);
__d("MWChatBadgeCount.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","CometRelay","FDSNumberedBadge.react","HeroInteractionIgnoreWithDiv.react","MWChatBadgeCountQuery.graphql","MWChatBadgeCountUpdates.react","hero-tracing","react","react-compiler-runtime","useMWJewelStartLoadingLogger","useMWJewelStopLoadingLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useEffect,p=d.useRef;function _(t){var a,i,l=o("react-compiler-runtime").c(12),u=t.overflow,d=t.setBadgeCount,_=o("CometRelay").useLazyLoadQuery(e!==void 0?e:e=n("MWChatBadgeCountQuery.graphql"),{suppress_xac_groups:!1},{fetchPolicy:"store-or-network"}),f=((a=_.viewer)==null||(a=a.message_threads)==null?void 0:a.is_loading_client_threads)!==!1,g=(i=_.viewer)==null?void 0:i.message_threads,h=g!=null&&g.unseen_count!=null&&g.unseen_count>0?Math.min(o("MWChatBadgeCountUpdates.react").minSyncedThreads,g.unseen_count):0,y=g!=null&&g.recent_unread_count_with_e2ee!=null&&g.recent_unread_count_with_e2ee>0?Math.min(o("MWChatBadgeCountUpdates.react").minSyncedThreads,g.recent_unread_count_with_e2ee):0,C=p(null),b,v;l[0]!==h||l[1]!==d?(b=function(){d&&C.current!==h&&(C.current=h,d(h))},v=[h,d],l[0]=h,l[1]=d,l[2]=b,l[3]=v):(b=l[2],v=l[3]),m(b,v),r("useMWJewelStopLoadingLogger")(h,y,f);var S;l[4]!==h||l[5]!==u?(S=h>0?c.jsx(r("FDSNumberedBadge.react"),{accessibilityText:s._(/*BTDS*/"{count} Unread Chats",[s._param("count",h)]),overflow:u,testid:void 0,value:h,vcIgnore:!0}):null,l[4]=h,l[5]=u,l[6]=S):S=l[6];var R;l[7]!==f?(R=c.jsx(r("CometHeroHoldTrigger.react"),{description:"MessengerBadgeLoadingHold",hold:f}),l[7]=f,l[8]=R):R=l[8];var L;return l[9]!==S||l[10]!==R?(L=c.jsxs(c.Fragment,{children:[S,R]}),l[9]=S,l[10]=R,l[11]=L):L=l[11],L}function f(e){var t=o("react-compiler-runtime").c(7),n=e.overflow,a=e.setBadgeCount,i=r("useMWJewelStartLoadingLogger")(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("span",{}),t[0]=l):l=t[0];var s;t[1]!==n||t[2]!==a?(s=c.jsx(r("CometPlaceholder.react"),{fallback:l,name:"MWChatBadgeCount",children:c.jsx(_,{overflow:n,setBadgeCount:a})}),t[1]=n,t[2]=a,t[3]=s):s=t[3];var u;return t[4]!==i||t[5]!==s?(u=c.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:c.jsx(o("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MSGR_JEWEL_BADGE",interactionUUID:i,pageletName:"MessengerJewelBadge",children:s})}),t[4]=i,t[5]=s,t[6]=u):u=t[6],u}l.default=f}),226);
__d("MWChatBadgeCountUpdater.react",["CometRelay","FBLogger","LSIntEnum","MWChatBadgeCountUpdates.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect;function c(){var e=o("react-compiler-runtime").c(6),t=o("CometRelay").useRelayEnvironment(),n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(s||(s=o("LSIntEnum"))).ofNumber(0),e[0]=n):n=e[0];var a=o("MWChatBadgeCountUpdates.react").useUnseenThreadCount(n),i=a==null,l,c;return e[1]!==a||e[2]!==t||e[3]!==i?(l=function(){var e={suppress_xac_groups:!1};t.commitUpdate(function(t){var n=t.getRoot();if(n==null){r("FBLogger")("messenger_web_entrypoints").mustfix("A store root must be present to move forward.");return}var o=n.getOrCreateLinkedRecord("viewer","Viewer"),l=o.getOrCreateLinkedRecord("message_threads","ViewerMessageThreadsConnection");if(a!=null){var s=l.getValue("unseen_count",e);(s===null||s!==a)&&l.setValue(a,"unseen_count",e)}var u=l.getValue("is_loading_client_threads");(u==null||u!==i)&&l.setValue(i,"is_loading_client_threads")})},c=[t,a,i],e[1]=a,e[2]=t,e[3]=i,e[4]=l,e[5]=c):(l=e[4],c=e[5]),u(l,c),null}l.default=c}),98);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","ExecutionEnvironment","FBLogger","cr:4562","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(e){var t=r("FBLogger")("messenger_web_entrypoints");e!=null&&(t=t.catching(e)),t.debug("Error loading MWChatBadgeCountUpdater")}function d(){var t=o("react-compiler-runtime").c(1),a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(e||(e=r("ExecutionEnvironment"))).canUseDOM?u.jsx(r("CometErrorBoundary.react"),{onError:c,children:n("cr:4562")&&u.jsx(n("cr:4562"),{})}):null,t[0]=a):a=t[0],a}l.default=d}),98);
__d("MWChatConfig",["CurrentEnvironment","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273041")):r("bx").getURL(r("bx")("273022")),s=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273042")):r("bx").getURL(r("bx")("273023"));l.soundNotifMp3Url=e,l.soundNotifOggUrl=s}),98);
__d("MWChatHeadError.react",["fbt","CometHeroFailTrigger.react","CometHeroInteractionWithDiv.react","FDSCautionTriangleFilled24Icon","MWChatInteraction","MWXIcon_DEPRECATED.react","MWXPressable.react","MWXTooltip.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",$$css:!0},dropShadow:{boxShadow:"x1qeybcx",":hover_boxShadow":"x19xcq9t",$$css:!0}},d=s._(/*BTDS*/"Something went wrong while loading chat");function m(e){var t=o("react-compiler-runtime").c(7),n=e.contextRef,a=e.onPress,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("MWChatInteraction").get(o("MWChatInteraction").MW_CHATHEADS_LOAD),l=u.jsx(r("CometHeroFailTrigger.react"),{description:"Error while loading chatheads",fail:!0}),t[0]=i,t[1]=l):(i=t[0],l=t[1]);var s=a==null,c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=u.jsx(r("MWXIcon_DEPRECATED.react"),{icon:r("FDSCautionTriangleFilled24Icon")}),t[2]=c):c=t[2];var m;return t[3]!==n||t[4]!==a||t[5]!==s?(m=u.jsxs(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load to chatheads VC",interactionUUID:i,children:[l,u.jsx(r("MWXTooltip.react"),{align:"end",position:"above",tooltip:d,children:u.jsx(r("MWXPressable.react"),{"aria-label":d,disabled:s,display:"inline",onPress:a,ref:n,xstyle:p,children:c})})]}),t[3]=n,t[4]=a,t[5]=s,t[6]=m):m=t[6],m}function p(e){return[c.compose,c.dropShadow]}l.default=m}),226);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","react-compiler-runtime","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.contextRef,a=e.onPress,i=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=i?s.jsx("div",{className:"x1ey2m1c xtijo5x xixxii4",children:s.jsx("div",{className:"x191j7n5 xdg88n9 x10l6tqk",children:s.jsx(r("MWChatHeadError.react"),{contextRef:n,onPress:a})})}):null,t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=u}),98);
__d("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react",["CometErrorBoundary.react","CometPlaceholder.react","HeroInteractionIgnoreWithDiv.react","deferredLoadComponent","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferred")("MWChatEncryptedBackupsHandleRestoreWrapper.react").__setRef("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"));function c(e){return s.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return null},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"EncryptedBackupsHandleRestoreWrapper",children:s.jsx(u,babelHelpers.extends({},e))})})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWChatStateV2IsComposeTab",["MWChatStateV2Types"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.tabType;return t.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab}l.isComposeTab=e}),98);
__d("MWChatStateV2HeadGroups",["MWChatStateV2CompareTabs","MWChatStateV2IsComposeTab","MWChatStateV2IsMinimized"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=Array.from(n.values()).filter(function(t){return o("MWChatStateV2IsMinimized").isMinimized(e,t)}).sort(function(e,t){var n=o("MWChatStateV2CompareTabs").byMostRecentMinimized(e,t);return n===0?o("MWChatStateV2CompareTabs").byMostRecentOpened(e,t):n}),i=t.filter(function(e){return!o("MWChatStateV2IsComposeTab").isComposeTab(e)}).concat(a);return[i.slice(0,r),i.slice(r,i.length)]}l.getHeadGroups=e}),98);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23885219097739619"}),null);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql",["MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatTabsNotificationSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_tabs_notification_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"qpl_join_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t},params:{id:n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_tabs_notification_subscribe"},name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("MWChatTabsNotificationSubscription",["CometRelay","MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql");function u(e,t){return o("CometRelay").requestSubscription(e,{onNext:t,subscription:s,variables:{input:{}}})}l.subscribe=u}),98);
__d("MWChatThreadPingCounter",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n=e.get(t);return n!=null?n:0}function s(t){e.set(t,l(t)+1)}function u(){e.clear()}i.getCount=l,i.incrementCount=s,i.clear=u}),66);
__d("MWFallbackWithTimeout.react",["FBLogger","react","react-compiler-runtime","useTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=o("react-compiler-runtime").c(4),n=e.children,a=e.message,i=r("useTimeout")(1e4),l=i.pending,s,c;return t[0]!==a||t[1]!==l?(s=function(){l||r("FBLogger")("messenger_web_entrypoints","fallback_timeout").warn(a)},c=[a,l],t[0]=a,t[1]=l,t[2]=s,t[3]=c):(s=t[2],c=t[3]),u(s,c),n}l.default=c}),98);
__d("MWGetCurrentThreadIDForLSThread",["FBLogger","I64","LSIntEnum","mwCMIsAnyCMThread"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(a)return{NAME:"Page",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(7))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(16)))return{NAME:"UserSecret",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(13))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(201)))return{NAME:"User",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(5))||r("mwCMIsAnyCMThread")(n)||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(150))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(151))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(154))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(155))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(152))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(153))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(26)))return{NAME:"Group",VAL:(e||(e=o("I64"))).to_string(t)};throw r("FBLogger")("messenger_web_messaging").mustfixThrow("Unsupported MWMessagingThreadType %s",(e||(e=o("I64"))).to_string(n))}l.get=u}),98);
__d("MWNotificationRenderer.react",["fbt","I64","LSIntEnum"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(t,n,r,a,i){var l,c;if((e||(e=o("I64"))).equal(t.senderId,n))return s._(/*BTDS*/"New message");var d=(l=(c=i.nickname)!=null?c:a.firstName)!=null?l:a.name,m=r.threadName;return m!=null?s._(/*BTDS*/"{senderName} messaged {groupName}",[s._param("senderName",d),s._param("groupName",m)]):(e||(e=o("I64"))).equal(r.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))?s._(/*BTDS*/"{name} messaged your group",[s._param("name",d)]):s._(/*BTDS*/"{name} messaged you",[s._param("name",d)])}l.renderDocumentTitle=c}),226);
__d("MWLSChatPopperCommon",["CometSetBlinkingTitleMessageContext","CurrentEnvironment","CurrentUser","I64","MWChatConfig","MWChatSettingsQuery","MWNotificationRenderer.react","MWPIsThreadUnread","MessengerWebEventsFalcoEvent","ReQL","gkx","react","requireDeferred","useCometRouterState","useMWShowOpenInMessengerToast","useMatchViewport"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=r("requireDeferred")("Sound").__setRef("MWLSChatPopperCommon");function p(e){var t=(s||(s=o("I64"))).to_string(e.senderId)!==r("CurrentUser").getID();t&&m.onReady(function(t){t.play([o("MWChatConfig").soundNotifOggUrl,o("MWChatConfig").soundNotifMp3Url],(s||(s=o("I64"))).to_float(e.timestampMs),!1)})}function _(e,t,n){var a,i=d(r("CometSetBlinkingTitleMessageContext")),l=r("useMatchViewport")("max","width",320),u=r("useCometRouterState")(),m=u==null||(a=u.main)==null?void 0:a.route,p=(m==null?void 0:m.tabKey)==="messenger",_=r("useMWShowOpenInMessengerToast")();return c(function(a,u,c,d){var m=o("MWNotificationRenderer.react").renderDocumentTitle(a,t,u,c,d);l&&r("CurrentEnvironment").facebookdotcom&&!p&&r("gkx")("15812")&&_((s||(s=o("I64"))).to_string(u.threadKey),m),n.contents!=null&&n.contents(),n.contents=o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(u.threadKey).subscribe(function(e,t){if(t.operation==="add"||t.operation==="put"){var r=t.value;if(o("MWPIsThreadUnread").isThreadUnread(r))return;n.contents!=null&&n.contents(),n.contents=void 0,i(null,(s||(s=o("I64"))).to_float(r.lastReadWatermarkTimestampMs))}}),i(m,(s||(s=o("I64"))).to_float(a.timestampMs))},[t,l,p,n,e.tables.threads,i,_])}function f(e){o("MWChatSettingsQuery").areChatTabsSoundsOn(function(t){if(t!=null&&t)return p(e);r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message_sound"}})})}l.useUpdateDocumentTitle=_,l.playChatTabSound=f}),98);
__d("MWLSChatTabPolicy",["$InternalEnum","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWCMThreadTypes.react","MWChatSettingsQuery","MWGenAIUtils","MessagingFolderTag","MessengerWebEventsFalcoEvent","emptyFunction","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({ALLOW:0,DENY:1});function c(e,t,n){if(n===u.ALLOW)return e(t)}var d=function(t){return r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message",extra_data:{reason:t}}})},m=function(t){t(u.ALLOW)},p=function(n,r,a){(e||(e=o("I64"))).equal(r.senderId,a)?(d("message_outgoing"),n(u.DENY)):n(u.ALLOW)},_=function(t,n,a){if(r("gkx")("23433"))t(u.ALLOW);else{o("MWChatSettingsQuery").areChatTabsTurnedOff(function(e){e!=null&&e?(d("turn_off_chat_tab"),n!=null&&o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)&&a!=null&&a.logCancel("turn_off_chat_tab"),t(u.DENY)):t(u.ALLOW)});return}},f=function(n,r,a){var t=(e||(e=o("I64"))).to_float(r.muteExpireTimeMs);t>Date.now()||t<0?(d("mention_muted"),o("MWCMThreadTypes.react").isJoinedCMThread(r.threadType)&&a!=null&&a.logCancel("mention_muted"),n(u.DENY)):n(u.ALLOW)},g=function(t,n){n.isAdminMessage?(d("message_non_user_generated"),t(u.DENY)):t(u.ALLOW)},h=function(n,a){a.folderName===r("MessagingFolderTag").INBOX||(e||(e=o("I64"))).equal(a.parentThreadKey,(s||(s=o("LSIntEnum"))).ofNumber(-10))?n(u.ALLOW):(d("message_no_inbox"),n(u.DENY))},y=function(n,a){(e||(e=o("I64"))).equal(a.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))?n(u.ALLOW):(d("message_blocked_participants"),n(u.DENY))},C=function(t,n){o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)?(d("community_messaging_group_blocked"),t(u.DENY)):t(u.ALLOW)},b=function(t,n){var e=n.mentionTypes;e!=null&&"s".includes(e)?t(u.DENY):t(u.ALLOW)},v=function(t,n){r("gkx")("23433")&&n?t(u.DENY):t(u.ALLOW)},S=function(t,n){o("MWGenAIUtils").isMetaAIThread(n.threadKey)&&r("qex")._("4970")===!0?t(u.DENY):t(u.ALLOW)},R=function(t,n){if(t.length===0)return function(e){return c(n,r("emptyFunction"),e)};var e=t[0],o=babelHelpers.arrayLikeToArray(t).slice(1);return function(t){return c(e,R(o,n),t)}},L=function(t,n){var e=t[0],r=babelHelpers.arrayLikeToArray(t).slice(1);e(R(r,n))};function E(e,t,n,r,o,a){return L([function(){return m.apply(void 0,arguments)},function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return p.apply(void 0,n.concat([e,r]))},function(){return _.apply(void 0,arguments)},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return f.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h.apply(void 0,n.concat([t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.apply(void 0,t.concat([n]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return C.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,t.concat([o]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S.apply(void 0,n.concat([e]))}],a)}function k(e,t,n,r){return L([function(){return m.apply(void 0,arguments)},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _.apply(void 0,r.concat([e,t]))},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return f.apply(void 0,r.concat([e,t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v.apply(void 0,t.concat([n]))}],r)}l.shouldMessageBeAllowed=E,l.shouldCommunityChatThreadPopup=k}),98);
__d("useMWChatOpenTabFromNewMessage",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionStore","MAWPreloadSecureMessagesDeferred","MAWStateContext.react","MWChatInteraction","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","MWChatStateV2IsClosed","MWChatStateV2Types","MWChatThreadId","MessengerWebEventsFalcoEvent","ODS","dispatchOpenChatTabTraceLogging","gkx","justknobx","loadChatTabEntryPoint","react","setTimeout","useAsyncReStore","useCometFeedNoRoutingNavigationEventLogger","useCometRelayEntrypointContextualEnvironmentProvider","useLazyShouldShowMessagingEntrypointInCometRoot","useMWChatOpenTabTraceProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=e||(e=o("react")),m=d.useCallback,p=d.useContext,_=new Set;function f(e,t){var n=t.withChatTabTracing,a=n===void 0?!1:n,i=r("useCometFeedNoRoutingNavigationEventLogger")(),l=o("MWChatStateV2.react").useDispatch(),d=r("useMWChatOpenTabTraceProvider")(),f=o("MWChatStateContext").useChatState(function(e){return e.tabs}),g=r("useLazyShouldShowMessagingEntrypointInCometRoot")("CHAT"),h=r("useCometRelayEntrypointContextualEnvironmentProvider")(),y=p(o("MAWStateContext.react").MAWDispatchContext),C=r("useAsyncReStore")();return m(function(t,n,m){i(Date.now(),"","messenger"),(s||(s=o("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_incoming"),r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"open_chat_tab_from_new_message"}}),o("LSThreadAttributionStore").setSource(o("MWChatThreadId").getFBID(t),e);var p=Date.now();if(o("LSMessagingThreadTypeUtil").isArmadilloSecure(n.threadType)){var b=r("gkx")("14315")?8:r("justknobx")._("2038");C.then(function(e){return o("MAWPreloadSecureMessagesDeferred").preloadSecureMessagesByThreadKey(e,n.threadKey,y,b)})}var v=function(t){var e={clientThreadKey:void 0,threadKey:n.threadKey,threadType:n.threadType},a=r("loadChatTabEntryPoint")(h);r("dispatchOpenChatTabTraceLogging")(t,e,"useMWChatOpenTabFromNewMessage"),l(o("MWChatStateActions").openTabOrFlyout(p,{shouldFocus:!1},{threadKeyDescriptor:e,type:o("MWChatStateV2Types").MWChatStateTabType.ChatTab},a),!r("gkx")("24037"))},S=n.threadKey,R=Array.from(f.values()).find(function(e){if(e.tabType.type===o("MWChatStateV2Types").MWChatStateTabType.ChatTab){var t=e.tabType.threadKeyDescriptor.threadKey;return(u||(u=o("I64"))).equal(S,t)}}),L=R!=null?o("MWChatStateV2IsClosed").isClosed(R):!1,E=_.has((u||(u=o("I64"))).to_string(S)),k=a&&(R==null&&!E||R!=null&&L)&&g();return k?(_.add((u||(u=o("I64"))).to_string(S)),d({entrypoint:"notificationInThreadReply",threadKey:n.threadKey,threadType:(c||(c=o("LSIntEnum"))).unwrapIntEnum(n.threadType)},function(e,t){o("MWChatInteraction").set((u||(u=o("I64"))).to_string(n.threadKey),e),t.onComplete(function(){_.delete((u||(u=o("I64"))).to_string(S))}),v(t)})):v(),r("setTimeout")(function(){return l(o("MWChatStateActions").closeFlyout(p,n.threadKey))},3e3),m()},[i,e,f,a,l,d,g])}l.default=f}),98);
__d("MWLSCommunityChatPopper",["CometRelay","GroupsCometChatsEngagementLogger","I64","MWCMChatTabNotificationsQPLLoggingUtils","MWChatTabsNotificationSubscription","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MercuryIDs","ReQL","promiseDone","react","react-compiler-runtime","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useEffect,m={contents:void 0};function p(e,t){var n=o("MWLSChatPopperCommon").useUpdateDocumentTitle(e,t,m),a=c(function(t){r("promiseDone")(window.Promise.all([e.tables.threads.get(t.threadKey),e.tables.contacts.get(t.senderId),e.tables.participants.get(t.threadKey,t.senderId)]),function(e){var a=e[0],i=e[1],l=e[2];if(i!=null&&l!=null){n(t,a,i,l);var u=r("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(a.threadKey));if(o("MWChatThreadPingCounter").getCount(u)<3){o("MWChatThreadPingCounter").incrementCount(u),o("MWLSChatPopperCommon").playChatTabSound(t);return}}})},[e,n]);return c(function(t,n,i){var l={contents:function(){}};l.contents=o("ReQL").fromTableAscending(e.tables.messages).getKeyRange((s||(s=o("I64"))).of_string(t),s.of_string(i),n).subscribe(function(e,t){if(t.operation==="add"){var n=t.value;l.contents(),a(n)}}),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.messages).getKeyRange(s.of_string(t),s.of_string(i),n)),function(e){e&&(l.contents(),a(e))})},[e,a])}function _(e){var t=o("react-compiler-runtime").c(9),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),m=r("CometRelay").useRelayEnvironment(),_=p(n,c),f=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),g=f.familyCenterData,h,y;t[2]!==m||t[3]!==g.hasActiveMsgrFamilyCenterEnforcement||t[4]!==u||t[5]!==n||t[6]!==_?(h=function(){var e=o("MWChatTabsNotificationSubscription").subscribe(m,function(e){var t=(e==null?void 0:e.messenger_chat_tabs_notification_subscribe)||{},a=t.message_id,i=t.message_timestamp,l=t.qpl_join_id,c=t.thread_id;if(!(c==null||i==null||a==null)){var d=o("MWCMChatTabNotificationsQPLLoggingUtils").createChatTabQPLLogger();d.logEventStreamReceived(l),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(c))),function(e){e!=null&&(d.logThreadLoaded(),o("MWLSChatTabPolicy").shouldCommunityChatThreadPopup(e,d,g.hasActiveMsgrFamilyCenterEnforcement,function(){var t=o("MWGetCurrentThreadIDForLSThread").get(e.threadKey,e.threadType,!1);d.logOpenChatTab(),u(t,e,function(){d.logOpenChatTabSuccess(),o("GroupsCometChatsEngagementLogger").log({action:"impression",event:"thread_open_auto",source:"auto_open_chat_tabs",surface:"auto_open_chat_tabs_container",thread_id:(s||(s=o("I64"))).to_string(e.threadKey)}),_(c,a,i)})}))})}});return function(){e.dispose()}},y=[m,n,u,_,g.hasActiveMsgrFamilyCenterEnforcement],t[2]=m,t[3]=g.hasActiveMsgrFamilyCenterEnforcement,t[4]=u,t[5]=n,t[6]=_,t[7]=h,t[8]=y):(h=t[7],y=t[8]),d(h,y)}l.useOpenCommunityChatTabs=_}),98);
__d("MWV2ChatHeadsLayout.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=n,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"x191j7n5 xdg88n9 x10l6tqk x1useyqa"},t[0]=a):a=t[0];var i;return t[1]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{children:r})),t[1]=r,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWV2ChatOptionsHead.react",["fbt","FDSDots3HorizontalFilled20Icon","MWXDeferredPopoverTrigger.react","MWXIcon_DEPRECATED.react","MWXPressable.react","MWXTooltip.react","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useState,d=r("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.react"),m={head:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",boxShadow:"x1qeybcx",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",opacity:"xg01cxk",transform:"x1f85oc2",transitionDuration:"x19bguh7",transitionProperty:"x6o7n8i",width:"x14qfxbe",":hover_boxShadow":"x19xcq9t",$$css:!0},headVisible:{opacity:"x1hc1fzr",transform:"x3oybdh",$$css:!0}},p=s._(/*BTDS*/"Options");function _(e){var t=o("react-compiler-runtime").c(11),n=e.isVisible,a=e.openTabCount,i=e.style,l=c(!1),s=l[0],_=l[1],f=c(!1),g=f[0],h=f[1],y=c(!1),C=y[0],b=y[1],v=a>0,S;t[0]!==v?(S={hasOpenTabs:v},t[0]=v,t[1]=S):S=t[1];var R;t[2]!==g||t[3]!==s||t[4]!==C||t[5]!==n||t[6]!==i?(R=function(t,o){return u.jsx("div",{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p xc9qbxq xrr41r3 x10l6tqk x14qfxbe",style:i,children:u.jsx("div",{className:"x6s0dn4 xjbqb8w x78zum5 xnnlda6 xl56j7k x1kovpyh xhsvlbd x1dmp6jm","data-testid":void 0,onMouseEnter:function(){return _(!0)},onMouseLeave:function(){return _(!1)},children:u.jsx(r("MWXPressable.react"),{label:p,onFocusChange:function(t){return h(t)},onPress:o,ref:t,testid:void 0,xstyle:function(){return[m.head,n||s||g||C?m.headVisible:!1]},children:u.jsx(r("MWXTooltip.react"),{align:"middle",position:"start",tooltip:p,children:u.jsx(r("MWXIcon_DEPRECATED.react"),{icon:r("FDSDots3HorizontalFilled20Icon")})})})})})},t[2]=g,t[3]=s,t[4]=C,t[5]=n,t[6]=i,t[7]=R):R=t[7];var L;return t[8]!==S||t[9]!==R?(L=u.jsx(r("MWXDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:b,popoverProps:S,popoverResource:d,position:"above",children:R}),t[8]=S,t[9]=R,t[10]=L):L=t[10],L}l.default=_}),226);
__d("useMWV2PreloadComposeTab",["JSResourceForInteraction","JSScheduler","react","react-compiler-runtime","useCometPreloader"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback,c=r("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("useMWV2PreloadComposeTab");function d(){var e=o("react-compiler-runtime").c(3),t=m,n=r("useCometPreloader")("button",t,t),a=n.onHoverInPreloader,i=n.onHoverOutPreloader,l;return e[0]!==a||e[1]!==i?(l=[a,i],e[0]=a,e[1]=i,e[2]=l):l=e[2],l}function m(){(s||(s=o("JSScheduler"))).scheduleSpeculativeCallback(p)}function p(){c.preload()}l.default=d}),98);
__d("MWV2ComposeHead.react",["fbt","FDSComposeFilled20Icon","FDSIcon.react","LSThreadAttributionStore","MWChatInteraction","MWChatStateV2.react","MWChatStateV2Types","MWPBumpEntityKey","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","react","react-compiler-runtime","useMWNewChatOpenTabTraceProvider","useMWV2PreloadComposeTab"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={button:{alignItems:"x6s0dn4",appearance:"xjyslct",backgroundColor:"x1l31dnx",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",boxShadow:"x1qeybcx",display:"x3nfvp2",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",":hover_boxShadow":"x19xcq9t",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(16),n=e.onFocusChange,a=e.onHoverChange,i=o("MWChatStateV2.react").useDispatch(),l=r("MessengerWebUXLogger").useInteractionLogger(),c=r("useMWNewChatOpenTabTraceProvider")(),d;t[0]!==i||t[1]!==l||t[2]!==c?(d=function(){c(function(e){o("MWChatInteraction").set("open_new",e),l==null||l({eventName:"create_thread"}),o("LSThreadAttributionStore").setSourceForNewThread("chatheadsNewMessage"),o("MWPBumpEntityKey").bumpEntityKey("comet.sidebar","compose_head_click");var t=Date.now(),n=function(n){return{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:n.closeWatermark,doNotBlockWithEBUpsell:!0,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:t,tabId:n.tabId,tabType:n.tabType}},r=function(n){var e=n.openWatermark<n.closeWatermark;return e?{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:n.closeWatermark,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:t,tabId:n.tabId,tabType:n.tabType}:{clientForcedMinimizeWatermark:n.clientForcedMinimizeWatermark,closeWatermark:t,minimizeWatermark:n.minimizeWatermark,openFlyoutWatermark:n.openFlyoutWatermark,openWatermark:n.openWatermark,tabId:n.tabId,tabType:n.tabType}};return i([{inserter:n,tabConfig:{shouldFocus:!0},tabType:{initialTokens:[],secureThreadToggleEnabled:!1,type:o("MWChatStateV2Types").MWChatStateTabType.ComposeTab},type:o("MWChatStateV2Types").MWChatStateActionsType.UpsertTab,updater:r}])},"chatheadsNewMessage")},t[0]=i,t[1]=l,t[2]=c,t[3]=d):d=t[3];var p=d,_=r("useMWV2PreloadComposeTab")(),f=_[0],g=_[1],h,y,C,b,v;t[4]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"New message"),h=r("MWXTooltip.react"),C="middle",b="start",v=y.toString(),t[4]=h,t[5]=y,t[6]=C,t[7]=b,t[8]=v):(h=t[4],y=t[5],C=t[6],b=t[7],v=t[8]);var S;t[9]===Symbol.for("react.memo_cache_sentinel")?(S=u.jsx(r("FDSIcon.react"),{color:"primary",icon:r("FDSComposeFilled20Icon"),size:20}),t[9]=S):S=t[9];var R;return t[10]!==f||t[11]!==g||t[12]!==n||t[13]!==a||t[14]!==p?(R=u.jsx(h,{align:C,position:b,tooltip:v,children:u.jsx(r("MWXPressable.react"),{"aria-label":y,onFocusChange:n,onHoverChange:a,onHoverIn:f,onHoverOut:g,onPress:p,role:"button",testid:void 0,xstyle:m,children:S})}),t[10]=f,t[11]=g,t[12]=n,t[13]=a,t[14]=p,t[15]=R):R=t[15],R}function m(){return[c.button]}l.default=d}),226);
__d("useMWV2MaxChatHeadsCount",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";var e=5;function s(){var t=r("useCometRouterState")();if(t!=null){var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;if(a.route.tracePolicy==="comet.reels.unified.player")return 1}return e}l.default=s}),98);
__d("MWV2ChatHeads.react",["CometErrorBoundary.react","CometHeroInteractionWithDiv.react","CometPlaceholder.react","I64","JSResourceForInteraction","MWChatInteraction","MWChatStateContext","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPActor.react","MWV2ChatHeadsLayout.react","MWV2ChatOptionsHead.react","MWV2ComposeHead.react","WebUXLoggingEntryPointContextProvider","lazyLoadComponent","react","react-compiler-runtime","useMWChatStateV2MaxTabCount","useMWV2MaxChatHeadsCount"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useState,d=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatHead.react").__setRef("MWV2ChatHeads.react")),m=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatOverflowHead.react").__setRef("MWV2ChatHeads.react"));function p(e){return{transform:"translateY(-"+Math.imul(e,58)+"px)"}}function _(e){return{transform:"translateY(-"+(Math.imul(e,58)-12)+"px"}}function f(e){var t=o("react-compiler-runtime").c(27),n=e.isMediaViewer,a=r("useMWV2MaxChatHeadsCount")(),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("MWPActor.react").isAPPlus(),t[0]=i):i=t[0];var l=i,f=o("MWChatStateContext").useChatState(y),C=f[0],b=f[1],v=f[2],S=r("useMWChatStateV2MaxTabCount")(n),R=o("MWChatStateV2TabGroups").getTabGroups(v,C,b,S),L=R.openExcessTabs,E=R.openTabs,k=o("MWChatStateV2HeadGroups").getHeadGroups(n?v:void 0,L,C,a),I=k[0],T=k[1],D=E.length,x=I.length,$=T.length>0?1:0,P=c(!1),N=P[0],M=P[1],w,A=T[0];if(T.length===1&&A.tabType.type!==o("MWChatStateV2Types").MWChatStateTabType.ComposeTab){var F=A.tabType.threadKeyDescriptor,O=(s||(s=o("I64"))).to_string(F.threadKey),B;t[1]===Symbol.for("react.memo_cache_sentinel")?(B=p(1),t[1]=B):B=t[1],w=u.jsx(r("CometErrorBoundary.react"),{fallback:h,children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ExcessHeads",children:u.jsx(d,{onFocusChange:M,onHoverChange:M,style:B,tab:T[0],threadKeyDescriptor:F})})},O)}else if(T.length>1){var W;t[2]===Symbol.for("react.memo_cache_sentinel")?(W=p(1),t[2]=W):W=t[2],w=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatOverflowHead",children:u.jsx(m,{excessHeads:T,onActiveChange:M,style:W})})}var q=o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,U="chat_heads",V=r("CometHeroInteractionWithDiv.react"),H="Comet initial load to chatheads VC",G;t[3]===Symbol.for("react.memo_cache_sentinel")?(G=o("MWChatInteraction").get(o("MWChatInteraction").MW_CHATHEADS_LOAD),t[3]=G):G=t[3];var z=r("MWV2ChatHeadsLayout.react"),j;t[4]!==x||t[5]!==N||t[6]!==D||t[7]!==$?(j=r("MWV2ChatOptionsHead.react")!=null&&D+x>=2?u.jsx(r("MWV2ChatOptionsHead.react"),{isVisible:N,openTabCount:D,style:_(x+$+1)}):null,t[4]=x,t[5]=N,t[6]=D,t[7]=$,t[8]=j):j=t[8];var K;t[9]!==$||t[10]!==M?(K=function(t,n){var e=t.tabType;if(e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;var a=n+$+1;return u.jsx(r("CometErrorBoundary.react"),{fallback:g,children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWV2ChatHeads.ChatHead",children:u.jsx(d,{onFocusChange:M,onHoverChange:M,style:p(a),tab:t,threadKeyDescriptor:e.threadKeyDescriptor})})},(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.threadKey))},t[9]=$,t[10]=M,t[11]=K):K=t[11];var Q=I.reverse().map(K),X;t[12]!==M?(X=!l&&u.jsx(r("MWV2ComposeHead.react"),{onFocusChange:M,onHoverChange:M}),t[12]=M,t[13]=X):X=t[13];var Y;t[14]!==z||t[15]!==w||t[16]!==j||t[17]!==Q||t[18]!==X?(Y=u.jsxs(z,{children:[j,Q,w,X]}),t[14]=z,t[15]=w,t[16]=j,t[17]=Q,t[18]=X,t[19]=Y):Y=t[19];var J;t[20]!==V||t[21]!==G||t[22]!==Y?(J=u.jsx(V,{interactionDesc:H,interactionUUID:G,children:Y}),t[20]=V,t[21]=G,t[22]=Y,t[23]=J):J=t[23];var Z;return t[24]!==q||t[25]!==J?(Z=u.jsx(q,{value:U,children:J}),t[24]=q,t[25]=J,t[26]=Z):Z=t[26],Z}function g(){return null}function h(){return null}function y(e){return[e.tabs,e.focusedTabId,e.mediaViewerOpenWatermark]}l.MWV2ChatHeads=f}),98);
__d("MWV2ChatTabRootLoaderDeferred.react",["deferredLoadComponent","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferred")("MWV2ChatTabRootLoader.react").__setRef("MWV2ChatTabRootLoaderDeferred.react")),s=e;l.default=s}),98);
__d("MWV2ChatTabsLayout.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=n,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"xpqajaz x1ey2m1c x78zum5 x1jndppq xixxii4 x1vjfegm"},t[0]=a):a=t[0];var i;return t[1]!==r?(i=s.jsx("div",babelHelpers.extends({},a,{"data-testid":void 0,children:r})),t[1]=r,t[2]=i):i=t[2],i}l.default=u}),98);
__d("MWV2ChatTabs.react",["CometErrorBoundary.react","CometPlaceholder.react","FBLogger","FocusRegion.react","HeroInteractionIgnoreWithDiv.react","I64","JSResourceForInteraction","MAWEditMessageContext.react","MWChatInteraction","MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2HeadGroups","MWChatStateV2TabGroups","MWChatStateV2Types","MWPReplyContext.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2ChatTabRootLoaderDeferred.react","MWV2ChatTabsLayout.react","MWV2EnsureThatChatTabExists","MWV2IsTabFocusedContext.react","cr:7101","gkx","hero-tracing","lazyLoadComponent","react","react-compiler-runtime","useCometDisplayTimingTrackerForInteraction","useMWChatStateV2MaxTabCount","useMWV2MaxChatHeadsCount"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=n("cr:7101")||{},d=c.MWComposerKeyCommandFocusManager,m=c.MWComposerKeyCommandFocusManagerTabIndex,p=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ComposeTab.react").__setRef("MWV2ChatTabs.react")),_=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("MWV2ChatTabs.react"));function f(e){var t=o("react-compiler-runtime").c(8),n=e.isMinimized,a=e.tab,i=e.threadKeyDescriptor;o("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(i.threadKey,i.threadType,i.clientThreadKey,"MWV2ChatTabs");var l=r("gkx")("16508");if(l===!0){var s;return t[0]!==n||t[1]!==a||t[2]!==i?(s=u.jsx(r("MWV2ChatTabRootLoaderDeferred.react"),{isMinimized:n,tab:a,threadKeyDescriptor:i}),t[0]=n,t[1]=a,t[2]=i,t[3]=s):s=t[3],s}var c;return t[4]!==n||t[5]!==a||t[6]!==i?(c=u.jsx(_,{isMinimized:n,tab:a,threadKeyDescriptor:i}),t[4]=n,t[5]=a,t[6]=i,t[7]=c):c=t[7],c}function g(e){var t=o("react-compiler-runtime").c(4),n=e.isMediaViewer,a=o("MWChatStateContext").useChatState(b),i=a[0],l=a[1],s=a[2],c=r("useMWChatStateV2MaxTabCount")(n),_=o("MWChatStateV2TabGroups").getTabGroups(n?s:void 0,i,l,c),g=_.minimizedTabs,S=_.openExcessTabs,R=_.openTabs,L=r("useMWV2MaxChatHeadsCount")(),E=o("MWChatStateV2HeadGroups").getHeadGroups(n?s:void 0,S,i,L),k=E[1],I=r("useCometDisplayTimingTrackerForInteraction")("ChatMain",!0),T=g.filter(function(e){return!k.includes(e)}).filter(C),D=[].concat(R,T,S).sort(o("MWChatStateV2CompareTabs").byMostRecentOpened),x=D.map(function(e,t){var n=l===e.tabId,a=e.tabType,i,s=R.indexOf(e)===-1;a.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab?i=u.jsx(p,{initialTokens:a.initialTokens,tab:e},a.initialTokens.map(y).join()):i=u.jsx(f,{isMinimized:s,tab:e,threadKeyDescriptor:a.threadKeyDescriptor});var c=u.jsx(o("FocusRegion.react").FocusRegion,{autoRestoreFocus:!0,children:u.jsx(o("MWV2IsTabFocusedContext.react").MWV2IsTabFocusedContextProvider,{isFocused:n,children:u.jsx(o("MWPReplyContext.react").MWPReplyContextProvider,{children:u.jsx(o("MAWEditMessageContext.react").MAWEditMessageContext,{children:u.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:u.jsx(o("hero-tracing").HeroInteraction,{alwaysMarkMutationRootAsVisualChange:!0,interactionDesc:"MWV2_CHAT_TAB",interactionUUID:v(e.tabType),pageletName:"ChatTab",ref:I,children:u.jsx(r("CometPlaceholder.react"),{fallback:s?null:u.jsx(r("MWV2ChatTabLoadingWithGlimmers.react"),{tab:e}),name:"MWV2ChatTabs",children:i})})})})})})});return u.jsx(r("CometErrorBoundary.react"),{fallback:h,children:m==null?c:u.jsx(m,{value:t,children:c})},String(e.tabId))}),$;t[0]!==x?($=d==null?x:u.jsx(d,{children:x}),t[0]=x,t[1]=$):$=t[1];var P;return t[2]!==$?(P=u.jsx(r("MWV2ChatTabsLayout.react"),{children:$}),t[2]=$,t[3]=P):P=t[3],P}function h(){return null}function y(e){return e.id}function C(e){return e.isPreloaded!==!0||e.openWatermark>0}function b(e){return[e.tabs,e.focusedTabId,e.mediaViewerOpenWatermark]}function v(e){if(e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)return null;var t=(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.threadKey),n=o("MWChatInteraction").get(t);return n==null&&r("FBLogger")("messenger_web").warn("Could not find interaction UUID for thread key %s, client thread key %s",t,e.threadKeyDescriptor.clientThreadKey?(s||(s=o("I64"))).to_string(e.threadKeyDescriptor.clientThreadKey):"<empty>"),n}l.default=g}),98);
__d("useMWLSChatPopperUpper",["FBLogger","I64","JSResourceForInteraction","LSContactType","LSIntEnum","MWChatMessagesOnChatTabLoadTracker","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MWXacGating","MercuryIDs","ReQL","ServerTime","VisibilityAPI","clearInterval","gkx","isMWXacGroupThread","isMessengerPWA","justknobx","promiseDone","react","react-compiler-runtime","requireDeferred","setInterval","useGlobalEventListener","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useRef,p=r("requireDeferred")("MWDesktopNotifications").__setRef("useMWLSChatPopperUpper"),_=r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("useMWLSChatPopperUpper"),f=r("JSResourceForInteraction")("MWV2ChatTabRoot.react").__setRef("useMWLSChatPopperUpper"),g={contents:void 0};function h(e,t,n,a,i,l,c,d,m,g,h){h===void 0&&(h=o("MWLSChatTabPolicy").shouldMessageBeAllowed);var y=o("MWGetCurrentThreadIDForLSThread").get(a.threadKey,a.threadType,(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE))||(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE_PERSONA)));return h(n,a,i,d,m,function(){var u=r("gkx")("16508");u===!0?r("promiseDone")(f.load()):r("promiseDone")(_.load());var d=o("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(a.threadKey));return o("MWChatMessagesOnChatTabLoadTracker").trackReceivedFor(a.threadKey),e(y,a,function(){if(c(n,a,i,l),o("VisibilityAPI").isVisibilityHidden()===!0){var e=r("isMessengerPWA")()&&r("justknobx")._("1465");e&&r("promiseDone")((async function(){var e=await p.load(),r=e.triggerLocalNotification;await r(t,n,g)})())}if(o("MWChatThreadPingCounter").getCount(d)<3){o("MWChatThreadPingCounter").incrementCount(d),o("MWLSChatPopperCommon").playChatTabSound(n);return}})})}function y(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c==null){r("FBLogger")("messenger_web_entrypoints").mustfix("Thread is null when receiving a new message");return}if(d!=null&&m!=null)return h(i,s,o,c,d,m,u,t,n,a,l)})}function C(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c!=null&&d!=null&&m!=null&&!r("isMWXacGroupThread")(c))return h(i,s,o,c,d,m,u,t,n,a,l)})}function b(e){var t=o("react-compiler-runtime").c(11),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),p=o("MWLSChatPopperCommon").useUpdateDocumentTitle(n,c,g),_;t[2]===Symbol.for("react.memo_cache_sentinel")?(_=o("ServerTime").getMillis(),t[2]=_):_=t[2];var f=m(_),h=r("useMWNavigation")(),b=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),v=b.familyCenterData,S,R;t[3]!==c||t[4]!==v.hasActiveMsgrFamilyCenterEnforcement||t[5]!==h||t[6]!==u||t[7]!==n||t[8]!==p?(S=function(){return o("ReQL").fromTableAscending(n.tables.messages).subscribe(function(e,t){if(t.operation==="add"){var r=t.value;if((s||(s=o("I64"))).to_float(r.timestampMs)<=f.current)return;f.current=(s||(s=o("I64"))).to_float(r.timestampMs);var a=o("MWXacGating").isGroupsEnabled()?y:C;return a({actor:c,hasActiveMsgrFamilyCenterEnforcement:v.hasActiveMsgrFamilyCenterEnforcement,message:r,navigationApi:h,openTabFromNewMessage:u,storage:n,updateDocumentTitle:p})}})},R=[c,h,v.hasActiveMsgrFamilyCenterEnforcement,u,n,p],t[3]=c,t[4]=v.hasActiveMsgrFamilyCenterEnforcement,t[5]=h,t[6]=u,t[7]=n,t[8]=p,t[9]=S,t[10]=R):(S=t[9],R=t[10]),d(S,R)}function v(e){var t=o("react-compiler-runtime").c(10),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==n||t[1]!==i?(l={storage:n,withChatTabTracing:i},t[0]=n,t[1]=i,t[2]=l):l=t[2],b(l);var s=m(),u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=function(){var e=s.current;if(e!=null){r("clearInterval")(e);return}},t[3]=u):u=t[3];var c=u,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=function(){c(),s.current=r("setInterval")(S,6e5)},t[4]=p):p=t[4];var _=p,f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return o("MWChatThreadPingCounter").clear(),c()},t[5]=f):f=t[5];var g=f,h;t[6]===Symbol.for("react.memo_cache_sentinel")?(h={},t[6]=h):h=t[6],r("useGlobalEventListener")("blur",_,h);var y;t[7]===Symbol.for("react.memo_cache_sentinel")?(y={},t[7]=y):y=t[7],r("useGlobalEventListener")("focus",g,y);var C,v;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return function(){return c()}},v=[],t[8]=C,t[9]=v):(C=t[8],v=t[9]),d(C,v)}function S(){return o("MWChatThreadPingCounter").clear()}l.default=v}),98);
__d("useSubscribeToErrorTableAndShowToast",["ReQL","react","react-compiler-runtime","requireDeferred","translatedServerString","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect,c=r("requireDeferred")("LSUserVisibleErrorsUtil").__setRef("useSubscribeToErrorTableAndShowToast"),d=r("requireDeferred")("mwPushToast").__setRef("useSubscribeToErrorTableAndShowToast"),m={contents:!1};function p(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),i,l;return n[0]!==a||n[1]!==t?(i=function(){if(!m.contents){m.contents=!0;var e=o("ReQL").fromTableAscending(a.tables.user_visible_errors).subscribe(function(e,n){switch(n.operation){case"add":{var o=n.value,i=o.presentationStyle;if(i!=null&&i!=="toast"&&i!=="undefined")return;d.onReady(function(e){e.mwPushErrorToast({body:o.errorBodyText!=null?r("translatedServerString")(o.errorBodyText):void 0,onDismiss:function(){c.onReady(function(e){e.removeUserVisibleErrorFromTable(a,o.errorId)})},title:r("translatedServerString")(o.errorTitleText)},t)});return}case"put":case"delete":return}});return function(){return m.contents=!1,e()}}},l=[a,t],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),u(i,l)}l.default=p}),98);
__d("useMWChatInit",["MWLSCommunityChatPopper","MWPGetThreadTitle","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useMWLSChatPopperUpper","useReStore","useSubscribeToErrorTableAndShowToast"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(){var t=o("react-compiler-runtime").c(12),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.community_folders||t[1]!==n.tables.contacts||t[2]!==n.tables.participants||t[3]!==n.tables.pinned_threads||t[4]!==n.tables.threads?(a=function(){var e;r("promiseDone")((e=o("ReQL")).toArrayAsync(e.fromTableAscending(n.tables.threads).map(function(e){return[e,o("ReQLSuspense").toArray(o("ReQL").leftJoin(o("ReQL").fromTableAscending(n.tables.participants,[]).getKeyRange(e.threadKey),o("ReQL").fromTableAscending(n.tables.contacts)).take(o("MWPGetThreadTitle").amountToFetchForTitle),i.id+":34")]}).take(30))),r("promiseDone")(e.toArrayAsync(e.fromTableAscending(n.tables.pinned_threads.index("pinnedTimestamp")))),r("promiseDone")(e.toArrayAsync(e.fromTableAscending(n.tables.community_folders)))},t[0]=n.tables.community_folders,t[1]=n.tables.contacts,t[2]=n.tables.participants,t[3]=n.tables.pinned_threads,t[4]=n.tables.threads,t[5]=a):a=t[5];var l;t[6]!==n?(l=[n],t[6]=n,t[7]=l):l=t[7],u(a,l),r("useSubscribeToErrorTableAndShowToast")();var s;t[8]!==n?(s={storage:n,withChatTabTracing:!0},t[8]=n,t[9]=s):s=t[9],r("useMWLSChatPopperUpper")(s);var c;t[10]!==n?(c={storage:n,withChatTabTracing:!0},t[10]=n,t[11]=c):c=t[11],o("MWLSCommunityChatPopper").useOpenCommunityChatTabs(c)}l.default=c}),98);
__d("useMWIsAPPlusChannelsInbox",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("useCometRouterState")();if(t==null)return!1;var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;return((e=a.route)==null?void 0:e.tracePolicy)==="comet.messenger.applus.inbox"}l.default=e}),98);
__d("useMWIsTopLevelRouteMessengerMediaViewer",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("useCometRouterState")();if(t==null)return!1;var n=t.main,o=t.pushViewStack,a=o&&o.length>0?o[o.length-1]:n;return((e=a.route)==null?void 0:e.tracePolicy)==="comet.sharedmediaviewer.media"}l.default=e}),98);
__d("useMWV2ChatUpdateMediaViewerOpenWatermark",["MWChatStateActions","MWChatStateV2.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(2),t=o("MWChatStateV2.react").useDispatch(),n;return e[0]!==t?(n=function(){var e=Date.now();t(o("MWChatStateActions").updateMediaViewerOpenWatermark(e))},e[0]=t,e[1]=n):n=e[1],n}l.default=u}),98);
__d("MWV2CookieWriter",["DeferredCookie","FBLogger","I64","MWCMThreadTypes.react","MWChatStateV2Types","Promise","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(Number((s||(s=o("I64"))).to_string(e))){case 2:return"g.";case 15:return"sc.";case 16:return"sg.";case 18:return"cg.";case 19:return"cgu.";case 23:return"cbj.";case 24:return"cbu.";case 21:return"cphj.";case 22:return"cphu.";case 150:return"dp.";case 151:return"dpu.";case 152:return"dpb.";case 153:return"dpbu.";case 154:return"dp2.";case 155:return"dp2u.";default:return"u."}}function c(t,a,i){var l=function(t){if(a==null)return!1;var e=a.tabType;return e.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab?!1:(s||(s=o("I64"))).equal(e.threadKeyDescriptor.threadKey,t)},c=function(t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.threads).getKeyRange(t))},d={contents:void 0},m=t.map(function(t){var r=t.isOpen,a=t.threadKey,i=t.threadType,m={o:r?1:0};return c(a).then(function(t){return t!=null?l(a)?(o("MWCMThreadTypes.react").isJoinedCMThread(i)&&(d.contents=(s||(s=o("I64"))).to_string(t.parentThreadKey)),(e||(e=n("Promise"))).resolve()):(m.i=u(i)+(s||(s=o("I64"))).to_string(a),o("MWCMThreadTypes.react").isJoinedCMThread(i)&&(m.p=(s||(s=o("I64"))).to_string(t.parentThreadKey)),(e||(e=n("Promise"))).resolve(m)):(m.i=u(i)+(s||(s=o("I64"))).to_string(a),(e||(e=n("Promise"))).resolve(m))})});r("promiseDone")((e||(e=n("Promise"))).all(m).then(function(t){var i;if(a!=null){var l=a.tabType;if(l.type===o("MWChatStateV2Types").MWChatStateTabType.ComposeTab)i=void 0;else{var c=l.threadKeyDescriptor,m=c.threadKey,p=c.threadType;i=u(p)+(s||(s=o("I64"))).to_string(m)}}else i=void 0;var _=t.filter(function(e){return e!=null}),f=d.contents,g=f!=null?JSON.stringify({lm3:i,lm3p:f,t3:_,utc3:Date.now(),v:1}):JSON.stringify({lm3:i,t3:_,utc3:Date.now(),v:1});return g!=null?r("DeferredCookie").addToQueue("presence","C"+g,0,"/",!1,!1,!0):r("FBLogger")("messenger_comet").mustfix("Failed to serialize cookie"),(e||(e=n("Promise"))).resolve()}))}l.write=c}),98);
__d("useMWV2CookieWriter",["MWChatStateContext","MWChatStateV2CompareTabs","MWChatStateV2IsOpen","MWChatStateV2Types","MWPActor.react","MWV2CookieWriter","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect;function c(){var t=o("react-compiler-runtime").c(4),n=o("MWChatStateContext").useChatState(_),a=(e||(e=r("useReStore")))(),i,l;t[0]!==a||t[1]!==n?(i=function(){if(!o("MWPActor.react").isAPPlus()){var e=Array.from(n.values()).filter(p).sort(o("MWChatStateV2CompareTabs").byMostRecentOpened)[0],t=[];Array.from(n.values()).filter(m).sort(d).forEach(function(e){var n=e.tabType;n.type!==o("MWChatStateV2Types").MWChatStateTabType.ComposeTab&&t.push(babelHelpers.extends({},n.threadKeyDescriptor,{isOpen:!1}))}),o("MWV2CookieWriter").write(t,e,a)}},l=[a,n],t[0]=a,t[1]=n,t[2]=i,t[3]=l):(i=t[2],l=t[3]),u(i,l)}function d(e,t){var n=o("MWChatStateV2CompareTabs").byMostRecentMinimized(e,t);return n===0?o("MWChatStateV2CompareTabs").byMostRecentOpened(e,t):n}function m(e){return e.openWatermark>e.closeWatermark?!0:e.minimizeWatermark>e.closeWatermark}function p(e){return o("MWChatStateV2IsOpen").isOpen(void 0,e)}function _(e){return e.tabs}l.default=c}),98);
__d("MWV2ChatTabsRoot.react",["CometContextualLayerAnchorRoot.react","CometDOMOnlyBoundary.react","CometPlaceholder.react","FocusRegion.react","MWChatStateV2.react","MWChatVisibilityOverrideContext","MWDraftMessages.react","MWFallbackWithTimeout.react","MWLSThreadDisplayContext","MWV2ChatHeads.react","MWV2ChatTabs.react","WebUXLoggingEntryPointContextProvider","focusScopeQueries","react","react-compiler-runtime","useEnsureViewerContactExistAndUpdated","useMWChatInit","useMWIsAPPlusChannelsInbox","useMWIsTopLevelRouteMediaViewerExperiment","useMWIsTopLevelRouteMessengerMediaViewer","useMWV2ChatUpdateMediaViewerOpenWatermark","useMWV2CookieWriter","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useMemo;function m(e){var t=o("react-compiler-runtime").c(16),n=e.isMediaViewer,a=o("MWChatStateV2.react").useChatState(_),i=r("useMWIsTopLevelRouteMessengerMediaViewer")(),l;l=Array.from(a.values()).some(p);var u=l,c;t[0]!==i?(c={0:{className:"x1ey2m1c xtijo5x xixxii4 xamhafn x1vjfegm"},1:{className:"x1ey2m1c xtijo5x xixxii4 xamhafn x1vjfegm x1s85apg"}}[!!i<<0],t[0]=i,t[1]=c):c=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d={className:"xuk3077 x78zum5 xc8icb0"},t[2]=d):d=t[2];var m=u?o("focusScopeQueries").tabbableScopeQuery:void 0,f;t[3]!==n?(f=s.jsx(r("MWV2ChatTabs.react"),{isMediaViewer:n}),t[3]=n,t[4]=f):f=t[4];var g;t[5]!==n?(g=s.jsx(r("CometDOMOnlyBoundary.react"),{children:s.jsx(o("MWV2ChatHeads.react").MWV2ChatHeads,{isMediaViewer:n})}),t[5]=n,t[6]=g):g=t[6];var h;t[7]!==f||t[8]!==g?(h=s.jsxs(s.Fragment,{children:[f,g]}),t[7]=f,t[8]=g,t[9]=h):h=t[9];var y;t[10]!==m||t[11]!==h?(y=s.jsx(r("CometContextualLayerAnchorRoot.react"),{children:s.jsx("div",babelHelpers.extends({},d,{children:s.jsx(o("FocusRegion.react").FocusRegion,{containFocusQuery:m,id:"MWV2ChatTabsRootChatTabsFocusRegion",children:h})}))}),t[10]=m,t[11]=h,t[12]=y):y=t[12];var C;t[13]!==c||t[14]!==y?(C=s.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:"popup_chat_box",children:s.jsx(o("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:"ChatTab",children:s.jsx(o("MWDraftMessages.react").MWDraftProvider,{children:s.jsx("div",babelHelpers.extends({},c,{children:y}))})})}),t[13]=c,t[14]=y,t[15]=C):C=t[15];var b=C;return b}function p(e){return e.openWatermark>e.closeWatermark}function _(e){return e.tabs}function f(e){var t=e.children;return r("useMWV2CookieWriter")(),r("useMWChatInit")(),t}function g(){var e=o("react-compiler-runtime").c(10),t=r("useMWIsTopLevelRouteMediaViewerExperiment")(),n=o("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(t),a=r("useMWV2ChatUpdateMediaViewerOpenWatermark")(),i=r("useMWIsAPPlusChannelsInbox")(),l=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT_TABS_ROOT")&&n&&!i,u,d;e[0]!==t||e[1]!==a?(u=function(){t&&a()},d=[t,a],e[0]=t,e[1]=a,e[2]=u,e[3]=d):(u=e[2],d=e[3]),c(u,d),r("useEnsureViewerContactExistAndUpdated")();var p,_;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(r("MWFallbackWithTimeout.react"),{message:"MWV2ChatTabsRoot suspense timeout"}),e[4]=_):_=e[4];var g;e[5]!==t||e[6]!==l?(g=l?s.jsx(m,{isMediaViewer:t}):null,e[5]=t,e[6]=l,e[7]=g):g=e[7];var h;return e[8]!==g?(h=s.jsx(r("CometPlaceholder.react"),{fallback:_,name:"MWV2ChatTabsRoot",children:s.jsx(f,{children:g})}),e[8]=g,e[9]=h):h=e[9],p=h,p}l.default=g}),98);
__d("MWV2ChatContainer.react",["MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react","MWV2ChatTabsRoot.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsxs(s.Fragment,{children:[s.jsx(r("MWV2ChatTabsRoot.react"),{}),s.jsx(r("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"),{})]}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("MWV2Chat.react",["CometErrorBoundary.react","FBLogger","JSResourceForInteraction","LSDatabaseAfterInitSyncSingleton","LSDatabaseSingleton","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformMessengerConfig","MWChatDisabled.react","MWChatInteraction","MWV2ChatContainer.react","MWXLazyPopoverTrigger.react","gkx","isMWAppsSubdomainExperiment","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useLayoutEffect;function p(e){var t=r("FBLogger")("messenger_web");e!=null&&(t=t.catching(e)),t.warn("Error loading MWV2Chat")}var _=r("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),f=function(t){return u.jsx(r("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{error:t},popoverResource:_,position:"above",visibleOnLoad:!0,children:function(t,n){return u.jsx(r("MWChatDisabled.react"),{contextRef:t,onPress:n})}})},g=!r("gkx")("22788")||r("isMWAppsSubdomainExperiment")(!1);function h(){var e=o("react-compiler-runtime").c(3),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],m(C,t);var n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=[],e[1]=n):n=e[1],d(y,n);var a;return e[2]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(r("CometErrorBoundary.react"),{fallback:f,onError:p,children:g?u.jsx(r("MWChatDisabled.react"),{}):u.jsx(r("LSPlatformClientProviderWithDeferredLoadingStrategy.react"),{config:o("LSPlatformMessengerConfig").configEagerlyLoaded,errorFallback:f,children:u.jsx(r("MWV2ChatContainer.react"),{})})}),e[2]=a):a=e[2],a}function y(){g&&o("LSDatabaseAfterInitSyncSingleton").resolveInitSync((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton)}function C(){o("MWChatInteraction").addAutoChatTabMarkerPoint("mwv2_chat_rendered")}l.default=h}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","react-compiler-runtime","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","onChange"],s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef;function p(t){var a,i=o("react-compiler-runtime").c(14),l,s,c;i[0]!==t?(c=t.ref,l=t.onChange,s=babelHelpers.objectWithoutPropertiesLoose(t,e),i[0]=t,i[1]=l,i[2]=s,i[3]=c):(l=i[1],s=i[2],c=i[3]);var p=(a=r("useSearchCometEventEmitterContext")(r("SearchCometTypeaheadEventEmitterContext")))!=null?a:{},_=p.subscribeToGlobalTypeaheadFocus,f,g;i[4]!==l||i[5]!==_?(f=function(t){return _==null?void 0:_(function(){t!=null&&(t.value="",t.focus(),l(""))})},g=[l,_],i[4]=l,i[5]=_,i[6]=f,i[7]=g):(f=i[6],g=i[7]);var h=r("useRefEffect")(f,g),y=m(null),C=m(!1),b,v;i[8]===Symbol.for("react.memo_cache_sentinel")?(b=function(){var e=y.current;if(n("cr:2012305")!=null&&e!=null&&C.current===!1)return n("cr:2012305").trackTypingPerf(e,"top_tab_serp_typeahead"),C.current=!0,function(){n("cr:2012305").unregisterTypingPerf(e),C.current=!1}},v=[],i[8]=b,i[9]=v):(b=i[8],v=i[9]),d(b,v);var S=r("useMergeRefs")(h,y),R=r("useMergeRefs")(S,c),L;return i[10]!==R||i[11]!==l||i[12]!==s?(L=u.jsx(r("CometTypeaheadInputRoundedStrategy.react"),babelHelpers.extends({},s,{onChange:l,ref:R})),i[10]=R,i[11]=l,i[12]=s,i[13]=L):L=i[13],L}l.default=p}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e,t){"use no forget";var n=e?e.getInteractionUUID():null,r=e?e.getVCTrackerRef():null,o=n!=null&&e!=null&&!e.isResolved();return s(function(){var a=function(r,o){e&&o!=null&&e.setEventStartTime(o.timeStamp),t(r,o)};return{interactionUUID:n,onTracedChange:a,shouldHoldHeroTracing:o,vcTrackerRef:r}},[n,t,o,e,r])}l.default=u}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(t,n,r,o,a,i,l){"use strict";var e=["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","onLeftArrow","onRightArrow","viewRole","inputRef","xstyles"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(74),a,i,l,s,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T;n[0]!==t?(E=t.extraLayoutProps,i=t.helperText,l=t.label,s=t.onAbandonTypeahead_DO_NOT_USE,c=t.onBlur,d=t.onChange,m=t.onClick,p=t.onDownArrow,_=t.onEnter,f=t.onEscape,g=t.onHighlightEntry,y=t.onOutsideClick,C=t.onPressEntry,v=t.onShiftTab,S=t.onTab,R=t.onUpArrow,k=t.traceProvider,h=t.onLeftArrow,b=t.onRightArrow,I=t.viewRole,a=t.inputRef,T=t.xstyles,L=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f,n[11]=g,n[12]=h,n[13]=y,n[14]=C,n[15]=b,n[16]=v,n[17]=S,n[18]=R,n[19]=L,n[20]=E,n[21]=k,n[22]=I,n[23]=T):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10],g=n[11],h=n[12],y=n[13],C=n[14],b=n[15],v=n[16],S=n[17],R=n[18],L=n[19],E=n[20],k=n[21],I=n[22],T=n[23]);var D;n[24]!==E?(D=E===void 0?{}:E,n[24]=E,n[25]=D):D=n[25];var x=D,$=x.afterViewContent,P=x.beforeViewContent,N=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),M=N.isOpened,w=r("useCometInternalTypeaheadState")(),A=w.activeEntries,F=w.highlightedEntry,O=w.secondaryActionHighlighted,B=r("useCometInternalTypeaheadFetch")(),W=B.isLoading,q=r("useCometTypeaheadInputRefs")(a),U=q.composedRef,V=q.inputRef,H=r("useSearchCometGlobalTypeaheadStyles")(),G=T!=null?T:H,z=r("useCometInternalTypeaheadHeroTracing")(k,d),j=z.interactionUUID,K=z.onTracedChange,Q=z.shouldHoldHeroTracing,X=z.vcTrackerRef,Y;n[26]!==s||n[27]!==c||n[28]!==m||n[29]!==p||n[30]!==_||n[31]!==f||n[32]!==g||n[33]!==h||n[34]!==y||n[35]!==C||n[36]!==b||n[37]!==v||n[38]!==S||n[39]!==K||n[40]!==R?(Y={onAbandonTypeahead_DO_NOT_USE:s,onBlur:c,onChange:K,onClick:m,onDownArrow:p,onEnter:_,onEscape:f,onHighlightEntry:g,onLeftArrow:h,onOutsideClick:y,onPressEntry:C,onRightArrow:b,onShiftTab:v,onTab:S,onUpArrow:R},n[26]=s,n[27]=c,n[28]=m,n[29]=p,n[30]=_,n[31]=f,n[32]=g,n[33]=h,n[34]=y,n[35]=C,n[36]=b,n[37]=v,n[38]=S,n[39]=K,n[40]=R,n[41]=Y):Y=n[41];var J;n[42]!==V||n[43]!==Y?(J={handlers:Y,inputRef:V},n[42]=V,n[43]=Y,n[44]=J):J=n[44];var Z=r("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(J),ee;n[45]!==A||n[46]!==i||n[47]!==F||n[48]!==M||n[49]!==l||n[50]!==O||n[51]!==I?(ee={activeEntries:A,helperText:i,highlightedEntry:F,inputLabel:l,isOpened:M,secondaryActionHighlighted:O,viewRole:I},n[45]=A,n[46]=i,n[47]=F,n[48]=M,n[49]=l,n[50]=O,n[51]=I,n[52]=ee):ee=n[52];var te=r("useCometTypeaheadLayoutContextualStrategyARIAProps")(ee),ne;n[53]!==Q?(ne=u.jsx(r("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:Q}),n[53]=Q,n[54]=ne):ne=n[54];var re;n[55]!==$||n[56]!==te||n[57]!==P||n[58]!==W||n[59]!==M?(re={afterViewContent:$,ariaProps:te,beforeViewContent:P,helperTextComponent:null,isLoading:W,isOpened:M},n[55]=$,n[56]=te,n[57]=P,n[58]=W,n[59]=M,n[60]=re):re=n[60];var oe;n[61]!==U||n[62]!==Z||n[63]!==l||n[64]!==L||n[65]!==re||n[66]!==I||n[67]!==G?(oe=u.jsx(r("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers.extends({},L,Z,{extraLayoutProps:re,inputRef:U,label:l,viewRole:I,xstyles:G})),n[61]=U,n[62]=Z,n[63]=l,n[64]=L,n[65]=re,n[66]=I,n[67]=G,n[68]=oe):oe=n[68];var ae;return n[69]!==j||n[70]!==ne||n[71]!==oe||n[72]!==X?(ae=u.jsxs(r("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:j,ref:X,children:[ne,oe]}),n[69]=j,n[70]=ne,n[71]=oe,n[72]=X,n[73]=ae):ae=n[73],ae}l.default=c}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("24247")}l.hasTypeaheadRedirection=e}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","XCometSearchResultsControllerRouteBuilder","react-compiler-runtime","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface","useSearchCometResultsURLBuilder"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(5),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={routeBuilder:r("XCometSearchResultsControllerRouteBuilder")},e[0]=t):t=e[0];var n=r("useSearchCometResultsURLBuilder")(t),a=r("useSearchCometHashtagRouteUrlBuilder")(),i=r("useSearchCometResultsEntryPointSurface")(),l;return e[1]!==a||e[2]!==i||e[3]!==n?(l=function(t){var e=t.entry,l=t.queryString,s=t.typeaheadSessionID,u=e.label.toLowerCase(),c=e.metaData,d=c==null?void 0:c.markers,m=o("SearchCometInterestsDeepDiveUtil").getHashtagTag(u);if(o("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&m!=null&&!d.has("see_all"))return a({entryPointAction:"SEARCH_BOX",exploreEntryPoint:l===""?3:4,hashtag:m,typeaheadSessionID:s});var p,_=e.rawData,f=(p=r("searchCometTypeaheadGetStsDisambiguation")(e))!=null?p:void 0;if(e.subtype==="keyword"&&d.has("disambiguation")){var g,h,y=(g=(h=_.structuredInfo)==null||(h=h.disambiguation_result)==null?void 0:h.disambiguation_info_list[0])!=null?g:{},C=y.link_url;if(C!=null){var b=o("ConstUriUtils").getUri(C);if(b!=null){var v=new Map;i!=null&&v.set("__eps__",i),f!==void 0&&v.set("__stsd__",r("Base64").encode(JSON.stringify(f)));var S=new Map;for(var R of v){var L=R[0],E=R[1];S.set(L,E)}var k=b.addQueryParams(S);if(k!=null)return k.toString()}}}return n({entryPointAction:"SEARCH_BOX",highConfidenceResult:r("searchCometTypeaheadGetHighConfidenceResult")(e),query:u,stsDisambiguation:f,typeaheadSessionID:s})},e[1]=a,e[2]=i,e[3]=n,e[4]=l):l=e[4],l}l.default=e}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["react","react-compiler-runtime","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo;function d(e){var t=o("react-compiler-runtime").c(10),n=e.entry,a=e.queryString,i=r("useCometRouterDispatcher")(),l=r("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),s,c;t[0]!==l||t[1]!==n||t[2]!==a?(c=l({entry:n,queryString:a}),t[0]=l,t[1]=n,t[2]=a,t[3]=c):c=t[3],s=c;var d=s,m,p;t[4]!==i||t[5]!==d?(m=function(){i!=null&&i.preloadRouteCode(d)},p=[i,d],t[4]=i,t[5]=d,t[6]=m,t[7]=p):(m=t[6],p=t[7]),u(m,p);var _,f;return t[8]!==d?(f={preloadCodeOnMount:!0,preventLocalNavigation:!0,url:d},t[8]=d,t[9]=f):f=t[9],_=f,_}l.default=d}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useMemo,d={view:{backgroundColor:"x1jx94hy",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}};function m(e){var t=e.onHeaderActionPress,n=c(function(){return[d.view]},[]),o=c(function(){return u.jsx(r("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return r("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:r("searchCometTypeaheadSTSMappings"),emptyStateContent:o,getLinkProps:r("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:t,seeAllLabelBuilder:p,xstyle:n})}function p(e){return s._(/*BTDS*/"Search for {=m1}",[s._implicitParam("=m1",u.jsx("strong",{children:s._(/*BTDS*/"{query}",[s._param("query",e)])}))])}p.displayName=p.name+" [from "+i.id+"]",l.default=m}),226);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9365993650171871"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:t},params:{id:n("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","FBLogger","filterNulls","react","react-compiler-runtime","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var a=o("react-compiler-runtime").c(3),i=t.bootstrapDatasource,l=o("CometRelay").useRelayEnvironment(),s,u;return a[0]!==i||a[1]!==l?(u={validate:function(a){var t=r("filterNulls")(a.map(m));o("CometRelay").fetchQuery(l,e!==void 0?e:e=n("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:t}}).subscribe({error:d,next:function(t){var e=t.search_client_cache_policy_check;for(var n of(r=e==null?void 0:e.policy_decision)!=null?r:[]){var r,o=n.cache_type,a=n.force_cache_refresh,l=n.ids_to_remove;if(o==="KEYWORD_BOOTSTRAP"){for(var s of l)i.removeEntriesByEntID(s);a===!0&&(i.clear(),i.bootstrap())}}}})}},a[0]=i,a[1]=l,a[2]=u):u=a[2],s=u,s}function d(e){o("CometRelayErrorHandling").markErrorAsHandled(e)}function m(e){var t;if(e.subtype!=="bootstrap")return null;var n=(t=e.rawData.structuredInfo)!=null?t:{},o=n.direct_nav_result;if(o==null)return null;var a=o.ent_id,i=o.title;return a==null||i==null?(r("FBLogger")("search").mustfix("Unexpected missing ent_id or title on direct_nav_result"),null):{id:a,keyword:i}}l.default=c}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){function n(n){var r=o("react-compiler-runtime").c(15),a,i,l,s,c;r[0]!==n?(a=n.inputRef,i=n.onChange,l=n.onPressEntry,c=n.shouldQueryStringUpdateFromSelectedEntryOnClick,s=babelHelpers.objectWithoutPropertiesLoose(n,e),r[0]=n,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=c):(a=r[1],i=r[2],l=r[3],s=r[4],c=r[5]);var d=c===void 0?!1:c,m;r[6]!==i||r[7]!==l?(m=function(t,n){var e=t.metaData,r=t.subtype,o=e.markers,a=r==="recent"&&o.has("entity")||o.has("direct_nav");i(a?"":t.label),l==null||l(t,n)},r[6]=i,r[7]=l,r[8]=m):m=r[8];var p=m,_;return r[9]!==a||r[10]!==p||r[11]!==i||r[12]!==s||r[13]!==d?(_=u.jsx(t,babelHelpers.extends({},s,{inputRef:a,onChange:i,onPressEntry:p,shouldQueryStringUpdateFromSelectedEntryOnClick:d})),r[9]=a,r[10]=p,r[11]=i,r[12]=s,r[13]=d,r[14]=_):_=r[14],_}return n}l.default=d}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useMemo;function p(t){function n(n){var a=o("react-compiler-runtime").c(13),i,l;a[0]!==n?(i=n.inputRef,l=babelHelpers.objectWithoutPropertiesLoose(n,e),a[0]=n,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var s=r("useCometTypeaheadInputRefs")(i),c=s.composedRef,d=s.inputRef,m=r("useBaseTypeaheadLayoutContextualStrategyStateContext")(),p=m.dispatchIsOpened,_;a[3]!==p||a[4]!==d?(_=function(){d.current!=null&&(d.current.focus(),p(!0))},a[3]=p,a[4]=d,a[5]=_):_=a[5];var f=_,g,h;a[6]!==f?(h=o("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",f),a[6]=f,a[7]=h):h=a[7];var y;a[8]!==h?(y=[h],a[8]=h,a[9]=y):y=a[9],g=y;var C=g;r("useGlobalKeyCommands")(C);var b;return a[10]!==c||a[11]!==l?(b=u.jsx(t,babelHelpers.extends({},l,{inputRef:c})),a[10]=c,a[11]=l,a[12]=b):b=a[12],b}return n}l.default=p}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["inputRef","onPressEntry","traceProvider"],s,u=s||(s=o("react")),c=s.useCallback;function d(t){function n(n){var r=o("react-compiler-runtime").c(13),a,i,l,s;r[0]!==n?(a=n.inputRef,i=n.onPressEntry,s=n.traceProvider,l=babelHelpers.objectWithoutPropertiesLoose(n,e),r[0]=n,r[1]=a,r[2]=i,r[3]=l,r[4]=s):(a=r[1],i=r[2],l=r[3],s=r[4]);var c;r[5]!==i||r[6]!==s?(c=function(t,n){s&&s.setEndReason("successful_user_action"),i==null||i(t,n)},r[5]=i,r[6]=s,r[7]=c):c=r[7];var d=c,m;return r[8]!==a||r[9]!==d||r[10]!==l||r[11]!==s?(m=u.jsx(t,babelHelpers.extends({},l,{inputRef:a,onPressEntry:d,traceProvider:s})),r[8]=a,r[9]=d,r[10]=l,r[11]=s,r[12]=m):m=r[12],m}return n}l.default=d}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometTypeaheadErrorFallback.react","FBLogger","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","SearchCometTypeaheadLoggingContextProvider","XCometSearchResultsControllerRouteBuilder","emptyFunction","qex","react","react-compiler-runtime","requireDeferred","searchCometGlobalTypeahead.config","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadNullStateDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsURLBuilder","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadLoggingProvider","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadSERPWarmCallDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["autoOpen","inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"],u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useContext,f=m.useEffect,g=m.useMemo,h=m.useRef,y=r("requireDeferred")("ODS").__setRef("SearchCometGlobalTypeahead.react"),C=(u=r("qex")._("7"))!=null?u:!1;function b(t){var n=o("react-compiler-runtime").c(77),a,i,l,u,c,m,p,g,b,E;n[0]!==t?(E=t.autoOpen,a=t.inputXStyle,l=t.onClose,u=t.onEscape,c=t.onFocus,m=t.onHeaderActionPress,p=t.onPressEntry,g=t.onSelectFreeformQuery,i=t.queryString,b=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=c,n[6]=m,n[7]=p,n[8]=g,n[9]=b,n[10]=E):(a=n[1],i=n[2],l=n[3],u=n[4],c=n[5],m=n[6],p=n[7],g=n[8],b=n[9],E=n[10]);var k=E===void 0?!1:E,I=r("useCometTypeaheadStateQueryString")(i),T=I[0],D=I[1],x=r("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),$;n[11]===Symbol.for("react.memo_cache_sentinel")?($={routeBuilder:r("XCometSearchResultsControllerRouteBuilder")},n[11]=$):$=n[11];var P=r("useSearchCometResultsURLBuilder")($),N=r("useSearchCometHashtagRouteUrlBuilder")(),M;n[12]===Symbol.for("react.memo_cache_sentinel")?(M={tapPoint:"tap_search_bar"},n[12]=M):M=n[12];var w=r("useCometTypeaheadNavigate")(M),A=h(!1),F=r("useSearchCometGlobalTypeaheadNullStateDataSource")(),O;n[13]!==F?(O={config:r("searchCometGlobalTypeahead.config"),recentDataSource:F},n[13]=F,n[14]=O):O=n[14];var B=r("useSearchCometGlobalTypeaheadCompositeDataSource")(O),W;n[15]!==B?(W=B.getBootstrapKeywordsDataSource(),n[15]=B,n[16]=W):W=n[16];var q=W;if(q==null)throw r("FBLogger")("search").mustfixThrow("Bootstrap datasource is missing");var U;n[17]!==q?(U={bootstrapDatasource:q},n[17]=q,n[18]=U):U=n[18];var V=r("useSearchCometTypeaheadBootstrapValidation")(U),H=V.validate,G;n[19]!==H?(G=function(t){var e=t.shownEntries;H(e)},n[19]=H,n[20]=G):G=n[20];var z=G,j=_(o("SearchCometTypeaheadLoggingContextProvider").CometLoggingProviderContext),K=j.logger,Q=j.onSessionStart,X=j.setSessionEndCallback,Y=j.traceProvider,J=K,Z=Y,ee;n[21]!==z?(ee={context:"search_global",onSessionEnd:z},n[21]=z,n[22]=ee):ee=n[22];var te=r("useSearchCometTypeaheadLoggingProvider")(ee);r("useCometSearchTypeaheadTraceProvider")(K||te);var ne,re;if(n[23]!==z||n[24]!==X?(re=function(){X(z)},ne=[X,z],n[23]=z,n[24]=X,n[25]=ne,n[26]=re):(ne=n[25],re=n[26]),f(re,ne),J==null)throw J=te,y.onReady(R),r("FBLogger")("search").mustfix("Typeahead used without logger in context");if(Z==null)throw r("FBLogger")("search").mustfix("Typeahead used without traceProvider in context");var oe=r("useSearchCometTypeaheadRecentDataSourceContextDecorator")(B,!1),ae,ie;n[27]===Symbol.for("react.memo_cache_sentinel")?(ie={decorate:r("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")},n[27]=ie):ie=n[27];var le;n[28]!==oe?(le=[oe,ie].filter(Boolean),n[28]=oe,n[29]=le):le=n[29],ae=le;var se=ae,ue,ce;n[30]!==B?(ue=function(){B.bootstrap()},ce=[B],n[30]=B,n[31]=ue,n[32]=ce):(ue=n[31],ce=n[32]),f(ue,ce);var de;n[33]!==c||n[34]!==Q?(de=function(){A.current=!0,Q(),c&&c()},n[33]=c,n[34]=Q,n[35]=de):de=n[35];var me=de,pe;n[36]!==J||n[37]!==w||n[38]!==p||n[39]!==T||n[40]!==x?(pe=function(t,n){var e;if(n!==!0){var r=t.metaData,o=r==null?void 0:r.markers,a=o!=null&&o.has("entity"),i=o!=null&&o.has("direct_nav"),l=x({entry:t,queryString:T,typeaheadSessionID:(e=J)==null?void 0:e.getSessionID()}),s=L(t,l,a,i);w(s),p==null||p(t)}},n[36]=J,n[37]=w,n[38]=p,n[39]=T,n[40]=x,n[41]=pe):pe=n[41];var _e=pe,fe;n[42]!==N||n[43]!==J||n[44]!==w||n[45]!==g||n[46]!==T||n[47]!==P?(fe=function(t){var e=o("SearchCometInterestsDeepDiveUtil").getHashtagTag(t),n;if(o("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&e!=null){var r;n=N({entryPointAction:"SEARCH_BOX",exploreEntryPoint:T===""?3:4,hashtag:e,typeaheadSessionID:(r=J)==null?void 0:r.getSessionID()})}else{var a;n=P({entryPointAction:"SEARCH_BOX",query:t,typeaheadSessionID:(a=J)==null?void 0:a.getSessionID()})}w(n),g==null||g(t)},n[42]=N,n[43]=J,n[44]=w,n[45]=g,n[46]=T,n[47]=P,n[48]=fe):fe=n[48];var ge=fe,he;n[49]!==B||n[50]!==l?(he=function(){B.clearQueryCache(),l&&l()},n[49]=B,n[50]=l,n[51]=he):he=n[51];var ye=he,Ce=r("useStable")(S),be;n[52]===Symbol.for("react.memo_cache_sentinel")?(be=s._(/*BTDS*/"Search Facebook"),n[52]=be):be=n[52];var ve=be,Se=T==="",Re=Se?"grid":"listbox",Le;n[53]===Symbol.for("react.memo_cache_sentinel")?(Le={bypassCacheRenderLimitCheck:C},n[53]=Le):Le=n[53];var Ee=b.inputEndContent,ke;n[54]!==a?(ke={hideIconOnFocus:!0,size:"large",xstyle:a},n[54]=a,n[55]=ke):ke=n[55];var Ie=b.inputStartContent,Te;n[56]===Symbol.for("react.memo_cache_sentinel")?(Te=s._(/*BTDS*/"Search Facebook"),n[56]=Te):Te=n[56];var De=J,xe;n[57]!==m?(xe={onHeaderActionPress:m},n[57]=m,n[58]=xe):xe=n[58];var $e=r("useSearchCometGlobalTypeaheadViewStrategy")(xe),Pe;return n[59]!==Ce||n[60]!==k||n[61]!==B||n[62]!==ye||n[63]!==me||n[64]!==_e||n[65]!==ge||n[66]!==J||n[67]!==u||n[68]!==b||n[69]!==T||n[70]!==D||n[71]!==se||n[72]!==ke||n[73]!==$e||n[74]!==Z||n[75]!==Re?(Pe=d.jsx(r("CometErrorBoundary.react"),{fallback:v,children:d.jsx(Ce,babelHelpers.extends({},b,{autoOpen:k,dataSource:B,dataSourceFetchConfigParams:Le,decorators:se,inputEndContent:Ee,inputExtraProps:ke,inputStartContent:Ie,inputStrategyRenderer:r("SearchCometGlobalTypeaheadInputStrategy.react"),label:Te,layoutStrategyRenderer:r("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:De,onChange:D,onClose:ye,onEscape:u,onFocus:me,onPressEntry:_e,onSelectFreeformQuery:ge,placeholder:ve,queryString:T,testid:void 0,traceProvider:Z,viewRole:Re,viewStrategyRenderer:$e}))}),n[59]=Ce,n[60]=k,n[61]=B,n[62]=ye,n[63]=me,n[64]=_e,n[65]=ge,n[66]=J,n[67]=u,n[68]=b,n[69]=T,n[70]=D,n[71]=se,n[72]=ke,n[73]=$e,n[74]=Z,n[75]=Re,n[76]=Pe):Pe=n[76],Pe}function v(){return d.jsx(r("CometTypeaheadErrorFallback.react"),{})}v.displayName=v.name+" [from "+i.id+"]";function S(){return(r("withSearchCometTypeaheadSERPWarmCallDecorator")!=null?r("withSearchCometTypeaheadSERPWarmCallDecorator"):r("emptyFunction").thatReturnsArgument)(r("withSearchCometTypeaheadTraceEndReasonDecorator")(r("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(r("withSearchCometTypeaheadBaseNavigationDecorator")(r("BaseTypeahead.react")))))}function R(e){e.bumpEntityKey(354,"typeahead.missing_logger_context","focused")}function L(e,t,n,r){var o=e.rawData,a;if(o!=null&&e.subtype==="recent"&&n){var i;a=o==null||(i=o.profile)==null?void 0:i.url}if(o!=null&&(e.subtype==="keyword"||e.subtype==="bootstrap"||e.subtype==="recent")&&r){var l;a=o==null||(l=o.structuredInfo)==null||(l=l.direct_nav_result)==null?void 0:l.link_url}return a!=null?a:t}l.default=b}),226);/*FB_PKG_DELIM*/
__d("I64MigrationHelper",["I64","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return r("nullthrows")((e||(e=o("I64"))).cast(t))}l.cast=s}),98);
__d("LSDatascriptRuntimeTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UI","BROKER"]);i.TopLevelCallOrigin=e}),66);
__d("LSClientDependencies",[],(function(t,n,r,o,a,i){}),null);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","ODS","SiteData","clearTimeout","cr:19620","err","justknobx","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=babelHelpers.extends({},n("cr:19620"));function u(e){Object.assign(s,e)}var c={_tombstone:!0};function d(t){var n=new Map;for(var a of t){var i=a.name;i!=null&&!_(i)&&n.set(i,r("nullthrows")(a.value))}if(n.size===0)return Promise.resolve();var l=new Promise(function(t){var a={},i=[],u=function(){var t=c[0],n=c[1],r=n==null?void 0:n.__dr;a[r]={be:1,r:[]},i.push(r),(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",r),s[t]={load:async function(){return await l,s[t]}}};for(var c of n)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}}),m(r("Bootloader"),i,function(e){Array.from(n.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()})});return l}function m(e,t,n){return e.loadModules.call(e,t,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t)})}function p(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e){return e in s&&s[e]!==c}var f=r("justknobx")._("2800");function g(t,n,a){var i=new Map;for(var l of t!=null?t:[])_(l)||i.set(l,"LS"+p(l));for(var u of n!=null?n:[])_(u+".bs")?u+".nop"in s||i.set(u+".nop","LS"+p(u)+".nop"):i.set(u+".bs","LS"+p(u)+".nop");for(var d of a!=null?a:[])d in s||i.set(d,"LS"+p(d));if(i.size===0)return Promise.resolve();var g=new Promise(function(t,n){var a={},l=[],u=function(){var t=d[0],n=d[1];(e||(e=o("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",n),o("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(n),a[n]={be:1,r:[]},l.push(n),s[t]={load:async function(){try{await g}catch(e){throw s[t]=c,e}return s[t]}}};for(var d of i)u();r("Bootloader").handlePayload({compMap:a,consistency:{rev:r("SiteData").client_revision}});var p=m(r("Bootloader"),l,function(e){r("clearTimeout")(_),Array.from(i.entries()).forEach(function(t,n){var r=t[0],o=t[1];s[r]=e[n]}),t()}),_=r("setTimeout")(function(){p.remove();var e=r("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",f,Array.from(i.keys()));e.name="dynamic_sproc_loading_timeout",n(e)},f)});return g}l.cachedModules=s,l.addToCachedModules=u,l.TOMBSTONE=c,l.downloadRelayDependencies=d,l.downloadBootloaderDependencies=g}),98);
__d("XPlatReactCrypto",["err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=self.crypto)==null?void 0:e.subtle;function u(e){var t;if(typeof((t=self.crypto)==null?void 0:t.getRandomValues)!="function")throw r("err")("crypto.getRandomValues: Not implemented");return self.crypto.getRandomValues(e),e}function c(){var e;if(typeof((e=self.crypto)==null?void 0:e.randomUUID)!="function")return null;var t=self.crypto.randomUUID();return typeof t=="string"?t:null}function d(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.importKey: Not implemented");return s.importKey(e,t,n,o,a)}function m(e,t){if(s==null)throw r("err")("crypto.subtle.exportKey: Not implemented");return s.exportKey(e,t)}function p(e,t,n){if(s==null)throw r("err")("crypto.subtle.generateKey: Not implemented");return s.generateKey(e,t,n)}function _(e,t,n){if(s==null)throw r("err")("crypto.subtle.encrypt: Not implemented");return s.encrypt(e,t,n)}function f(e,t,n){if(s==null)throw r("err")("crypto.subtle.decrypt: Not implemented");return s.decrypt(e,t,n)}function g(e,t,n){if(s==null)throw r("err")("crypto.subtle.sign: Not implemented");return s.sign(e,t,n)}function h(e,t){if(s==null)throw r("err")("crypto.subtle.digest: Not implemented");return s.digest(e,t)}function y(e,t,n){if(s==null)throw r("err")("crypto.subtle.deriveBits: Not implemented");return s.deriveBits(e,t,n)}function C(e,t,n,o,a){if(s==null)throw r("err")("crypto.subtle.deriveKey: Not implemented");return s.deriveKey(e,t,n,o,a)}l.getRandomValues=u,l.randomUUID=c,l.subtleImportKey=d,l.subtleExportKey=m,l.subtleGenerateKey=p,l.subtleEncrypt=_,l.subtleDecrypt=f,l.subtleSign=g,l.subtleDigest=h,l.subtleDeriveBits=y,l.subtleDeriveKey=C}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s={add:(e||(e=o("I64"))).add,and_:e.and_,asr_:e.asr_,cast:function(n){return(e||(e=o("I64"))).mk(n[1],n[0])},div:e.div,eq:function(n,r){return n==null&&r==null||n!=null&&r!=null&&(e||(e=o("I64"))).equal(n,r)},from_string:function(n){try{return(e||(e=o("I64"))).of_string(n)}catch(e){throw r("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',n)}},ge:e.ge,gt:e.gt,le:e.le,lsl_:e.lsl_,lsr_:e.lsr_,lt:e.lt,max:e.max,min:e.min,mod_:e.mod_,mul:e.mul,neq:function(n,r){return n==null&&r!=null||n!=null&&r==null||n!=null&&r!=null&&!(e||(e=o("I64"))).equal(n,r)},of_float:e.of_float,of_int32:e.of_int32,or_:e.or_,random:function(){var t=Array.from(o("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));return t[0]>>>=1,(e||(e=o("I64"))).add(e.lsl_(e.of_float(t[0]),32),e.of_float(t[1]))},sub:e.sub,to_float:e.to_float,to_int32:e.to_int32,to_string:function(n){return n==null?n:(e||(e=o("I64"))).to_string(n)},xor:e.xor};l.default=s}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s={__val__:"__stop_iteration__"};function u(e){return{__val__:"__next_value__",next:e}}function c(e){return e!=null&&typeof e=="object"&&e.__val__==="__next_value__"}function d(t,n,a){for(var i=m(t,a);!(e||(e=r("isPromise")))(i);){if(i.done)return o("LSSynchronousPromise").makeSynchronousPromise(i);var l=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(n(i));if((e||(e=r("isPromise")))(l))return l.then(function(e){if(e===s)return i;var r=c(e)?e.next:void 0;return d(t,n,r)});if(l===s)return o("LSSynchronousPromise").makeSynchronousPromise(i);var u=c(l)?l.next:void 0;i=m(t,u)}var _=p(n);return i.then(function(e){return e.done?e:_(e).then(function(r){if(r===s)return e;var o=c(r)?r.next:void 0;return d(t,n,o)})})}function m(t,n){var a=t.next(n);return(e||(e=r("isPromise")))(a)?o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a):a}function p(e){return function(t){var n=e(t);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(n)}}l.STOP_ITERATION=s,l.wrapNextValue=u,l.iteratorLoop=d}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return u(e,t)},n.next=function(){var n={done:!0},r=function(r){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t(r.value.item)).then(function(e){if(e)return n=r,o("LSMaybeSyncIteration").STOP_ITERATION})};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){return n})},n}function c(e,t,n){var r,a=0;return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return c(e,t,n)},r.next=function(){if(a>=n)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});var r={done:!0},i=function(n){if(!(a++<t))return r=n,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,i).then(function(){return r})},r}function d(e,t){return m(e).then(function(e){return e.reduce(function(e,n){return e.then(function(){return t(n)})},o("LSSynchronousPromise").makeSynchronousPromise(void 0))})}function m(e){var t=[],n=function(n){t.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return t})}function p(t,n,r){var a;r===void 0&&(r=[]);var i={ASC:1,DESC:-1},l=function(r,a){for(var t=r.item,l=a.item,s=0;s<n.length;s++){var u=n[s],c=u[0],d=t[c],m=l[c],p=0;if(d==null&&m==null?p=0:d==null&&m!=null?p=-1:d!=null&&m==null?p=1:p=(e||(e=o("ReStoreKeyComparer"))).compareValue(d,m),p!==0)return p*i[n[s][1]]}return 0},s,u=[],c=[],d=function(t){for(var e=[],n=r.length-1;n>=0;n--)e.push(t[r[n]]);return e},m=function(){c=u,c.sort(l),u=[]};return a={},a[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(t,n,r)},a.next=function(){if(c.length)return o("LSSynchronousPromise").makeSynchronousPromise({done:!1,value:c.shift()});var n=function(n){var t=d(n.value.item);if(s!=null&&(e||(e=o("ReStoreKeyComparer"))).compareKey(s,t)!==0)return m(),u.push(n.value),s=t,o("LSMaybeSyncIteration").STOP_ITERATION;s=t,u.push(n.value)};return o("LSMaybeSyncIteration").iteratorLoop(t,n).then(function(){return!c.length&&u.length&&m(),c.length?{done:!1,value:c.shift()}:{done:!0}})},a}function _(e){var t=0,n=function(){t++};return o("LSMaybeSyncIteration").iteratorLoop(e,n).then(function(){return(s||(s=o("I64"))).of_int32(t)})}function f(e,t){return{forEach:function(a){return m(e).then(function(e){var n=e.reduce(function(e,n){var r=n.item[t],o=(e.get(r)||0)+1;return e.set(r,o)},new(r("LSDict"))),i=o("LSSynchronousPromise").makeSynchronousPromise(void 0),l=function(){var e=u[0],n=u[1];i=i.then(function(){var r;return a((r={},r[t]=e,r.group_count=(s||(s=o("I64"))).of_int32(n),r))})};for(var u of n.entries())l();return i})}}}l.filter=u,l.slice=c,l.forEach=d,l.toArray=m,l.sortBy=p,l.count=_,l.groupBy=f}),98);
__d("LSPendingTasksPluginType",[],(function(t,n,r,o,a,i){var e=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});i.default=e}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(t,n,r,o,a,i,l){"use strict";var e,s="4",u="16",c=new Set([r("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function d(t){var n=c.has((e||(e=o("I64"))).to_float(t.pluginType)),r=t.context===u||t.context===s;return n||r}l.default=d}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","isNativeTask"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set(["messages","attachments","reactions"]);function c(e){return u.has(e)}function d(e,t,n){return e&&t.name==="pending_tasks"&&n!=null&&r("isNativeTask")(n)}function m(e){for(var t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function p(e,t,n){n===void 0&&(n="asc");var r=e.entries(new WeakMap,n);function a(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,e.next=function(){var e={done:!0},a=0,i="start",l=[],u=function(u){for(var r=function(){var e=a,r=t[e]||{},c=r.end,d=r.start,m=u.value[0];if(d&&i==="start"){var p=(s||(s=o("ReStoreKeyComparer"))).compareValue(m[e],d[0]),_=p*(n==="asc"?1:-1)<d[1];if(_){if(i="start_verify",l=m.slice(0,e),e===m.length-1&&p===0)return{v:void 0};var f=[].concat(l,[d[0]],d[1]&&n==="asc"||!d[1]&&n==="desc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:o("LSMaybeSyncIteration").wrapNextValue(f)}}else i="check_end"}if(d&&i==="start_verify"&&!l.every(function(e,t){return(s||(s=o("ReStoreKeyComparer"))).compareValue(e,m[t])===0}))return a=0,i="start",{v:void 0};if(c&&(s||(s=o("ReStoreKeyComparer"))).compareValue(c[0],m[e])*(n==="asc"?1:-1)<c[1])return a=0,i="start",{v:o("LSMaybeSyncIteration").wrapNextValue([].concat(m.slice(0,e),n==="asc"?[(s||(s=o("ReStoreKeyComparer"))).MAX_KEY]:[]))};a++,i="start"},c;a<t.length;)if(c=r(),c)return c.v;return e=u,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(r,u).then(function(){return e})},e}return a()}function _(e,t,n,o,a){return{delete:function(){return n.delete.apply(n,e)},item:t,update:function(l){var i=a&&c(o.name)?{transportKey:"FBBroker"}:{},s=babelHelpers.extends({},t,l,i);if(d(a,o,s))throw r("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return n.upsert(e,m(s))}}}function f(e,t){var n;return n={},n[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return f(e,t)},n.next=function(){var n={done:!0},r=function(t){return n=t,o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(e,r).then(function(){if(n.done)return o("LSMaybeSyncIteration").iteratorLoop(t,r)}).then(function(){return n})},n}function g(e,t,n){var r,a=[{done:!0},{done:!0}],i=function(t){var e=a[t];return a[t]={done:!0},e};return r={},r[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return g(e,t,n)},r.next=function(){var r=function(t){return function(e){return t==="a"?a[0]=e:a[1]=e,o("LSMaybeSyncIteration").STOP_ITERATION}},l=o("LSSynchronousPromise").makeSynchronousPromise();return a[0].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(e,r("a"))})),a[1].done&&(l=l.then(function(){return o("LSMaybeSyncIteration").iteratorLoop(t,r("b"))})),l.then(function(){if(a[0].done&&a[1].done)return{done:!0};if(a[0].done)return i(1);if(a[1].done)return i(0);var e=(s||(s=o("ReStoreKeyComparer"))).compareKey(a[0].value[0],a[1].value[0]);return e===0||e*(n==="asc"?1:-1)<0?i(0):i(1)})},r}var h=(e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return h},e.next=function(){return o("LSSynchronousPromise").makeSynchronousPromise({done:!0})},e);function y(e,t,n,a,i,l,s,u){var m=new Set,y=e.length>1,C=e.length===1&&e[0][1]==null,b=e.map(function(e){var r=e[0],s=e[1];return r.map(function(e){a.key_lookup===!0&&e.length!==0&&(s==null?"primary":"index "+s)+""+n.name+(JSON.stringify(e)||""),a.table_scan===!0&&e.length===0&&""+n.name;var r=e.map(function(e){return l(e,t)}),u=r.length===(s==null?n.primaryKeyIds:n.indexes[s]).length&&r.every(function(e){var t=e.end,n=e.start;return n&&t&&n[0]===t[0]&&n[1]===0&&t[1]===0});if(u){var c=function(){var e,t=!1;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=c,e.next=function(){var e;if(t)return o("LSSynchronousPromise").makeSynchronousPromise({done:!0});t=!0;var a=r.map(function(e){var t=e.start;return t[0]});return(e=s==null?i:i.index(s)).get.apply(e,a).then(function(e){if(!e)return{done:!0};var t=o("ReStoreVaulting").maybeUnvaultDbRow(e,n.name);return{done:!1,value:[a,t]}})},e};return c()}return p(s==null?i:i.index(s),r,t)})}).flat().reduce(function(n,r,o){var a=o===0&&n==null?h:n;return e.length>1?f(a,r):g(a,r,t)});function v(){var e;return e={},e[typeof Symbol=="function"?Symbol.asyncIterator:"@@asyncIterator"]=v,e.next=function(){var e=!0,t,a,l,p,f=function(i){e=!1;var r=i.value;if(a=r[0],l=r[1],t=C?a:n.primaryKeyIds.map(function(e){return l[e]}),d(s,n,l)){p=i,e=!0;return}if(c(n.name)&&s&&l!=null&&l.transportKey!=="FBBroker"){p=i,e=!0;return}if(y){var u=JSON.stringify(t);if(m.has(u)){e=!0;return}m.add(u)}return o("LSMaybeSyncIteration").STOP_ITERATION};return o("LSMaybeSyncIteration").iteratorLoop(b,f).then(function(){if(p!=null){var o=p.value[1].transportKey;r("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',u,o)}return e||t==null||l==null?{done:!0}:{done:!1,value:_(t,l,i,n,s)}})},e}return v()}l.isTranportKeyEnforcedTable=c,l.isNativePendingTaskViolation=d,l.stripUndefinedProperties=m,l.unionIterators=f,l.mergeIterators=g,l.fetch=y}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.name.match(/secure_|inbox(?!_)/i)}function s(t,n,o,a,i,l,s){return{metadata:o,table:function(d){var c=o.tableNames[o.tableIds[d]];if(n===0&&e(c))throw r("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return u(t,c,a,i,l,s)},transactionId:t.__internal__transaction_id}}function u(e,t,n,a,i,l){var s=e.transactionTable(t.name,a[a.length-1]);return{add:function(n){l==null||l.logTableOperation(t.name,"add"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker");var e=s.add(n);return r("gkx")("6636")?e:Promise.resolve(e)},fetch:function(){l==null||l.logTableOperation(t.name,"fetch"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"asc",t,n,s,c,i,a.join(", "))},fetchDesc:function(){l==null||l.logTableOperation(t.name,"fetchDesc"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample());for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o("LSIterationHelpers").fetch(r.length===0?[[[[]],void 0]]:r,"desc",t,n,s,c,i,a.join(", "))},peekNextAutoIncrementId:function(){return l==null||l.logTableOperation(t.name,"peekNextAutoIncrementId"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),s.peekNextAutoIncrementId()},put:function(n){if(l==null||l.logTableOperation(t.name,"put"),t.name.includes("encrypted_backups")&&(l==null||l.shouldSample()),o("LSIterationHelpers").isTranportKeyEnforcedTable(t.name)&&i&&(n.transportKey="FBBroker"),o("LSIterationHelpers").isNativePendingTaskViolation(i,t,n))throw r("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=t.primaryKeyIds.map(function(e){if(n[e]!==void 0)return n[e];throw r("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")}),a=s.delete.apply(s,e).then(function(){return s.add(o("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},n)))});return r("gkx")("6636")?a:Promise.resolve(a)}}}function c(e,t){if(typeof e=="object"&&!Array.isArray(e)){var n,o;if(t==="asc"){if(Object.prototype.hasOwnProperty.call(e,"gt")&&(n=[e.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");n=[e.gte,0]}if(Object.prototype.hasOwnProperty.call(e,"lt")&&(o=[e.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");o=[e.lte,0]}}else{if(Object.prototype.hasOwnProperty.call(e,"lt")&&(n=[e.lt,1]),Object.prototype.hasOwnProperty.call(e,"lte")){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");n=[e.lte,0]}if(Object.prototype.hasOwnProperty.call(e,"gt")&&(o=[e.gt,1]),Object.prototype.hasOwnProperty.call(e,"gte")){if(o!=null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");o=[e.gte,0]}}return{end:o,start:n}}return{end:[e,0],start:[e,0]}}l.LSRuntimeDb=s,l.parseConstraint=c}),98);
__d("XPlatReactTextDecoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextDecoder;i.TextDecoder=e}),66);
__d("XPlatReactTextEncoder",[],(function(t,n,r,o,a,i){"use strict";var e=self.TextEncoder;i.TextEncoder=e}),66);
__d("base64Binary",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){for(var t="",n=0;n<e.byteLength;n+=3){var r=e.subarray(n,n+3);t+=m(r)}var o=(e.byteLength+2)%3;return t.slice(0,t.length+o-2)+"==".slice(o)}function u(e){var t,n;e.length%4===0||s(0,51156);for(var r=e.length/4,o=(t=(n=e.match(/={0,2}$/))==null?void 0:n[0].length)!=null?t:0,a=new Uint8Array(r*3-o),i=0;i<r;i++){var l=p(e.slice(i*4,i*4+4));a.set(l.subarray(0,a.byteLength-i*3),i*3)}return a}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=">___?456789:;<=___\0___\0\x07\b	\n\v\f\r______\x1B !\"#$%&'()*+,-./0123";function m(e){var t,n,r=e[0]<<16|((t=e[1])!=null?t:0)<<8|((n=e[2])!=null?n:0);return String.fromCharCode(c.charCodeAt(r>>>18),c.charCodeAt(r>>>12&63),c.charCodeAt(r>>>6&63),c.charCodeAt(r&63))}function p(e){var t=d.charCodeAt(e.charCodeAt(0)-43)<<18|d.charCodeAt(e.charCodeAt(1)-43)<<12|d.charCodeAt(e.charCodeAt(2)-43)<<6|d.charCodeAt(e.charCodeAt(3)-43);return new Uint8Array([t>>>16,t>>>8&255,t&255])}l.encode=e,l.decode=u}),98);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDatascriptRuntimeTypes","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MWFBLogger","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h="LS_WEB",y=o("MessengerLogHistory").getInstance("ls");function C(e){return o("base64Binary").decode(e).buffer}var b={compareTo:function(t,n){for(var e=new Uint8Array(t),r=new Uint8Array(n),o=Math.min(e.length,r.length),a=0;a<o;a++){var i=e[a]-r[a];if(i!==0)return i}return e.length===r.length?0:e.length-r.length},eq:function(t,n){if(t==null&&n==null)return!0;if(t==null||n==null)return!1;var e=new Uint8Array(t),r=new Uint8Array(n);if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==r[o])return!1;return!0},ge:function(t,n){return b.compareTo(t,n)>=0},gt:function(t,n){return b.compareTo(t,n)>0},le:function(t,n){return b.compareTo(t,n)<=0},lt:function(t,n){return b.compareTo(t,n)<0},neq:function(t,n){return!b.eq(t,n)},of_string:function(t){if(t!=null){var e=new(o("XPlatReactTextEncoder")).TextEncoder;return e.encode(t).buffer}},to_string:function(t){if(t!=null){var e=new(o("XPlatReactTextDecoder")).TextDecoder;return e.decode(t)}}};function v(e){if(e.length!==1)throw r("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");var t=e[0],n=parseInt(t.substr(-8),16),a=parseInt(t.substr(0,t.length-8),16);return(g||(g=o("I64"))).mk((n>>>1)+(a&1)*2147483648^-(n&1),a>>>1^-(n&1))}function S(e){var t,n;return(t=(n=e.__sproc_name__)!=null?n:e.__debugModuleSource)!=null?t:"<unknown_sproc>"}var R=(function(){var e=0;function t(t){var o=t.args,a=t.shouldLog,i=t.sprocName;if(n("cr:1088")==null||n("cr:1088").logStoredProcedureCall(i,o),!(!a||!n("cr:4790"))){var l=++e;return n("cr:4790").markerStart(r("qpl")._(25302991,"143"),l),n("cr:4790").markerAnnotate(r("qpl")._(25302991,"143"),{string:{name:i}},{instanceKey:l}),l}}function o(e,t,o){var a=e.shouldLog;!a||t==null||n("cr:4790")==null||n("cr:4790").markerEnd(r("qpl")._(25302991,"143"),o,t)}function a(e){return Math.random()*r("MetaConfig")._("10")<1}return{call:t,logSprocDone:o,shouldLogSproc:a}})(),L="Native operation timeout; transaction blocked",E=30*1e3;function k(t,n,a,i,l,g,I,T){l===void 0&&(l={}),g===void 0&&(g=void 0);var D=[],x=o("LSRuntimeDb").LSRuntimeDb(i,t,n,l,D,I,T),$=function(n,l){for(var e=arguments.length,s=new Array(e>2?e-2:0),u=2;u<e;u++)s[u-2]=arguments[u];var c;if(typeof l=="string"){if(c=a[l.toString()],c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",n,l);if(c===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",l);c.load&&(c=c.load())}else c=l;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(c).then(function(e){return e.call.apply(e,[i,t].concat(s))})},P=function(n){for(var e=arguments.length,l=new Array(e>1?e-1:0),s=1;s<e;s++)l[s-1]=arguments[s];var u;if(typeof n=="string"){if(u=a[n+".bs"]||a[n+".nop"],u==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",n);if(u===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent native type op loading failed for: %s (retryable)",n);u.load&&(u=u.load())}else u=n;var c,d;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(u).then(function(e){var n,a;c=(n=(a=e.__nop_name__)!=null?a:e==null?void 0:e.toString().slice(0,250))!=null?n:"<unknown nop name>",d=T==null?void 0:T.logNativeOperationStart(c);var s=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e.apply(void 0,[i,t].concat(l)));return(m||(m=r("isPromise")))(s)&&r("justknobx")._("3895")&&(f||(f=r("ExecutionEnvironment"))).isInBrowser?Promise.race([s,new Promise(function(e,t){return r("setTimeout")(function(){return t(r("err")(L))},E)})]):s}).then(function(e){var t;return(t=d)==null||t.end(),e},function(e){var t;(t=d)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"NATIVE_OP_ID",c).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",c,(e==null?void 0:e.message)===L,(f||(f=r("ExecutionEnvironment"))).isInWorker)})},N=function(t){return t.slice(1).reduce(function(e,n){return typeof n!="function"?(r("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",n,typeof n,JSON.stringify(t.map(function(e){return typeof e}))),e):e.then(n)},t[0]())},M=function(t,n){return t.slice(n)};return{Map:r("LSDict"),blob:C,blobs:b,constructor:{n:v},count:o("LSIterationOperations").count,createArray:function(){return r("LSVec").ofArray([])},createArrayWithElements:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("LSVec").ofArray(t)},db:x,filter:o("LSIterationOperations").filter,forEach:o("LSIterationOperations").forEach,groupBy:o("LSIterationOperations").groupBy,i64:r("LSInt64Lite"),islc:o("LSIterationOperations").slice,like:function(t,n){var e=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(e).test(t)},logger:function(t){if(g)return{debug:g,info:g,mustfix:g,warn:g};var e=o("MWFBLogger").MWLogger(),n=t.startsWith("epoch mismatch"),a=t.startsWith("cursor mismatch");if(n||a){var i=function(t){y.error(t,"error");var e=(function(){return n?"epoch_mismatch":a?"cursor_mismatch":"fixme_could_not_produce_key"})();(p||(p=o("ODS"))).bumpEntityKey(3185,"lsplatform",e)};return{debug:function(t){return y.debug(t)},info:function(t){return y.debug(t)},mustfix:i,warn:i}}else return r("gkx")("26382")||(e.info=r("emptyFunction")),e},loopAsync:function(n,a){function t(i){if(r("LSInt64Lite").lt(i,n)){for(var l=i,u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l));!(m||(m=r("isPromise")))(u);){if(l=r("LSInt64Lite").add(l,v(e||(e=babelHelpers.taggedTemplateLiteralLoose(["2"])))),!r("LSInt64Lite").lt(l,n))return o("LSSynchronousPromise").makeSynchronousPromise(void 0);u=o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a(l))}return u.then(function(){return t(r("LSInt64Lite").add(l,v(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))})}return o("LSSynchronousPromise").makeSynchronousPromise(void 0)}return t(v(u||(u=babelHelpers.taggedTemplateLiteralLoose(["0"]))))},loopSync:function(t,n){for(var e=v(c||(c=babelHelpers.taggedTemplateLiteralLoose(["0"])));r("LSInt64Lite").lt(e,t);e=r("LSInt64Lite").add(e,v(d||(d=babelHelpers.taggedTemplateLiteralLoose(["2"])))))n(e)},merge:function(){function e(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue(e,t)>0?e:t}function t(e,t){return(_||(_=o("ReStoreKeyComparer"))).compareValue([e[0],-e[1]],[t[0],-t[1]])<0?e:t}for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.reduce(function(n,r){var a=o("LSRuntimeDb").parseConstraint(r,"asc");return{end:n.end&&a.end?t(a.end,n.end):a.end||n.end,start:n.start&&a.start?e(a.start,n.start):a.start||n.start}},{});return babelHelpers.extends({},i.start?i.start[1]?{gt:i.start[0]}:{gte:i.start[0]}:null,i.end?i.end[1]?{lt:i.end[0]}:{lte:i.end[0]}:null)},n:v,nativeOperation:P,nativeTypeOperation:$,notnull:function(t){if(t===null)throw r("FBLogger")("messenger_web").mustfixThrow("value should not be null");return t},print:function(t){},resolve:function(t){return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t)},resolveGuaranteeAsync:function(t){var e;return((e=self.Promise)!=null?e:Promise).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(t))},rm:r("LSInt64Lite").of_int32(t),sequence:N,slice:M,sortBy:o("LSIterationOperations").sortBy,storedProcedure:function(s){for(var e=arguments.length,u=new Array(e>1?e-1:0),c=1;c<e;c++)u[c-1]=arguments[c];var d;if(typeof s=="string"){if(d=a[s],d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",s);if(d===o("LSDynamicDependencies").TOMBSTONE)throw r("err")("Concurrent sproc loading failed for: %s (retryable)",s);d.load&&(d=d.load())}else d=s;var m=this;switch(t){case 0:m=k(2,n,a,i,l,g,I);break;case 2:m=k(1,n,a,i,l,g,I);break}var p,_,f,y;return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(d).then(function(e){return _=S(e),f=R.shouldLogSproc(_),D.push(_),p=R.call({args:u,shouldLog:f,sprocName:_}),y=T==null?void 0:T.logSprocCallStart(_,o("LSDatascriptRuntimeTypes").TopLevelCallOrigin.UI),i.reportUsedTablesForSyncAccess(e.__tables__),e.apply(void 0,u.concat([m]))}).then(function(e){var t;return D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,2),(t=y)==null||t.end(),e},function(e){var t;throw D.pop(),R.logSprocDone({args:u,shouldLog:f,sprocName:_},p,3),(t=y)==null||t.end(),r("FBLogger")("messenger_web").catching(e).addMetadata(h,"SPROC_STACK",D.join(`
`)).warn("Sproc %s failed",_),e})},throw:function(t){throw r("FBLogger")("messenger_web").mustfixThrow(t)},toArray:o("LSIterationOperations").toArray,toJSON:function(t){return o("LSJson").stringify(t)}}}k.n=v,l.default=k}),98);
__d("LSClientSchemaType",[],(function(t,n,r,o,a,i){"use strict";var e="maw";i.MAW_SCHEMA_NAME=e}),66);
__d("LSConstants",[],(function(t,n,r,o,a,i){"use strict";var e="ls";i.LS_SCHEMA_NAME=e}),66);
__d("LSContactBlockedByViewerStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNBLOCKED:0,MESSAGE_BLOCKED:1,FULLY_BLOCKED:2});i.default=e}),66);
__d("LSContactGender",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});i.default=e}),66);
__d("LSContactIdType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FBID:1,SMS_LOCAL_ID:2});i.default=e}),66);
__d("LSContactType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});i.default=e}),66);
__d("LSContactWorkForeignEntityType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});i.default=e}),66);
__d("LSDbV1.upgrade",[],(function(t,n,r,o,a,i){"use strict";var e={};i.afterUpgrade=e}),66);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={c:"string",t:"string"};for(var n in t){if(!Object.prototype.hasOwnProperty.call(e,n)||e[n]==null)return r("FBLogger")("messenger_web").warn('Malformed default values data, missing key "%s"',n),null;var o=e[n],a=t[n],i=typeof o;if(i!==a)return r("FBLogger")("messenger_web").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',n,i,a),null}if(typeof e.c!="string"||typeof e.t!="string")return null;var l=[],s=e.t;try{l=JSON.parse(e.c);for(var u of l)if(typeof u!="string")return null}catch(e){return null}return{columns:l,tableName:s}}function s(e){return{c:JSON.stringify(e.columns),t:e.tableName}}var u="_db_defaults_meta";l.tryParseDefaultValuesData=e,l.defaultValuesColumnToValue=s,l.defaultValuesTableName=u}),98);
__d("ReStoreCommonUtils",["isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){function o(n){return n.done?n.value:(e||(e=r("isPromise")))(n.value)?n.value.then(function(e){return o(t.next(e))}):o(t.next(n.value))}return o(t.next(n))}l.gen=s}),98);
__d("ReStoreOperationLock",["ReStoreCommonUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==="\u2757"}var s=(function(){function e(e){var t=this;this.isSync=!1,this.waitFor=null,this.waitFor=e.then(function(e){return t.waitFor=null})}var t=e.prototype;return t.chainPromiseOrValue=function(t){return this.waitFor!=null?this.waitFor.then(function(){return t("\u{1F512}")}):t("\u{1F512}")},e})(),u=(function(){function e(){this.isSync=!0}var t=e.prototype;return t.chainPromiseOrValue=function(t){return t("\u2757")},e})(),c=(function(){function e(){this.isSync=!1,this.$1=Promise.resolve()}var t=e.prototype;return t.chainPromiseOrValue=function(t){var e=this;return new Promise(function(n,r){e.$1=e.$1.then(async function(){try{n(await t("\u{1F512}"))}catch(e){r(e)}})})},e})();function d(e,t){return{next:function(r){return t.chainPromiseOrValue(function(t){return o("ReStoreCommonUtils").gen(e.next(t,r))})}}}l.isNoopLockProof=e,l.WaitForPromiseLock=s,l.NoopLock=u,l.ReStoreOperationLock=c,l.lockIterator=d}),98);
__d("ReStoreIndex",["ReQLBounds","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e,t,n,r,a){var i=this;this.entries=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").entries(i.$5,e,i.$1,i.$3,t,n,i.$2),i.$4)},this.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.$4.chainPromiseOrValue(function(e){return o("ReStoreUtils").getLocked(i.$5,new WeakMap,i.$1.name,i.$3,t,e,i.$2)})},this.getKey=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.$4.chainPromiseOrValue(function(e){return i.$6(i.$5,new WeakMap,t,e)})},this.keys=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").keys(i.$5,e,i.$1,i.$3,t,n),i.$4)},this.$3=e,this.keyFields=t.indexes[e],this.$1=t,this.$2=n,this.$4=r,this.$5=a}var t=e.prototype;return t.$6=function(t,n,r,a){var e=this,i=o("ReStoreUtils").getLocked(t,n,this.$1.name,this.$3,r,a,this.$2);return i.then(function(t){if(t!==void 0)return o("ReStoreUtils").searchKey(e.$1,t)})},e})(),u=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(s),c=(function(t){function n(n,r,a,i,l,s){var u;return u=t.call(this,n,r,a,i,l)||this,u.subscribe=function(t,n,r){return u.$ReStoreIndex$p_3.subscribeIndex(u.$ReStoreIndex$p_1.name,u.$ReStoreIndex$p_2,t,(e||(e=o("ReQLBounds"))).extendBounds(n,u.$ReStoreIndex$p_1.indexes[u.$ReStoreIndex$p_2].length),r)},u.$ReStoreIndex$p_2=n,u.$ReStoreIndex$p_1=r,u.$ReStoreIndex$p_3=s,u}return babelHelpers.inheritsLoose(n,t),n})(s);l.ReStoreTransactionIndex=u,l.ReStoreIndex=c}),98);
__d("ReStoreTable",["FBLogger","I64","JSONStringifyBigIntSafe","LSSynchronousPromise","PromiseOrValue","ReQLBounds","ReStoreCommonUtils","ReStoreIndex","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=(e||(e=o("I64"))).cast(t);if(n===void 0)throw r("FBLogger")("messenger_web").mustfixThrow("Expected int64");return e.to_float(n)}function d(e,t,n,o,a){var i=r("JSONStringifyBigIntSafe")([t,n]),l=e.get(i);e.set(i,[l==null?o:l[0],a])}var m=(function(){function t(t,n,a,i){var l=this;this.entries=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").entries(l.$4,e,l.$1,void 0,t,n,l.$2),l.$3)},this.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.$3.chainPromiseOrValue(function(e){return o("ReStoreUtils").getLocked(l.$4,new WeakMap,l.$1.name,void 0,t,e,l.$2)})},this.keys=function(e,t,n){return t===void 0&&(t="asc"),o("ReStoreOperationLock").lockIterator(o("ReStoreUtils").keys(l.$4,e,l.$1,void 0,t,n),l.$3)},this.peekNextAutoIncrementId=function(){return l.$5(l.$3.chainPromiseOrValue(function(t){var n=l.$1.autoIncrement;if(!n)throw r("FBLogger")("messenger_web").mustfixThrow("only supported for auto-incrementing tables");return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(o("ReStoreCommonUtils").gen(l.$4.table(l.$1.name).readSeed(new WeakMap))).then(function(t){if(t===void 0)throw r("FBLogger")("messenger_web").mustfixThrow("unexpected undefined autoIncrementSeed");return(e||(e=o("I64"))).of_float(t)})}))},this.keyFields=t.primaryKeyIds,this.$1=t,this.$2=n,this.$3=a,this.$4=i}var n=t.prototype;return n.$5=function(t){return this.$3.isSync?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t):Promise.resolve(t)},t})(),p=(function(t){function n(e,n,r,a,i,l,u,c,d,m){var p,_=n.tableNames[e];return p=t.call(this,_,r,a,i)||this,p.$ReStoreTransactionTable$p_1=new Map,p.$ReStoreTransactionTable$p_10=new Map,p.add=function(e){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(s.map(p.$ReStoreTransactionTable$p_4.beforeAdd({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r;return(r=p.$ReStoreTransactionTable$p_9)==null||r.recordLogicalWrite(),o("ReStoreCommonUtils").gen(p.$ReStoreTransactionTable$p_14(p.$ReStoreTransactionTable$p_10,n,new WeakMap,p.$ReStoreTransactionTable$p_3.name,e,t))})}),function(t){return(s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.afterAdd({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(){return t})}))},p.delete=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.beforeDelete({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r=p;return o("ReStoreCommonUtils").gen((function*(a){(a=r.$ReStoreTransactionTable$p_9)==null||a.recordLogicalWrite(),yield*o("ReStoreUtils").deleteItemLocked(r.$ReStoreTransactionTable$p_2,r.$ReStoreTransactionTable$p_10,n,new WeakMap,r.$ReStoreTransactionTable$p_3.name,e,t),yield*o("ReStoreUtils").cascadeKeyUpdatesLocked(r.$ReStoreTransactionTable$p_2,r.$ReStoreTransactionTable$p_10,n,new WeakMap,r.$ReStoreTransactionTable$p_3.name,e,void 0,r.$ReStoreTransactionTable$p_4,t,r.$ReStoreTransactionTable$p_11)})())})}))},p.put=function(e){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(s.map(p.$ReStoreTransactionTable$p_4.beforePut({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(e){return p.$ReStoreTransactionTable$p_13(function(t,n){var r;return(r=p.$ReStoreTransactionTable$p_9)==null||r.recordLogicalWrite(),o("ReStoreCommonUtils").gen(o("ReStoreUtils").putLocked(p.$ReStoreTransactionTable$p_2,p.$ReStoreTransactionTable$p_10,n,new WeakMap,p.$ReStoreTransactionTable$p_3.name,e,p.$ReStoreTransactionTable$p_4,t,p.$ReStoreTransactionTable$p_11))})}),function(t){return(s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.afterPut({key:t,tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:e}),function(){return t})}))},p.upsert=function(e,t){return p.$ReStoreTransactionTable$p_12((s||(s=o("PromiseOrValue"))).map(p.$ReStoreTransactionTable$p_4.beforeUpsert({tableName:p.$ReStoreTransactionTable$p_3.name,transaction:p.$ReStoreTransactionTable$p_8,value:t}),function(n){return p.$ReStoreTransactionTable$p_13(function(r,a){var i=p;return o("ReStoreCommonUtils").gen((function*(l){(l=i.$ReStoreTransactionTable$p_9)==null||l.recordLogicalWrite(),yield*o("ReStoreUtils").upsertLocked(i.$ReStoreTransactionTable$p_2,i.$ReStoreTransactionTable$p_10,a,new WeakMap,i.$ReStoreTransactionTable$p_3.name,e,n,i.$ReStoreTransactionTable$p_4,r,i.$ReStoreTransactionTable$p_11),yield*o("ReStoreUtils").cascadeKeyUpdatesLocked(i.$ReStoreTransactionTable$p_2,i.$ReStoreTransactionTable$p_10,a,new WeakMap,i.$ReStoreTransactionTable$p_3.name,e,o("ReStoreUtils").searchKey(i.$ReStoreTransactionTable$p_3,t),i.$ReStoreTransactionTable$p_4,r,i.$ReStoreTransactionTable$p_11)})())})}))},p.index=function(e){return o("ReStoreUtils").getOrCreate(p.$ReStoreTransactionTable$p_1,e,function(){return new(o("ReStoreIndex")).ReStoreTransactionIndex(e,p.$ReStoreTransactionTable$p_3,p.$ReStoreTransactionTable$p_4,p.$ReStoreTransactionTable$p_5,p.$ReStoreTransactionTable$p_6)})},p.$ReStoreTransactionTable$p_3=_,p.$ReStoreTransactionTable$p_2=n,p.$ReStoreTransactionTable$p_4=r,p.$ReStoreTransactionTable$p_5=a,p.$ReStoreTransactionTable$p_6=i,p.$ReStoreTransactionTable$p_7=l,p.$ReStoreTransactionTable$p_8=u,p.$ReStoreTransactionTable$p_9=c,p.$ReStoreTransactionTable$p_10=d,p.$ReStoreTransactionTable$p_11=m,p}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.$ReStoreTransactionTable$p_12=function(t){return this.$ReStoreTransactionTable$p_5.isSync?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(t):Promise.resolve(t)},r.$ReStoreTransactionTable$p_13=function(t){var e=this;return this.$ReStoreTransactionTable$p_5.chainPromiseOrValue(function(n){var r=e.$ReStoreTransactionTable$p_6.createNested(e.$ReStoreTransactionTable$p_9);return(s||(s=o("PromiseOrValue"))).map(t(n,r),function(e){return r.flush(),e})})},r.$ReStoreTransactionTable$p_14=function*(n,r,a,i,l,s){var t=r.table(i),u=this.$ReStoreTransactionTable$p_2.tableNames[i];if(u.autoIncrement){var m=l[u.primaryKeyIds[0]],p=(e||(e=o("I64"))).of_float(yield*t.incrementSeed(a,m===void 0?m:c(m)));l[u.primaryKeyIds[0]]=p}var _=o("ReStoreUtils").appendDefaultValues(l,u.name,this.$ReStoreTransactionTable$p_11),f=o("ReStoreUtils").searchKey(u,_);if(f==null)throw new Error("Evaluating the object store's key path did not yield a value");if((yield*t.tableGet(a,f))==null){var g=o("ReStoreUtils").indicesWithKeyForValue(this.$ReStoreTransactionTable$p_3,Object.keys(u.indexes),_);yield*o("ReStoreUtils").deconflictIndicesLocked(this.$ReStoreTransactionTable$p_2,n,r,a,i,g,this.$ReStoreTransactionTable$p_4,s,this.$ReStoreTransactionTable$p_11);var h=yield*t.tableSet(a,f,_),y=h[0];yield*o("ReStoreUtils").addIdToIndices(r,a,i,y,g),d(n,i,f,void 0,_)}return f},n})(m),_=(function(e){function t(t,n,r,a,i){var l;return l=e.call(this,t,n,r,a)||this,l.$ReStoreTable$p_1=new Map,l.index=function(e){return o("ReStoreUtils").getOrCreate(l.$ReStoreTable$p_1,e,function(){return new(o("ReStoreIndex")).ReStoreIndex(e,l.$ReStoreTable$p_2,l.$ReStoreTable$p_3,l.$ReStoreTable$p_4,l.$ReStoreTable$p_5,l.$ReStoreTable$p_6)})},l.subscribe=function(e,t,n){return l.$ReStoreTable$p_6.subscribeTable(l.$ReStoreTable$p_2.name,e,(u||(u=o("ReQLBounds"))).extendBounds(t,l.$ReStoreTable$p_2.primaryKeyIds.length),n)},l.$ReStoreTable$p_2=t,l.$ReStoreTable$p_3=n,l.$ReStoreTable$p_4=r,l.$ReStoreTable$p_5=a,l.$ReStoreTable$p_6=i,l}return babelHelpers.inheritsLoose(t,e),t})(m);l.ReStoreTransactionTable=p,l.ReStoreTable=_}),98);
__d("LSStorage",["ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){return(e||(e=o("ReStoreKeyComparer"))).compareKey(t,n)===0}l.areKeysEqual=s}),98);
__d("ReStoreUtils",["FBLogger","I64","JSONStringifyBigIntSafe","LSStorage","LSSynchronousPromise","Random","ReQLBounds","ReStoreCommonUtils","ReStoreKeyComparer","ReStoreOperationLock","ReStoreTable","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=500;async function d(e){for(var t=[],n=await e.next();!n.done;)t.push(n.value),n=await e.next();return t}function m(e,t,n){var o=e.indexes,a=e.primaryKeyIds,i=n==null?a:o[n];return i.map(function(e){if(t[e]!==void 0||n!=null)return t[e];throw r("FBLogger")("maw_db").mustfixThrow("primary key must be defined on object")})}function p(e,t,n){var r=n[t];return r?Object.keys(r).reduce(function(e,t){return Object.prototype.hasOwnProperty.call(e,t)||(e[t]=r[t]),e},babelHelpers.extends({},e)):e}function _(t,n,r,a,i,l,s){function u(){var c,d=t.table(r.name),m=babelHelpers.extends({},(e||(e=o("ReQLBounds"))).extendBounds(l,(a===void 0?r.primaryKeyIds:r.indexes[a]).length),{dir:i}),p=a==null?d.tableEntries(n,m):d.indexEntries(n,a,m);return c={next:function*(t,n){var e=yield*p.next(n);if(e.done)return{done:!0};var o=e.value[1];return{done:!1,value:[e.value[0],s==null?o:s.afterEntriesNext({tableName:r.name,value:o})]}}},c[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]=u,c}return u()}function f(t,n,r,a,i,l){function s(){var u,c=t.table(r.name),d=c.keys(n,a,babelHelpers.extends({},(e||(e=o("ReQLBounds"))).extendBounds(l,(a===void 0?r.primaryKeyIds:r.indexes[a]).length),{dir:i}));return u={next:function*(t,n){return yield*d.next(n)}},u[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]=s,u}return s()}function g(e,t,n,r,a,i,l){var s=e.table(n),u=o("ReStoreOperationLock").isNoopLockProof(i)?o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise:Promise.resolve.bind(Promise),c;return r!=null?c=u(o("ReStoreCommonUtils").gen(s.indexGet(t,r,a))):c=u(o("ReStoreCommonUtils").gen(s.tableGet(t,a))),c.then(function(e){if(e!==void 0)return l.afterGet({tableName:n,value:e})})}function h(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function y(e){var t=(s||(s=o("I64"))).cast(e);if(t===void 0)throw r("FBLogger")("maw_db").mustfixThrow("Expected int64");return s.to_float(t)}function C(e,t,n,o,a){var i=r("JSONStringifyBigIntSafe")([t,n]),l=e.get(i);(l==null?o:l[0])==null&&a==null?e.delete(i):e.set(i,[l==null?o:l[0],a])}function*b(e,t,n,r,a,i,l,s,c,d){function p(e,t){return e.length>=t?e:[].concat(e,[(u||(u=o("ReStoreKeyComparer"))).MAX_KEY])}if(!(l!=null&&(u||(u=o("ReStoreKeyComparer"))).compareKey(i,l)===0)){var f=e.tableNames[a],g=f.cascadeUpdates,h=f.primaryKeyIds,y=function*(){for(var o=C.indexName,a=C.tableName,u=e.tableNames[a],f=u.indexes,g=u.primaryKeyIds,y=o==null?g:f[o],v={gte:i,lte:p(i,y.length)},L=_(n,r,u,o,"asc",v),E=[],k=yield*L.next(c);!k.done;)E.push(k.value),k=yield*L.next(c);for(var I of E){var T=I[0],D=I[1],x=m(e.tableNames[a],D);if(l===void 0)yield*R(e,t,n,r,a,x,c),yield*b(e,t,n,r,a,x,void 0,s,c,d);else{var $=h.reduce(function(e,t,n){return n>=l.length||(e[y[n]]=l[n]),e},babelHelpers.extends({},D));yield*S(e,t,n,r,a,x,$,s,c,d),yield*b(e,t,n,r,a,x,m(e.tableNames[a],$),s,c,d)}}};for(var C of g)yield*y()}}function*v(e,t,n,r,a,i,l,c,d){var _=n.table(a),f=e.tableNames[a];if(f.autoIncrement){var g=i[f.primaryKeyIds[0]],h=(s||(s=o("I64"))).of_float(yield*_.incrementSeed(r,g===void 0?g:y(g)));i[f.primaryKeyIds[0]]=h}var b=m(f,i),v={},S=yield*_.tableGet(r,b),R=i;S!==void 0?v=L(f,Object.keys(f.indexes),S):R=p(i,f.name,d);var I=yield*_.tableSet(r,b,R),T=I[0],D=I[1],x=L(f,Object.keys(f.indexes),R),$=babelHelpers.extends({},x);for(var P of Object.keys($))v[P]!==void 0&&(u||(u=o("ReStoreKeyComparer"))).compareKey(v[P],$[P])===0&&(delete $[P],delete v[P]);yield*E(e,t,n,r,a,$,l,c,d),yield*k(n,r,a,T,D?x:$);for(var N of Object.keys(v))yield*_.indexDelete(r,N,v[N]);return C(t,a,b,S,R),b}function*S(e,t,n,r,a,i,l,s,u,c){var d=m(e.tableNames[a],l);o("LSStorage").areKeysEqual(i,d)||(yield*R(e,t,n,r,a,i,u)),yield*v(e,t,n,r,a,l,s,u,c)}function*R(e,t,n,r,o,a,i){var l=n.table(o),s=e.tableNames[o],u=yield*l.tableGet(r,a);if(u!==void 0){if(Object.keys(s.indexes).length)for(var c of Object.keys(s.indexes)){var d=m(s,u,c);d!=null&&(yield*l.indexDelete(r,c,d))}yield*l.tableDelete(r,a),C(t,o,a,u,void 0)}}function L(e,t,n){return t.reduce(function(t,r){var o,a=(o=e.indexPredicates)==null?void 0:o[r];if(a!=null&&!a(n))return t;var i=m(e,n,r);return t[r]=i,t},{})}function*E(e,t,n,r,o,a,i,l,s){var u=n.table(o);for(var c of Object.keys(a)){var d=a[c],p=yield*u.indexGet(r,c,d);if(p!=null){var _=m(e.tableNames[o],p);yield*R(e,t,n,r,o,_,l),yield*b(e,t,n,r,o,_,void 0,i,l,s)}}}function*k(e,t,n,r,o){var a=e.table(n);for(var i of Object.keys(o)){var l=o[i];l===void 0?yield*a.indexDelete(t,i,l):yield*a.indexSet(t,i,l,r)}}function*I(e,t,n,o,a,i,l,s,u,d){var m=n.table(s),p=i.tableNames[s];for(var f of u)yield*m.clearIds(o,f);var g=u.filter(function(e){return(p==null?void 0:p.indexes[e])!=null});if(g.length!==0)for(var h=_(n,o,p,void 0,"asc",void 0,a),y=[],C=yield*h.next(d);!C.done;){for(;!C.done&&y.length<=c;)y.push(C.value),C=yield*h.next(d);for(var b of y){var v=b[0],S=b[1],R=L(i.tableNames[s],g,S);yield*E(i,e,n,o,s,R,a,d,l);var I=r("nullthrows")(yield*m.getId(o,v));yield*k(n,o,s,I,R)}y.length=0,t==null||t()}}var T="__internal__transaction_id";function D(e,t,n,a,i,l,s){var u,c=null,d=new(o("ReStoreOperationLock")).NoopLock,m=new(o("ReStoreOperationLock")).ReStoreOperationLock,p=s==null?void 0:s.qplFlow,_=new Map,f=(u={},u[T]=r("Random").uint32(),u.reportUsedTablesForSyncAccess=function(t){c=t&&t.every(function(e){return i.tablePermitsSynchronousIO(e)})&&c!==!1},u.table=function(s){return new(o("ReStoreTable")).ReStoreTransactionTable(s,e,n,m,i,a,f,p,l,t)},u.transactionTable=function(s,u){var r=u!=null?s+"::"+u:s;return h(_,r,function(){return new(o("ReStoreTable")).ReStoreTransactionTable(s,e,n,c===!0&&u!=null?d:m,i,a,f,p,l,t)})},u),g=function(t){Object.defineProperty(f,t,{get:function(){return f.transactionTable(t)}})};for(var y of Object.keys(e.tableNames))g(y);return f}function x(e){return e.types.includes("indexeddb")}l.collectIterator=d,l.searchKey=m,l.appendDefaultValues=p,l.entries=_,l.keys=f,l.getLocked=g,l.getOrCreate=h,l.cascadeKeyUpdatesLocked=b,l.putLocked=v,l.upsertLocked=S,l.deleteItemLocked=R,l.indicesWithKeyForValue=L,l.deconflictIndicesLocked=E,l.addIdToIndices=k,l.rebuildIndicesLocked=I,l.createReStoreTransaction=D,l.isPDB=x}),98);
__d("ReStoreDefaultValueMigration",["LSPlatformLsInitLog","ReStoreDefaultValuesMetadata","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n={},r=await o("ReStoreUtils").collectIterator(t[o("ReStoreDefaultValuesMetadata").defaultValuesTableName].entries(e));for(var a of r){var i=a[0],l=a[1];if(i!=null){var s,u=o("ReStoreDefaultValuesMetadata").tryParseDefaultValuesData(l);if(u==null)continue;var c=u.columns,d=u.tableName;n[d]=(s=n[d])!=null?s:new Set;for(var m of c)n[d].add(m)}}return n}async function s(t,n,r,o){var a=await e(t,n),i={};for(var l in r.tableNames){var s=o[l];if(s!=null)for(var u in s){var c,d=(c=a[l])==null?void 0:c.has(u);if(!d){var m;i[l]=(m=i[l])!=null?m:{},i[l][u]=s[u]}}}return i}async function u(e,t,n){for(var r in t){var a=Object.keys(n[r]||{}),i={columns:a,tableName:r};await e[o("ReStoreDefaultValuesMetadata").defaultValuesTableName].put(o("ReStoreDefaultValuesMetadata").defaultValuesColumnToValue(i))}}async function c(e,t,n,r){var a=new WeakMap;o("LSPlatformLsInitLog").addPoint("default_values_update_start");var i=function(t,n){o("LSPlatformLsInitLog").addPoint("default_values_update_end_failure",{string:{default_values_update_failure_point:n,default_values_update_failure_reason:String(t)}})};try{var l=await s(a,e,t,r);try{if(n===!1)for(var c in l)for(var d=e[c].entries(a),m=await d.next();!m.done;){var p=babelHelpers.extends({},m.value[1]),_=o("ReStoreUtils").appendDefaultValues(p,c,r);await e[c].put(_),m=await d.next()}await u(e,l,r),o("LSPlatformLsInitLog").addPoint("default_values_update_end")}catch(e){i(e,"setDefaultValues")}}catch(e){i(e,"findDefaultValuesToUpdate")}}l.runMigrationForTableDefaultValuesIfNeeded=c}),98);
__d("ReStoreIndexMetadata",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=typeof e=="string"?e:null;if(t==null)return null;try{var n=JSON.parse(t);for(var r of n)if(typeof r!="string")return null;return n}catch(e){return null}}function s(t){var n={indexName:"string",keyIds:"string","predicate?":"string",tableName:"string"};for(var o in n){var a=void 0,i=o.endsWith("?");if(i)a=t[o.slice(0,-1)];else{if(!Object.prototype.hasOwnProperty.call(t,o)||t[o]==null)return r("FBLogger")("messenger_web").warn('Malformed index data, missing key "%s"',o),null;a=t[o]}var l=n[o],s=typeof a;if(a!=null&&s!==l)return r("FBLogger")("messenger_web").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',o,s,l),null}var u=e(t.keyIds);return u==null?(r("FBLogger")("messenger_web").warn('Malformed index data, key IDs "%s" are invalid',typeof t.keyIds=="string"?t.keyIds:"<"+typeof t.keyIds+">"),null):typeof t.indexName!="string"||typeof t.tableName!="string"||typeof t.predicate!="string"&&t.predicate!=null?null:babelHelpers.extends({data:u,indexName:t.indexName,tableName:t.tableName},t.predicate==null?{}:{predicate:t.predicate})}function u(e,t){if(e[0]==null||e[0].length!==t[0].length)return!0;for(var n=0;n<e[0].length;n++)if(e[0][n]!==t[0][n])return!0;return e[1]!==t[1]}function c(e){return babelHelpers.extends({indexName:e.indexName,keyIds:JSON.stringify(e.data),tableName:e.tableName},e.predicate==null?{}:{predicate:e.predicate})}var d="_db_indices_meta";l.tryParseIndexData=s,l.indicesDiffer=u,l.indexDataToValue=c,l.indicesTableName=d}),98);
__d("ReStoreIndicesMigration",["LSPlatformLsInitLog","ReStoreCommonUtils","ReStoreIndexMetadata","ReStoreOperationLock","ReStoreUtils"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n={},r=await o("ReStoreUtils").collectIterator(t[o("ReStoreIndexMetadata").indicesTableName].entries(e));for(var a of r){var i=a[0],l=a[1];if(i!=null){var s,u=o("ReStoreIndexMetadata").tryParseIndexData(l);if(u==null)continue;var c=u.indexName,d=u.tableName;n[d]=(s=n[d])!=null?s:{},n[d][c]=babelHelpers.extends({index:u.data,key:i},u.predicate==null?{}:{predicate:u.predicate})}}return n}async function s(t,n,r){var a=await e(t,n),i={};for(var l in r.tableNames){var s=r.tableNames[l];for(var u in s.indexes){var c,d,m=[s.indexes[u],(c=s.indexPredicates)==null||(c=c[u])==null?void 0:c.toString()],p=(d=a[l])==null?void 0:d[u];if(o("ReStoreIndexMetadata").indicesDiffer([p==null?void 0:p.index,p==null?void 0:p.predicate],m)){var _;i[l]=(_=i[l])!=null?_:{},i[l][u]=m}}}var f={};for(var g in r.tableNames)if(g in a){var h=a[g];for(var y in h){var C,b=h[y],v=(C=r.tableNames[g])==null||(C=C.indexes)==null?void 0:C[y];if(v==null){var S;f[g]=(S=f[g])!=null?S:{},f[g][y]=b}}}return{toRemove:f,toUpdate:i}}async function u(e,t){for(var n in t){var r=t[n];for(var a in r){var i=r[a],l=i[0],s=i[1],u=babelHelpers.extends({data:l,indexName:a,tableName:n},s==null?{}:{predicate:s});await e[o("ReStoreIndexMetadata").indicesTableName].put(o("ReStoreIndexMetadata").indexDataToValue(u))}}}async function c(e,t){for(var n in t){var r=t[n];for(var a in r){var i,l=r[a].key;await(i=e[o("ReStoreIndexMetadata").indicesTableName]).delete.apply(i,l)}}}function d(e,t,n,r,a){return new(o("ReStoreOperationLock")).ReStoreOperationLock().chainPromiseOrValue(function(i){return o("ReStoreCommonUtils").gen(o("ReStoreUtils").rebuildIndicesLocked(e.changedKeys,e.clearCache,e.storeTx,new WeakMap,e.hooksManager,n,r,t,a,i))})}function m(e,t,n,r){var a=new WeakMap;o("LSPlatformLsInitLog").addPoint("index_migration_start");var i=function(t,n){o("LSPlatformLsInitLog").addPoint("index_migration_end_failure",{string:{index_migration_failure_point:n,index_migration_failure_reason:String(t)}})};return s(a,e.transaction,t).then(async function(a){var i=a.toRemove,l=a.toUpdate,s=Array.from(new Set([].concat(Object.keys(l),Object.keys(i))));if(o("LSPlatformLsInitLog").addAnnotations({int:{index_migration_rebuild_tables_count:s.length}}),r===!1){for(var m of s)if(t.tableNames[m]!=null){var p,_,f=Array.from(new Set([].concat(Object.keys((p=l[m])!=null?p:{}),Object.keys((_=i[m])!=null?_:{}))));await d(e,m,t,n,f)}}await u(e.transaction,l),await c(e.transaction,i),o("LSPlatformLsInitLog").addPoint("index_migration_end")},function(e){return i(e,"findIndicesToUpdateOrRemove")}).catch(function(e){return i(e,"rebuildIndices")})}l.runMigrationForIndicesIfNeeded=m}),98);
__d("ReStoreMigrateUtil",["$InternalEnum","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["UPDATE_METADATA","UPGRADE_COMPLETE","NO_UPGRADE_NEEDED"]);function s(e,t){var n="V"+t;return n in e?n:null}function u(e,t){return c.apply(this,arguments)}function c(){return c=babelHelpers.wrapAsyncGenerator(function*(e,t){for(var n=e.iterator(new WeakMap),r=[],o=yield babelHelpers.awaitAsyncGenerator(n.next());!o.done;){var a=o.value,i=a[0],l=a[1];r.push(l),r.length===t&&(yield r,r=[]),o=yield babelHelpers.awaitAsyncGenerator(n.next())}r.length&&(yield r)}),c.apply(this,arguments)}async function d(e,t,n){var r=!1,a=!1,i;try{for(var l=babelHelpers.asyncIterator(u(o("ReQL").fromTableAscending(e),100)),s;r=!(s=await l.next()).done;r=!1){var c=s.value;await Promise.all(c.map(function(n){return t(n).then(e.put)})),n==null||n()}}catch(e){a=!0,i=e}finally{try{r&&l.return!=null&&await l.return()}finally{if(a)throw i}}}function m(e,t){function n(t){if(t!=null){var n={};for(var r in t)n[e+"_"+r]=t[r];return n}}return{bool:n(t.bool),int:n(t.int),string:n(t.string)}}l.ReStoreMigrateResult=e,l.getVersionFromNumber=s,l.fetchReQLBatch=u,l.upgradeTableEntries=d,l.prefixAnnotations=m}),98);
__d("ReStoreHashMigration",["JSONStringifyBigIntSafe","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=Object.values(e.tableNames).map(function(e){var t;return babelHelpers.extends({},e,{indexPredicates:Object.entries((t=e.indexPredicates)!=null?t:{}).map(function(e){var t=e[0],n=e[1];return[t,n.toString()]})})});return r("JSONStringifyBigIntSafe")(t)}async function s(e,t,n,r){var a,i,l=r.loggers,s=l.logHistory,u=l.userFlow,c=r.storeTx,d=r.transaction,m=o("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(n),p=o("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash(t);u==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(e,{int:{defaultValuesVersion:m,schemaVersion:p}}));var _=new(o("ReStorePersistedMetadata")).ReStorePersistedSchemaVersion(e),f=new(o("ReStorePersistedMetadata")).ReStorePersistedDefaultValuesVersion(e),g=(a=await _.read(c))==null?void 0:a.schemaVersion,h=(i=await f.read(c))==null?void 0:i.defaultValuesVersion;if(s==null||s.debug("storeSchemaVersion: "+(g!=null?g:"null")),s==null||s.debug("storeDefaultValuesVersion: "+(h!=null?h:"null")),g!=null&&(u==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(e,{int:{storeDefaultValuesVersion:h,storeSchemaVersion:g}}))),g===p&&h===m)return o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED;var y=g==null;return await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(d,t,y,n),s==null||s.debug("migration default values finished"),await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(r,t,n,y),s==null||s.debug("migration indices finished"),_.write(c,{schemaVersion:p}),f.write(c,{defaultValuesVersion:m}),s==null||s.debug("version is written"),s==null||s.debug("migration hash end"),u==null||u.addPoint("migration_hash_end"),y?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE}l.serializeTableData=e,l.runHashMigration=s}),98);
__d("ReStorePersistenceIds",[],(function(t,n,r,o,a,i){"use strict";var e="nextId",l="seed";function s(e){return e}i.idForNextId=e,i.idForSeed=l,i.castPersistenceId=s}),66);
__d("ReStorePersistedMetadata",["JSONStringifyBigIntSafe","ReStoreCommonUtils","ReStoreHashMigration","ReStorePersistenceIds","hashString"],(function(t,n,r,o,a,i,l){"use strict";var e="_db_schema_meta",s=(function(){function t(e){this.$1=o("ReStorePersistenceIds").castPersistenceId(e)}var n=t.prototype;return n.read=async function(n){var t=await o("ReStoreCommonUtils").gen(n.table(e).readData(new WeakMap,this.$1));return t},n.write=function(n,r){n.table(e).writeData(new WeakMap,this.$1,r)},n.getId=function(){return this.$1},t})(),u=(function(e){function t(t){return e.call(this,t+"_schema_version")||this}return babelHelpers.inheritsLoose(t,e),t.hash=function(t){return r("hashString")(o("ReStoreHashMigration").serializeTableData(t))},t})(s),c=(function(e){function t(){return e.call(this,"custom_migration_value_version")||this}return babelHelpers.inheritsLoose(t,e),t})(s),d=(function(e){function t(t){return e.call(this,t+"_default_value_version")||this}return babelHelpers.inheritsLoose(t,e),t.hash=function(t){return r("hashString")(r("JSONStringifyBigIntSafe")(t))},t})(s);l.schemaMetadataTableName=e,l.ReStorePersistedMetadata=s,l.ReStorePersistedSchemaVersion=u,l.ReStorePersistedCustomMigrationVersion=c,l.ReStorePersistedDefaultValuesVersion=d}),98);
__d("ReStoreMetadata",["ReStoreDefaultValuesMetadata","ReStoreIndexMetadata","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return!0}function u(e){var t=e.reduce(function(e,t){return function(n){return n[t]!=null&&e(n)}},s);return t.toString=function(){return"dynamic predicate on ["+e.join(",")+"]"},t}function c(e){return function(n){var t={},r={};for(var o of n)for(var a of o){var i,l,s,u,c;a.id!=null&&(t[a.id]=a.name),r[a.name]={autoIncrement:(i=a.auto_increment)!=null?i:!1,cascadeUpdates:(l=e[a.name])!=null?l:[],indexes:(s=Object.fromEntries(Object.entries((u=a.indexes)!=null?u:{}).map(function(e){var t=e[0],n=e[1].columns;return[t,n]})))!=null?s:{},indexPredicates:Object.fromEntries(Object.entries((c=a.indexes)!=null?c:{}).filter(function(e){var t=e[0],n=e[1];return n.predicate}).map(function(e){var t=e[0],n=e[1];return[t,n.predicate]})),name:a.name,primaryKeyIds:a.primary_key}}return{tableIds:t,tableNames:r}}}var d=(e={},e[o("ReStoreDefaultValuesMetadata").defaultValuesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]},e[o("ReStoreIndexMetadata").indicesTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]},e[o("ReStorePersistedMetadata").schemaMetadataTableName]={autoIncrement:!1,cascadeUpdates:[],indexes:{},name:o("ReStorePersistedMetadata").schemaMetadataTableName,primaryKeyIds:[]},e);l.createPredicate=u,l.getBuildTableData=c,l.RESTORE_METADATA_TABLES=d}),98);
__d("ReStoreVersionedSchemaProviderUtil",["ReStoreMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n={tableIds:{},tableNames:o("ReStoreMetadata").RESTORE_METADATA_TABLES},r={};for(var a of Object.keys(e)){var i,l=e[a],s={},u={};for(var c in l.indexes)s[c]=l.indexes[c].fields,l.indexes[c].ignoreNulls.length>0&&(u[c]=o("ReStoreMetadata").createPredicate(l.indexes[c].ignoreNulls));n.tableNames[a]={autoIncrement:l.autoIncrement,cascadeUpdates:(i=t==null?void 0:t[a])!=null?i:[],indexes:s,indexPredicates:u,name:a,primaryKeyIds:l.primaryKey.fields},l.id!=null&&(n.tableIds[l.id]=a),Object.keys(l.defaults).length>0&&(r[a]=l.defaults)}return{defaults:r,tableData:n}}l.getTableData=e}),98);
__d("LSDbV1",["I64MigrationHelper","LSDbV1.upgrade","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreVersionedSchemaProviderUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({_user_info:{autoIncrement:!1,defaults:{},id:4,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},acs_request_context:{autoIncrement:!1,defaults:{},id:310,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},ad_context:{autoIncrement:!1,defaults:{},id:160,indexes:{},primaryKey:{fields:["adId"],ignoreNulls:[]}},admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:(e=o("I64MigrationHelper")).cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ai_bot_feedback_submission_status:{autoIncrement:!1,defaults:{},id:315,indexes:{},primaryKey:{fields:["botResponseId"],ignoreNulls:[]}},ai_bot_search_metadata:{autoIncrement:!1,defaults:{contactViewerRelationship:e.cast([0,0]),displayName:"",score:0},id:298,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},anonymous_task_context:{autoIncrement:!1,defaults:{failureCount:e.cast([0,0])},id:311,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},attachment_conversion:{autoIncrement:!1,defaults:{},id:164,indexes:{},primaryKey:{fields:["attachmentFbid"],ignoreNulls:[]}},attachment_ctas:{autoIncrement:!1,defaults:{},id:19,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}},attachments_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,mediaGroup:e.cast([0,0])},id:17,indexes:{},primaryKey:{fields:["threadKey","mediaGroup","minTimestampMs"],ignoreNulls:[]}},audio_channel_events:{autoIncrement:!1,defaults:{},id:238,indexes:{},primaryKey:{fields:["eventId","roomId"],ignoreNulls:[]}},available_reactions:{autoIncrement:!1,defaults:{},id:188,indexes:{},primaryKey:{fields:["emojiIdx"],ignoreNulls:[]}},avatar_settings:{autoIncrement:!1,defaults:{enableAvatarHotlike:!1},id:209,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},bot_profile_info_v2:{autoIncrement:!1,defaults:{hasEmbodiment:!1},id:299,indexes:{},primaryKey:{fields:["botId"],ignoreNulls:[]}},bots:{autoIncrement:!1,defaults:{},id:230,indexes:{},primaryKey:{fields:["threadKey","botId"],ignoreNulls:[]}},business_comm_items:{autoIncrement:!1,defaults:{},id:234,indexes:{},primaryKey:{fields:["threadKey","entId"],ignoreNulls:[]}},business_support_case_details:{autoIncrement:!1,defaults:{},id:222,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},business_support_notification_settings:{autoIncrement:!1,defaults:{},id:236,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},business_thread_suggestions:{autoIncrement:!1,defaults:{},id:290,indexes:{},primaryKey:{fields:["threadKey","suggestionType"],ignoreNulls:[]}},client_accounts:{autoIncrement:!0,defaults:{},id:272,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_message_translation_info:{autoIncrement:!1,defaults:{},id:324,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_messages:{autoIncrement:!0,defaults:{disabledActionsReason:e.cast([0,0]),isForwarded:!1,isHidden:!1,isReadonly:!1,isReplyOnly:!1,isTombstoned:!1,messageContentSubtype:e.cast([0,0]),messageContentType:e.cast([0,0]),messageCreationType:e.cast([0,0]),messageEphemeralityType:e.cast([0,0]),messageSource:e.cast([0,0]),replyMessageTextSize:e.cast([0,0]),replyStatus:e.cast([0,0]),replyVicinityStatus:e.cast([0,0]),sendStatus:e.cast([0,0]),shouldHideInSnippet:!1,shouldPersist:!1,textSize:e.cast([0,0])},id:273,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_participants:{autoIncrement:!0,defaults:{capabilities1:e.cast([0,0]),capabilities2:e.cast([0,0]),isPending:!1,readActionTsMs:e.cast([0,0])},id:274,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}},client_threads:{autoIncrement:!0,defaults:{capabilities1:e.cast([0,0]),capabilities2:e.cast([0,0]),groupMemberAddMode:e.cast([0,0]),isAdminSnippet:!1,isHidden:!1,isHotlikeSnippet:!1,isPending:!1,isShadowThread:!1,isTombstoned:!1,pinnedMessagesCount:e.cast([0,0])},id:276,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},client_web_pinned_messages:{autoIncrement:!1,defaults:{},id:328,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","offlineThreadingId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","offlineThreadingId","pinnedTimestampMs"],ignoreNulls:[]}},client_xmas:{autoIncrement:!0,defaults:{},id:314,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},cm_category_list:{autoIncrement:!1,defaults:{},id:182,indexes:{},primaryKey:{fields:["communityId","categoryId"],ignoreNulls:[]}},cm_channel_events:{autoIncrement:!1,defaults:{},id:201,indexes:{eventsInThread:{fields:["threadId","eventId"],ignoreNulls:[]}},primaryKey:{fields:["eventId","threadId"],ignoreNulls:[]}},cm_channel_list:{autoIncrement:!1,defaults:{},id:167,indexes:{threadIdCommunityId:{fields:["threadId","communityId"],ignoreNulls:[]}},primaryKey:{fields:["communityId","threadId"],ignoreNulls:[]}},cm_community_list:{autoIncrement:!1,defaults:{},id:166,indexes:{},primaryKey:{fields:["communityId"],ignoreNulls:[]}},cm_search_nullstate_metadata:{autoIncrement:!1,defaults:{score:0},id:289,indexes:{},primaryKey:{fields:["threadKey","scoreType"],ignoreNulls:[]}},community_chat_admin_assist_command_sequences:{autoIncrement:!1,defaults:{},id:291,indexes:{},primaryKey:{fields:["commandSequenceId"],ignoreNulls:[]}},community_chat_message_seen_count:{autoIncrement:!1,defaults:{},id:221,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},community_chat_poll_options:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:e.cast([0,0]),sortKeyVotingTimestamp:e.cast([0,0]),voteCount:e.cast([0,0])},id:224,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},community_chat_poll_votes:{autoIncrement:!1,defaults:{},id:225,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},community_chat_poll_votes_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:244,indexes:{},primaryKey:{fields:["pollId","optionId","minTimestampMs"],ignoreNulls:[]}},community_chat_polls:{autoIncrement:!1,defaults:{pollType:e.cast([0,0])},id:223,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},community_direct_invites_presets:{autoIncrement:!1,defaults:{fallbackUrl:"",pictureUrlExpirationTimestampMs1:e.cast([0,0]),pictureUrlExpirationTimestampMs2:e.cast([0,0]),presetTypeV2:"ALL_MEMBERS"},id:199,indexes:{},primaryKey:{fields:["communityId","presetType","source"],ignoreNulls:[]}},community_events:{autoIncrement:!1,defaults:{},id:202,indexes:{},primaryKey:{fields:["eventId","communityId"],ignoreNulls:[]}},community_folders:{autoIncrement:!1,defaults:{capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),inviteStatus:e.cast([0,0]),notificationMutedUntil:e.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_members:{autoIncrement:!1,defaults:{adminActions:e.cast([0,0]),channelBadges:e.cast([0,0]),contactCapabilities:e.cast([0,0]),requestId:"",source:e.cast([0,0]),threadRoles:e.cast([0,0])},id:170,indexes:{communityContact:{fields:["communityId","contactId","requestId","source","name"],ignoreNulls:[]},communitySource:{fields:["communityId","source","requestId","contactId","name"],ignoreNulls:[]}},primaryKey:{fields:["communityId","contactId","source","requestId"],ignoreNulls:[]}},community_members_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:189,indexes:{},primaryKey:{fields:["communityId","isAdmin","minName","source","requestId"],ignoreNulls:[]}},community_messaging_aggregated_copresence_counts_for_chat:{autoIncrement:!1,defaults:{},id:204,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},community_messaging_aggregated_user_presence_counts_for_community:{autoIncrement:!1,defaults:{},id:203,indexes:{},primaryKey:{fields:["folderId"],ignoreNulls:[]}},community_rules:{autoIncrement:!1,defaults:{},id:254,indexes:{},primaryKey:{fields:["communityId","ruleId"],ignoreNulls:[]}},community_surface_ranges:{autoIncrement:!1,defaults:{},id:253,indexes:{},primaryKey:{fields:["surfaceType","communityKey"],ignoreNulls:[]}},community_thread_sync_info:{autoIncrement:!1,defaults:{},id:294,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},connectivity_status:{autoIncrement:!0,defaults:{},id:114,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},contact_upload_settings:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:74,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},contextual_profile_v1:{autoIncrement:!1,defaults:{},id:216,indexes:{associatedEntityIdAndOwner:{fields:["associatedEntityId","ownerId"],ignoreNulls:[]}},primaryKey:{fields:["ownerId","associatedEntityId"],ignoreNulls:[]}},cowatch_sessions:{autoIncrement:!1,defaults:{},id:80,indexes:{},primaryKey:{fields:["cowatchSessionId"],ignoreNulls:[]}},ctas:{autoIncrement:!1,defaults:{},id:15,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},custom_thread_commands:{autoIncrement:!1,defaults:{isOpenPersistentMenu:!1},id:296,indexes:{commandId:{fields:["commandId"],ignoreNulls:[]},rank:{fields:["threadKey","rank"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","commandId"],ignoreNulls:[]}},cutover_threads:{autoIncrement:!1,defaults:{isMigrated:!1,showOpenMessageHistory:!1},id:193,indexes:{},primaryKey:{fields:["openThreadId"],ignoreNulls:[]}},data_trace_addon:{autoIncrement:!0,defaults:{timestampMs:e.cast([0,0])},id:154,indexes:{traceIdAddonId:{fields:["traceId","addonId"],ignoreNulls:[]}},primaryKey:{fields:["addonId"],ignoreNulls:[]}},data_trace_meta:{autoIncrement:!1,defaults:{foregroundTimestampMs:e.cast([0,0]),initTimestampMs:e.cast([0,0]),shouldFlush:!1,traceType:e.cast([0,0])},id:153,indexes:{shouldFlushInitTimestampMsTraceId:{fields:["shouldFlush","initTimestampMs","traceId"],ignoreNulls:[]}},primaryKey:{fields:["traceId"],ignoreNulls:[]}},device_metadata:{autoIncrement:!0,defaults:{},id:185,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},discoverable_chat_participants:{autoIncrement:!1,defaults:{source:e.cast([0,0])},id:248,indexes:{},primaryKey:{fields:["threadId","contactId","source"],ignoreNulls:[]}},discoverable_chat_participants_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:249,indexes:{},primaryKey:{fields:["threadId","source","minName"],ignoreNulls:[]}},discoverable_chats_personal_inbox_info:{autoIncrement:!1,defaults:{},id:326,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}},e2ee_dummy_table_for_sync:{autoIncrement:!1,defaults:{},id:171,indexes:{},primaryKey:{fields:["placeholder"],ignoreNulls:[]}},edit_message_history:{autoIncrement:!0,defaults:{sendStatus:e.cast([0,0])},id:322,indexes:{originalMsgPkEditTs:{fields:["originalMessagePk","serverAdjustedEditTsMs"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},emoji_sets:{autoIncrement:!1,defaults:{},id:151,indexes:{},primaryKey:{fields:["categoryIdx","emojiIdx","type_"],ignoreNulls:[]}},encrypted_backup_restore_task_payload_context:{autoIncrement:!1,defaults:{},id:190,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},encrypted_backups:{autoIncrement:!0,defaults:{authorityLevel:e.cast([0,0]),hasOtcEligibleDevices:!1},id:172,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_client_restore_status:{autoIncrement:!1,defaults:{},id:231,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},encrypted_backups_debug_metadata:{autoIncrement:!1,defaults:{},id:206,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:217,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_dyi_backup_restore_status:{autoIncrement:!0,defaults:{},id:208,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata:{autoIncrement:!1,defaults:{},id:207,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_epoch_debug_metadata_v2:{autoIncrement:!1,defaults:{},id:218,indexes:{},primaryKey:{fields:["epochId"],ignoreNulls:[]}},encrypted_backups_message_backup_status:{autoIncrement:!1,defaults:{},id:213,indexes:{},primaryKey:{fields:["messagePk"],ignoreNulls:[]}},encrypted_backups_metadata:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:196,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},encrypted_backups_otc_notification_sending_status:{autoIncrement:!0,defaults:{},id:285,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_status_trigger:{autoIncrement:!0,defaults:{},id:195,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},encrypted_backups_virtual_devices:{autoIncrement:!0,defaults:{removalStatus:e.cast([0,1]),requiresHsmMigration:!1,virtualDeviceType:e.cast([0,1])},id:184,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},epd_cookie_settings:{autoIncrement:!1,defaults:{},id:163,indexes:{},primaryKey:{fields:[],ignoreNulls:[]}},experiences_shared_state:{autoIncrement:!1,defaults:{},id:282,indexes:{},primaryKey:{fields:["stateKey"],ignoreNulls:[]}},fb_events:{autoIncrement:!1,defaults:{},id:200,indexes:{},primaryKey:{fields:["eventId"],ignoreNulls:[]}},fb_transport_contacts:{autoIncrement:!0,defaults:{},id:240,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},feature_limits:{autoIncrement:!1,defaults:{},id:150,indexes:{},primaryKey:{fields:["type_"],ignoreNulls:[]}},filtered_messages_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:211,indexes:{},primaryKey:{fields:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"],ignoreNulls:[]}},filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0]),secondaryThreadRangeFilter:e.cast([0,0]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}},focus_mode_ctas:{autoIncrement:!1,defaults:{},id:30,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},folder_metadata:{autoIncrement:!1,defaults:{},id:35,indexes:{},primaryKey:{fields:["parentThreadKey"],ignoreNulls:[]}},forward_content:{autoIncrement:!1,defaults:{},id:129,indexes:{},primaryKey:{fields:["value","type_"],ignoreNulls:[]}},gdpr_settings:{autoIncrement:!1,defaults:{},id:75,indexes:{},primaryKey:{fields:["userid"],ignoreNulls:[]}},gradient_colors:{autoIncrement:!1,defaults:{},id:117,indexes:{},primaryKey:{fields:["themeFbid","gradientIndex"],ignoreNulls:[]}},group_invitations_pending:{autoIncrement:!1,defaults:{communityJoinRequestStatus:e.cast([0,0]),communityParticipationControlRequestStatus:e.cast([0,0]),communityParticipationControlSetting:e.cast([0,0])},id:235,indexes:{},primaryKey:{fields:["linkHash"],ignoreNulls:[]}},group_invites:{autoIncrement:!1,defaults:{},id:197,indexes:{},primaryKey:{fields:["threadKey","inviterId","inviteeId"],ignoreNulls:[]}},group_membership_approval_requests:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:26,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},horizon_contact_info:{autoIncrement:!1,defaults:{},id:323,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_contact_info:{autoIncrement:!1,defaults:{e2eeEligibility:e.cast([0,0])},id:176,indexes:{},primaryKey:{fields:["contactId"],ignoreNulls:[]}},ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:e.cast([0,0]),igDmSettingsTtlSec:e.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},ig_thread_labels:{autoIncrement:!1,defaults:{labelTimestampMs:e.cast([0,0])},id:318,indexes:{},primaryKey:{fields:["threadKey","labelType"],ignoreNulls:[]}},igd_xma_receiver_fetch:{autoIncrement:!1,defaults:{},id:316,indexes:{},primaryKey:{fields:["messageId"],ignoreNulls:[]}},in_thread_banner:{autoIncrement:!1,defaults:{},id:118,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},in_thread_banner_ctas:{autoIncrement:!1,defaults:{},id:119,indexes:{},primaryKey:{fields:["bannerId","ctaId"],ignoreNulls:[]}},in_thread_banner_overflow_menu:{autoIncrement:!1,defaults:{},id:120,indexes:{},primaryKey:{fields:["threadKey","bannerId"],ignoreNulls:[]}},inbox_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:198,indexes:{},primaryKey:{fields:["syncGroup"],ignoreNulls:[]}},inbox_view_state:{autoIncrement:!1,defaults:{value:""},id:277,indexes:{},primaryKey:{fields:["interface_","configName"],ignoreNulls:[]}},inbox_view_state_v2:{autoIncrement:!1,defaults:{value:""},id:281,indexes:{},primaryKey:{fields:["configName"],ignoreNulls:[]}},lightspeed_task_context:{autoIncrement:!1,defaults:{requiresAuthentication:!1},id:306,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},linked_groups:{autoIncrement:!1,defaults:{},id:130,indexes:{threadKey:{fields:["threadKey"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}},live_location_sharers:{autoIncrement:!1,defaults:{},id:149,indexes:{},primaryKey:{fields:["threadKey","userId"],ignoreNulls:[]}},local_message_persistence_store:{autoIncrement:!0,defaults:{},id:301,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_deleted_messages:{autoIncrement:!0,defaults:{},id:303,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_supplemental:{autoIncrement:!0,defaults:{},id:302,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},local_message_persistence_store_tag_index:{autoIncrement:!0,defaults:{},id:304,indexes:{offlineThreadingId:{fields:["offlineThreadingId","threadId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},m_suggestions:{autoIncrement:!1,defaults:{},id:21,indexes:{},primaryKey:{fields:["threadKey","timestampMs","suggestionId"],ignoreNulls:[]}},mailbox_metadata:{autoIncrement:!1,defaults:{},id:25,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mailbox_task_completion_api_tasks:{autoIncrement:!1,defaults:{},id:233,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},mailbox_task_completion_notification_context:{autoIncrement:!1,defaults:{},id:232,indexes:{},primaryKey:{fields:["notificationScopeKey"],ignoreNulls:[]}},media_send_jobs:{autoIncrement:!1,defaults:{},id:51,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}},message_requests:{autoIncrement:!1,defaults:{},id:34,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},message_search_queries:{autoIncrement:!1,defaults:{},id:70,indexes:{},primaryKey:{fields:["type_","query","threadKeyV2"],ignoreNulls:[]}},message_search_results:{autoIncrement:!1,defaults:{},id:69,indexes:{},primaryKey:{fields:["type_","query","threadKey","globalIndex"],ignoreNulls:[]}},messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}},messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},messages_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1},id:13,indexes:{},primaryKey:{fields:["threadKey","minTimestampMs","minMessageId"],ignoreNulls:[]}},messages_status:{autoIncrement:!1,defaults:{timestampMs:e.cast([0,0])},id:33,indexes:{},primaryKey:{fields:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"],ignoreNulls:[]}},messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:e.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},messaging_settings:{autoIncrement:!1,defaults:{},id:83,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},mi_act_mapping_table:{autoIncrement:!1,defaults:{},id:173,indexes:{chat_id:{fields:["clientThreadPk"],ignoreNulls:[]},fk_threads:{fields:["serverThreadKey"],ignoreNulls:[]},jid:{fields:["jid"],ignoreNulls:[]}},primaryKey:{fields:["serverThreadKey","clientThreadPk","jid"],ignoreNulls:[]}},msg_pinned_messages_v2:{autoIncrement:!1,defaults:{},id:205,indexes:{pinnedMessageDisplayOrder:{fields:["threadKey","pinnedTimestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","pinnedTimestampMs"],ignoreNulls:[]}},msgr_quiet_time:{autoIncrement:!1,defaults:{},id:317,indexes:{quietTimeId:{fields:["quietTimeId"],ignoreNulls:[]}},primaryKey:{fields:["quietTimeId"],ignoreNulls:[]}},mwb_safety_interventions:{autoIncrement:!1,defaults:{},id:327,indexes:{},primaryKey:{fields:["interventionId","interventionEntId"],ignoreNulls:[]}},network_requests:{autoIncrement:!1,defaults:{},id:3,indexes:{},primaryKey:{fields:["taskQueueName","syncDatabaseId"],ignoreNulls:[]}},new_payment_credential_option:{autoIncrement:!1,defaults:{},id:90,indexes:{},primaryKey:{fields:["credentialType"],ignoreNulls:[]}},notification_settings:{autoIncrement:!1,defaults:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},id:175,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},offline_queue_thread_status:{autoIncrement:!1,defaults:{},id:295,indexes:{},primaryKey:{fields:["threadJid"],ignoreNulls:[]}},ohai_gateway_key_configs:{autoIncrement:!1,defaults:{},id:313,indexes:{},primaryKey:{fields:["keyId"],ignoreNulls:[]}},p2m_charge:{autoIncrement:!1,defaults:{},id:97,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice:{autoIncrement:!1,defaults:{},id:94,indexes:{},primaryKey:{fields:["orderId"],ignoreNulls:[]}},p2m_invoice_attachment:{autoIncrement:!1,defaults:{},id:95,indexes:{},primaryKey:{fields:["orderId","productItemId"],ignoreNulls:[]}},p2p_request_v2:{autoIncrement:!1,defaults:{},id:100,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},p2p_transfer_v2:{autoIncrement:!1,defaults:{},id:101,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}},participant_list_queries:{autoIncrement:!1,defaults:{},id:219,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},participant_search_queries:{autoIncrement:!1,defaults:{},id:214,indexes:{},primaryKey:{fields:["query","threadKey"],ignoreNulls:[]}},participants:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),deliveredWatermarkTimestampMs:e.cast([0,0]),groupParticipantJoinState:e.cast([0,0]),readActionTimestampMs:e.cast([0,0]),readWatermarkTimestampMs:e.cast([0,0]),threadRoles:e.cast([0,0])},id:14,indexes:{contactIdThreadKey:{fields:["contactId","threadKey"],ignoreNulls:[]},threadKeyDeliveredWatermarkTimestampMs:{fields:["threadKey","deliveredWatermarkTimestampMs","contactId"],ignoreNulls:[]},threadKeyReadWatermarkTimestampMs:{fields:["threadKey","readWatermarkTimestampMs","contactId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},payment_auth_request_results:{autoIncrement:!1,defaults:{},id:108,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_client_auth_token:{autoIncrement:!1,defaults:{},id:107,indexes:{},primaryKey:{fields:["userId","deviceId","appId"],ignoreNulls:[]}},payment_method:{autoIncrement:!1,defaults:{},id:89,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_p2p_risk_verification:{autoIncrement:!1,defaults:{},id:98,indexes:{},primaryKey:{fields:["requestId","transactionId"],ignoreNulls:[]}},payment_pin_verification_results:{autoIncrement:!1,defaults:{},id:113,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_price_list_item:{autoIncrement:!1,defaults:{},id:96,indexes:{},primaryKey:{fields:["orderId","id"],ignoreNulls:[]}},payment_server_request_results:{autoIncrement:!1,defaults:{},id:109,indexes:{},primaryKey:{fields:["requestId"],ignoreNulls:[]}},payment_transaction_v2:{autoIncrement:!1,defaults:{},id:99,indexes:{optimistic:{fields:["optimisticTransactionId"],ignoreNulls:[]}},primaryKey:{fields:["timestampMs","transactionId"],ignoreNulls:[]}},payment_type_bank_v2:{autoIncrement:!1,defaults:{},id:88,indexes:{},primaryKey:{fields:["paymentMethodId"],ignoreNulls:[]}},payment_type_card:{autoIncrement:!1,defaults:{},id:86,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_type_paypal:{autoIncrement:!1,defaults:{},id:85,indexes:{},primaryKey:{fields:["paymentCredentialId"],ignoreNulls:[]}},payment_user_auth:{autoIncrement:!1,defaults:{},id:106,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_eligibility:{autoIncrement:!1,defaults:{},id:92,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},payments_ofac_blacklisted_countries:{autoIncrement:!1,defaults:{},id:93,indexes:{},primaryKey:{fields:["isoCountryCode"],ignoreNulls:[]}},payments_transaction_details_core:{autoIncrement:!1,defaults:{},id:103,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},payments_transaction_details_ctas:{autoIncrement:!1,defaults:{},id:104,indexes:{},primaryKey:{fields:["transactionId","ctaId"],ignoreNulls:[]}},payments_transaction_details_rows:{autoIncrement:!1,defaults:{},id:105,indexes:{},primaryKey:{fields:["transactionId","rowOrder"],ignoreNulls:[]}},paypal_funding_options:{autoIncrement:!1,defaults:{},id:91,indexes:{},primaryKey:{fields:["optionId"],ignoreNulls:[]}},pending_backups_context_v2:{autoIncrement:!0,defaults:{isInstamadillo:!1},id:177,indexes:{fk_pending_tasks:{fields:["pendingBackupTaskId"],ignoreNulls:[]}},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_fire_and_forget_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:e.cast([0,0]),priority:e.cast([0,0])},id:5,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},pending_tasks:{autoIncrement:!0,defaults:{enqueueTimestampMs:e.cast([0,0]),failureCount:e.cast([0,0]),firstExecutedTimestampMs:e.cast([0,0]),minTimeToSyncTimestampMs:e.cast([0,0]),pluginType:e.cast([0,0]),priority:e.cast([0,0]),taskDispatchPriority:e.cast([0,0])},id:2,indexes:{queueNameTaskId:{fields:["queueName","taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},persistent_menu_ctas:{autoIncrement:!1,defaults:{ctaType:"fallback"},id:251,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},persistent_menu_items:{autoIncrement:!1,defaults:{},id:77,indexes:{},primaryKey:{fields:["threadKey","ctaId"],ignoreNulls:[]}},pinned_messages_v2:{autoIncrement:!1,defaults:{},id:155,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},pinned_threads:{autoIncrement:!1,defaults:{},id:82,indexes:{pinnedTimestamp:{fields:["pinnedTimestamp","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},poll_options_v2:{autoIncrement:!1,defaults:{sortKeyCreationTimestamp:e.cast([0,0]),sortKeyVotingTimestamp:e.cast([0,0]),voteCount:e.cast([0,0])},id:39,indexes:{},primaryKey:{fields:["pollId","optionId"],ignoreNulls:[]}},poll_votes_v2:{autoIncrement:!1,defaults:{},id:40,indexes:{},primaryKey:{fields:["pollId","optionId","contactId"],ignoreNulls:[]}},polls:{autoIncrement:!1,defaults:{pollType:e.cast([0,0])},id:38,indexes:{},primaryKey:{fields:["pollId"],ignoreNulls:[]}},presence_settings:{autoIncrement:!1,defaults:{hasConvertedToViewSideSettings:!1,isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1},id:187,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},presence_states:{autoIncrement:!1,defaults:{},id:186,indexes:{statusContactId:{fields:["status","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId"],ignoreNulls:[]}},profile_sheet_information:{autoIncrement:!1,defaults:{},id:256,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},quick_reply_ctas:{autoIncrement:!1,defaults:{},id:20,indexes:{},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}},ranking_requests:{autoIncrement:!1,defaults:{},id:135,indexes:{},primaryKey:{fields:["scoreType"],ignoreNulls:[]}},ranking_scores:{autoIncrement:!1,defaults:{score:0,scoreIndex:e.cast([0,0])},id:134,indexes:{scoreTypeContactId:{fields:["scoreType","contactId"],ignoreNulls:[]}},primaryKey:{fields:["contactId","scoreType"],ignoreNulls:[]}},reachability_settings:{autoIncrement:!1,defaults:{},id:148,indexes:{},primaryKey:{fields:["audience"],ignoreNulls:[]}},reaction_v2_types:{autoIncrement:!1,defaults:{},id:229,indexes:{},primaryKey:{fields:["reactionFbid"],ignoreNulls:[]}},reactions:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),reactionCreationTimestampMs:e.cast([0,0]),timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:8,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","actorId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","actorId"],ignoreNulls:[]}},reactions_v2:{autoIncrement:!1,defaults:{lastUpdatedTimestampMs:e.cast([0,0]),viewerReactionTimestampMs:e.cast([0,0])},id:226,indexes:{optimistic:{fields:["threadKey","messageId","reactionFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","reactionFbid","messageTimestamp"],ignoreNulls:[]}},reactions_v2_details:{autoIncrement:!1,defaults:{},id:239,indexes:{},primaryKey:{fields:["threadId","messageId","reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:243,indexes:{},primaryKey:{fields:["threadId","messageId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},reactions_v2_details_users:{autoIncrement:!1,defaults:{},id:227,indexes:{},primaryKey:{fields:["reactorId","reactionFbid"],ignoreNulls:[]}},reactions_v2_details_users_ranges_v2__generated:{autoIncrement:!1,defaults:{},id:228,indexes:{},primaryKey:{fields:["reactorId","reactionFbid","minTimestampMs"],ignoreNulls:[]}},roll_call_contributions_v2:{autoIncrement:!1,defaults:{contributionSource:e.cast([0,0]),contributorId:e.cast([0,0])},id:255,indexes:{optimistic:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["rollCallContributionId","rollCallId","messageId","messageTimestampMs","threadKey"],ignoreNulls:[]}},roll_calls:{autoIncrement:!1,defaults:{canViewWithoutContributing:!1,isBlurred:!1,viewerCanEditPrompt:!1,viewerHasContributed:!1},id:250,indexes:{},primaryKey:{fields:["rollCallId","threadKey"],ignoreNulls:[]}},room_participants:{autoIncrement:!1,defaults:{},id:64,indexes:{optimistic:{fields:["roomId","participantId"],ignoreNulls:[]}},primaryKey:{fields:["roomId","participantId","type_"],ignoreNulls:[]}},rooms:{autoIncrement:!1,defaults:{notificationMutedUntilMs:e.cast([0,0])},id:63,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["roomId"],ignoreNulls:[]}},rtc_call_events:{autoIncrement:!0,defaults:{isProcessed:!1},id:245,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},rtc_multiway_call_initiation_conference_names:{autoIncrement:!1,defaults:{},id:24,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_rooms_on_threads:{autoIncrement:!1,defaults:{},id:181,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},rtc_signals:{autoIncrement:!1,defaults:{},id:22,indexes:{},primaryKey:{fields:["timestampMs","type_"],ignoreNulls:[]}},saved_messages:{autoIncrement:!1,defaults:{},id:165,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},screen_time:{autoIncrement:!0,defaults:{},id:321,indexes:{},primaryKey:{fields:["recordId"],ignoreNulls:[]}},search_queries:{autoIncrement:!1,defaults:{surfaceType:e.cast([0,1])},id:67,indexes:{},primaryKey:{fields:["query","surfaceType"],ignoreNulls:[]}},secure_acs_blinded_tokens:{autoIncrement:!0,defaults:{},id:308,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_acs_configurations:{autoIncrement:!1,defaults:{},id:307,indexes:{},primaryKey:{fields:["configId"],ignoreNulls:[]}},secure_acs_tokens:{autoIncrement:!1,defaults:{},id:309,indexes:{},primaryKey:{fields:["tokenId"],ignoreNulls:[]}},secure_encrypted_backups_client_state:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),encryptionVersion:e.cast([0,0]),revisionVersion:e.cast([0,0])},id:168,indexes:{},primaryKey:{fields:["backupId"],ignoreNulls:[]}},secure_encrypted_backups_device_supported_versions:{autoIncrement:!1,defaults:{},id:192,indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},primaryKey:{fields:["deviceId","supportedVersion"],ignoreNulls:[]}},secure_encrypted_backups_devices:{autoIncrement:!1,defaults:{},id:191,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}},secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}},secure_encrypted_backups_generated_recovery_code:{autoIncrement:!1,defaults:{virtualDeviceType:e.cast([0,1])},id:174,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_encrypted_backups_message_thread_id_context:{autoIncrement:!1,defaults:{},id:180,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId","listId"],ignoreNulls:[]}},secure_encrypted_backups_recovery_code_status:{autoIncrement:!1,defaults:{},id:178,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}},secure_get_secrets_context:{autoIncrement:!1,defaults:{},id:259,indexes:{},primaryKey:{fields:["deviceRegistrationId"],ignoreNulls:[]}},secure_recovery_code_data:{autoIncrement:!1,defaults:{},id:179,indexes:{fk_pending_tasks:{fields:["taskId"],ignoreNulls:[]}},primaryKey:{fields:["taskId"],ignoreNulls:[]}},self_profile:{autoIncrement:!1,defaults:{},id:81,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}},server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}},server_search_sections:{autoIncrement:!1,defaults:{},id:66,indexes:{},primaryKey:{fields:["query","globalIndex"],ignoreNulls:[]}},shared_album_contributions:{autoIncrement:!1,defaults:{creationTimestampMs:e.cast([0,0]),creatorId:e.cast([0,0])},id:280,indexes:{},primaryKey:{fields:["sharedAlbumId","sharedAlbumContributionId","threadKey","messageId"],ignoreNulls:[]}},shared_albums:{autoIncrement:!1,defaults:{contributionCount:e.cast([0,0]),lastActivityTimestampMs:e.cast([0,0])},id:279,indexes:{},primaryKey:{fields:["sharedAlbumId","threadKey"],ignoreNulls:[]}},shared_albums_multimedia_upload_jobs:{autoIncrement:!1,defaults:{},id:283,indexes:{},primaryKey:{fields:["offlineThreadingId"],ignoreNulls:[]}},shared_albums_multimedia_upload_subjobs_status:{autoIncrement:!1,defaults:{},id:284,indexes:{},primaryKey:{fields:["offlineThreadingId","jobId"],ignoreNulls:[]}},status:{autoIncrement:!1,defaults:{},id:62,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["statusId"],ignoreNulls:[]}},sticker_pack_details:{autoIncrement:!1,defaults:{},id:127,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_packs:{autoIncrement:!1,defaults:{},id:122,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_search_featured_tags:{autoIncrement:!1,defaults:{},id:125,indexes:{},primaryKey:{fields:["tagIndex"],ignoreNulls:[]}},sticker_search_queries:{autoIncrement:!1,defaults:{},id:124,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},sticker_search_results:{autoIncrement:!1,defaults:{},id:123,indexes:{},primaryKey:{fields:["resultIndex","query","type_"],ignoreNulls:[]}},sticker_store_pack_indices:{autoIncrement:!1,defaults:{},id:128,indexes:{},primaryKey:{fields:["packId"],ignoreNulls:[]}},sticker_to_collection:{autoIncrement:!1,defaults:{},id:126,indexes:{},primaryKey:{fields:["stickerId","collectionId"],ignoreNulls:[]}},stickers:{autoIncrement:!1,defaults:{},id:121,indexes:{stickerPackId:{fields:["stickerPackId","stickerId"],ignoreNulls:[]}},primaryKey:{fields:["stickerId"],ignoreNulls:[]}},stories:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:54,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["storyId"],ignoreNulls:[]}},story_ad_card:{autoIncrement:!1,defaults:{},id:58,indexes:{},primaryKey:{fields:["adPosition","clientToken","cardId"],ignoreNulls:[]}},story_ad_ctas:{autoIncrement:!1,defaults:{},id:59,indexes:{},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},story_ad_unit:{autoIncrement:!1,defaults:{shouldShowAdChoice:!1},id:57,indexes:{},primaryKey:{fields:["adPosition","clientToken"],ignoreNulls:[]}},story_buckets:{autoIncrement:!1,defaults:{pageNum:e.cast([0,0]),readState:e.cast([0,0])},id:53,indexes:{optimistic:{fields:["ownerId","bucketType"],ignoreNulls:[]}},primaryKey:{fields:["bucketId"],ignoreNulls:[]}},story_buckets_paginated_queries:{autoIncrement:!1,defaults:{},id:61,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}},story_overlays:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:60,indexes:{},primaryKey:{fields:["storyId","storyOverlayId"],ignoreNulls:[]}},story_reactions:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:56,indexes:{optimistic:{fields:["optimisticClientId"],ignoreNulls:[]}},primaryKey:{fields:["reactionId"],ignoreNulls:[]}},story_viewers:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),interactionType:e.cast([0,1])},id:55,indexes:{},primaryKey:{fields:["storyId","viewerContactId","interactionType"],ignoreNulls:[]}},supervision_edge:{autoIncrement:!1,defaults:{},id:319,indexes:{},primaryKey:{fields:["edgeId"],ignoreNulls:[]}},supervision_metadata:{autoIncrement:!1,defaults:{},id:320,indexes:{},primaryKey:{fields:["supervisionMetadataId"],ignoreNulls:[]}},support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}},sync_group_threads_ranges:{autoIncrement:!1,defaults:{hasMoreBefore:!1,isLoadingBefore:!1,minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:220,indexes:{},primaryKey:{fields:["syncGroup","parentThreadKey"],ignoreNulls:[]}},sync_groups:{autoIncrement:!1,defaults:{canIgnoreTimestamp:!1,lastSyncCompletedTimestampMs:e.cast([0,0]),lastSyncRequestTimestampMs:e.cast([0,0]),minTimeToSyncTimestampMs:e.cast([0,0]),priority:e.cast([0,0]),sendSyncParams:!1,syncChannel:e.cast([0,1]),syncStatus:e.cast([0,0])},id:1,indexes:{},primaryKey:{fields:["groupId"],ignoreNulls:[]}},taken_down_threads:{autoIncrement:!1,defaults:{},id:212,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},third_party_id_store:{autoIncrement:!1,defaults:{},id:242,indexes:{},primaryKey:{fields:["platform"],ignoreNulls:[]}},thread_bans:{autoIncrement:!1,defaults:{},id:297,indexes:{},primaryKey:{fields:["threadKey","contactId"],ignoreNulls:[]}},thread_creation_status:{autoIncrement:!1,defaults:{},id:278,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:e.cast([0,0])},id:237,indexes:{},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}},thread_labels:{autoIncrement:!1,defaults:{},id:215,indexes:{},primaryKey:{fields:["labelId"],ignoreNulls:[]}},thread_limits:{autoIncrement:!1,defaults:{},id:287,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate:{autoIncrement:!1,defaults:{ctaType:e.cast([0,0]),privacyTextCtaType:e.cast([0,0])},id:28,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_nullstate_ctas:{autoIncrement:!1,defaults:{},id:29,indexes:{threadKeyCtaId:{fields:["threadKey","ctaId"],ignoreNulls:[]}},primaryKey:{fields:["ctaId"],ignoreNulls:[]}},thread_point_query_ttrc:{autoIncrement:!1,defaults:{},id:286,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:183,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_seen_heads_queries:{autoIncrement:!1,defaults:{},id:325,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},thread_themes:{autoIncrement:!1,defaults:{backgroundUrl:"",iconUrl:"",iconUrlFallback:"",isDeprecated:!1},id:116,indexes:{},primaryKey:{fields:["fbid"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_optimistic_context:{autoIncrement:!1,defaults:{},id:32,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}},threads_optimistic_metadata:{autoIncrement:!1,defaults:{},id:312,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads_ranges_v2__generated:{autoIncrement:!1,defaults:{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0])},id:10,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"],ignoreNulls:[]}},transaction_history:{autoIncrement:!1,defaults:{timestampMs:e.cast([0,0])},id:102,indexes:{},primaryKey:{fields:["transactionId"],ignoreNulls:[]}},typing_indicator:{autoIncrement:!1,defaults:{},id:52,indexes:{},primaryKey:{fields:["threadKey","senderId"],ignoreNulls:[]}},universal_search_recent_searches:{autoIncrement:!1,defaults:{lastAccessedTimestampMs:e.cast([0,0])},id:68,indexes:{},primaryKey:{fields:["resultId"],ignoreNulls:[]}},user_visible_errors:{autoIncrement:!0,defaults:{},id:6,indexes:{},primaryKey:{fields:["errorId"],ignoreNulls:[]}},user_visible_network_connectivity_error:{autoIncrement:!0,defaults:{},id:115,indexes:{},primaryKey:{fields:["statusId"],ignoreNulls:[]}},value_model_features:{autoIncrement:!1,defaults:{},id:137,indexes:{},primaryKey:{fields:["feature"],ignoreNulls:[]}},value_model_output:{autoIncrement:!1,defaults:{},id:138,indexes:{},primaryKey:{fields:["product","contactId"],ignoreNulls:[]}},value_model_rules:{autoIncrement:!1,defaults:{},id:136,indexes:{},primaryKey:{fields:["product","ruleIndex"],ignoreNulls:[]}},video_chat_links_attempted_joiners:{autoIncrement:!1,defaults:{},id:79,indexes:{},primaryKey:{fields:["userId","url"],ignoreNulls:[]}},video_chat_links_joining:{autoIncrement:!1,defaults:{canAnonymousUsersJoin:!1},id:78,indexes:{optimistic:{fields:["optimisticClientToken"],ignoreNulls:[]}},primaryKey:{fields:["url","optimisticClientToken"],ignoreNulls:[]}},work_contact_info:{autoIncrement:!1,defaults:{},id:210,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}},work_genai:{autoIncrement:!1,defaults:{},id:293,indexes:{},primaryKey:{fields:["threadKey","messageId"],ignoreNulls:[]}},workroom_creation_requests:{autoIncrement:!1,defaults:{},id:252,indexes:{},primaryKey:{fields:["creationId"],ignoreNulls:[]}},workroom_invites:{autoIncrement:!1,defaults:{},id:257,indexes:{},primaryKey:{fields:["inviteId"],ignoreNulls:[]}},workrooms_co_presence_states:{autoIncrement:!1,defaults:{},id:246,indexes:{userCoPresence:{fields:["userId","coPresenceObjectId"],ignoreNulls:[]}},primaryKey:{fields:["userId"],ignoreNulls:[]}}}),u=Object.freeze(babelHelpers.extends({},s,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),c=Object.freeze(babelHelpers.extends({},u,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),d=Object.freeze(babelHelpers.extends({},c,{occamadillo_most_recent_message_per_thread:{autoIncrement:!1,defaults:{},id:292,indexes:{fetchTimestamp:{fields:["fetchTimestampMs"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),m=Object.freeze(babelHelpers.extends({},d,{messages_optimistic_context:{autoIncrement:!1,defaults:{},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),p=Object.freeze(babelHelpers.extends({},m,{auto_restore_opt_out:{autoIncrement:!1,defaults:{},id:330,indexes:{},primaryKey:{fields:["optOutKey"],ignoreNulls:[]}}})),_=Object.freeze(babelHelpers.extends({},p,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),f=Object.freeze(babelHelpers.extends({},_,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:e.cast([-1,4294967295]),status:e.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}},messenger_fts_threads_queries:{autoIncrement:!1,defaults:{sessionId:""},id:332,indexes:{},primaryKey:{fields:["queryId"],ignoreNulls:[]}}})),g=Object.freeze(babelHelpers.extends({},f,{messenger_fts_threads:{autoIncrement:!1,defaults:{nextMessageTimestamp:e.cast([-1,4294967295]),status:e.cast([0,0]),threadType:e.cast([0,0])},id:331,indexes:{},primaryKey:{fields:["threadId"],ignoreNulls:[]}}})),h=Object.freeze(babelHelpers.extends({},g,{filtered_threads_ranges_v3__generated:{autoIncrement:!1,defaults:{folderName:"inbox",hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxLastActivityTimestampMs:e.cast([0,0]),maxThreadKey:e.cast([0,0]),minLastActivityTimestampMs:e.cast([0,0]),minThreadKey:e.cast([0,0]),secondaryThreadRangeFilter:e.cast([0,0]),syncGroup:e.cast([0,1]),threadRangeFilterValue:""},id:247,indexes:{},primaryKey:{fields:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"],ignoreNulls:[]}}})),y=Object.freeze(babelHelpers.extends({},h,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),C=Object.freeze(babelHelpers.extends({},y,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),b=Object.freeze(babelHelpers.extends({},C,{media_receiver_fetch_transport_mappings:{autoIncrement:!1,defaults:{},id:333,indexes:{},primaryKey:{fields:["receiverFetchId"],ignoreNulls:[]}}})),v=Object.freeze(babelHelpers.extends({},b,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),S=Object.freeze(babelHelpers.extends({},v,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),R=Object.freeze(babelHelpers.extends({},S,{attachment_items:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0])},id:18,indexes:{fk_attachments:{fields:["threadKey","messageId","attachmentFbid","attachmentIndex"],ignoreNulls:[]}},primaryKey:{fields:["attachmentFbid","attachmentIndex"],ignoreNulls:[]}},attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),L=Object.freeze(babelHelpers.extends({},R,{client_thread_proactive_warning_settings:{autoIncrement:!1,defaults:{},id:241,indexes:{},primaryKey:{fields:["threadPk"],ignoreNulls:[]}}})),E=Object.freeze(babelHelpers.extends({},L,{pake_messages:{autoIncrement:!1,defaults:{},id:258,indexes:{},primaryKey:{fields:["sessionId"],ignoreNulls:[]}}})),k=Object.freeze(babelHelpers.extends({},E,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),I=Object.freeze(babelHelpers.extends({},k,{contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),T=Object.freeze(babelHelpers.extends({},I,{encrypted_backups_otc_devices:{autoIncrement:!1,defaults:{},id:261,indexes:{},primaryKey:{fields:["deviceId"],ignoreNulls:[]}}})),D=Object.freeze(babelHelpers.extends({},T,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),x=Object.freeze(babelHelpers.extends({},D,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),$=Object.freeze(babelHelpers.extends({},x,{account_synced_fields:{autoIncrement:!1,defaults:{},id:334,indexes:{},primaryKey:{fields:["accountId","syncedField"],ignoreNulls:[]}}})),P=Object.freeze(babelHelpers.extends({},$,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),N=Object.freeze(babelHelpers.extends({},P,{encrypted_backup_user_preferences:{autoIncrement:!0,defaults:{},id:335,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),M=Object.freeze(babelHelpers.extends({},N,{support_translation_feedback:{autoIncrement:!1,defaults:{},id:336,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),w=Object.freeze(babelHelpers.extends({},M,{support_translations:{autoIncrement:!1,defaults:{},id:300,indexes:{},primaryKey:{fields:["messageId","targetLocale"],ignoreNulls:[]}}})),A=Object.freeze(babelHelpers.extends({},w,{ig_thread_info:{autoIncrement:!1,defaults:{igDmSettingsMode:e.cast([0,0]),igDmSettingsTtlSec:e.cast([-1,4294967295])},id:194,indexes:{igThreadID:{fields:["igThreadId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),F=Object.freeze(babelHelpers.extends({},A,{e2ee_composer_draft_link_preview:{autoIncrement:!1,defaults:{},id:329,indexes:{},primaryKey:{fields:["draftId"],ignoreNulls:[]}}})),O=Object.freeze(babelHelpers.extends({},F,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),B=Object.freeze(babelHelpers.extends({},O,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),W=Object.freeze(babelHelpers.extends({},B,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),q=Object.freeze(babelHelpers.extends({},W,{admin_message_ctas:{autoIncrement:!1,defaults:{showAdChoiceIcon:!1,timestampMs:e.cast([0,0])},id:27,indexes:{ctaId:{fields:["ctaId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","ctaId"],ignoreNulls:[]}}})),U=Object.freeze(babelHelpers.extends({},q,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,isVideoQuickSend:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),V=Object.freeze(babelHelpers.extends({},U,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),H=Object.freeze(babelHelpers.extends({},V,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),G=Object.freeze(babelHelpers.extends({},H,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),z=Object.freeze(babelHelpers.extends({},G,{messaging_privacy_settings:{autoIncrement:!1,defaults:{e2eeHdMediaEnabled:!1,e2eeXmaPreviewsDisabled:!1,readReceiptsDisabled:e.cast([0,0])},id:288,indexes:{},primaryKey:{fields:["userId"],ignoreNulls:[]}}})),j=Object.freeze(babelHelpers.extends({},z,{media_staging:{autoIncrement:!1,defaults:{progress:0},id:161,indexes:{},primaryKey:{fields:["offlineAttachmentId"],ignoreNulls:[]}}})),K=Object.freeze(babelHelpers.extends({},j,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Q=Object.freeze(babelHelpers.extends({},K,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),X=Object.freeze(babelHelpers.extends({},Q,{community_folders:{autoIncrement:!1,defaults:{capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),inviteStatus:e.cast([0,0]),notificationMutedUntil:e.cast([0,0])},id:162,indexes:{byFbGroupId:{fields:["fbGroupId","folderId"],ignoreNulls:[]}},primaryKey:{fields:["folderId"],ignoreNulls:[]}}})),Y=Object.freeze(babelHelpers.extends({},X,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),J=Object.freeze(babelHelpers.extends({},Y,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),Z=Object.freeze(babelHelpers.extends({},J,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}})),ee=Object.freeze(babelHelpers.extends({},Z,{horizon_groups_key_mapping:{autoIncrement:!1,defaults:{},id:338,indexes:{},primaryKey:{fields:["threadKey","groupKey"],ignoreNulls:[]}}})),te=Object.freeze(babelHelpers.extends({},ee,{ctx_ad_context:{autoIncrement:!1,defaults:{},id:337,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),ne=Object.freeze(babelHelpers.extends({},te,{rtc_ongoing_calls_on_threads_v2:{autoIncrement:!1,defaults:{},id:23,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}},threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),re=Object.freeze(babelHelpers.extends({},ne,{horizon_party_members:{autoIncrement:!1,defaults:{},id:339,indexes:{},primaryKey:{fields:["partyKey","userId"],ignoreNulls:[]}}})),oe=Object.freeze(babelHelpers.extends({},re,{thread_theme_search_queries:{autoIncrement:!1,defaults:{},id:340,indexes:{},primaryKey:{fields:["query"],ignoreNulls:[]}},thread_theme_search_results:{autoIncrement:!1,defaults:{},id:341,indexes:{},primaryKey:{fields:["resultIndex","query"],ignoreNulls:[]}}})),ae=Object.freeze(babelHelpers.extends({},oe,{client_media_status:{autoIncrement:!1,defaults:{},id:342,indexes:{},primaryKey:{fields:["id"],ignoreNulls:[]}}})),ie=Object.freeze(babelHelpers.extends({},ae,{secure_encrypted_backups_epochs:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0])},id:169,indexes:{fk_secure_encrypted_backups_client_state:{fields:["backupId","epochId"],ignoreNulls:[]}},primaryKey:{fields:["epochId"],ignoreNulls:[]}}})),le=Object.freeze(babelHelpers.extends({},ie,{contacts:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),blockedByViewerStatus:e.cast([0,0]),canViewerMessage:!0,capabilities2:e.cast([0,0]),contactReachabilityStatusType:e.cast([0,0]),contactType:e.cast([0,0]),contactTypeExact:e.cast([0,0]),friendshipStatus:e.cast([0,5]),gender:e.cast([0,0]),isEmployee:!1,isMemorialized:!1,isMessengerUser:!1,optimisticBlockedByViewerStatus:e.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:e.cast([0,0]),rank:0,restrictionType:e.cast([0,0]),waConnectStatus:e.cast([0,0])},id:7,indexes:{blockedByViewerStatusId:{fields:["blockedByViewerStatus","id"],ignoreNulls:[]}},primaryKey:{fields:["id"],ignoreNulls:[]}}})),se=Object.freeze(babelHelpers.extends({},le,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ue=Object.freeze(babelHelpers.extends({},se,{encrypted_backups_reenrollment_trigger:{autoIncrement:!0,defaults:{},id:343,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),ce=Object.freeze(babelHelpers.extends({},ue,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),de=Object.freeze(babelHelpers.extends({},ce,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),me=Object.freeze(babelHelpers.extends({},de,{thread_label_mappings:{autoIncrement:!1,defaults:{sortKey:e.cast([0,0])},id:237,indexes:{labelId:{fields:["labelId","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","labelId"],ignoreNulls:[]}}})),pe=Object.freeze(babelHelpers.extends({},me,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),_e=Object.freeze(babelHelpers.extends({},pe,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),fe=Object.freeze(babelHelpers.extends({},_e,{pending_protobuf_backups_context:{autoIncrement:!0,defaults:{},id:305,indexes:{},primaryKey:{fields:["pk"],ignoreNulls:[]}}})),ge=Object.freeze(babelHelpers.extends({},fe,{threads:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),capabilities:e.cast([0,0]),capabilities2:e.cast([0,0]),capabilities3:e.cast([0,0]),capabilities4:e.cast([0,0]),capabilities5:e.cast([0,0]),disableComposerInput:!1,draftMessage:"",hasPersistentMenu:!1,isAdminSnippet:!1,isCustomThreadPicture:!1,isDisappearingMode:!1,isHidden:!1,isReadReceiptsDisabled:!1,lastActivityTimestampMs:e.cast([0,0]),lastReadWatermarkTimestampMs:e.cast([0,0]),muteCallsExpireTimeMs:e.cast([0,0]),muteExpireTimeMs:e.cast([0,0]),muteMentionExpireTimeMs:e.cast([0,0]),ongoingCallState:e.cast([0,0]),readReceiptsDisabledV2:e.cast([0,0]),removeWatermarkTimestampMs:e.cast([0,0]),snippetHasEmoji:!1,threadInvitesEnabled:e.cast([0,0]),threadInvitesEnabledV2:e.cast([0,0]),typingIndicatorDisabled:e.cast([0,0]),unreadDisappearingMessageCount:e.cast([0,0]),unsendLimitMs:e.cast([0,0])},id:9,indexes:{clientThreadKey:{fields:["clientThreadKey","threadKey"],ignoreNulls:["clientThreadKey"]},lastActivityTimestampMs:{fields:["lastActivityTimestampMs","threadKey"],ignoreNulls:[]},parentThreadKeyLastActivityTimestampMs:{fields:["parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},secondaryParentThreadKeyLastActivityTimestampMs:{fields:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:["secondaryParentThreadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{fields:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"],ignoreNulls:[]},threadTypeLastActivityTimestampMs:{fields:["threadType","lastActivityTimestampMs","threadKey"],ignoreNulls:[]}},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),he=Object.freeze(babelHelpers.extends({},ge,{server_search_results:{autoIncrement:!1,defaults:{},id:65,indexes:{},primaryKey:{fields:["query","resultId","globalIndex"],ignoreNulls:[]}}})),ye=Object.freeze(babelHelpers.extends({},he,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ce=Object.freeze(babelHelpers.extends({},ye,{messages_optimistic_context:{autoIncrement:!1,defaults:{transportKey:"FBBroker"},id:31,indexes:{},primaryKey:{fields:["taskId"],ignoreNulls:[]}}})),be=Object.freeze(babelHelpers.extends({},Ce,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}},subthread_message_ranges:{autoIncrement:!1,defaults:{},id:347,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}},subthread_ranges:{autoIncrement:!1,defaults:{},id:346,indexes:{},primaryKey:{fields:["parentThreadKey"],ignoreNulls:[]}},subthread_senders:{autoIncrement:!1,defaults:{},id:345,indexes:{},primaryKey:{fields:["subthreadParentMessageId","contactId"],ignoreNulls:[]}},subthreads:{autoIncrement:!1,defaults:{},id:344,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}}})),ve=Object.freeze(babelHelpers.extends({},be,{subthread_senders:{autoIncrement:!1,defaults:{},id:345,indexes:{lastActivityTimestampMsOrder:{fields:["subthreadParentMessageId","lastActivityTimestampMs","contactId"],ignoreNulls:[]}},primaryKey:{fields:["subthreadParentMessageId","contactId"],ignoreNulls:[]}}})),Se=Object.freeze(babelHelpers.extends({},ve,{subthreads:{autoIncrement:!1,defaults:{},id:344,indexes:{lastActivityTimestampMsOrder:{fields:["parentThreadKey","lastActivityTimestampMs","parentMessageId"],ignoreNulls:[]}},primaryKey:{fields:["parentThreadKey","parentMessageId"],ignoreNulls:[]}}})),Re=Object.freeze(babelHelpers.extends({},Se,{subthread_message_ranges_v2:{autoIncrement:!1,defaults:{},id:348,indexes:{},primaryKey:{fields:["parentThreadKey","parentMessageId","minTimestampMs"],ignoreNulls:[]}}})),Le=Object.freeze(babelHelpers.extends({},Re,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyMessageHiddenState:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ee=Object.freeze(babelHelpers.extends({},Le,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),ke=Object.freeze(babelHelpers.extends({},Ee,{messages:{autoIncrement:!1,defaults:{authorityLevel:e.cast([0,0]),displayedContentTypes:e.cast([0,1]),hasQuickReplies:!1,isAdminMessage:!1,isCollapsed:!1,isExpired:!1,isUnsent:!1,messageHiddenState:e.cast([0,0]),messageRenderingType:e.cast([0,0]),primarySortKey:e.cast([0,0]),quickReplyType:e.cast([0,0]),replyAttachmentType:e.cast([0,0]),replyMessageHiddenState:e.cast([0,0]),replyStatus:e.cast([0,0]),secondarySortKey:e.cast([0,0]),sendStatus:e.cast([0,0]),sendStatusV2:e.cast([0,0]),textHasLinks:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker",unsentTimestampMs:e.cast([0,0]),viewFlags:e.cast([0,0])},id:12,indexes:{collapsibleId:{fields:["collapsibleId","messageId"],ignoreNulls:["collapsibleId"]},ephemeralExpirationTs:{fields:["ephemeralExpirationTs","messageId"],ignoreNulls:["ephemeralExpirationTs"]},messageDisplayOrder:{fields:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderAuthority:{fields:["threadKey","authorityLevel","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:[]},messageDisplayOrderOfflineThreadingId:{fields:["threadKey","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},messageGroupId:{fields:["groupId","messageId"],ignoreNulls:["groupId"]},messageId:{fields:["messageId"],ignoreNulls:[]},messageSubthreadKey:{fields:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignoreNulls:["subthreadKey"]},messageSubthreadParentMessageId:{fields:["threadKey","subthreadParentMessageId","primarySortKey","offlineThreadingId","messageId","isCollapsed"],ignoreNulls:[]},optimistic:{fields:["offlineThreadingId"],ignoreNulls:[]},replySourceIdMessageID:{fields:["replySourceId","messageId"],ignoreNulls:["replySourceId"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{fields:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignoreNulls:["botResponseId"]},timestampMs:{fields:["timestampMs","messageId"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","timestampMs","messageId"],ignoreNulls:[]}}})),Ie=Object.freeze(babelHelpers.extends({},ke,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),Te=Object.freeze(babelHelpers.extends({},Ie,{business_thread_info:{autoIncrement:!1,defaults:{},id:260,indexes:{},primaryKey:{fields:["threadKey"],ignoreNulls:[]}}})),De=Object.freeze(babelHelpers.extends({},Te,{attachments:{autoIncrement:!1,defaults:{attachmentIndex:e.cast([0,0]),attachmentType:e.cast([0,0]),authorityLevel:e.cast([0,0]),hasMedia:!1,hasXma:!1,isSharable:!1,timestampMs:e.cast([0,0]),transportKey:"FBBroker"},id:16,indexes:{fk_messages:{fields:["threadKey","timestampMs","messageId","attachmentFbid"],ignoreNulls:[]},idx_attachments_collapsible_id:{fields:["threadKey","collapsibleId","messageId","attachmentFbid"],ignoreNulls:[]}},primaryKey:{fields:["threadKey","messageId","attachmentFbid"],ignoreNulls:[]}}})),xe=Object.freeze(babelHelpers.extends({},De,{multi_step_replies:{autoIncrement:!1,defaults:{},id:349,indexes:{},primaryKey:{fields:["threadKey","messageId","automationRuleId","mailboxType"],ignoreNulls:[]}}})),$e=Object.freeze({afterUpgrade:o("LSDbV1.upgrade").afterUpgrade,revision:76,tables:xe,upgrade:{1:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(u),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},2:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(c),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},3:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(d),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},4:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(m),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},5:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(p),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},6:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(_),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},7:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(f),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},8:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(g),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},9:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(h),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},10:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(y),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},11:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(C),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},12:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(b),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},13:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(v),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},14:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(S),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},15:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(R),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},16:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(L),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},17:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(E),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},18:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(k),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},19:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(I),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},20:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(T),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},21:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(D),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},22:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(x),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},23:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData($),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},24:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(P),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},25:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(N),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},26:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(M),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},27:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(w),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},28:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(A),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},29:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(F),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},30:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(O),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},31:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(B),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},32:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(W),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},33:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(q),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},34:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(U),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},35:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(V),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},36:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(H),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},37:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(G),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},38:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(z),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},39:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(j),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},40:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(K),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},41:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Q),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},42:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(X),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},43:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Y),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},44:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(J),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},45:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Z),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},46:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ee),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},47:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(te),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},48:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ne),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},49:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(re),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},50:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(oe),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},51:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ae),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},52:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ie),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},53:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(le),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},54:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(se),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},55:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ue),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},56:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ce),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},57:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(de),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},58:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(me),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},59:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(pe),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},60:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(_e),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},61:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(fe),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},62:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ge),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},63:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(he),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},64:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ye),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},65:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ce),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},66:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(be),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},67:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ve),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},68:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Se),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1)},69:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Re),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},70:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Le),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},71:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ee),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},72:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(ke),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},73:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Ie),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},74:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(Te),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},75:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(De),n=e.defaults,r=e.tableData;await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)},76:async function(t){var e=o("ReStoreVersionedSchemaProviderUtil").getTableData(xe),n=e.defaults,r=e.tableData;await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(t,r,n,!1),await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(t.transaction,r,!1,n)}}});l.LSDbV1=$e}),98);
__d("ReStoreDbVersion",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return e}function u(e,t){if(t in e)return e[t];throw r("FBLogger")("restore_db_migrations").mustfixThrow("Cannot find version: %s",t)}l.cast=e,l.uncast=s,l.castVersion=u}),98);
__d("LSDb",["LSDbV1","ReStoreDbVersion","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({V1:o("ReStoreDbVersion").cast("V1")}),u={targetVersion:o("ReStoreDbVersion").castVersion(s,"V"+((e=r("justknobx")._("2392"))!=null?e:0)),versions:{V1:o("LSDbV1").LSDbV1},legacyVersions:{},versionOrder:["V1"]};l.LSDbVersion=s,l.Versions=u}),98);
__d("LSDbForeignKeys",[],(function(t,n,r,o,a,i){"use strict";var e={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],community_chat_poll_options:[{tableName:"community_chat_poll_votes"}],community_chat_polls:[{tableName:"community_chat_poll_options"},{tableName:"community_chat_poll_votes"}],data_trace_meta:[{indexName:"traceIdAddonId",tableName:"data_trace_addon"}],messages:[{indexName:"fk_messages",tableName:"attachments"},{indexName:"fk_messages",tableName:"reactions"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"},{tableName:"messages_optimistic_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"attachments_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"},{tableName:"group_invites"}]},l=e;i.default=l}),66);
__d("MAWDbVersionList",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}var l={V21:21,V22:22,V23:23,V24:24,V25:25,V26:26,V27:27,V28:28,V29:29,V30:30,V31:31,V32:32,V33:33,V34:34,V35:35,V36:36,V37:37,V38:38,V39:39,V40:40,V41:41,V42:42,V43:43,V44:44,V45:45,V46:46,V47:47,V48:48,V49:49,V50:50,V51:51,V52:52,V53:53,V54:54,V55:55,V56:56,V57:57,V58:58,V59:59,V60:60,V61:61,V62:62,V63:63,V64:64,V65:65,V66:66,V67:67,V68:68,V69:69,V70:70,V71:71,V72:72,V73:73,V74:74,V75:75,V76:76,V77:77,V78:78,V79:79,V80:80,V81:81,V82:82,V83:83,V84:84,V85:85,V86:86,V87:87,V88:88,V89:89,V90:90,V91:91,V92:92,V93:93,V94:94,V95:95,V96:96,V97:97,V98:98,V99:99,V100:100,V101:101,V102:102,V103:103,V104:104,V105:105,V106:106,V107:107,V108:108,V109:109,V110:110,V111:111,V112:112,V113:113,V114:114,V115:115,V116:116,V117:117,V118:118,V119:119,V120:120,V121:121,V122:122,V123:123,V124:124,V125:125,V126:126};i.toVersion=e,i.VERSION=l}),66);
__d("MAWDbSchema",["MAWDbVersionList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"]}},name:"e2ee_appData",primaryKey:["appDataId"]},{autoIncrement:!1,indexes:{},name:"e2ee_appMeta",primaryKey:["key"]},{autoIncrement:!1,indexes:{},name:"e2ee_tasks",primaryKey:["taskName"]},{autoIncrement:!1,indexes:{},name:"e2ee_personalSenderKeyStatuses",primaryKey:["groupJid"]},{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_receipts",primaryKey:["msgId"]},{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_media",primaryKey:["mediaId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_chunk",primaryKey:["chunkId"]},{autoIncrement:!0,indexes:{jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]},{autoIncrement:!1,indexes:{},name:"e2ee_existingUsers",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_pendingReceipts",primaryKey:["id"]},{autoIncrement:!0,indexes:{version:{columns:["version"]}},name:"e2ee_browserEncryptionMeta",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],u=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],c=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],d=[{autoIncrement:!0,indexes:{},name:"e2ee_isDualSend",primaryKey:["rowId"]}],m=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeSecretKey",primaryKey:["key"]}],p=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],_=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],f=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId"]}],g=[{autoIncrement:!0,indexes:{deleteTs:{columns:["deleteTs"],unique:!1},externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]}],h=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"]},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"]}},name:"e2ee_media",primaryKey:["mediaId"]}],y=[{autoIncrement:!0,indexes:{},name:"e2ee_dualSendMedia",primaryKey:["id"]}],C=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],b=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeData",primaryKey:["rowId"]}],v=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},externalId:{columns:["externalId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],S=[{autoIncrement:!0,indexes:{},name:"e2ee_dyiBatch",primaryKey:["batchId"]}],R=[{autoIncrement:!1,indexes:{correspondingOpenThreadKey:{columns:["correspondingOpenThreadKey"],unique:!1},threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],L=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"],removed:!0}],E=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],k=[{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],I=[{autoIncrement:!1,indexes:{"[modelId+modelType+actionState]":{columns:["modelId","modelType","actionState"],unique:!1},action:{columns:["action"],unique:!1},actionState:{columns:["actionState"],unique:!1},collection:{columns:["collection"],unique:!1},indexMac:{columns:["indexMac"],unique:!1}},name:"e2ee_syncActions",primaryKey:["index"]}],T=[{autoIncrement:!1,indexes:{},name:"e2ee_missingKeys",primaryKey:["keyHex"]}],D=[{autoIncrement:!0,indexes:{action:{columns:["action"],unique:!1},collection:{columns:["collection"],unique:!1},index:{columns:["index"],unique:!1}},name:"e2ee_pendingMutations",primaryKey:["id"]}],x=[{autoIncrement:!0,indexes:{collection:{columns:["collection"]}},name:"e2ee_collectionVersions",primaryKey:["id"]}],$=[{autoIncrement:!0,indexes:{keyEpoch:{columns:["keyEpoch"],unique:!1},keyId:{columns:["keyId"]}},name:"e2ee_syncKeys",primaryKey:["id"]}],P=[],N=[{autoIncrement:!1,indexes:{externalId:{columns:["externalId"],unique:!1},lastRetryTs:{columns:["lastRetryTs"],unique:!1},traceId:{columns:["traceId"],unique:!1}},name:"e2ee_uploadRetryStatus",primaryKey:["externalId","lastRetryTs"]}],M=[{autoIncrement:!0,indexes:{jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],w=[{autoIncrement:!0,indexes:{},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]}],A=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"]}],F=[{autoIncrement:!0,indexes:{deduplicationKey:{columns:["deduplicationKey"],predicate:function(t){return t.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],O=[{autoIncrement:!0,indexes:{mediaId:{columns:["mediaId"],unique:!1},msgId:{columns:["msgId"],unique:!1},objectId:{columns:["objectId"]}},name:"e2ee_mediaBackup",primaryKey:["mediaBackupId"]}],B=[{autoIncrement:!0,indexes:{authoritativeThreadKey:{columns:["authoritativeThreadKey"]},deduplicationKey:{columns:["deduplicationKey"],predicate:function(t){return t.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],W=[{autoIncrement:!0,indexes:{"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],q=[{autoIncrement:!0,indexes:{originalMsgExternalId:{columns:["originalMsgExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],U=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"],removed:!0},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"],removed:!0},{autoIncrement:!0,indexes:{},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],V=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],H=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],G=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],z=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],j=[],K=[{autoIncrement:!0,indexes:{},name:"e2ee_danglingQueue",primaryKey:["queueId"]}],Q=[{autoIncrement:!0,indexes:{dbVersion:{columns:["dbVersion"],unique:!1}},name:"e2ee_staleQueue",primaryKey:["staleQueueId"]}],X=[{autoIncrement:!0,indexes:{"[offlineThreadingId+backupActionType]":{columns:["offlineThreadingId","backupActionType"],unique:!1},"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},offlineThreadingId:{columns:["offlineThreadingId"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],Y=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]}],J=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],Z=[{autoIncrement:!0,indexes:{},name:"e2ee_pendingMessageStanzaQueue",primaryKey:["pendingMessageStanzaQueueId"]}],ee=[{autoIncrement:!0,indexes:{author:{columns:["author"],unique:!1},chat:{columns:["chat"],unique:!1},externalId:{columns:["externalId"],unique:!1}},name:"e2ee_deletedMessages",primaryKey:["rowId"]}],te=[{autoIncrement:!0,indexes:{threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_ebMsgRanges",primaryKey:["rangeId"]}],ne=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1},threadJid:{columns:["threadJid","inviteeJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],re=[{autoIncrement:!1,indexes:{waMsgId:{columns:["waMsgId"]}},name:"e2ee_receipts",primaryKey:["msgId"]}],oe=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],ae=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ie=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(t){return t.serverTs!=null},unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],le=[{autoIncrement:!1,dexieOnly_primaryKeyUnique:!0,indexes:{ts:{columns:["ts"],unique:!1}},name:"e2ee_sentBytesCache",primaryKey:["waMsgId"]}],se=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(t){return t.serverTs!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ue=[{autoIncrement:!0,indexes:{"[originalMsgExternalId+threadJid]":{columns:["originalMsgExternalId","threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],ce=[{autoIncrement:!0,indexes:{deviceJid:{columns:["deviceJid"],unique:!1},displayOrder:{columns:["isArchived","ts"],unique:!1},isConfirmedActionTs:{columns:["isConfirmed","action","ts"],unique:!1},isNotifiedTs:{columns:["isNotified","ts"],unique:!1}},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],de=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],me=[{autoIncrement:!1,indexes:{},name:"e2ee_ephemeralSettings",primaryKey:["userJid"]}],pe=[{autoIncrement:!1,indexes:{ebClientRequired:{columns:["ebClientRequired","timestampMs"],unique:!1},restorable:{columns:["restorable","timestampMs"],unique:!1}},name:"e2ee_ebMessageRestoreTasks",primaryKey:["messageId"]}],_e=[{autoIncrement:!1,indexes:{},name:"e2ee_igMessageAuxiliaryInfo",primaryKey:["messageId"]}],fe=[{autoIncrement:!1,indexes:{plaintextHash:{columns:["plaintextHash"],unique:!1}},name:"e2ee_mediaKeys",primaryKey:["ciphertextHash"]}],ge=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],he=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],ye=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],Ce=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]}],be=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeBacklog",primaryKey:["externalId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsPurgeThreadBacklog",primaryKey:["chatJid"]}],ve=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Se=[{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],Re=[{autoIncrement:!0,indexes:{fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],Le=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"],removed:!0}],Ee=[{autoIncrement:!1,indexes:{},name:"e2ee_uploadRetryStatus",primaryKey:[],removed:!0}],ke=[{autoIncrement:!1,indexes:{},name:"e2ee_receiverFetchInfo",primaryKey:["receiverFetchId"]}],Ie=[{autoIncrement:!0,indexes:{"[threadJid+ts]":{columns:["threadJid","ts"],unique:!1},externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},ts:{columns:["ts"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]}],Te=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],De=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],xe=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],$e=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Pe=[{autoIncrement:!0,indexes:{version:{columns:["version"],unique:!0}},name:"e2ee_encryptionMetaV3",primaryKey:["id"]}],Ne=[{autoIncrement:!0,indexes:{"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages_deduped",primaryKey:["rowId"]}],Me=[{autoIncrement:!1,indexes:{},name:"e2ee_poll",primaryKey:["chatJid","pollStanzaId"]}],we=[{autoIncrement:!0,indexes:{"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(t){return t.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Ae=[{autoIncrement:!0,indexes:{"[threadJid+collapsibleId+sortOrderMs]":{columns:["threadJid","collapsibleId","sortOrderMs"],unique:!1},"[threadJid+pollStanzaId+sortOrderMs]":{columns:["threadJid","pollStanzaId","sortOrderMs"],predicate:function(t){return t.pollStanzaId!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},ack:{columns:["ack"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(t){return t.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(t){return t.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(t){return t.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},protocolMsgId:{columns:["protocolMsgId"],unique:!0},quoteExpirationTs:{columns:["quoteExpirationTs"],predicate:function(t){return t.quoteExpirationTs!=null},unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(t){return t.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(t){return t.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(t){return t.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],Fe=[{autoIncrement:!1,indexes:{},name:"e2ee_messages_deduped",primaryKey:[],removed:!0}],Oe=new Map([[(e=o("MAWDbVersionList")).VERSION.V21,s],[e.VERSION.V22,u],[e.VERSION.V23,c],[e.VERSION.V24,d],[e.VERSION.V25,m],[e.VERSION.V30,p],[e.VERSION.V31,_],[e.VERSION.V32,f],[e.VERSION.V33,g],[e.VERSION.V34,h],[e.VERSION.V35,y],[e.VERSION.V36,C],[e.VERSION.V37,b],[e.VERSION.V38,v],[e.VERSION.V39,S],[e.VERSION.V40,R],[e.VERSION.V41,L],[e.VERSION.V42,E],[e.VERSION.V45,k],[e.VERSION.V48,I],[e.VERSION.V49,T],[e.VERSION.V50,D],[e.VERSION.V51,x],[e.VERSION.V52,$],[e.VERSION.V57,P],[e.VERSION.V59,N],[e.VERSION.V61,M],[e.VERSION.V62,w],[e.VERSION.V63,A],[e.VERSION.V64,F],[e.VERSION.V65,O],[e.VERSION.V67,B],[e.VERSION.V69,W],[e.VERSION.V70,q],[e.VERSION.V73,U],[e.VERSION.V74,V],[e.VERSION.V75,H],[e.VERSION.V77,G],[e.VERSION.V78,z],[e.VERSION.V79,j],[e.VERSION.V80,K],[e.VERSION.V81,Q],[e.VERSION.V83,X],[e.VERSION.V84,Y],[e.VERSION.V85,J],[e.VERSION.V86,Z],[e.VERSION.V88,ee],[e.VERSION.V89,te],[e.VERSION.V90,ne],[e.VERSION.V91,re],[e.VERSION.V92,oe],[e.VERSION.V93,ae],[e.VERSION.V94,ie],[e.VERSION.V95,le],[e.VERSION.V96,se],[e.VERSION.V97,ue],[e.VERSION.V98,ce],[e.VERSION.V99,de],[e.VERSION.V100,me],[e.VERSION.V102,pe],[e.VERSION.V103,_e],[e.VERSION.V104,fe],[e.VERSION.V105,ge],[e.VERSION.V106,he],[e.VERSION.V107,ye],[e.VERSION.V108,Ce],[e.VERSION.V109,be],[e.VERSION.V110,ve],[e.VERSION.V111,Se],[e.VERSION.V112,Re],[e.VERSION.V113,Le],[e.VERSION.V114,Ee],[e.VERSION.V115,ke],[e.VERSION.V116,Ie],[e.VERSION.V117,Te],[e.VERSION.V118,De],[e.VERSION.V119,xe],[e.VERSION.V120,$e],[e.VERSION.V121,Pe],[e.VERSION.V122,Ne],[e.VERSION.V123,Me],[e.VERSION.V124,we],[e.VERSION.V125,Ae],[e.VERSION.V126,Fe]]),Be=["messages","unrenderedMessages","groupInfo","receipts","pendingReceipts","threads","participants","tasks","personalSenderKeyStatuses","appData","appMeta","chunk","mediaBackup","media","reactions","groupInvites","dyiBatch","syncActions","missingKeys","pendingMutations","collectionVersions","syncKeys","deviceChangeAlerts","xma","editMsgHistory","deletedMessages","ebMsgRanges","receiverFetchInfo","poll"];l.dbSchema=Oe,l.TABLES_TO_ENCRYPT=Be}),98);
__d("MAWGetDbVersion",["MAWDbVersionList","justknobx","objectValues"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(){return e!=null?e:o("MAWDbVersionList").toVersion(r("justknobx")._("1716"))}function u(t){if(r("justknobx")._("1495")){if(t==null||t==="current")return e=null,e;var n=Math.max.apply(Math,r("objectValues")(o("MAWDbVersionList").VERSION));if(t==="latest")return e=o("MAWDbVersionList").toVersion(n),e;if(!Number.isInteger(t))return e;if(t<0)return e=o("MAWDbVersionList").toVersion(n+t),e;e=o("MAWDbVersionList").toVersion(t)}}l.getArmadilloDbVersion=s,l.setArmadilloDbVersionForTest=u}),98);
__d("MAWDbSchema.restore",["MAWDbSchema","MAWGetDbVersion","objectEntries","sortBy"],(function(t,n,r,o,a,i,l){"use strict";var e={e2ee_appData:!0,e2ee_appMeta:!0,e2ee_browserEncryptionMeta:!0,e2ee_chunk:!0,e2ee_collectionVersions:!0,e2ee_deletedMessages:!0,e2ee_deviceChangeAlerts:!0,e2ee_dyiBatch:!0,e2ee_ebMessageRestoreTasks:!0,e2ee_ebMsgRanges:!0,e2ee_ebUploadQueue:!0,e2ee_editMsgHistory:!0,e2ee_encryptionMetaV3:!0,e2ee_ephemeralSettings:!0,e2ee_existingUsers:!0,e2ee_ftsBackloggedMessages:!0,e2ee_ftsEncryptionMeta:!0,e2ee_ftsIndexV3:!0,e2ee_ftsPurgeBacklog:!0,e2ee_ftsPurgeThreadBacklog:!0,e2ee_groupInfo:!0,e2ee_groupInvites:!0,e2ee_historySyncQRCodeData:!0,e2ee_historySyncQRCodeSecretKey:!0,e2ee_igMessageAuxiliaryInfo:!0,e2ee_media:!0,e2ee_mediaBackup:!0,e2ee_messages:!0,e2ee_missingKeys:!0,e2ee_participants:!0,e2ee_pendingMessageStanzaQueue:!0,e2ee_pendingMutations:!0,e2ee_pendingReceipts:!0,e2ee_pendingStanzas:!0,e2ee_poll:!0,e2ee_reactions:!0,e2ee_receiverFetchInfo:!0,e2ee_syncActions:!0,e2ee_syncKeys:!0,e2ee_threads:!0,e2ee_unrenderedMessages:!0,e2ee_xma:!0};function s(e){var t=Object.fromEntries(r("objectEntries")(e.indexes).filter(function(e){var t=e[1];return t.multiEntry_DO_NOT_USE!==!0}).map(function(t){var n=t[0],r=t[1];return[n,{columns:[].concat(r.columns,r.unique!==!1?[]:e.primaryKey),predicate:r.predicate}]})),n={auto_increment:e.autoIncrement===!0,indexes:t,name:e.name,primary_key:e.primaryKey};return n}var u=r("sortBy")(Array.from(o("MAWDbSchema").dbSchema.entries()),function(e){var t=e[0];return t}).map(function(e){var t=e[0],n=e[1];return{schema:n,version:t}}),c=function(t){return Array.from(u.filter(function(e){return e.version<=t&&e.schema!=null}).reduce(function(e,t){var n;return(n=t.schema)==null||n.forEach(function(t){if(t.removed===!0){e.delete(t.name);return}e.set(t.name,s(t))}),e},new Map).values())},d=c(o("MAWGetDbVersion").getArmadilloDbVersion());l.msgrDbStores=e,l.getSchemaForVersion=c,l.clientSchema=d}),98);
__d("LSDbSchema",["MAWDbSchema.restore"],(function(t,n,r,o,a,i){"use strict";var e=importNamespace("MAWDbSchema.restore").clientSchema;i.clientSchema=e}),66);
__d("ReStoreVersionedSchemaProvider",["FBLogger","ReStoreDefaultValueMigration","ReStoreIndicesMigration","ReStoreMigrateUtil","ReStorePersistedMetadata","ReStoreVersionedSchemaProviderUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.defaults={},this.$1="",this.$1=e,this.$2=t;var r=t.versions[t.targetVersion],a=o("ReStoreVersionedSchemaProviderUtil").getTableData(r.tables,n),i=a.defaults,l=a.tableData;this.tableNames=l.tableNames,this.tableIds=l.tableIds,this.defaults=i}var t=e.prototype;return t.$3=async function(t,n){var e,r,a,i;(e=n.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from scratch..."),(r=n.loggers.userFlow)==null||r.addPoint(this.$1+"_migration_versioned_from_scratch");var l={tableIds:this.tableIds,tableNames:this.tableNames};return await o("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(n.transaction,l,t,this.defaults),(a=n.loggers.logHistory)==null||a.debug("migration default values finished"),await o("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(n,l,this.defaults,t),(i=n.loggers.logHistory)==null||i.debug("migration indices finished"),t?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE},t.$4=function(t){var e=this,n=this.$2.versionOrder.indexOf(t);if(n===-1)throw r("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot resolve version %s",this.$1,t);return Promise.all(this.$2.versionOrder.slice(n,this.$2.versionOrder.indexOf(this.$2.targetVersion)+1).map(async function(t){if(t in e.$2.versions)return{meta:e.$2.versions[t],version:t};if(t in e.$2.legacyVersions)return{meta:await e.$2.legacyVersions[t].load(),version:t};throw r("FBLogger")("ReStoreVersionedSchemaProvider").mustfixThrow("[%s][ReStoreVersionedSchemaProvider] Cannot find version %s in either versions or legacyVersions",e.$1,t)}))},t.$5=async function(t,n,a){var e,i,l,s=this.$2.targetVersion,u=this.$2.versions[s].revision;if((e=a.loggers)==null||(e=e.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] currentVersion: "+t+"R"+n+", targetVersion: "+s+"R"+u),s===t&&u===n){var c;return(c=a.loggers)==null||(c=c.logHistory)==null||c.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] DB already up to date, skipping migration"),o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED}(i=a.loggers.logHistory)==null||i.debug("migration versioned incremental"),(l=a.loggers.userFlow)==null||l.addPoint(this.$1+"_migration_versioned_incremental");var d=await this.$4(t);if(d.length===0||n>u)return r("FBLogger")("ReStoreVersionedSchemaProvider","migrate").mustfix("[%s][ReStoreVersionedSchemaProvider][DANGEROUS] Backward migration required from %sR%s to %sR%s, running #migrateFromScratch",this.$1,t,""+n,s,""+u),this.$3(!1,a);for(var m of d)for(var p=m.meta,_=m.version,f=_===t?n+1:0;f<=p.revision;f++){var g,h,y,C,b,v,S;(g=a.loggers)==null||(g=g.logHistory)==null||g.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating to "+_+"R"+f),(h=a.loggers.userFlow)==null||h.addPoint(this.$1+"_migration_versioned_"+_+"{$revision}_start"),await((y=(C=p.upgrade)[f])==null?void 0:y.call(C,a)),await((b=(v=p.afterUpgrade)[f])==null?void 0:b.call(v,a.transaction)),(S=a.loggers.userFlow)==null||S.addPoint(this.$1+"_migration_versioned_"+_+"{$revision}_end")}return o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE},t.$6=function(t,n,r,a,i){var e;if((e=i.loggers.userFlow)==null||e.addPoint(this.$1+"_migration_versioned_hash_start"),n===r&&t===a){var l,s;return(l=i.loggers.userFlow)==null||l.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"no_changes"}})),(s=i.loggers)==null||(s=s.logHistory)==null||s.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, no changes are detected"),Promise.resolve(o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA)}else{var u,c;return(u=i.loggers.userFlow)==null||u.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{fromHashSchemaProvider:"changes"}})),(c=i.loggers)==null||(c=c.logHistory)==null||c.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Migrating from Hash schema provider, changed detected, calling #migrateFromScratch"),this.$3(!1,i)}},t.migrate=async function(t){var e,n,r,a,i,l,s,u,c;(e=t.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] Start migration"),(n=t.loggers.userFlow)==null||n.addPoint(this.$1+"_migration_versioned_start");var d=o("ReStorePersistedMetadata").ReStorePersistedDefaultValuesVersion.hash(this.defaults),m=o("ReStorePersistedMetadata").ReStorePersistedSchemaVersion.hash({tableIds:this.tableIds,tableNames:this.tableNames}),p=new(o("ReStorePersistedMetadata")).ReStorePersistedSchemaVersion(this.$1),_=new(o("ReStorePersistedMetadata")).ReStorePersistedDefaultValuesVersion(this.$1),f=await p.read(t.storeTx),g=(r=await _.read(t.storeTx))==null?void 0:r.defaultValuesVersion,h=this.$2.versions[this.$2.targetVersion];(a=t.loggers.userFlow)==null||a.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{int:{defaultValuesVersion:d,schemaVersion:m,storeDefaultValuesVersion:g,storeRevision:f==null?void 0:f.revision,storeSchemaVersion:f==null?void 0:f.schemaVersion,targetRevision:h.revision},string:{schemaProviderType:"versioned",storeVersion:f==null?void 0:f.version,targetVersion:this.$2.targetVersion}})),(i=t.loggers.logHistory)==null||i.debug("storeSchemaVersion: "+((l=f==null?void 0:f.schemaVersion)!=null?l:"null")),(s=t.loggers.logHistory)==null||s.debug("storeDefaultValuesVersion: "+(g!=null?g:"null"));var y=await(f!=null&&f.revision!=null&&f.version!=null?this.$5(f.version,f.revision,t):(f==null?void 0:f.schemaVersion)!=null?this.$6(g,f.schemaVersion,m,d,t):this.$3(!0,t));if(y!==o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED){var C;p.write(t.storeTx,{revision:h.revision,schemaVersion:m,version:this.$2.targetVersion}),_.write(t.storeTx,{defaultValuesVersion:d}),(C=t.loggers.logHistory)==null||C.debug("version is written")}return(u=t.loggers.logHistory)==null||u.debug("["+this.$1+"][ReStoreVersionedSchemaProvider] End Migration. Result: "+y+", SchemaVersion: "+m+", Version: "+this.$2.targetVersion+", Revision: "+h.revision),(c=t.loggers.userFlow)==null||c.addPoint(this.$1+"_migration_versioned_end"),y},e})();l.default=e}),98);
__d("LSVersionedSchemaProvider",["LSConstants","LSDb","LSDbForeignKeys","ReStoreVersionedSchemaProvider"],(function(t,n,r,o,a,i,l){"use strict";var e=new(r("ReStoreVersionedSchemaProvider"))(o("LSConstants").LS_SCHEMA_NAME,o("LSDb").Versions,r("LSDbForeignKeys"));l.schemaProvider=e}),98);
__d("ReStoreHashSchemaProvider",["ReStoreHashMigration","ReStoreMetadata","ReStoreMigrateUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var r=t.tableIds,a=t.tableNames;n===void 0&&(n={}),this.$1=e,this.tableNames=babelHelpers.extends({},a,o("ReStoreMetadata").RESTORE_METADATA_TABLES),this.tableIds=r,this.defaults=n!=null?n:{}}var t=e.prototype;return t.migrate=async function(t){var e,n,r,a,i;(e=t.loggers.logHistory)==null||e.debug("["+this.$1+"][ReStoreHashSchemaProvider] Start migration"),(n=t.loggers.userFlow)==null||n.addAnnotations(o("ReStoreMigrateUtil").prefixAnnotations(this.$1,{string:{schemaProviderType:"hash"}})),(r=t.loggers.userFlow)==null||r.addPoint(this.$1+"_migration_hash_start");var l=await o("ReStoreHashMigration").runHashMigration(this.$1,{tableIds:this.tableIds,tableNames:this.tableNames},this.defaults,t);return(a=t.loggers.logHistory)==null||a.debug("["+this.$1+"][ReStoreHashSchemaProvider] End migration. Result: "+l),(i=t.loggers.userFlow)==null||i.addPoint(this.$1+"_migration_hash_end"),l},e})();l.default=e}),98);
__d("ReStoreSchemaProvider",["ReStoreMigrateUtil"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return{defaults:babelHelpers.extends({},e.defaults,t.defaults),migrate:async function(r){var n=await e.migrate(r),a=await t.migrate(r);return n===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE||a===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE:n===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA||a===o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA?o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA:o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED},tableIds:babelHelpers.extends({},e.tableIds,t.tableIds),tableNames:babelHelpers.extends({},e.tableNames,t.tableNames)}}l.mergeSchemaProviders=e}),98);
__d("LSMetadata",["LSClientSchemaType","LSDbSchema","LSVersionedSchemaProvider","ReStoreHashSchemaProvider","ReStoreMetadata","ReStoreSchemaProvider"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("ReStoreSchemaProvider").mergeSchemaProviders(e,s)}var s=new(r("ReStoreHashSchemaProvider"))(o("LSClientSchemaType").MAW_SCHEMA_NAME,o("ReStoreMetadata").getBuildTableData({})([o("LSDbSchema").clientSchema])),u=e(o("LSVersionedSchemaProvider").schemaProvider);l.buildSchema=e,l.schema=u}),98);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(t,n,r,o,a,i,l){"use strict";var e,s={dynamic:!1};function u(t,a){a===void 0&&(a=s);var i=r("LS")(1,o("LSMetadata").schema,o("LSDynamicDependencies").cachedModules,t,void 0,void 0,a.dynamic,a.lsRuntimeLogger);return n("cr:8709")!=null&&(e||(e=r("ExecutionEnvironment"))).isInBrowser?n("cr:8709").wrapSprocInvocationWithProfiler(i):i}l.default=u}),98);
__d("LSVerifyContactRowExistsStoredProcedure",["LSSynchronousPromise","LSVerifyContactRowExists","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyContactRowExists"),a.id,a.contactIdType,a.profilePictureUrl,a.name,a.contactType,a.profilePictureFallbackUrl,a.profilePictureUrlExpirationTimestampMs,a.urlExpirationTimestampMs,a.normalizedNameForSearch,a.isMemorialized,a.isBlocked,a.blockedByViewerStatus,a.canViewerMessage,a.isSelf,a.authorityLevel,a.capabilities,a.capabilities2,a.workForeignEntityType,a.gender,a.contactViewerRelationship,a.secondaryName,a.firstName,a.friendshipStatus);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWFolderTypes",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=10,d=15,m={ARCHIVED:c,INBOX:e,OTHER:s,PENDING:l,RESTRICTED:d,SPAM:u};i.INBOX=e,i.PENDING=l,i.OTHER=s,i.SPAM=u,i.ARCHIVED=c,i.RESTRICTED=d,i.FOLDER_ID=m}),66);
__d("WAArrayZip",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=Math.min(e.length,t.length);return e.slice(0,n).map(function(e,n){return[e,t[n]]})}i.zip=e}),66);/*FB_PKG_DELIM*/
__d("AutoplayRulesEngine",[],(function(t,n,r,o,a,i){"use strict";var e=-2,l=-1,s=(function(){function t(t){this.$1=e,this.$2=t}var n=t.prototype;return n.evaluateAutoplay=function(t,n){var e=n(),r=l;if(t)for(var o=0;o<this.$2.length;o++){var a=this.$2[o](t);if(a!=="SKIP"){e=a,r=o;break}}return this.$1=r,e},n.getIndexOfLastWinningRule=function(){return this.$1},n.getRules=function(){return this.$2},t})();i.default=s}),66);
__d("CVCv3DisabledPlayerOrigins",[],(function(t,n,r,o,a,i){var e=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});i.default=e}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(t,n,r,o,a,i){var e=Object.freeze({LIVE_BEEPER:"live_beeper"});i.default=e}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1856513"),s=o("FalcoLoggerInternal").create("cvc_v3_http_event",e),u=s;l.default=u}),98);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=r("guid")(),this.$3=(t!=null?t:"null")+"::"+(n!=null?n:"null"),this.$4=null,this.$5=null}var t=e.prototype;return t.isValidSubscription=function(){return!!this.$1},t.makeCVCv3StateUpdate=function(t,n,r,a){var e=null;t!=null&&!Number.isNaN(t)&&n!=null&&!Number.isNaN(n)&&(e={m:a,pf:Math.floor((n-t)*o("DateConsts").MS_PER_SEC),s:r,sa:Math.floor(t*o("DateConsts").MS_PER_SEC)});var i={pps:this.$4,ps:e,si:this.$2,so:this.$3,vi:this.$1};return this.$4=e,i},t.makeUnifiedVideoCVCUpdate=function(t,n,r,o,a){var e=this.makeCVCv3StateUpdate(t,n,r,o);return this.$5!=null&&(e.tk=this.$5),babelHelpers.extends({},e,a)},t.processUnifiedResponse=function(t){var e=t;return this.$5=e.tk,e},t.clearAnyPreviousContext=function(){this.$4=null},t.logHttpRequestSuccess=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:t!=null?t.toString():null,countable_id:e.$1}})},t.logHttpRequestFailure=function(t,n){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:t,duration_ms:n!=null?n.toString():null,countable_id:e.$1}})},t.logHttpRequestTimeout=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:t!=null?t.toString():null,countable_id:e.$1}})},t.logHttpResponseBad=function(t,n){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:t,duration_ms:n!=null?n.toString():null,countable_id:e.$1}})},t.logDebugInfo=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:t,countable_id:e.$1}})},e})();l.default=e}),98);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("CometAudioManagerContexts").AudioApiContext);return e}l.useAudioApi=u}),98);
__d("CometFullScreen",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen;return typeof r=="function"?r.call(t):(e||(e=n("Promise"))).reject()}function s(){var t=document.exitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitExitFullscreen;return typeof t=="function"?t.call(document):(e||(e=n("Promise"))).reject()}function u(){return(document.webkitFullscreenEnabled===!0||document.mozFullScreenEnabled===!0||document.msFullscreenEnabled===!0||document.fullscreenEnabled===!0)&&(typeof document.webkitExitFullscreen=="function"||typeof document.mozCancelFullScreen=="function"||typeof document.msExitFullscreen=="function"||typeof document.exitFullscreen=="function")}function c(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||null}function d(){return c()!=null}function m(){return["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"]}function p(e){var t=window.document,n=!1,r=!0;return m().forEach(function(o){t.addEventListener(o,e,{capture:n,passive:r})}),function(){m().forEach(function(r){t.removeEventListener(r,e,n)})}}i.requestFullScreen=l,i.exitFullScreen=s,i.isSupported=u,i.getFullScreenElement=c,i.isFullScreen=d,i.getFullScreenChangeEventNames=m,i.subscribeToFullScreenChangeEvent=p}),66);
__d("CometObjectFitContainer.react",["FBLogger","cr:964538","isStringNullOrEmpty","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={inner:{height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",$$css:!0},innerWithAspectRatio:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0},outer:{height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",$$css:!0},outerWithAspectRatio:{height:"xt7dq6l",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(21),a=t.children,i=t.debugRole,l=t.innerInlineStyle,s=t.innerXStyle,d=t.outerInlineStyle,m=t.outerRef,p=t.outerXStyle,_=t.testid,f=r("isStringNullOrEmpty")(_)?void 0:_+"-outer",g=r("isStringNullOrEmpty")(_)?void 0:_+"-inner",h;n[0]!==i?(h={},n[0]=i,n[1]=h):h=n[1];var y;n[2]!==p?(y=(e||(e=r("stylex")))(c.outer,p),n[2]=p,n[3]=y):y=n[3];var C;n[4]!==i?(C={},n[4]=i,n[5]=C):C=n[5];var b;n[6]!==s?(b=(e||(e=r("stylex")))(c.inner,s),n[6]=s,n[7]=b):b=n[7];var v;n[8]!==a||n[9]!==l||n[10]!==C||n[11]!==b||n[12]!==g?(v=u.jsx("div",babelHelpers.extends({},C,{className:b,"data-testid":void 0,style:l,children:a})),n[8]=a,n[9]=l,n[10]=C,n[11]=b,n[12]=g,n[13]=v):v=n[13];var S;return n[14]!==d||n[15]!==m||n[16]!==h||n[17]!==y||n[18]!==v||n[19]!==f?(S=u.jsx("div",babelHelpers.extends({},h,{className:y,"data-testid":void 0,ref:m,style:d,children:v})),n[14]=d,n[15]=m,n[16]=h,n[17]=y,n[18]=v,n[19]=f,n[20]=S):S=n[20],S}function m(e){var t=o("react-compiler-runtime").c(13),n=e.children,a=e.contentAspectRatio,i=e.debugRole,l=e.objectFitMode,s=e.ref,m=e.testid,p=l===void 0?"CONTAINER_SIZE":l,_=a!=null&&isFinite(a)&&a>0?a:1.7777777777777777;if(p==="CONTAINER_WIDTH_BASED_ASPECT_RATIO"){var f=isFinite(_)&&_>0?100/_:100,g=f.toFixed(5)+"%",h;t[0]!==g?(h={paddingBottom:g},t[0]=g,t[1]=h):h=t[1];var y=h,C;return t[2]!==n||t[3]!==i||t[4]!==y||t[5]!==s||t[6]!==m?(C=u.jsx(d,{children:n,debugRole:i,innerXStyle:c.innerWithAspectRatio,outerInlineStyle:y,outerRef:s,outerXStyle:c.outerWithAspectRatio,testid:void 0}),t[2]=n,t[3]=i,t[4]=y,t[5]=s,t[6]=m,t[7]=C):C=t[7],C}else if(p==="CONTAINER_SIZE"){var b;return t[8]!==n||t[9]!==i||t[10]!==s||t[11]!==m?(b=u.jsx(d,{children:n,debugRole:i,outerRef:s,testid:void 0}),t[8]=n,t[9]=i,t[10]=s,t[11]=m,t[12]=b):b=t[12],b}else throw r("FBLogger")("comet_ui").mustfixThrow("Unsupported objectFitMode %s",p)}l.default=m}),98);
__d("CometVideoPlayerInstreamAdsFeedContextCardContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext({isWatchTab:!1,onNodeChangeFunc:null});function d(){return u(c)}l.CometVideoPlayerInstreamAdsFeedContextCardContext=c,l.useCometVideoPlayerInstreamAdsFeedContextCardContext=d}),98);
__d("VideoPlayerOnViewability.react",["DOMRectIsEqual","DOMRectReadOnly","VideoPlayerViewabilityConstants","emptyFunction","react","useIntersectionObserver","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useMemo,p=c.useRef,_=10,f=[.25,.75,.99,1].concat(new Array(10).fill().map(function(e,t){return t/10}));function g(t){var n=t.viewportMargins,o=p(-1),a=p(-1),i=p(r("DOMRectReadOnly").fromRect({height:0,width:0,x:0,y:0})),l=p(null),s=p(null),c=-n.top+"px "+-n.right+"px "+-n.bottom+"px "+-n.left+"px",g=t.onVideoPlayerViewabilityInfoChange||r("emptyFunction"),h=_,y=d(function(e){if(e.time>a.current&&!r("DOMRectIsEqual")(e.boundingClientRect,i.current)){var t=e.boundingClientRect,n=t.height,o=t.width,s=t.x,u=t.y,c=l.current,d=r("DOMRectReadOnly").fromRect({height:n,width:o,x:s,y:u});if(i.current=d,a.current=e.time,c===null||c<=0||c<=r("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE)return;g({positionToViewport:d,visiblePercentage:c})}},[i,l,g]),C=d(function(e){if(e.time>o.current&&(e.intersectionRatio!==l.current||!r("DOMRectIsEqual")(e.boundingClientRect,i.current))){var t=e.boundingClientRect,n=t.height,u=t.width,c=t.x,d=t.y,m=e.intersectionRatio,p=r("DOMRectReadOnly").fromRect({height:n,width:u,x:c,y:d}),_=s.current,f=_,h=!1,y=Math.abs((_||0)*100-(m||0)*100);(m!==null&&y>=1||y>0&&m<(_||0))&&(f=m,s.current=m,h=!0),l.current=m,o.current=e.time;var C=i.current;if(i.current=p,a.current=e.time,!h&&r("DOMRectIsEqual")(C,p))return;f!==null&&g({positionToViewport:p,visiblePercentage:f})}},[a,i,l,g,o]),b=m(function(){for(var e=[],t=1;t<=h;t++)e.push("-"+(100-t/h*100)+"% 0% 0% 0%");return e},[h]),v=(e||(e=r("useUnsafeRef_DEPRECATED")))([]);v.current=[];for(var S=0;S<b.length;S++)v.current.push(d(r("useIntersectionObserver")(y,{root:null,rootMargin:b[S],threshold:f}),[b[S],f,r("useIntersectionObserver")]));var R=v.current.length,L=d(function(e){for(var t=0;t<R;t++)v.current[t](e)},[R,v]),E=d(r("useIntersectionObserver")(C,{root:null,rootMargin:c,threshold:f}),[C,c,f,r("useIntersectionObserver")]),k=d(function(e){E(e),L(e)},[E,L]);return u.jsx("div",{className:"x5yr21d x1uhb9sk xh8yej3",ref:k,children:u.Children.only(t.children)})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("renderVideoPlayerImplementation",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){if(e.typename==="VideoPlayerEmptyImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));if(e.typename==="VideoPlayerOzImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));if(e.typename==="VideoPlayerProgressiveImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));if(e.typename==="VideoPlayerNextgendashImplementation")return s.jsx(e.Component,babelHelpers.extends({},t,e.data));throw e.typename,r("FBLogger")("comet_video_player").mustfixThrow('CoreVideoPlayer: Unrecognized implementation typename "%s".',e.typename)}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("useCreateVideoPlayerPassiveViewabilityInfo",["removeFromArray","useStable"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("useStable")(s)}function s(){var e=[],t=null;return{setVideoPlayerViewabilityInfo:function(r){t=r,e.forEach(u)},videoPlayerPassiveViewabilityInfo:{getCurrent:function(){return t},subscribe:function(n){return e.push(n),{remove:function(){r("removeFromArray")(e,n)}}}}}}function u(e){return e()}l.default=e}),98);
__d("useCometSize_DO_NOT_USE",["CometThrottle","ExecutionEnvironment","FBLogger","HiddenSubtreePassiveContext","react","useResizeObserver","useStable","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useContext,m=c.useEffect,p=c.useLayoutEffect,_=c.useRef,f=c.useState;function g(e){var t=e.setBoxStateStable,n=null,o=function(r){var e,o;((e=n)==null?void 0:e.height)===r.height&&((o=n)==null?void 0:o.width)===r.width||(n=r,t(r))},a=function(t){var e=t.getBoundingClientRect(),n=e.height,r=e.width;o({height:n,width:r})},i=r("CometThrottle")(function(e){var t=e.height,n=e.width;t===0&&n===0||o({height:t,width:n})},200,{leading:!0,trailing:!0});return{measure:a,onResizeThrottled:i}}function h(t,n){if(t===void 0&&(t=!1),n===void 0&&(n=!1),!(e||(e=r("ExecutionEnvironment"))).canUseDOM&&!t)throw r("FBLogger")("comet_ssr").blameToPreviousFile().mustfixThrow("useCometSize is not compatible with Server Rendering. This will break SSR! See https://fburl.com/wiki/xrzohrqb");var o=_(null),a=f(null),i=a[0],l=a[1],u=d(r("HiddenSubtreePassiveContext")),c=r("useStable")(function(){return g({setBoxStateStable:l})}),h=r("useResizeObserver")(c.onResizeThrottled),y=_(h);p(function(){y.current=h},[h]);var C=(s||(s=r("useUnsafeRef_DEPRECATED")))(function(e){e!==o.current&&(o.current=e,e!=null&&!n&&c.measure(e)),y.current(o.current)});return m(function(){if(u.getCurrentState().hidden){var e=u.subscribeToChanges(function(t){!t.hidden&&o.current!=null&&!n&&(c.measure(o.current),e.remove())});return function(){return e.remove()}}},[u,c]),m(function(){return function(){c.onResizeThrottled.cancel()}},[c]),[C.current,i]}l.default=h}),98);
__d("useObjectFitContainerDimensions",["CometObjectFitContainer.react","react","react-compiler-runtime","useCometSize_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=584;function c(e){return e==="video_home_inline"||e==="inline"?{height:u,width:u}:{height:1080,width:1920}}function d(e,t,n){var a=o("react-compiler-runtime").c(8),i=r("useCometSize_DO_NOT_USE")(t!=null?t:!1,n!=null?n:!1),l=i[0],u=i[1],d;a[0]!==u||a[1]!==e?(d=u!=null?u:c(e),a[0]=u,a[1]=e,a[2]=d):d=a[2];var m=d,p;a[3]!==l?(p=function(t){return s.jsx(r("CometObjectFitContainer.react"),{debugRole:null,objectFitMode:"CONTAINER_SIZE",ref:l,children:t})},a[3]=l,a[4]=p):p=a[4];var _;return a[5]!==m||a[6]!==p?(_=[m,p],a[5]=m,a[6]=p,a[7]=_):_=a[7],_}l.default=d}),98);
__d("videoPlayerUniqueID",["guid"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return"id-vpuid-"+(e!=null?e:r("guid")())}l.default=e}),98);
__d("CoreVideoPlayer.react",["ErrorMetadata","FBLogger","VideoPlayerOnViewability.react","VideoPlayerViewabilityContexts","cr:9824","createVideoStateHook","err","getVideoShareDownstreamSignalTracking","react","react-compiler-runtime","renderVideoPlayerImplementation","useCreateVideoPlayerPassiveViewabilityInfo","useObjectFitContainerDimensions","useStable","videoPlayerUniqueID"],(function(t,n,r,o,a,i,l){"use strict";var e=["implementations"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useRef;function p(e){var t=e.coreVideoPlayerProps,n=e.implementation,a=t.coreVideoPlayerMetaData,i=t.fullscreenController,l=t.isFullscreen,s=t.onCoreVideoStatesChanged,c=t.renderWithCoreVideoStates,p=t.trackingDataEncrypted,_=t.trackingNodes,f=t.viewportMarginsForViewability,g=r("useStable")(function(){return r("videoPlayerUniqueID")(a.videoPlayerUniqueIDOverride)});o("createVideoStateHook").useCleanupVideoStateHooks_INTERNAL(g);var h=m(0),y=r("useCreateVideoPlayerPassiveViewabilityInfo")(),C=y.setVideoPlayerViewabilityInfo,b=y.videoPlayerPassiveViewabilityInfo,v=r("useObjectFitContainerDimensions")(a.subOrigin,a.bypassUseCometSizeError,a.bypassMeasureOnMount),S=v[0],R=v[1],L=d(function(e){var t=e.implementationController,n=e.implementationExposedState;return c({implementationController:t,implementationExposedState:n,videoPlayerPassiveViewabilityInfo:b})},[c,b]),E=d(function(e){var t=e.implementationController,n=e.implementationExposedState;s&&s({implementationController:t,implementationExposedState:n,videoPlayerPassiveViewabilityInfo:b})},[s,b]),k=o("getVideoShareDownstreamSignalTracking").getVideoShareDownstreamSignalTrackingWithNumberStartTime(),I={accessToken:a.accessToken,dimensions:S,downstreamShareSignalTracking:k,instanceKey:g,playerImplementationInstanceCountRef:h,productAttribution:a.productAttribution,trackingDataEncrypted:p,trackingNodes:_},T={coreVideoPlayerMetaData:a,dimensions:S,fullscreenController:i,loggingMetaData:I,onExposedStateChanged:E,renderWithExposedState:L,videoPlayerPassiveViewabilityInfo:b};return R(u.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:l,children:u.jsx(r("VideoPlayerOnViewability.react"),{onVideoPlayerViewabilityInfoChange:C,viewportMargins:f,children:r("renderVideoPlayerImplementation")(n,T)})}))}p.displayName=p.name+" [from "+i.id+"]";function _(t){var a=o("react-compiler-runtime").c(6),i,l;if(a[0]!==t?(l=t.implementations,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]),l.length===0){var s,c,d,m,_=r("err")("No implementations given to CoreVideoPlayer");_.name="VideoPlayerNoImplementations",_.project="comet_video_player";var f=(s=_.metadata)!=null?s:new(r("ErrorMetadata"));_.metadata=f;var g=i.coreVideoPlayerMetaData.videoFBID;throw g!=null&&f.addEntry("COMET_VIDEO","VIDEO_ID",g),(c=r("FBLogger")("comet_video_player").catching(_)).mustfixThrow.apply(c,[(d=_.messageFormat)!=null?d:_.message].concat(_.messageFormat!=null?(m=_.messageParams)!=null?m:[]:[]))}var h;return a[3]!==i||a[4]!==l?(h=n("cr:9824")?u.jsx(n("cr:9824"),{CoreVideoPlayerWithOneImplementation:p,coreVideoPlayerProps:i,implementations:l}):u.jsx(p,{coreVideoPlayerProps:i,implementation:l[0]}),a[3]=i,a[4]=l,a[5]=h):h=a[5],h}l.default=_}),98);
__d("makeAudioSymbol",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t+"::"+e}i.default=e}),66);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","createVideoStateHook","makeAudioSymbol","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useContext,d=u.useEffect,m=u.useId,p=u.useMemo,_=u.useRef,f=u.useState,g=o("createVideoStateHook").createVideoStateHook(),h=g.stateHook,y=.01;function C(){var e=o("react-compiler-runtime").c(5),t=(s||(s=o("VideoPlayerHooks"))).useController(),n;e[0]!==t?(n=function(){return t.getCurrentState().volume},e[0]=t,e[1]=n):n=e[1];var r=f(n),a=r[0],i=r[1],l,u;return e[2]!==t?(l=function(){var e=t.subscribe(function(){var e=t.getCurrentState().volume;i(function(t){return e===0||e===1||Math.abs(t-e)>y?e:t})});return i(t.getCurrentState().volume),function(){e.remove()}},u=[t],e[2]=t,e[3]=l,e[4]=u):(l=e[3],u=e[4]),d(l,u),a}function b(){"use no memo";var e=h(!1),t=e[0],n=e[1],a=m(),i=(s||(s=o("VideoPlayerHooks"))).useInstanceKey(),l=p(function(){return r("makeAudioSymbol")(a,i)},[a,i]),u=o("CometAudioManagerHooks").useAudioApi(),g=_(u);d(function(){g.current=u},[u]);var y=s.useController(),b=s.useLastPlayReason(),v=s.useLastMuteReason(),S=s.useMuted(),R=C(),L=r("usePrevious")(R),E=s.usePaused(),k=c(o("CometAudioManagerContexts").CometAudioLocalScopeContext),I=c(o("CometAudioManagerContexts").CometAudioGroupContext),T=o("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),D=s.useVolumeSetting(),x=p(function(){return(I==null?void 0:I.groupID)||o("CometAudioManagerContexts").makeAudioGroupID()},[I==null?void 0:I.groupID]),$=f(!0),P=$[0],N=$[1],M=_(!0),w=_(null),A=f(function(){return r("CometThrottle")(function(e){g.current&&g.current.update(e)},50,{leading:!0,trailing:!0})}),F=A[0],O=p(function(){return{audioLocalScope:k,controller:y,groupID:x,instanceKey:i,lastMuteReason:v,lastPlayReason:b,muted:S,paused:E,previousVolume:L,symbol:l,videoPlayerPortalingPlaceInfo:T,volume:R}},[k,y,x,i,v,b,S,E,L,l,T,R]);d(function(){if(D!=null&&!t){var e=w.current!==D;(M.current||e)&&(M.current=!1,w.current=D,y.setVolume(D),n(!0))}},[y,t,n,D]);var B=p(function(){return I||{allowSound:P,groupID:x,setAllowSound:N}},[I,P,x,N]),W=_(B),q=_(!1);d(function(){if(u&&!q.current){q.current=!0;try{u.register(O,W.current)}finally{q.current=!1}}return function(){u&&u.unregister(l,x)}},[u,O,x,l]),d(function(){u&&F(O)},[u,O,F]),d(function(){return function(){F&&F.cancel&&F.cancel()}},[F]);var U=_(!1),V=_(null);return d(function(){var e=V.current!==P;if(!P&&g.current&&!U.current&&e){U.current=!0;try{y.setMuted(!0,"audio_manager_initiated"),V.current=P}finally{U.current=!1}}},[P,g,y]),null}l.default=b}),98);
__d("VideoPlayerAutoplayHooks",["FBLogger","VideoPlayerAutoplayContexts","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("VideoPlayerAutoplayContexts").AutoplayApiContext);if(e==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?");return e}function c(){return s(o("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}l.useAutoplayApi=u,l.useVideoAutoplayLocalScope=c}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:1453865"))!=null?e:{useVideoPlayerDebugAPI:r("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:r("emptyFunction"),useVideoPlayerDebugInfo:r("emptyFunction").thatReturns(null)};l.default=s}),98);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(t,n,r,o,a,i){"use strict";function e(){return"ALLOW"}e.displayName="evaluateVideoAutoplayDefaultRule",i.default=e}),66);
__d("makeSelectedAutoplayVideoSymbol",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t+"::"+e}i.default=e}),66);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(8),n=c(e),a;t[0]!==e?(a=function(){return new(r("AutoplayRulesEngine"))(e)},t[0]=e,t[1]=a):a=t[1];var i=d(a),l=i[0],s=i[1],m,p;t[2]!==e?(m=function(){n.current!==e&&s(function(){return new(r("AutoplayRulesEngine"))(e)})},p=[e],t[2]=e,t[3]=m,t[4]=p):(m=t[3],p=t[4]),u(m,p);var _,f;return t[5]!==l?(_=function(){n.current=l.getRules()},f=[l],t[5]=l,t[6]=_,t[7]=f):(_=t[6],f=t[7]),u(_,f),l}l.default=m}),98);
__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],(function(t,n,r,o,a,i,l){"use strict";var e;l.useVideoPlayerExtendedPassiveViewabilityInfo=(e||(e=o("VideoPlayerHooks"))).useVideoPlayerExtendedPassiveViewabilityInfo,l.useVideoPlayerPassiveViewabilityInfo=e.useVideoPlayerPassiveViewabilityInfo,l.useVideoPlayerViewabilityInfo=e.useVideoPlayerViewabilityInfo}),98);
__d("useEventCallbackOn",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t,n){var r=o("react-compiler-runtime").c(5),a,i;r[0]!==n||r[1]!==t||r[2]!==e?(a=function(){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}},i=[e,t,n],r[0]=n,r[1]=t,r[2]=e,r[3]=a,r[4]=i):(a=r[3],i=r[4]),s(a,i)}l.default=u}),98);
__d("useIsBackgrounded",["emptyFunction","react","useEventCallbackOn"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useState;function d(){var e=t.document;return typeof e.hidden!="undefined"?"visibilitychange":typeof e.mozHidden!="undefined"?"mozvisibilitychange":typeof e.msHidden!="undefined"?"msvisibilitychange":typeof e.webkitHidden!="undefined"?"webkitvisibilitychange":"visibilitychange"}function m(){var e=t.document;return typeof e.hidden!="undefined"?e.hidden:typeof e.mozHidden!="undefined"?e.mozHidden:typeof e.msHidden!="undefined"?e.msHidden:typeof e.webkitHidden!="undefined"?e.webkitHidden:!1}var p=d();function _(e){var n=t.document.hasFocus?t.document.hasFocus():!0,r=m();return r||(e?!1:!n)}function f(){return m()}function g(e){"use no memo";var n=(e==null?void 0:e.noPauseOnBlurOrFocus)===!0,o=c(function(){return _(n)}),a=o[0],i=o[1],l=c(function(){return f()}),s=l[0],d=l[1],m=!!e&&e.scrollTerminatesHiddenOrBlurred===!0,g=u(function(){i(_(n)),d(f())},[i,n]),h=g,y=u(function(){var e=_(n);e&&m&&a&&i(!1)},[a,n,m]);return n&&(h=r("emptyFunction")),r("useEventCallbackOn")(t.window,"blur",h),r("useEventCallbackOn")(t.window,"focus",h),r("useEventCallbackOn")(t.document,p,g),r("useEventCallbackOn")(t.window,"scroll",y),{isDocumentHidden:s,isDocumentHiddenOrBlurred:a}}l.default=g}),98);
__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useInterval"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState,u=5e3;function c(){var e=o("react-compiler-runtime").c(2),t=d,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t(),e[0]=n):n=e[0];var a=s(n),i=a[0],l=a[1],c;return e[1]===Symbol.for("react.memo_cache_sentinel")?(c=function(){return l(t())},e[1]=c):c=e[1],r("useInterval")(c,u),i}function d(){return r("oz-player/networks/OzBandwidthEstimator").getBandwidth(r("VideoPlayerOzWWWGlobalConfig"))}l.default=c}),98);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerShakaGlobalConfig","VideoPlayerViewabilityHooks","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.startTransition,d=u.useContext,m=u.useEffect,p=u.useMemo,_=u.useRef,f=u.useState;function g(e){"use no memo";var t=(s||(s=o("VideoPlayerHooks"))).useAdClientToken(),n=s.useAutoplayGatingResult(),a=s.useBroadcastStatus(),i=s.useEnded(),l=s.useIsFrozenPassive(),u=s.useLastPauseReason(),g=s.useLastPlayReason(),h=s.useMuted(),y=s.usePaused(),C=d(r("HiddenSubtreePassiveContext")),b=!t,v=(e==null?void 0:e.noPauseOnBlurOrFocus)===!0||o("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1),S=r("useIsBackgrounded")({noPauseOnBlurOrFocus:v,scrollTerminatesHiddenOrBlurred:b}),R=S.isDocumentHidden,L=S.isDocumentHiddenOrBlurred,E=r("useVideoPlayerBandwidthEstimate")(),k=o("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),I=o("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo(),T=f(C.getCurrentState().backgrounded),D=T[0],x=T[1],$=f(C.getCurrentState().hidden),P=$[0],N=$[1];m(function(){var e=function(){c(function(){var e=C.getCurrentState();N(e.hidden),x(e.backgrounded)})},t=C.subscribeToChanges(e);return e(),function(){t.remove()}},[C,x,N]);var M=f(function(){return l.getCurrentState()}),w=M[0],A=M[1];m(function(){var e=l.subscribeToChanges(function(e){A(e)}),t=l.getCurrentState();return A(t),function(){e.remove()}},[l,A]);var F=p(function(){return{adClientToken:t,autoplayGatingResult:n,bandwidthEstimate:E,broadcastStatus:a,controllerIsFrozen:w,currentSubtreeIsBackgrounded:D,currentSubtreeIsHidden:P,ended:i,hiddenSubtreePassive:C,isDocumentHidden:R,isDocumentHiddenOrBlurred:L,isFrozenPassive:l,lastPauseReason:u,lastPlayReason:g,muted:h,paused:y,videoPlayerExtendedPassiveViewabilityInfo:I,videoPlayerPassiveViewabilityInfo:k}},[t,n,E,a,w,D,P,i,C,R,L,l,u,g,h,y,I,k]),O=f(F),B=O[0],W=O[1],q=_(B);return m(function(){q.current=B},[B]),m(function(){var e=!1;for(var t in F)if(Object.prototype.hasOwnProperty.call(F,t)&&F[t]!==q.current[t]){e=!0;break}e&&W(F)},[F,W]),B}l.default=g}),98);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","react-compiler-runtime","useAutoplayRulesEngine","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useId,_=u.useMemo,f=u.useRef,g=u.useState;function h(){var e=o("react-compiler-runtime").c(70),t=p(),n=(s||(s=o("VideoPlayerHooks"))).useCanAutoplay(),a=s.useInstanceKey(),i,l;e[0]!==t||e[1]!==a?(l=r("makeSelectedAutoplayVideoSymbol")(t,a),e[0]=t,e[1]=a,e[2]=l):l=e[2],i=l;var u=i,c=f(u),_,h;e[3]!==u?(_=function(){c.current=u},h=[u],e[3]=u,e[4]=_,e[5]=h):(_=e[4],h=e[5]),m(_,h);var y=d(r("HiddenSubtreePassiveContext")),C=s.useController(),b=f(!1),v=o("useConcurrentAutoplayManagementAPI").useAutoplayControlID(),S,R;e[6]!==v||e[7]!==C?(S=function(){o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[ASSUME CONTROL] "+v),C.registerControllingComponent(v)},R=[C,v],e[6]=v,e[7]=C,e[8]=S,e[9]=R):(S=e[8],R=e[9]),m(S,R);var L=s.useVideoPlayerPassiveViewabilityInfo(),E=s.usePaused(),k=f(E),I=o("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),T=f(I),D,x;e[10]!==I?(D=function(){T.current=I},x=[I],e[10]=I,e[11]=D,e[12]=x):(D=e[11],x=e[12]),m(D,x);var $;e[13]!==C||e[14]!==L?($=function(){var e=C.getCurrentState(),t=e.lastPlayReason,n=e.paused,o=k.current;k.current=n;var a=L==null?void 0:L.getCurrent();if(a){var i=a.visiblePercentage,l=!n&&n!==o,s=i<r("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&i>0;T.current.disableScrollBeforePlayWhenOffscreen!==!0&&l&&t==="user_initiated"&&s&&(b.current=!0)}},e[13]=C,e[14]=L,e[15]=$):$=e[15];var P=$,N=f(P),M,w;e[16]!==P?(w=function(){N.current=P},M=[P],e[16]=P,e[17]=M,e[18]=w):(M=e[17],w=e[18]),m(w,M);var A,F;e[19]!==C||e[20]!==P?(A=function(){var e=C.subscribe(function(){P()});return function(){e.remove()}},F=[C,P],e[19]=C,e[20]=P,e[21]=A,e[22]=F):(A=e[21],F=e[22]),m(A,F);var O;e[23]!==I.noPauseOnBlurOrFocus?(O={noPauseOnBlurOrFocus:I.noPauseOnBlurOrFocus},e[23]=I.noPauseOnBlurOrFocus,e[24]=O):O=e[24];var B=r("useVideoAutoplayState")(O),W=r("useAutoplayRulesEngine")(I.autoplayLocalRules),q=r(n==="allow"?"evaluateVideoAutoplayDefaultAllowRule":"evaluateVideoAutoplayDefaultIgnoreRule"),U;e[25]!==q?(U=function(){return q},e[25]=q,e[26]=U):U=e[26];var V=g(U),H=V[0],G=V[1],z=g(null),j=z[0],K=z[1],Q;e[27]!==W||e[28]!==q||e[29]!==B?(Q=function(){return W.evaluateAutoplay(B,q)},e[27]=W,e[28]=q,e[29]=B,e[30]=Q):Q=e[30];var X=g(Q),Y=X[0],J=X[1],Z=g(null),ee=Z[0],te=Z[1],ne=f(Y),re=o("VideoPlayerAutoplayHooks").useAutoplayApi(),oe=f(re),ae,ie;e[31]!==re?(ae=function(){oe.current=re},ie=[re],e[31]=re,e[32]=ae,e[33]=ie):(ae=e[32],ie=e[33]),m(ae,ie);var le=n!=="dangerously_disable_autoplay_management",se,ue;e[34]!==re||e[35]!==I||e[36]!==C||e[37]!==y||e[38]!==a||e[39]!==le||e[40]!==u?(se=function(){return re.register(u,a,I,C,y,le),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:ne.current}}),function(){re.unregister(u),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:ne.current}})}},ue=[re,I,C,y,a,le,u],e[34]=re,e[35]=I,e[36]=C,e[37]=y,e[38]=a,e[39]=le,e[40]=u,e[41]=se,e[42]=ue):(se=e[41],ue=e[42]),m(se,ue);var ce,de;e[43]!==re||e[44]!==v||e[45]!==W||e[46]!==C||e[47]!==q||e[48]!==y||e[49]!==j||e[50]!==ee||e[51]!==u||e[52]!==B||e[53]!==L?(ce=function(){var e=function(){var e=W.evaluateAutoplay(B,q);ne.current=e;var t=W.getRules(),n=W.getIndexOfLastWinningRule(),a=n>=0?t[n]:q,i=L&&L.getCurrent(),l=C.getCurrentState(),s=l.paused;if((ee===null||ee!==e)&&(J(e),te(e)),e==="PAUSE"&&!s&&C.isControllingComponent(v)){var d=!0;if(N.current(),b.current){b.current=!1;var m=i==null?void 0:i.positionToViewport;m&&C.scrollIntoView(m.top<0),d=!1}if(d){var p="[PAUSE] via short-circuit on "+(a.displayName||a.name)+".";o("CoreVideoPlayerAutoplayClientUtils").log(c.current,p),C.pause("autoplay_initiated"),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:e}})}}(j===null||j!==a)&&(G(function(){return a}),K(function(){return a}),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:e}})),o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[DECISION: "+e+"] from "+(a.displayName||a.name)),i&&re.update(u,e,i)},t=y.subscribeToChanges(function(e){y.getCurrentState().hidden||y.getCurrentState().backgrounded?C.isControllingComponent(v)||C.unregisterControllingComponent(v):C.registerControllingComponent(v)}),n=L?L.subscribe(function(){y.getCurrentState().hidden||y.getCurrentState().backgrounded?C.isControllingComponent(v)||C.unregisterControllingComponent(v):C.registerControllingComponent(v),e()}):null;return e(),function(){t.remove(),n&&n.remove()}},de=[re,v,W,C,q,y,j,ee,G,J,K,te,u,B,L],e[43]=re,e[44]=v,e[45]=W,e[46]=C,e[47]=q,e[48]=y,e[49]=j,e[50]=ee,e[51]=u,e[52]=B,e[53]=L,e[54]=ce,e[55]=de):(ce=e[54],de=e[55]),m(ce,de);var me,pe;e[56]!==v||e[57]!==Y||e[58]!==C?(me=function(){var e=C.isControllingComponent(v),t=C.getCurrentState(),n=t.paused;o("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(Y,ne.current,n,e)&&(o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[PAUSE] the video for "+Y),C.pause("autoplay_initiated"),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:T.current.autoplayScopeID,event_creation_time:Date.now(),initiator:c.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:oe.current.getAutoplayManagerDebugInfo(T.current).selectedAutoplayVideoSymbol,target:c.current,target_current_autoplay_decision:Y}}))},pe=[Y,C,v],e[56]=v,e[57]=Y,e[58]=C,e[59]=me,e[60]=pe):(me=e[59],pe=e[60]),m(me,pe);var _e,fe;e[61]!==v||e[62]!==C?(_e=function(){return function(){o("CoreVideoPlayerAutoplayClientUtils").log(c.current,"[RELEASE CONTROL] "+v),C.unregisterControllingComponent(v)}},fe=[C,v],e[61]=v,e[62]=C,e[63]=_e,e[64]=fe):(_e=e[63],fe=e[64]),m(_e,fe);var ge;return e[65]!==H||e[66]!==Y||e[67]!==I||e[68]!==u?(ge={applicableRule:H,autoplayApiRef:oe,autoplayDecision:Y,autoplayLocalScope:I,symbol:u},e[65]=H,e[66]=Y,e[67]=I,e[68]=u,e[69]=ge):ge=e[69],r("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition(ge),null}l.default=h}),98);
__d("DOMContainer.react",["invariant","isNode","react"],(function(t,n,r,o,a,i,l,s){var e=["display"],u,c=u||(u=o("react")),d=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.containerNode=null,e.setContainerNode=function(t){e.containerNode=t;var n=e.props.containerRef;typeof n=="function"&&n(t)},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.getDOMChild=function(){var e=this.props.children;return r("isNode")(e)||s(0,1533),e},o.shouldComponentUpdate=function(t){return t.children!==this.props.children},o.componentDidMount=function(){var e=this.containerNode;e!=null&&e.appendChild(this.getDOMChild())},o.componentDidUpdate=function(t){var e=this.containerNode;if(e!=null){for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(this.getDOMChild())}},o.render=function(){var t=this.props,n=t.display,r=babelHelpers.objectWithoutPropertiesLoose(t,e),o=n==="block"?"div":"span";return c.jsx(o,babelHelpers.extends({},r,{ref:this.setContainerNode,children:void 0}))},n})(c.Component);d.defaultProps={display:"inline"},l.default=d}),98);
__d("CoreVideoPlayerFitParentContainer.react",["DOMContainer.react","cr:964538","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.ref,r=e.children,a=e.debugRole,i=e.testid,l;t[0]!==a?(l=null,t[0]=a,t[1]=l):l=t[1];var u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",t[2]=u):u=t[2];var c;return t[3]!==r||t[4]!==n||t[5]!==l||t[6]!==i?(c=s.jsx("div",babelHelpers.extends({},l,{className:u,"data-testid":void 0,ref:n,children:r})),t[3]=r,t[4]=n,t[5]=l,t[6]=i,t[7]=c):c=t[7],c}function c(e){var t=o("react-compiler-runtime").c(7),n=e.ref,a=e.debugRole,i=e.domElement,l;t[0]!==a?(l=null,t[0]=a,t[1]=l):l=t[1];var u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",t[2]=u):u=t[2];var c;return t[3]!==i||t[4]!==n||t[5]!==l?(c=s.jsx(r("DOMContainer.react"),babelHelpers.extends({},l,{className:u,display:"block",ref:n,children:i})),t[3]=i,t[4]=n,t[5]=l,t[6]=c):c=t[6],c}function d(e){var t=e.debugRole,n=document.createElement("div");return n.className="x1lliihq x5yr21d x1n2onr6 xh8yej3 x1ja2u2z",n}l.CoreVideoPlayerFitParentContainer=u,l.CoreVideoPlayerFitParentDOMContainer=c,l.createFitParentContainerDiv=d}),98);
__d("normalizeVideoPlayerLoopCount",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o=0;if(e==null){var a=t!=null&&t&&n!=null?n:0;a===-1?o=-1:a<0||!Number.isFinite(a)||Math.floor(a)!==a?o=0:a===0&&t===!0?o=-1:o=a}else if(e===-1||e===Number.POSITIVE_INFINITY)o=-1;else{if(e<0||!Number.isFinite(e)||Math.floor(e)!==e)throw r("FBLogger")("comet_video_player").mustfixThrow("Invalid loopingCount: %s",e);o=e}return o}l.default=e}),98);
__d("CoreVideoPlayerMetaData",["VideoPlayerAudioAvailabilityInfo","normalizeVideoPlayerLoopCount"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!=null&&isFinite(e)&&e>0?e:0}var s=[];function u(t){var n,a,i,l,u=t.sideLoadCaptionsExpected===!0||t.sideLoadCaptionsUrl!=null,c=t.isLiveStreaming===!0;return babelHelpers.extends({},t,{audioAvailabilityInfo:(n=t.audioAvailabilityInfo)!=null?n:o("VideoPlayerAudioAvailabilityInfo").VideoPlayerAudioAvailabilityInfoDefault,autoplayGatingResult:t.autoplayGatingResult!=null?t.autoplayGatingResult:"unknown",canAutoplay:t.canAutoplay!=null?t.canAutoplay:"allow",desiredLatencyMs:(a=t.desiredLatencyMs)!=null?a:0,inbandCaptionsExpected:c,initialRepresentationIds:(i=t.initialRepresentationIds)!=null?i:s,isNCSR:!!t.isNCSR,isPremiumMusicVideo:!!t.isPremiumMusicVideo,latencyToleranceMs:(l=t.latencyToleranceMs)!=null?l:0,loopCount:r("normalizeVideoPlayerLoopCount")(t.loopCount),sideLoadCaptionsExpected:u,startTimestamp:e(t.startTimestamp)})}l.applyDefaultsToCoreVideoPlayerMetaData=u}),98);
__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.children,r=e.isDesktopPictureInPicture,a=e.isFullscreen,i=e.videoPlayerPassiveViewabilityInfo,l;t[0]!==n||t[1]!==a?(l=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=l):l=t[2];var u;t[3]!==r||t[4]!==l?(u=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext.Provider,{value:r,children:l}),t[3]=r,t[4]=l,t[5]=u):u=t[5];var c;return t[6]!==u||t[7]!==i?(c=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:i,children:u}),t[6]=u,t[7]=i,t[8]=c):c=t[8],c}l.default=u}),98);
__d("useBlockCappedListItemWhenPlayingVideo",["CappedListItemContext","err","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e,t){var n,a=o("react-compiler-runtime").c(4),i=(n=u(r("CappedListItemContext")))==null?void 0:n.registerBlocker,l,s;a[0]!==e||a[1]!==i?(l=function(){if(i){var t=null,n=null,r=function(){var r=e.getCurrentState().playing;if(r!==t&&(t=r,n&&(n(),n=null),r)){var o;n=i({reason:"playing_video",source:o})}};r();var o=e.subscribe(r);return function(){o.remove(),n&&(n(),n=null)}}},s=[e,i],a[0]=e,a[1]=i,a[2]=l,a[3]=s):(l=a[2],s=a[3]),c(l,s)}l.default=d}),98);
__d("useDisableVirtualizationWhenPlayingVideo",["VirtualizationContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e,t){var n=o("react-compiler-runtime").c(5),a=u(r("VirtualizationContext")),i,l;n[0]!==a||n[1]!==e||n[2]!==t?(i=function(){if(a!=null){var n=a.createFlag,r=a.createPin,o=null,i=null,l=function(){i==null&&(i=n("HAS_PLAYER","playerInstanceKey: "+t));var a=e.getCurrentState();a.playing||a.stalling?o||(o=r("player "+t+" is playing")):a.isFullscreen?o||(o=r("player "+t+" is fullscreen")):(o==null||o(),o=null)};l();var s=e.subscribe(l);return function(){s.remove(),i==null||i(),i=null,o==null||o(),o=null}}},l=[e,t,a],n[0]=a,n[1]=e,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),c(i,l)}l.default=d}),98);
__d("wrapWithContextProviders",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){return t.reduceRight(function(e,t){return t(e)},e)}u.displayName=u.name+" [from "+i.id+"]";function c(e,t){return function(n){return s.jsx(e.Provider,{value:t,children:n})}}l.wrapWithContextProviders=u,l.makeRenderProviderFn=c}),98);
__d("VideoPlayerComponentContainer.react",["CometSSRRenderingStateHooks","CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:6094","react","react-compiler-runtime","setTimeout","stylex","useBlockCappedListItemWhenPlayingVideo","useDisableVirtualizationWhenPlayingVideo","wrapWithContextProviders"],(function(t,n,r,o,a,i,l){"use strict";var e=["children"],s,u,c,d,m=u||(u=o("react")),p=u,_=p.useCallback,f=p.useEffect,g=p.useRef,h=p.useState,y={default:{height:"x5yr21d",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},hiddenCursor:{cursor:"xjfk50j",$$css:!0}};function C(e){var t=o("react-compiler-runtime").c(10),n=g(e),a,i;t[0]!==e?(a=function(){n.current=e},i=[e],t[0]=e,t[1]=a,t[2]=i):(a=t[1],i=t[2]),f(a,i);var l=h(!1),s=l[0],u=l[1],c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=function(){var e=null;return{cleanup:function(){e&&e()},pingNotIdle:function(){e&&e(),u(!1);var t=r("setTimeout")(function(){u(!0)},n.current);e=function(){r("clearTimeout")(t),e=null}}}},t[3]=c):c=t[3];var d=h(c),m=d[0],p=m.cleanup,_=m.pingNotIdle,y,C;t[4]!==p?(y=function(){return p},C=[p],t[4]=p,t[5]=y,t[6]=C):(y=t[5],C=t[6]),f(y,C);var b;return t[7]!==s||t[8]!==_?(b={isIdle:s,pingNotIdle:_},t[7]=s,t[8]=_,t[9]=b):b=t[9],b}function b(){var e=o("react-compiler-runtime").c(18),t=h(!1),n=t[0],r=t[1],a=C(3e3),i=a.isIdle,l=a.pingNotIdle,s;e[0]!==l?(s=function(){r(!0),l()},e[0]=l,e[1]=s):s=e[1];var u=s,c;e[2]!==l?(c=function(){r(!1),l()},e[2]=l,e[3]=c):c=e[3];var d=c,m;e[4]!==l?(m=function(){r(!0),l()},e[4]=l,e[5]=m):m=e[5];var p=m,_;e[6]!==l?(_=function(){l()},e[6]=l,e[7]=_):_=e[7];var f=_,g;e[8]!==l?(g=function(){l()},e[8]=l,e[9]=g):g=e[9];var y=g,b;return e[10]!==n||e[11]!==i||e[12]!==f||e[13]!==u||e[14]!==d||e[15]!==p||e[16]!==y?(b={isHovering:n,isIdle:i,onMouseDown:f,onMouseEnter:u,onMouseLeave:d,onMouseMove:p,onMouseUp:y},e[10]=n,e[11]=i,e[12]=f,e[13]=u,e[14]=d,e[15]=p,e[16]=y,e[17]=b):b=e[17],b}function v(e){var t=o("react-compiler-runtime").c(16),n=e.children,a=b(),i=a.isHovering,l=a.isIdle,u=a.onMouseDown,p=a.onMouseEnter,_=a.onMouseLeave,f=a.onMouseMove,g=a.onMouseUp,h=(d||(d=o("VideoPlayerHooks"))).useIsFullscreen(),C=h&&l&&y.hiddenCursor,v;t[0]!==C?(v=(s||(s=r("stylex")))(y.default,C),t[0]=C,t[1]=v):v=t[1];var S;t[2]!==n||t[3]!==l?(S=m.jsx((c||(c=o("VideoPlayerContexts"))).VideoPlayerMouseIdleContext.Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=S):S=t[4];var R;t[5]!==i||t[6]!==S?(R=m.jsx((c||(c=o("VideoPlayerContexts"))).VideoPlayerMouseHoverContext.Provider,{value:i,children:S}),t[5]=i,t[6]=S,t[7]=R):R=t[7];var L;return t[8]!==u||t[9]!==p||t[10]!==_||t[11]!==f||t[12]!==g||t[13]!==v||t[14]!==R?(L=m.jsx("div",babelHelpers.extends({className:v},r("CometVisualCompletionAttributes").IGNORE,{onMouseDown:u,onMouseEnter:p,onMouseLeave:_,onMouseMove:f,onMouseUp:g,children:R})),t[8]=u,t[9]=p,t[10]=_,t[11]=f,t[12]=g,t[13]=v,t[14]=R,t[15]=L):L=t[15],L}function S(t){var a=o("react-compiler-runtime").c(77),i,l;a[0]!==t?(i=t.children,l=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var s=l,u=s.implementationController,d=s.implementationExposedState,p=s.videoPlayerPassiveViewabilityInfo,_=d.activeCaptions,f=d.activeEmsgBoxes,g=d.availableAudioTracks,h=d.availableVideoQualities,y=d.availableVideoTracks,C=d.bufferEnd,b=d.captionDisplayStyle,S=d.captionsLoaded,R=d.captionsVisible,L=d.currentAudioTrackID,E=d.currentVideoQuality,k=d.currentVideoTrackID,I=d.duration,T=d.ended,D=d.error,x=d.inbandCaptionsAutogenerated,$=d.inPlayStalling,P=d.internal_coreVideoPlayerMetaData,N=d.isAbrEnabled,M=d.isDesktopPictureInPicture,w=d.isFullscreen,A=d.isLiveRewindActive,F=d.isLiveRewindAvailable,O=d.lastMuteReason,B=d.lastPauseReason,W=d.lastPlayedTimeMs,q=d.lastPlayReason,U=d.latencyLevel,V=d.loopCount,H=d.loopCurrent,G=d.muted,z=d.paused,j=d.playerInstanceKey,K=d.playerVersion,Q=d.playerViewportDimensions,X=d.playing,Y=d.seekableRanges,J=d.seeking,Z=d.selectedVideoQuality,ee=d.stalling,te=d.streamInterrupted,ne=d.targetAudioTrack,re=d.targetPlaybackRate,oe=d.targetVideoQuality,ae=d.videoFBID,ie=d.videoPixelsAspectRatio,le=d.volume,se=d.watchTimeMs,ue=P.adClientToken,ce=P.audioAvailabilityInfo,de=P.autoplayGatingResult,me=P.broadcastStatus,pe=P.canAutoplay,_e=P.disableDubbing,fe=P.initialTracePolicy,ge=P.isNCSR,he=P.isPremiumMusicVideo,ye=P.volumeSetting,Ce;a[3]!==i?(Ce=m.jsx(v,{children:i}),a[3]=i,a[4]=Ce):Ce=a[4];var be=Ce,ve;a[5]!==u||a[6]!==l||a[7]!==p?(ve={controller:u,coreVideoStates:l,videoPlayerPassiveViewabilityInfo:p},a[5]=u,a[6]=l,a[7]=p,a[8]=ve):ve=a[8],n("cr:6094")(j,ve);var Se;if(a[9]!==_||a[10]!==f||a[11]!==ue||a[12]!==ce||a[13]!==de||a[14]!==g||a[15]!==h||a[16]!==y||a[17]!==me||a[18]!==C||a[19]!==pe||a[20]!==b||a[21]!==S||a[22]!==R||a[23]!==u||a[24]!==L||a[25]!==E||a[26]!==k||a[27]!==Q||a[28]!==_e||a[29]!==I||a[30]!==T||a[31]!==D||a[32]!==$||a[33]!==x||a[34]!==fe||a[35]!==j||a[36]!==N||a[37]!==M||a[38]!==w||a[39]!==A||a[40]!==F||a[41]!==ge||a[42]!==he||a[43]!==O||a[44]!==B||a[45]!==q||a[46]!==W||a[47]!==U||a[48]!==V||a[49]!==H||a[50]!==G||a[51]!==z||a[52]!==K||a[53]!==X||a[54]!==Y||a[55]!==J||a[56]!==Z||a[57]!==ee||a[58]!==te||a[59]!==ne||a[60]!==re||a[61]!==oe||a[62]!==ae||a[63]!==ie||a[64]!==p||a[65]!==le||a[66]!==ye||a[67]!==se||a[68]!==be){var Re;a[70]!==M||a[71]!==w||a[72]!==p?(Re=function(t){return m.jsx(r("VideoPlayerViewabilityProvider.react"),{isDesktopPictureInPicture:M,isFullscreen:w,videoPlayerPassiveViewabilityInfo:p,children:t})},a[70]=M,a[71]=w,a[72]=p,a[73]=Re):Re=a[73],Se=o("wrapWithContextProviders").wrapWithContextProviders(be,[o("wrapWithContextProviders").makeRenderProviderFn((c||(c=o("VideoPlayerContexts"))).VideoFBIDContext,ae),o("wrapWithContextProviders").makeRenderProviderFn(c.StallingContext,ee),o("wrapWithContextProviders").makeRenderProviderFn(c.PlayingContext,X),o("wrapWithContextProviders").makeRenderProviderFn(c.InPlayStallingContext,$),o("wrapWithContextProviders").makeRenderProviderFn(c.BufferEndContext,C),o("wrapWithContextProviders").makeRenderProviderFn(c.LastMuteReasonContext,O),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPlayReasonContext,q),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPauseReasonContext,B),o("wrapWithContextProviders").makeRenderProviderFn(c.PausedContext,z),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentAudioTrackIDContext,L),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentVideoTrackIDContext,k),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentVideoQualityContext,E),o("wrapWithContextProviders").makeRenderProviderFn(c.MutedContext,G),o("wrapWithContextProviders").makeRenderProviderFn(c.TargetAudioTrackContext,ne),o("wrapWithContextProviders").makeRenderProviderFn(c.VolumeContext,le),o("wrapWithContextProviders").makeRenderProviderFn(c.SelectedVideoQualityContext,Z),o("wrapWithContextProviders").makeRenderProviderFn(c.SeekingContext,J),o("wrapWithContextProviders").makeRenderProviderFn(c.DurationContext,I),o("wrapWithContextProviders").makeRenderProviderFn(c.EndedContext,T),o("wrapWithContextProviders").makeRenderProviderFn(c.ErrorContext,D),o("wrapWithContextProviders").makeRenderProviderFn(c.DimensionsContext,Q||null),o("wrapWithContextProviders").makeRenderProviderFn(c.InstanceKeyContext,j),o("wrapWithContextProviders").makeRenderProviderFn(c.ControllerContext,u),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableAudioTracksContext,g),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableVideoQualitiesContext,h),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableVideoTracksContext,y),o("wrapWithContextProviders").makeRenderProviderFn(c.PlayerVersionContext,K),o("wrapWithContextProviders").makeRenderProviderFn(c.IsAbrEnabledContext,N),o("wrapWithContextProviders").makeRenderProviderFn(c.TargetVideoQualityContext,oe),o("wrapWithContextProviders").makeRenderProviderFn(c.PlaybackRateContext,re),o("wrapWithContextProviders").makeRenderProviderFn(c.CanAutoplayContext,pe),o("wrapWithContextProviders").makeRenderProviderFn(c.VolumeSettingContext,ye),o("wrapWithContextProviders").makeRenderProviderFn(c.AutoplayGatingResultContext,de),o("wrapWithContextProviders").makeRenderProviderFn(c.BroadcastStatusContext,me),o("wrapWithContextProviders").makeRenderProviderFn(c.LoopCountContext,V),o("wrapWithContextProviders").makeRenderProviderFn(c.LoopCurrentContext,H),o("wrapWithContextProviders").makeRenderProviderFn(c.AdClientTokenContext,ue),o("wrapWithContextProviders").makeRenderProviderFn(c.ActiveCaptionsContext,_),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionsVisibleContext,R),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionDisplayStyleContext,b),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionsLoadedContext,S),o("wrapWithContextProviders").makeRenderProviderFn(c.InbandCaptionsAutogeneratedContext,x),o("wrapWithContextProviders").makeRenderProviderFn(c.StreamInterruptedContext,te),o("wrapWithContextProviders").makeRenderProviderFn(c.WatchTimeContext,se),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPlayedTimeContext,W),o("wrapWithContextProviders").makeRenderProviderFn(c.SeekableRangesContext,Y),o("wrapWithContextProviders").makeRenderProviderFn(c.LatencyLevelContext,U),o("wrapWithContextProviders").makeRenderProviderFn(c.IsLiveRewindActiveContext,A),o("wrapWithContextProviders").makeRenderProviderFn(c.IsLiveRewindAvailableContext,F),o("wrapWithContextProviders").makeRenderProviderFn(c.AudioAvailabilityInfoContext,ce),o("wrapWithContextProviders").makeRenderProviderFn(c.IsNCSRContext,ge),o("wrapWithContextProviders").makeRenderProviderFn(c.IsPremiumMusicVideoContext,he),o("wrapWithContextProviders").makeRenderProviderFn(c.InitialTracePolicyContext,fe),o("wrapWithContextProviders").makeRenderProviderFn(c.ActiveEmsgBoxesContext,f),o("wrapWithContextProviders").makeRenderProviderFn(c.VideoPixelsAspectRatioContext,ie!=null?ie:null),o("wrapWithContextProviders").makeRenderProviderFn(c.DisableDubbingContext,_e!=null?_e:!1),Re]),a[9]=_,a[10]=f,a[11]=ue,a[12]=ce,a[13]=de,a[14]=g,a[15]=h,a[16]=y,a[17]=me,a[18]=C,a[19]=pe,a[20]=b,a[21]=S,a[22]=R,a[23]=u,a[24]=L,a[25]=E,a[26]=k,a[27]=Q,a[28]=_e,a[29]=I,a[30]=T,a[31]=D,a[32]=$,a[33]=x,a[34]=fe,a[35]=j,a[36]=N,a[37]=M,a[38]=w,a[39]=A,a[40]=F,a[41]=ge,a[42]=he,a[43]=O,a[44]=B,a[45]=q,a[46]=W,a[47]=U,a[48]=V,a[49]=H,a[50]=G,a[51]=z,a[52]=K,a[53]=X,a[54]=Y,a[55]=J,a[56]=Z,a[57]=ee,a[58]=te,a[59]=ne,a[60]=re,a[61]=oe,a[62]=ae,a[63]=ie,a[64]=p,a[65]=le,a[66]=ye,a[67]=se,a[68]=be,a[69]=Se}else Se=a[69];var Le=Se;r("useBlockCappedListItemWhenPlayingVideo")(u,j),r("useDisableVirtualizationWhenPlayingVideo")(u,j);var Ee=o("CometSSRRenderingStateHooks").useIsServerRenderingOrHydrating(),ke=Ee?void 0:j,Ie;return a[74]!==Le||a[75]!==ke?(Ie=m.jsx("div",{"data-instancekey":ke,"data-testid":void 0,children:Le}),a[74]=Le,a[75]=ke,a[76]=Ie):Ie=a[76],Ie}var R=m.memo(S);l.default=R}),98);
__d("GlobalVideoPortsRenderers.react",["CoreVideoPlayer.react","VideoPlayerContexts","VideoPlayerPortalingPlaceInfoProvider.react","emptyFunction","fb-error","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useState,p=r("emptyFunction").thatReturns(null);function _(e){var t=o("react-compiler-runtime").c(14),n=e.coreVideoPlayerMetaData,a=e.currentPlaceID,i=e.currentVideoID,l=e.fullscreenController,s=e.implementations,c=e.isFullscreen,d=e.onCoreVideoStatesChanged,m=e.previousPlaceMetaData,_=e.trackingDataEncrypted,f=e.trackingNodes,g=e.viewportMarginsForViewability,h;t[0]!==n||t[1]!==l||t[2]!==s||t[3]!==c||t[4]!==d||t[5]!==_||t[6]!==f||t[7]!==g?(h=u.jsx(r("CoreVideoPlayer.react"),{coreVideoPlayerMetaData:n,fullscreenController:l,implementations:s,isFullscreen:c,onCoreVideoStatesChanged:d,renderWithCoreVideoStates:p,trackingDataEncrypted:_,trackingNodes:f,viewportMarginsForViewability:g}),t[0]=n,t[1]=l,t[2]=s,t[3]=c,t[4]=d,t[5]=_,t[6]=f,t[7]=g,t[8]=h):h=t[8];var y;return t[9]!==a||t[10]!==i||t[11]!==m||t[12]!==h?(y=u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:a,currentVideoID:i,portalingEnabled:!0,previousPlaceMetaData:m,thisPlaceID:a,children:h}),t[9]=a,t[10]=i,t[11]=m,t[12]=h,t[13]=y):y=t[13],y}function f(e){var t=o("react-compiler-runtime").c(11),n=e.currentPlaceID,r=e.currentVideoID,a=e.previousPlaceMetaData,i=e.renderPlaceholder,l=e.thisPlaceID,c=e.videoPixelsAspectRatio,d;t[0]!==i?(d=i!=null?i():null,t[0]=i,t[1]=d):d=t[1];var m;t[2]!==d||t[3]!==c?(m=u.jsx((s||(s=o("VideoPlayerContexts"))).VideoPixelsAspectRatioContext.Provider,{value:c,children:d}),t[2]=d,t[3]=c,t[4]=m):m=t[4];var p;return t[5]!==n||t[6]!==r||t[7]!==a||t[8]!==m||t[9]!==l?(p=u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:n,currentVideoID:r,portalingEnabled:!0,previousPlaceMetaData:a,thisPlaceID:l,children:m}),t[5]=n,t[6]=r,t[7]=a,t[8]=m,t[9]=l,t[10]=p):p=t[10],p}function g(e){var t=e.currentPlaceID,n=e.currentVideoID,a=e.injectCoreVideoStatesRef,i=e.previousPlaceMetaData,l=e.renderComponents,s=e.thisPlaceID,c=m(null),p=c[0],_=c[1],f=m(null),g=f[0],h=f[1];if(d(function(){return a.current=function(e,t){if(e!=null){var n,o,a=r("fb-error").getErrorSafe(e),i=r("fb-error").err.apply(r("fb-error"),[(n=a.messageFormat)!=null?n:a.message].concat(a.messageFormat!=null?(o=a.messageParams)!=null?o:[]:[]));i.name=i.errorName=a.name,i.metadata=a.metadata,i.stack=a.stack,i.taalOpcodes=a.taalOpcodes,i.cause=e,h(i)}_(t)},function(){a.current=null}},[a]),s===t){if(g!=null)throw g;return p!=null?u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:t,currentVideoID:n,portalingEnabled:!0,previousPlaceMetaData:i,thisPlaceID:s,children:l(p)}):null}else return null}g.displayName=g.name+" [from "+i.id+"]",l.GlobalVideoPortsPlayerRenderer=_,l.GlobalVideoPortsPlaceholderRenderer=f,l.GlobalVideoPortsVideoComponentsRenderer=g}),98);
__d("VideoPlayerFullscreenController",["CometFullScreen","FBLogger","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.current!=null&&o("CometFullScreen").getFullScreenElement()===e.current}function s(t){var n=[];function a(){n.forEach(function(e){e()})}var i=null;return{getIsFullscreen:function(){return e(t)},requestSetIsFullscreen:function(a,i){var n=t.current;if(n==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Requested full screen while the element is not present");o("CometFullScreen").isSupported()?a!==e(t)&&(a===!0?o("CometFullScreen").requestFullScreen(n):a===!1&&o("CometFullScreen").exitFullScreen()):a&&i!=null&&typeof i.webkitEnterFullScreen=="function"?i.webkitEnterFullScreen():!a&&i!=null&&typeof i.webkitExitFullScreen=="function"&&i.webkitExitFullscreen()},subscribe:function(t){return n.length===0&&i==null&&(i=o("CometFullScreen").subscribeToFullScreenChangeEvent(a)),n.push(t),{remove:function(){r("removeFromArray")(n,t),n.length===0&&i!=null&&(i(),i=null)}}}}}l.createFullscreenController=s}),98);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){var n=o("react-compiler-runtime").c(5),a=r("usePrevious")(e),i,l;n[0]!==e||n[1]!==a||n[2]!==t?(i=function(){e!==a&&a!==null&&a&&!e&&t(o("GlobalVideoPortsID").makeVideoID())},l=[e,a,t],n[0]=e,n[1]=a,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),u(i,l)}function m(e,t){var n=c(null),r=n[0],a=n[1];e!==r&&(r!==null&&r&&!e&&t(o("GlobalVideoPortsID").makeVideoID()),a(e))}var p=r("gkx")("24382")?m:d;function _(e){var t=o("react-compiler-runtime").c(11),n=e.portalingEnabled,r=e.portalingFromVideoID,a=o("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),i=o("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),l=o("GlobalVideoPortsContexts").useGlobalVideoPortsState(),s=i!=null&&l!=null,d=(s||a!=null)&&(n||r!=null),m=c(g),_=m[0],h=c(f),y=h[0],C=h[1],b=d&&n&&r!=null,v=b&&r!=null?r:y;p(b,C);var S,R;t[0]!==s||t[1]!==d||t[2]!==a?(S=function(){d&&!s&&a&&a()},R=[s,d,a],t[0]=s,t[1]=d,t[2]=a,t[3]=S,t[4]=R):(S=t[3],R=t[4]),u(S,R);var L;return t[5]!==d||t[6]!==v||t[7]!==i||t[8]!==l||t[9]!==_?(L={canBecomePortableLater:d,currentVideoID:v,globalVideoPortsManager:i,globalVideoPortsState:l,thisPlaceID:_},t[5]=d,t[6]=v,t[7]=i,t[8]=l,t[9]=_,t[10]=L):L=t[10],L}function f(){return o("GlobalVideoPortsID").makeVideoID()}function g(){return o("GlobalVideoPortsID").makePlaceID()}l.useRegenerateUniqueVideoID_exportedForTest=p,l.useVideoPlayerPortalingPlaceState=_}),98);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","deepEquals","getOwnObjectValues","gkx","react","react-compiler-runtime","shallowEqual"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useRef,p=u.useState;function _(e){var t=e.coreVideoPlayerMetaData,n=e.currentVideoID,o=e.fullscreenController,a=e.globalVideoPortsManager,i=e.implementations,l=e.injectCoreVideoStatesRef,s=e.isFullscreen,u=e.portablePlaceContainer,c=e.portablePlaceMetaData,m=e.renderComponents,p=e.renderPlaceholder,_=e.thisPlaceID,f=e.trackingDataEncrypted,g=e.trackingNodes,h=e.viewportMarginsForViewability;d(function(){a.addOrUpdatePlace({coreVideoPlayerMetaData:t,fullscreenController:o,implementations:i,injectCoreVideoStatesRef:l,isFullscreen:s,portablePlaceContainer:u,portablePlaceID:_,portablePlaceMetaData:c,portableVideoID:n,renderComponents:m,renderPlaceholder:p,trackingDataEncrypted:f,trackingNodes:g,viewportMarginsForViewability:h})},[].concat(r("getOwnObjectValues")(t),[n,o,s,a,u],r("getOwnObjectValues")(c||{}),[m,p,_,f,g,h])),d(function(){return function(){a.removePlace({portablePlaceID:_})}},[a,_])}function f(e){var t=o("react-compiler-runtime").c(20),n=e.coreVideoPlayerMetaData,a=e.currentVideoID,i=e.fullscreenController,l=e.globalVideoPortsManager,s=e.implementations,u=e.injectCoreVideoStatesRef,c=e.isFullscreen,p=e.portablePlaceContainer,_=e.portablePlaceMetaData,f=e.renderComponents,g=e.renderPlaceholder,h=e.thisPlaceID,y=e.trackingDataEncrypted,C=e.trackingNodes,b=e.viewportMarginsForViewability,v=m(null),S=m(null),R;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==s||t[5]!==u||t[6]!==c||t[7]!==p||t[8]!==_||t[9]!==f||t[10]!==g||t[11]!==h||t[12]!==y||t[13]!==C||t[14]!==b?(R=function(){var e={coreVideoPlayerMetaData:n,implementations:s,isFullscreen:c,portablePlaceID:h,portablePlaceMetaData:_,portableVideoID:a,trackingDataEncrypted:y,trackingNodes:C,viewportMarginsForViewability:b},t={fullscreenController:i,injectCoreVideoStatesRef:u,portablePlaceContainer:p,renderComponents:f,renderPlaceholder:g};r("deepEquals")(e,v.current)&&r("shallowEqual")(t,S.current)||(v.current=e,S.current=t,l.addOrUpdatePlace(babelHelpers.extends({},e,t)))},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=s,t[5]=u,t[6]=c,t[7]=p,t[8]=_,t[9]=f,t[10]=g,t[11]=h,t[12]=y,t[13]=C,t[14]=b,t[15]=R):R=t[15],d(R);var L,E;t[16]!==l||t[17]!==h?(L=function(){return function(){v.current=null,S.current=null,l.removePlace({portablePlaceID:h})}},E=[l,h],t[16]=l,t[17]=h,t[18]=L,t[19]=E):(L=t[18],E=t[19]),d(L,E)}var g=r("gkx")("17097")?f:_;function h(e){var t,n,a,i,l=o("react-compiler-runtime").c(17),u=e.currentPlaceID,d=e.currentVideoID,_=e.globalVideoPortsManager,f=e.globalVideoPortsState_DEPRECATED,h=e.isFullscreen,C=e.previousPlaceMetaData,b=e.renderComponents,v=e.thisPlaceID,S=p(y),R=S[0],L=m(null),E;l[0]!==R||l[1]!==e?(E=babelHelpers.extends({},e,{injectCoreVideoStatesRef:L,portablePlaceContainer:R}),l[0]=R,l[1]=e,l[2]=E):E=l[2],g(E);var k=c(r("BaseContextualLayerAnchorRootContext")),I=m(null),T=h?I:k,D;l[3]!==R||l[4]!==v?(D=s.jsx(o("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:R},v),l[3]=R,l[4]=v,l[5]=D):D=l[5];var x=f!=null?(t=(n=_.getCurrentPlaceStateForVideo(f,d))==null?void 0:n.portablePlaceID)!=null?t:null:u,$=f!=null?(a=(i=_.getPortableVideoState(f,d))==null?void 0:i.previousPlaceMetaData)!=null?a:null:C,P;l[6]!==d||l[7]!==b||l[8]!==x||l[9]!==$||l[10]!==v?(P=s.jsx(o("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:x,currentVideoID:d,injectCoreVideoStatesRef:L,previousPlaceMetaData:$,renderComponents:b,thisPlaceID:v}),l[6]=d,l[7]=b,l[8]=x,l[9]=$,l[10]=v,l[11]=P):P=l[11];var N;l[12]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("div",{ref:I}),l[12]=N):N=l[12];var M;return l[13]!==T||l[14]!==D||l[15]!==P?(M=s.jsxs(r("BaseContextualLayerAnchorRootContext").Provider,{value:T,children:[D,P,N]}),l[13]=T,l[14]=D,l[15]=P,l[16]=M):M=l[16],M}function y(){return o("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})}l.default=h}),98);
__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","FBLogger","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","react","react-compiler-runtime","useStable","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useEffect,p=c.useState,_={bottom:0,left:0,right:0,top:0};function f(e){var t=o("react-compiler-runtime").c(5),n=e.ref,r=e.children,a=e.debugRole,i=e.testid,l;return t[0]!==r||t[1]!==a||t[2]!==n||t[3]!==i?(l=u.jsx(o("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:a,ref:n,testid:void 0,children:r}),t[0]=r,t[1]=a,t[2]=n,t[3]=i,t[4]=l):l=t[4],l}function g(t){var n,a=o("react-compiler-runtime").c(69),i=t.coreVideoPlayerMetaData,l=t.implementations,s=t.portalingEnabled,c=t.portalingFromVideoID,g=t.portalingPlaceMetaData,y=t.renderComponents,C=t.renderPlaceholder,b;a[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0],m(h,b);var v;a[1]!==c?(v=c!=null?o("GlobalVideoPortsID").ensureVideoID(c):null,a[1]=c,a[2]=v):v=a[2];var S=v;c!=null&&S==null&&r("FBLogger")("comet_video_player").mustfix("The provided portalingFromVideoID (%s) does not look like such an ID. The video player will not use portaling until a valid ID is provided",String(c));var R;a[3]!==s||a[4]!==S?(R={portalingEnabled:s,portalingFromVideoID:S},a[3]=s,a[4]=S,a[5]=R):R=a[5];var L=o("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState(R),E=L.canBecomePortableLater,k=L.currentVideoID,I=L.globalVideoPortsManager,T=L.globalVideoPortsState,D=L.thisPlaceID,x=d(r("BaseViewportMarginsContext")),$=(e||(e=r("useUnsafeRef_DEPRECATED")))(null),P;a[6]!==$?(P=function(){return o("VideoPlayerFullscreenController").createFullscreenController($)},a[6]=$,a[7]=P):P=a[7];var N=r("useStable")(P),M;a[8]!==N?(M=N.getIsFullscreen(),a[8]=N,a[9]=M):M=a[9];var w=p(M),A=w[0],F=w[1],O,B;a[10]!==N?(O=function(){var e=N.subscribe(function(){var e=N.getIsFullscreen();F(e)});return F(N.getIsFullscreen()),function(){e.remove()}},B=[N,F],a[10]=N,a[11]=O,a[12]=B):(O=a[11],B=a[12]),m(O,B);var W=d(r("CometTrackingNodesContext")),q;a[13]!==W?(q=W.join(""),a[13]=W,a[14]=q):q=a[14];var U=q,V=d(r("CometTrackingCodeContext")),H=(n=V.encrypted_tracking[0])!=null?n:"",G=A?_:x,z="comet-video-player-place"+(i.videoFBID!=null?"-vid-"+i.videoFBID:"");if(!E){var j;a[15]!==i||a[16]!==G||a[17]!==N||a[18]!==l||a[19]!==A||a[20]!==y||a[21]!==H||a[22]!==U?(j=u.jsx(r("CoreVideoPlayer.react"),{coreVideoPlayerMetaData:i,fullscreenController:N,implementations:l,isFullscreen:A,renderWithCoreVideoStates:y,trackingDataEncrypted:H,trackingNodes:U,viewportMarginsForViewability:G}),a[15]=i,a[16]=G,a[17]=N,a[18]=l,a[19]=A,a[20]=y,a[21]=H,a[22]=U,a[23]=j):j=a[23];var K;a[24]!==k||a[25]!==j||a[26]!==D?(K=u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:D,currentVideoID:k,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:D,children:j}),a[24]=k,a[25]=j,a[26]=D,a[27]=K):K=a[27];var Q;return a[28]!==K||a[29]!==z||a[30]!==$?(Q=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:K}),a[28]=K,a[29]=z,a[30]=$,a[31]=Q):Q=a[31],Q}if(I&&T){var X;if(a[32]!==k||a[33]!==I||a[34]!==T){var Y,J;X=(Y=(J=I.getCurrentPlaceStateForVideo(T,k))==null?void 0:J.portablePlaceID)!=null?Y:null,a[32]=k,a[33]=I,a[34]=T,a[35]=X}else X=a[35];var Z;if(a[36]!==k||a[37]!==I||a[38]!==T){var ee,te;Z=(ee=(te=I.getPortableVideoState(T,k))==null?void 0:te.previousPlaceMetaData)!=null?ee:null,a[36]=k,a[37]=I,a[38]=T,a[39]=Z}else Z=a[39];var ne;a[40]!==i||a[41]!==k||a[42]!==G||a[43]!==N||a[44]!==I||a[45]!==l||a[46]!==A||a[47]!==g||a[48]!==y||a[49]!==C||a[50]!==Z||a[51]!==X||a[52]!==D||a[53]!==H||a[54]!==U?(ne=u.jsx(r("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:i,currentPlaceID:X,currentVideoID:k,fullscreenController:N,globalVideoPortsManager:I,globalVideoPortsState_DEPRECATED:null,implementations:l,isFullscreen:A,portablePlaceMetaData:g,previousPlaceMetaData:Z,renderComponents:y,renderPlaceholder:C,thisPlaceID:D,trackingDataEncrypted:H,trackingNodes:U,viewportMarginsForViewability:G}),a[40]=i,a[41]=k,a[42]=G,a[43]=N,a[44]=I,a[45]=l,a[46]=A,a[47]=g,a[48]=y,a[49]=C,a[50]=Z,a[51]=X,a[52]=D,a[53]=H,a[54]=U,a[55]=ne):ne=a[55];var re;return a[56]!==ne||a[57]!==z||a[58]!==$?(re=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:ne}),a[56]=ne,a[57]=z,a[58]=$,a[59]=re):re=a[59],re}else{var oe,ae=(oe=i.videoPixelsAspectRatio)!=null?oe:null,ie;a[60]!==k||a[61]!==C||a[62]!==ae||a[63]!==D?(ie=u.jsx(o("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:k,previousPlaceMetaData:null,renderPlaceholder:C,thisPlaceID:D,videoPixelsAspectRatio:ae}),a[60]=k,a[61]=C,a[62]=ae,a[63]=D,a[64]=ie):ie=a[64];var le;return a[65]!==ie||a[66]!==z||a[67]!==$?(le=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:ie}),a[65]=ie,a[66]=z,a[67]=$,a[68]=le):le=a[68],le}}function h(){return y}function y(){}l.default=g}),98);
__d("VideoPlayerTracePolicyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={initialTracePolicy:null,routeTracePolicy:null},d=s.createContext(c);function m(){return u(d)}l.VideoPlayerTracePolicyContext=d,l.useVideoPlayerTracePolicy=m}),98);
__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(12),n=e.children,r=e.initialTracePolicy,a=e.routeTracePolicy,i=d(r),l=i[0],u=i[1],m=d(a),p=m[0],_=m[1],f,g;t[0]!==r||t[1]!==a||t[2]!==l||t[3]!==p?(f=function(){l!==r&&u(r),p!==a&&_(a)},g=[r,a,l,p],t[0]=r,t[1]=a,t[2]=l,t[3]=p,t[4]=f,t[5]=g):(f=t[4],g=t[5]),c(f,g);var h;t[6]!==l||t[7]!==p?(h={initialTracePolicy:l,routeTracePolicy:p},t[6]=l,t[7]=p,t[8]=h):h=t[8];var y;return t[9]!==n||t[10]!==h?(y=s.jsx(o("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:h,children:n}),t[9]=n,t[10]=h,t[11]=y):y=t[11],y}l.default=m}),98);
__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(14),n=e.children,a=e.coreVideoPlayerMetaData,i=e.implementations,l=e.portalingEnabled,u=e.portalingFromVideoID,c=e.portalingPlaceMetaData,d=e.portalingRenderPlaceholder,m;t[0]!==n?(m=function(t){return s.jsx(r("VideoPlayerComponentContainer.react"),babelHelpers.extends({},t,{children:n}))},t[0]=n,t[1]=m):m=t[1];var p=m,_;t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==u||t[6]!==c||t[7]!==d||t[8]!==p?(_=s.jsx(r("VideoPlayerPortalingPlace.react"),{coreVideoPlayerMetaData:a,implementations:i,portalingEnabled:l,portalingFromVideoID:u,portalingPlaceMetaData:c,renderComponents:p,renderPlaceholder:d}),t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=c,t[7]=d,t[8]=p,t[9]=_):_=t[9];var f;return t[10]!==a.initialTracePolicy||t[11]!==a.routeTracePolicy||t[12]!==_?(f=s.jsx(r("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:a.initialTracePolicy,routeTracePolicy:a.routeTracePolicy,children:_}),t[10]=a.initialTracePolicy,t[11]=a.routeTracePolicy,t[12]=_,t[13]=f):f=t[13],f}l.default=c}),98);
__d("FDSResizeUpFilled20Icon",["cr:14081"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:14081")}),98);
__d("FDSResizeUpFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("517763"),20),u=e;l.default=u}),98);
__d("GraphQLVideoAutoplayGatingResult",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=e!=null?e:"unknown",o=t||null;return{autoplayGatingResult:r,autoplaySetting:o,canAutoplay:n!=null?n:!1}}i.makeGraphQLVideoAutoplayGatingResult=e}),66);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.values(r("CVCv3DisabledPlayerOrigins")),s=Object.values(r("CVCv3DisabledPlayerSubOrigins")),u=10,c=(function(){function t(t,n,o,a,i,l){var u=this;this.$1=new(r("CVCv3SubscriptionHelper"))(t,n,o),this.$5=i,this.$6=null,this.$9=null,this.$10=!this.$1.isValidSubscription(),this.$3=null,this.$2=null;var c=n!=null?e.includes(n):!1,d=o!=null?s.includes(o):!1;!c&&!d&&(this.$3=a,this.$11=l,this.$4=a.subscribe(function(){if(u.$3==null){u.$1.logDebugInfo("empty_video_controller");return}var e=u.$3.getCurrentState();e.playing?u.$12(e):u.$13()}))}var n=t.prototype;return n.$12=function(t){if(this.$3==null){this.$1.logDebugInfo("empty_video_controller");return}if(t.playing){if(this.$2==null){var e=this.$3.getPlayheadPosition();e>=0&&(this.$2=e)}}else this.$2=null;this.$14(0)},n.stopUnifiedCVC=function(){this.$13()},n.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null},n.$13=function(){r("clearTimeout")(this.$8),r("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null},n.$15=function(){r("clearTimeout")(this.$7),this.$7=null},n.$16=function(){this.$9=null,this.$15(),this.$14(0)},n.$14=function(t){var e=this;this.$3==null||this.$8!=null||this.$9!=null||this.$10||(this.$8=r("setTimeout")(function(){e.$8=null;var t=e.$17();if(t==null){e.$1.logDebugInfo("empty_request");return}e.$9=t;var n=Date.now(),a=!1;r("promiseDone")(t,function(r){if(t===e.$9)if(e.$9=null,r!=null){var o=e.$1.processUnifiedResponse(r);e.$18(o,n)}else e.$1.logHttpResponseBad("null payload",Date.now()-n)},function(t){a=!0,e.$1.logHttpRequestFailure(t!=null?JSON.stringify(t):null,Date.now()-n)}),e.$7=r("setTimeout")(function(){a||e.$1.logHttpRequestTimeout(Date.now()-n),e.$16()},u*o("DateConsts").MS_PER_SEC)},t))},n.$18=function(t,n){this.$15();var e=Date.now()-n;if(t.d!=null?(this.$1.logHttpRequestSuccess(e),this.$11!=null&&this.$11(t.d)):this.$1.logHttpResponseBad("no data field",e),t.a!=null){var r=t.a.t;switch(r){case"p":var a=t.a.pi;a==null&&(a=u),this.$14(a*o("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}},n.$17=function(){var e=this.$19();if(e==null)return null;var t={d:JSON.stringify(e)};return r("cometAsyncFetch")(r("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:t,method:"POST"})},n.$19=function(){if(this.$3==null)return null;var e={};this.$6!=null&&(e.lc=this.$6),this.$5&&(e.ls=!0);var t=0,n=0;this.$2!=null&&(t=this.$2,n=this.$3.getPlayheadPosition());var r=this.$3.getCurrentState(),o=this.$1.makeUnifiedVideoCVCUpdate(t,n,this.$20(r),r.muted,e);return o},n.$20=function(t){return t.playing||t.seeking?"playing":t.ended?"ended":t.paused?"paused":"unknown"},n.testing_setLastStartPosition=function(t){this.$2=t},n.testing_makeUnifiedStateUpdate=function(){return this.$19()},n.testing_handleUnifiedResponse=function(t){return this.$18(t,Date.now())},t})();l.default=c}),98);
__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react"));l.default=e}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});l.default=u}),98);
__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","oz-player/utils/OzErrorUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={error:null},t.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e),t.getDerivedStateFromError=function(t){return{error:r("getErrorSafe")(t)}};var n=t.prototype;return n.componentDidCatch=function(t,n){var e=n.componentStack,a=r("getErrorSafe")(t);a.componentStack=e;var i=this.props,l=i.description,s=i.onError,u=i.project,c=o("oz-player/utils/OzErrorUtils").isOzError(t)?t.getType():t!=null&&typeof t.name=="string"?t.name:a.name;try{a.name=c}catch(e){}var d="VideoPlayerErrorBoundary caught an "+c;l!=null&&(d=d+" ("+l+")");var m=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE","OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"],p=["Network failure:","Network failure.","HTTP error.","Bad URL timestamp","URL signature expired","No license for com.widevine.alpha","OZ_DRM_MANAGER: Endpoint returned error: DEVICE_CERTIFICATE_REVOKED"],_=m.every(function(e){return a.name!==e})&&p.every(function(e){return!a.message.startsWith(e)}),f=r("FBLogger")(u==null?"comet_video_player":u).catching(a);["OZ_DRM_MANAGER","OZ_JAVASCRIPT_NATIVE","OZ_INITIALIZATION"].includes(a.name)&&(f=f.addToCategoryKey(a.message)),_?f.fatal(d):f.warn(d),s!=null&&s(a)},n.render=function(){var e=this.props,t=e.children,n=e.fallback,r=this.state.error;return r?typeof n=="function"?n(r):n:t},t})(s.PureComponent);l.default=u}),98);
__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","FDSLink.react","FDSText.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(1),t=r("gkx")("20836")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":"https://www.facebook.com/help/396404120401278/list",n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:u.jsx(r("FDSLink.react"),{href:t,target:"_blank",children:s._(/*BTDS*/"Learn more")})}),e[0]=n):n=e[0],n}l.default=c}),226);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["FDSText.react","VideoPlayerFallbackLearnMoreLink.react","cr:2324","cr:4149","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(21),a=e.background,i=e.debugError,l=e.message,u=e.showDebugWithoutError,c=e.showLearnMoreLink,d=u===void 0?!0:u,m=c===void 0?!0:c,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x6s0dn4 xatbrnm x9f619 x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x2vl965 x1a8lsjc xe2zdcy x1n2onr6 xh8yej3"},t[0]=p):p=t[0];var _;t[1]!==a?(_={0:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox"},1:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox x1vjfegm"}}[(a!=null)<<0],t[1]=a,t[2]=_):_=t[2];var f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w"},t[3]=f):f=t[3];var g;t[4]!==l?(g=s.jsx("div",babelHelpers.extends({},f,{children:s.jsx(r("FDSText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:l})})),t[4]=l,t[5]=g):g=t[5];var h;t[6]!==m?(h=m&&s.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w",children:s.jsx(r("VideoPlayerFallbackLearnMoreLink.react"),{})}),t[6]=m,t[7]=h):h=t[7];var y;t[8]!==i||t[9]!==d?(y=(i!=null||d)&&s.jsxs(s.Fragment,{children:[n("cr:4149")?s.jsx(n("cr:4149"),{error:i}):null,n("cr:2324")?s.jsx(n("cr:2324"),{error:i}):null]}),t[8]=i,t[9]=d,t[10]=y):y=t[10];var C;t[11]!==_||t[12]!==g||t[13]!==h||t[14]!==y?(C=s.jsxs("div",babelHelpers.extends({},_,{children:[g,h,y]})),t[11]=_,t[12]=g,t[13]=h,t[14]=y,t[15]=C):C=t[15];var b;t[16]!==a?(b=a!=null&&s.jsx("div",{className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy",children:a}),t[16]=a,t[17]=b):b=t[17];var v;return t[18]!==b||t[19]!==C?(v=s.jsxs("div",babelHelpers.extends({},p,{children:[C,b]})),t[18]=b,t[19]=C,t[20]=v):v=t[20],v}l.default=u}),98);
__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.background,a=e.debugError,i=e.message,l=e.showDebugWithoutError,c=e.showLearnMoreLink,d;t[0]!==i?(d=i!=null?i:s._(/*BTDS*/"Sorry, we're having trouble playing this video."),t[0]=i,t[1]=d):d=t[1];var m=d,p;return t[2]!==n||t[3]!==a||t[4]!==m||t[5]!==l||t[6]!==c?(p=u.jsx(r("VideoPlayerFallbackCoverImplWithoutRetry.react"),{background:n,debugError:a,message:m,showDebugWithoutError:l,showLearnMoreLink:c}),t[2]=n,t[3]=a,t[4]=m,t[5]=l,t[6]=c,t[7]=p):p=t[7],p}l.default=c}),226);
__d("VideoPlayerFullscreenControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerHooks","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(18),n=e.onPress,a=e.onUserInteraction,i=e.shouldUnmute,l=e.showTooltip,m=e.useOutlineIcons,p=l===void 0?!0:l,_=m===void 0?!1:m,f=(c||(c=o("VideoPlayerHooks"))).useController(),g=c.useIsFullscreen(),h=c.useLastMuteReason(),y;t[0]!==g?(y=g?s._(/*BTDS*/"Exit fullscreen"):s._(/*BTDS*/"Enter fullscreen"),t[0]=g,t[1]=y):y=t[1];var C=y,b;t[2]!==f||t[3]!==g||t[4]!==h||t[5]!==n||t[6]!==a||t[7]!==i?(b=function(){n&&n(),f.requestSetIsFullscreen(!g),i===!0&&h!=="user_initiated"&&f.setMuted(!1,"product_initiated"),a&&a({name:"video_fullscreen_button",type:"happened"})},t[2]=f,t[3]=g,t[4]=h,t[5]=n,t[6]=a,t[7]=i,t[8]=b):b=t[8];var v=b,S;t[9]!==_?(S=_?o("fbicon")._(u("528442"),20):o("fbicon")._(u("517758"),20),t[9]=_,t[10]=S):S=t[10];var R=S,L;t[11]!==_?(L=_?o("fbicon")._(u("595830"),20):o("fbicon")._(u("517763"),20),t[11]=_,t[12]=L):L=t[12];var E=L,k=g?R:E,I=p?C:null,T;return t[13]!==C||t[14]!==v||t[15]!==k||t[16]!==I?(T=d.jsx(r("VideoPlayerControlIcon.react"),{icon:k,label:C,onPress:v,tooltip:I}),t[13]=C,t[14]=v,t[15]=k,t[16]=I,t[17]=T):T=t[17],T}l.default=m}),226);
__d("VideoPlayerIMFMetadataContext",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={imfExpectedFromEmsg:!1,specInlineJson:null},d=s.createContext(c);d.displayName="VideoPlayerIMFMetadataContext";var m=d.Provider;function p(){var e=u(d);if(e===c)throw r("FBLogger")("comet_video_player").mustfixThrow("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.");return e}l.VideoPlayerIMFMetadataContextProvider=m,l.useVideoPlayerIMFMetadataFromContext=p}),98);
__d("VideoPlayerProgressiveImplementationData",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return/\.mpd(\?|$)/.test(e)}function s(t){var n=t.hdSrc,o=t.hdSrcPreferred,a=t.sdSrc;if(n==null&&a==null){var i=r("err")("Both HD and SD browser-native URLs are not available");return i.name="GotNoBrowserNativeURLs",i}var l=a!=null&&e(a),s=n!=null&&e(n);if(l||s){var u=r("err")("HD or SD browser-native URL points to a DASH manifest");return u.name="GotBrowserNativeURLsPointToDASH",u}return{hdSrc:n,hdSrcPreferred:o,sdSrc:a}}l.makeProgressiveImplementationData=s}),98);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!==null&&e.indexOf(".m3u8")!==-1}function s(t){var n=t.getPlayingVideoInfo,o=t.setUserSelectedVideoQuality;function a(){var t=n(),r="progressive_SD",o="progressive_HD";return t==null||e(t.hdSrc)||e(t.sdSrc)?null:t.hdSrc!=null&&t.playingSrc===t.hdSrc?o:t.sdSrc!=null&&t.playingSrc===t.sdSrc?r:null}return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAvailableAudioTracks:function(){var e,t;return(e=(t=n())==null?void 0:t.availableAudioTracks)!=null?e:[]},getAvailableVideoQualities:function(){var e,t;return(e=(t=n())==null?void 0:t.availableQualities)!=null?e:[]},getAvailableVideoTracks:function(){var e,t;return(e=(t=n())==null?void 0:t.availableVideoTracks)!=null?e:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingAudioRepresentationID:function(){return r("gkx")("440")?a():null},getCurrentPlayingAudioTrackID:function(){var e,t;return(e=(t=n())==null?void 0:t.playingAudioTrackID)!=null?e:null},getCurrentPlayingVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.targetQuality)!=null?e:""},getCurrentPlayingVideoRepresentationID:function(){return r("gkx")("440")?a():"oep_hd"},getCurrentTargetVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.targetQuality)!=null?e:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var t=n();return t==null?"progressive":e(t.hdSrc)||e(t.sdSrc)?"hls":"progressive"},getTargetAudioTrack:function(){return null},getUserSelectedVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.selectedQuality)!=null?e:"notselected"},getUserSelectedVideoVariant:function(){return null},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentations:function(){return null},isDrm:function(){var e;return((e=n())==null?void 0:e.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isLiveRewindAvailable:function(){return!1},isMixedCodecManifest:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(t){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:o,setUserSelectedVideoVariant:function(t){}}}l.createVideoPlayerProgressiveImplementationEngineExtrasAPI=s}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(t,n,r,o,a,i){"use strict";var e="hd",l="sd";function s(t,n,r){return t?n!=null?e:l:r!=null?l:n!=null?e:l}function u(t){var n=[];t.sdSrc!=null&&n.push(l),t.hdSrc!=null&&n.push(e);var r=[],o=[],a=s(t.hdSrcPreferred,t.hdSrc,t.sdSrc);return babelHelpers.extends({},t,{availableAudioTracks:r,availableQualities:n,availableVideoTracks:o,playingAudioTrackID:null,playingQuality:null,playingSrc:null,selectedQuality:a,targetQuality:a,targetSrc:null})}function c(t,n){var r=t.hdSrc,o=t.sdSrc,a,i;return n==="notselected"||n==="auto"?(a=o!=null?l:r!=null?e:l,i=o!=null?o:r!=null?r:null):n===e&&r!=null?(a=e,i=r):n===l&&o!=null?(a=l,i=o):(a=l,i=null),i===""&&(i=null),babelHelpers.extends({},t,{selectedQuality:n,targetQuality:a,targetSrc:i})}function d(e,t,n){return babelHelpers.extends({},e,{playingQuality:t,playingSrc:n})}i.createResolvedVideoInfoProgressive=u,i.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=c,i.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=d}),66);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","Promise","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1607","cr:1680308","err","getErrorNameFromMediaErrorCode","getErrorSafe","getMoreGranularErrorNameFromHTMLVideoElementErrorMessage","gkx","promiseDone","videoUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=typeof e=="object"&&e!=null&&typeof e.name=="string"?e.name:null;return o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError(["PROGRESSIVE_JAVASCRIPT_NATIVE",r].filter(Boolean).join("/"),e,t,n)}function u(t){var a=t.initialProps,i={current:null},l={current:null},u={current:null},m={current:null},p=a.loggingMetaData.instanceKey,_=function(){var t=R(),i=l.current;if(!(t==null||i==null)){t.addEventListener("error",function(o){var i=t.error,l=i==null?void 0:i.code,s=r("getErrorNameFromMediaErrorCode")(l),u=i==null?void 0:i.message,c=u==null||u===""?"Unknown media error":u,d=[],m=u!=null?r("getMoreGranularErrorNameFromHTMLVideoElementErrorMessage")(u):null,p=t.src;if(!i&&t.poster!=null&&t.poster!==""&&(c+="(possible_poster_load_failure)"),p!==""){var _=null;(e||(e=n("Promise"))).resolve().then(function(){return a.coreVideoPlayerMetaData.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING==="use-credentials"&&r("gkx")("19391")?window.fetch(p,{credentials:"include",method:"GET"}):window.fetch(p)}).then(function(e){var t,n=e.status,r=(t=e.headers.get("Content-Type"))!=null?t:"unknown";if(c=c+". Fetched video content with Status:"+n+" Content-Type:"+r,_="URL_RESPONSE_HTTP_"+n,n<200||n>=300)return e.text().then(function(e){d.push(e.length.toString()),c+=" Body:%s:"+e.substr(0,200)+(e.length>200?"...":"")},function(){})}).catch(function(e){typeof e=="object"&&e!=null&&typeof e.name=="string"&&typeof e.message=="string"?(_=_!=null?_:"URL_RESPONSE_FETCH_FAILED/"+e.name,c=c+". Failed fetching video content with error: "+e.name+" "+e.message):(_=_!=null?_:"URL_RESPONSE_FETCH_FAILED",c=c+". Failed fetching video content with unknown error")}).finally(function(){var e=r("err").apply(void 0,[c].concat(d));e.name=[s,m,_].filter(Boolean).join("/"),E(e,"progressive_implementation_error_with_more_info")})}else{var f=r("err").apply(void 0,[c].concat(d));f.name=[s,m,"VIDEO_ELEMENT_SRC_EMPTY"].filter(Boolean).join("/"),E(f,"progressive_implementation_error_with_empty_src")}});try{var s,c=i.graphQLVideoDRMInfo,d=i.videoFBID,p=c&&(s=c.fairplayCert)!=null?s:null;if(n("cr:1680308")&&c&&p!=null&&d!=null)if(m.current=n("cr:1680308").newIfSupported(p,t,d,c.videoLicenseUriMap),m.current==null){var _=r("err")("Fairplay not supported");E(_,"progressive_player_fairplay_handler_missing")}else m.current.addListener("error",function(e){var t=r("err")(e.error);E(t,"progressive_player_fairplay_handler_error")});var f=r("gkx")("18183")?o("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(I):I.current=o("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(t);u.current=i;{var g=S();L({inbandCaptionsAutogeneratedFromManifest:h.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:h.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:g==null?void 0:g.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:h.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:g==null?void 0:g.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:g==null?void 0:g.sideLoadCaptionsUrlFromProps})}k.dispatch({payload:{selectedVideoQuality:h.getUserSelectedVideoQuality(),streamingFormat:h.getStreamType()},type:"implementation_engine_initialized"});var y=function(){f.setPlayheadPosition(a.coreVideoPlayerMetaData.startTimestamp)};r("UserAgent").isBrowser("IE11")?r("promiseDone")(f.getDOMLoadedMetadataPromise().then(y)):y()}catch(e){E(e,"progressive_player_create_exception")}}},f=function(t,n){if(n==null)return!0;if(t.videoFBID!==n.videoFBID){var e=14;return o("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",e),!1}else if(t.hdSrc!==n.hdSrc||t.sdSrc!==n.sdSrc){var r=14;return o("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",r),!1}else return!1},g=function(t){var e,n,a,s={audioOnly:t.coreVideoPlayerMetaData.audioOnly,graphQLVideoDRMInfo:(e=t.coreVideoPlayerMetaData.graphQLVideoDRMInfo)!=null?e:null,hdSrc:t.hdSrc===""?null:(n=t.hdSrc)!=null?n:null,hdSrcPreferred:t.hdSrcPreferred,sdSrc:t.sdSrc===""?null:(a=t.sdSrc)!=null?a:null,videoFBID:t.coreVideoPlayerMetaData.videoFBID};if(!f(s,i.current))return!1;if(s.hdSrc==null&&s.sdSrc==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Empty hdSrc and sdSrc");return i.current=s,l.current=o("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(s),_(),!0},h=o("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){if(r("gkx")("440")){var e,t=u.current;if(!t)return null;var n=(e=I.current)==null?void 0:e.getUnderlyingVideoElement().currentSrc;return babelHelpers.extends({},t,{playingSrc:n!=null&&n!==""?n:null})}else return u.current},setUserSelectedVideoQuality:function(t){var e=u.current;if(!e)throw r("FBLogger")("comet_video_player").mustfixThrow("Attempt to switch quality when playingVideoInfo does not exist");var n=o("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(I);u.current=o("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(e,t);var i=u.current.targetSrc;if(i===null){r("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",a.coreVideoPlayerMetaData.videoFBID).warn("Received null targetSrc from setUserSelectedVideoQuality, selectedQuality: %s",String(t));return}c(i,a.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler).then(function(e){var t,r,o;if(((t=u.current)==null?void 0:t.targetSrc)===i){d(n.getUnderlyingVideoElement(),{crossOrigin:(r=a.coreVideoPlayerMetaData.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING)!=null?r:a.coreVideoPlayerMetaData.isSpherical===!0?"anonymous":null},e);var l=(o=k.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?o:0;l>0&&n.setPlayheadPosition(l),k.getCurrentState().controlledState.playbackState==="playing"&&n.play(),k.dispatch({payload:{},type:"representation_changed"})}}).catch(function(e){var t;if(((t=u.current)==null?void 0:t.targetSrc)===i){var n=r("getErrorSafe")(e);r("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",a.coreVideoPlayerMetaData.videoFBID).catching(n).warn("Failed refreshing video URL with original error: %s",String(n))}})}}),y=function(){m.current&&(m.current.destroy(),m.current=null)},C=o("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(t){var e=t.getVideoElementAPI,r=t.loggerToVPL;return n("cr:1607")?n("cr:1607").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:h,getVideoElementAPI:e,loggerToVPL:r}):null},createVideoPlayerError:function(t,n){var e;return s(t,n,(e=u.current)==null?void 0:e.targetSrc)},destroyEngineParts:function(){y()},engineCreateArgs:t,engineExtrasAPI:h,engineMetadata:{isAbrEnabled:!1,playerInstanceKey:p,playerVersion:"comet_progressive",streamingFormat:"progressive"},handleVideoElementChanged:function(t){t!=null&&_()},handleVideoInfoChange:g}),b=C.debugLog,v=C.engine,S=C.getCaptionsInfo,R=C.getVideoElement,L=C.handleCaptionsInfoChange,E=C.handleFatalImplementationError,k=C.machine,I=C.videoElementAPIRef;return v}function c(t,a){return a&&o("videoUrlUtils").isCdnUrlExpired(t)?a(t).then(function(t){var o;return(o=t.refreshedUrl)!=null?o:(e||(e=n("Promise"))).reject(r("err")("Failed refreshing URL"+(t.reason!==null?" with reason: "+t.reason:"")))}):(e||(e=n("Promise"))).resolve(t)}function d(e,t,n){var r=t.crossOrigin;if(n==null||n==="")e.removeAttribute("src");else{var o=e.playbackRate;e.setAttribute("src",n);var a=null;if(r!=null){try{a=new URL(n).origin}catch(e){}if(a!=null&&location.origin!==a)switch(r){case"anonymous":case"use-credentials":e.setAttribute("crossOrigin",r);break;default:e.removeAttribute("crossOrigin");break}}e.playbackRate=o}}l.createVideoPlayerProgressiveImplementationEngine=u,l.internal_setHTMLVideoElementSrc=d}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(e,o("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine),n=t.reactVideoFrameAndComponents;return n}l.default=e}),98);
__d("WebSessionExtender",["WebSession","clearInterval","cr:13141","cr:913","setInterval"],(function(t,n,r,o,a,i,l){"use strict";var e=2e4,s=new Set,u=null;function c(t,a){a===void 0&&(a="extender"),s.add(t),u==null&&(o("WebSession").extend(Date.now()+e+2e3),n("cr:13141")==null||n("cr:13141").extend(),u=r("setInterval")(function(){o("WebSession").extend(Date.now()+e+2e3),n("cr:13141")==null||n("cr:13141").extend(),n("cr:913")&&new(n("cr:913"))().setClientTime(Date.now()).setWebsessionID(o("WebSession").getId()).setReason(a).log()},e))}function d(e){s.delete(e);var t=s.size;t===0&&u!=null&&(r("clearInterval")(u),u=null)}l.subscribe=c,l.unsubscribe=d}),98);
__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useId;function m(){var e=o("react-compiler-runtime").c(4),t=(s||(s=o("VideoPlayerHooks"))).usePlaying(),n=d(),r,a;return e[0]!==t||e[1]!==n?(r=function(){if(t)return o("WebSessionExtender").subscribe(n,"video"),function(){o("WebSessionExtender").unsubscribe(n)}},a=[t,n],e[0]=t,e[1]=n,e[2]=r,e[3]=a):(r=e[2],a=e[3]),c(r,a),null}l.default=m}),98);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(4),n=(e||(e=o("VideoPlayerHooks"))).useStalling(),r=e.useStreamInterrupted(),a=e.useIsLiveRewindActive(),i=r&&!a,l=n,s=i?"live_video_interrupted_overlay":l?"spinner":"none",u;return t[0]!==i||t[1]!==s||t[2]!==l?(u={liveVideoInterruptedOverlayVisible:i,loadingIndicatorType:s,spinnerVisible:l},t[0]=i,t[1]=s,t[2]=l,t[3]=u):u=t[3],u}l.default=s}),98);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","once","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),c=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),d=r("once")(function(){return s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(c,{})})});function m(){var e=o("react-compiler-runtime").c(6),t=r("useVideoPlayerDefaultLoadingIndicatorsLogic")(),n=t.loadingIndicatorType,a=t.spinnerVisible,i;e[0]!==a?(i=s.jsx(u,{isVisible:a}),e[0]=a,e[1]=i):i=e[1];var l=i,c;e:switch(n){case"spinner":{c=l;break e}case"live_video_interrupted_overlay":{var m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=d(),e[2]=m):m=e[2],c=m;break e}case"none":default:c=l}var p;return e[3]!==c||e[4]!==n?(p={loadingIndicatorElement:c,loadingIndicatorType:n},e[3]=c,e[4]=n,e[5]=p):p=e[5],p}l.default=m}),98);
__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=o("createVideoStateHook").createVideoStateHook(null),d=c.setterHook,m=o("createVideoStateHook").createVideoStateHook(null),p=m.setterHook,_=m.valueHook;function f(e){var t=o("react-compiler-runtime").c(12),n=e.disableSubscription,a=e.playerFormat,i=e.subOrigin,l=e.videoFBID,c=(s||(s=o("VideoPlayerHooks"))).useIsLive(),m=s.useIsFullscreen(),_=s.useIsDesktopPictureInPicture(),f=s.useController(),g=d(),h=p(),y,C;t[0]!==n||t[1]!==_||t[2]!==m||t[3]!==c||t[4]!==a||t[5]!==h||t[6]!==g||t[7]!==i||t[8]!==f||t[9]!==l?(y=function(){if(n===!0){r("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:l,name:"disable_subscription"}});return}var e=new(r("UnifiedVideoCVCSubscription"))(l,r("getPlayerFormatForLogData")({isDesktopPictureInPicture:_,isFullscreen:m},a),i,f,c,function(e){h(e)});return g(e),function(){e.destroy()}},C=[_,m,c,n,a,h,g,i,f,l],t[0]=n,t[1]=_,t[2]=m,t[3]=c,t[4]=a,t[5]=h,t[6]=g,t[7]=i,t[8]=f,t[9]=l,t[10]=y,t[11]=C):(y=t[10],C=t[11]),u(y,C)}var g=_;l.useVideoPlayerUnifiedCVCProvider=f,l.useVideoPlayerUnifiedCVCData=g}),98);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerHooks","VideoPlayerIMFMetadataContext","VideoPlayerInteractionOverlay.react","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:99","gkx","react","react-compiler-runtime","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s.useImperativeHandle,m=(e=n("cr:99"))==null?void 0:e.VideoPlayerWithDebugOverlay;function p(e){var t=o("react-compiler-runtime").c(25),a=e.apiRef,i=e.children,l=e.disableCVCSubscription,s=e.disableLoadingIndicator,p=e.disableLogging,_=e.instreamVideoAdBreaksPlayer,f=e.playerFormat,g=e.subOrigin,h=e.videoFBID,y=e.videoPlayerIMFFromVideoMetadata,C=e.videoPlayerSpherical,b=s===void 0?!1:s,v=(u||(u=o("VideoPlayerHooks"))).useController(),S=o("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),R,L;t[0]!==v||t[1]!==S?(R=function(){return{controller:v,portalingPlaceInfo:S}},L=[v,S],t[0]=v,t[1]=S,t[2]=R,t[3]=L):(R=t[2],L=t[3]),d(typeof a=="function"?a:null,R,L);var E=p===!0||l===!0,k;t[4]!==f||t[5]!==g||t[6]!==E||t[7]!==h?(k={disableSubscription:E,playerFormat:f,subOrigin:g,videoFBID:h},t[4]=f,t[5]=g,t[6]=E,t[7]=h,t[8]=k):k=t[8],o("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider(k);var I=r("useVideoPlayerDefaultLoadingIndicators")(),T=I.loadingIndicatorElement,D=y!=null?y:null,x=b?null:T,$;t[9]===Symbol.for("react.memo_cache_sentinel")?($=r("gkx")("24328")?c.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,t[9]=$):$=t[9];var P;t[10]!==i||t[11]!==_?(P=c.jsxs(r("VideoPlayerCaptionsAreaDeferred.react"),{children:[i,_]}),t[10]=i,t[11]=_,t[12]=P):P=t[12];var N,M,w;t[13]===Symbol.for("react.memo_cache_sentinel")?(N=c.jsx(r("CoreVideoPlayerAutoplayClient.react"),{}),M=c.jsx(r("CoreVideoPlayerAudioClient.react"),{}),w=n("cr:1954434")?c.jsx(n("cr:1954434"),{}):null,t[13]=N,t[14]=M,t[15]=w):(N=t[13],M=t[14],w=t[15]);var A;t[16]!==g?(A=m?c.jsx(m,{subOrigin:g}):null,t[16]=g,t[17]=A):A=t[17];var F;t[18]===Symbol.for("react.memo_cache_sentinel")?(F=c.jsx(r("VideoPlayerWebSessionExtender.react"),{}),t[18]=F):F=t[18];var O;return t[19]!==A||t[20]!==D||t[21]!==x||t[22]!==P||t[23]!==C?(O=c.jsxs(o("VideoPlayerIMFMetadataContext").VideoPlayerIMFMetadataContextProvider,{value:D,children:[C,x,$,P,N,M,w,A,F]}),t[19]=A,t[20]=D,t[21]=x,t[22]=P,t[23]=C,t[24]=O):O=t[24],O}l.default=p}),98);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerMetaData","CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","react","react-compiler-runtime","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";var e=["apiRef","children","disableLoadingIndicator","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerIMFFromVideoMetadata","videoPlayerSpherical"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(37),a,i,l,s,c,d,m,p,_,f,g,h;n[0]!==t?(a=t.apiRef,i=t.children,s=t.disableLoadingIndicator,c=t.implementations,d=t.instreamVideoAdBreaksPlayer,m=t.portalingEnabled,p=t.portalingFromVideoID,_=t.portalingPlaceMetaData,f=t.portalingRenderPlaceholder,g=t.videoPlayerIMFFromVideoMetadata,h=t.videoPlayerSpherical,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f,n[11]=g,n[12]=h):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10],g=n[11],h=n[12]);var y=r("usePlayerOriginRouteTracePolicy")(),C=r("useRouteProductAttribution")();C||(C=l.productAttribution);var b;n[13]!==l||n[14]!==C||n[15]!==y?(b=o("CoreVideoPlayerMetaData").applyDefaultsToCoreVideoPlayerMetaData(babelHelpers.extends({},l,{productAttribution:C,routeTracePolicy:y})),n[13]=l,n[14]=C,n[15]=y,n[16]=b):b=n[16];var v=b,S;n[17]!==a||n[18]!==i||n[19]!==v.loggingConfig.disableCVCSubscription||n[20]!==v.loggingConfig.disableLogging||n[21]!==v.playerFormat||n[22]!==v.subOrigin||n[23]!==v.videoFBID||n[24]!==s||n[25]!==d||n[26]!==g||n[27]!==h?(S=u.jsx(r("VideoPlayerXImplSurface.react"),{apiRef:a,children:i,disableCVCSubscription:v.loggingConfig.disableCVCSubscription,disableLoadingIndicator:s,disableLogging:v.loggingConfig.disableLogging,instreamVideoAdBreaksPlayer:d,playerFormat:v.playerFormat,subOrigin:v.subOrigin,videoFBID:v.videoFBID,videoPlayerIMFFromVideoMetadata:g,videoPlayerSpherical:h}),n[17]=a,n[18]=i,n[19]=v.loggingConfig.disableCVCSubscription,n[20]=v.loggingConfig.disableLogging,n[21]=v.playerFormat,n[22]=v.subOrigin,n[23]=v.videoFBID,n[24]=s,n[25]=d,n[26]=g,n[27]=h,n[28]=S):S=n[28];var R;return n[29]!==v||n[30]!==c||n[31]!==m||n[32]!==p||n[33]!==_||n[34]!==f||n[35]!==S?(R=u.jsx(r("CoreVideoPlayerWithComponents.react"),{coreVideoPlayerMetaData:v,implementations:c,portalingEnabled:m,portalingFromVideoID:p,portalingPlaceMetaData:_,portalingRenderPlaceholder:f,children:S}),n[29]=v,n[30]=c,n[31]=m,n[32]=p,n[33]=_,n[34]=f,n[35]=S,n[36]=R):R=n[36],R}l.default=c}),98);
__d("addToMap",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){if(e.get(t)===n)return e;var r=new Map(e);return r.set(t,n),r}i.default=e}),66);
__d("computeAspectRatio",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e!=null&&t!=null&&e!==0&&t!==0?e/t:null}i.default=e}),66);
__d("getVideoPlayerUserFacingErrorMessageFromError",["fbt","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return r("gkx")("24345")&&e.message.toLowerCase().indexOf("audio_renderer_error")>=0}function u(e){return e.message.indexOf("DEVICE_CERTIFICATE_REVOKED")>=0}function c(e){return e.name.indexOf("VideoImplementationsDashManifestUnsupportedCodecs")>=0||e.name.indexOf("VideoImplementationsMediaSourceUnsupported")>=0}function d(e){return e.name==="OZ_NETWORK"&&e.message.includes("CDN URL expired")}function m(t){var n=null;return e(t)?n=s._(/*BTDS*/"Audio renderer error: Please restart your computer."):u(t)?n=s._(/*BTDS*/"This video is DRM-protected, but your device certificate appears to be revoked. Please make sure your browser is up to date, and try again."):c(t)?n=s._(/*BTDS*/"This video cannot be played in the browser, operating system, or hardware you're using."):d(t)&&(n=s._(/*BTDS*/"This video content isn't available right now.")),n}l.default=m}),226);
__d("defaultErrorBoundaryFallback",["VideoPlayerFallbackCover.react","getVideoPlayerUserFacingErrorMessageFromError","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=r("getVideoPlayerUserFacingErrorMessageFromError")(e);return s.jsx(r("VideoPlayerFallbackCover.react"),{debugError:e,message:t})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("getVideoPlayerAutoplayProps",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=t!=null?t:"respect_user_settings",o=r==="dangerously_always_autoplay",a=n!=null?n:"unknown",i=e.autoplaySetting||"default_autoplay",l=i==="off",s=o||r==="respect_user_settings"&&!l&&e.canAutoplay,u=r==="do_not_autoplay"?a:e.autoplayGatingResult,c=s?"allow":r==="dangerously_disable_autoplay_management"?"dangerously_disable_autoplay_management":"deny";return{autoplayGatingResult:u,autoplaySetting:i,canAutoplay:c}}i.default=e}),66);
__d("useVideoPlayerDefaultControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useState,m=5e3;function p(e){var t=o("react-compiler-runtime").c(9),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.forceVisible,l=a.forceVisibleOnMount,u=o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter(),p=u.ongoingInteractionsCount,_=u.onUserInteraction,f=(s||(s=o("VideoPlayerHooks"))).useEnded(),g=s.useIsHovering(),h=s.usePaused(),y=s.useIsMouseIdle(),C=s.useVideoPlaybackEnded(),b=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",g&&!y,_);var v=d(l===!0),S=v[0],R=v[1],L,E;t[2]!==S||t[3]!==h?(L=function(){if(!h&&S){var e=r("setTimeout")(function(){R(!1)},m);return function(){r("clearTimeout")(e)}}},E=[S,h],t[2]=S,t[3]=h,t[4]=L,t[5]=E):(L=t[4],E=t[5]),c(L,E);var k;i===!0||i===!1?k=i:b?k=!1:p>0||S?k=!0:h?k=f?C:!0:k=!1;var I;return t[6]!==k||t[7]!==_?(I={isControlsVisible:k,onUserInteraction:_},t[6]=k,t[7]=_,t[8]=I):I=t[8],I}l.default=p}),98);/*FB_PKG_DELIM*/
__d("FDSProfileVideoGlimmer.react",["FDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(6),n=e.size,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a="x1n2onr6",t[0]=a):a=t[0];var i;t[1]!==n?(i={height:n,width:n},t[1]=n,t[2]=i):i=t[2];var l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("FDSGlimmer.react"),{index:0,xstyle:u.glimmer}),t[3]=l):l=t[3];var c;return t[4]!==i?(c=s.jsx("div",{className:a,style:i,children:l}),t[4]=i,t[5]=c):c=t[5],c}l.default=c}),98);
__d("FDSProfileVideoSection_profileVideo.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FDSProfileVideoSection_profileVideo",selections:[{args:null,documentName:"FDSProfileVideoSection_profileVideo",fragmentName:"FDSProfileVideo_profileVideo",fragmentPropName:"profileVideo",kind:"ModuleImport"}],type:"ProfileVideo",abstractKey:null};a.exports=e}),null);
__d("FDSProfileVideoSection.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","CometSSRSuspendOnServer.react","CometVideoPlayerLoggingConfigForMiscApps","FDSProfileVideoGlimmer.react","FDSProfileVideoSection_profileVideo.graphql","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["image","profileVideo","ringSize","shape"],s,u,c,d=c||(c=o("react")),m={videoContainer:{WebkitMaskImage:"x1u31j2f",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},videoContainerRectRounded:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0},videoContainerRounded:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0}};function p(t){var a=o("react-compiler-runtime").c(39),l,c,p,_,f;a[0]!==t?(l=t.image,c=t.profileVideo,_=t.ringSize,f=t.shape,p=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=l,a[2]=c,a[3]=p,a[4]=_,a[5]=f):(l=a[1],c=a[2],p=a[3],_=a[4],f=a[5]);var g=p.size,h=o("CometRelay").useFragment(s!==void 0?s:s=n("FDSProfileVideoSection_profileVideo.graphql"),c),y;a[6]!==l?(y=function(){return l},a[6]=l,a[7]=y):y=a[7];var C=2*_,b=2*_,v=f==="roundedRect"&&m.videoContainerRectRounded,S=f==="circle"&&m.videoContainerRounded,R;a[8]!==v||a[9]!==S?(R=(u||(u=r("stylex")))(m.videoContainer,v,S),a[8]=v,a[9]=S,a[10]=R):R=a[10];var L=g-_*4,E=g-_*4,k;a[11]!==L||a[12]!==E?(k={height:L,width:E},a[11]=L,a[12]=E,a[13]=k):k=a[13];var I;a[14]!==g?(I=d.jsx(r("FDSProfileVideoGlimmer.react"),{size:g}),a[14]=g,a[15]=I):I=a[15];var T;a[16]===Symbol.for("react.memo_cache_sentinel")?(T=o("CometVideoPlayerLoggingConfigForMiscApps").createCometVideoPlayerLoggingConfigForMiscApps(),a[16]=T):T=a[16];var D;a[17]!==p?(D=babelHelpers.extends({cometVideoPlayerLoggingConfig:T},p),a[17]=p,a[18]=D):D=a[18];var x;a[19]!==h||a[20]!==D?(x=d.jsx(o("CometRelay").MatchContainer,{match:h,props:D}),a[19]=h,a[20]=D,a[21]=x):x=a[21];var $;a[22]!==I||a[23]!==x?($=d.jsx(r("CometPlaceholder.react"),{fallback:I,name:i.id,children:x}),a[22]=I,a[23]=x,a[24]=$):$=a[24];var P;a[25]!==$||a[26]!==R||a[27]!==k?(P=d.jsx("div",{className:R,style:k,children:$}),a[25]=$,a[26]=R,a[27]=k,a[28]=P):P=a[28];var N;a[29]!==P||a[30]!==C||a[31]!==b?(N=d.jsx(r("CometSSRSuspendOnServer.react"),{children:d.jsx("foreignObject",{height:"100%",width:"100%",x:C,y:b,children:P})}),a[29]=P,a[30]=C,a[31]=b,a[32]=N):N=a[32];var M;a[33]!==l||a[34]!==N?(M=d.jsx(r("CometPlaceholder.react"),{fallback:l,name:i.id,children:N}),a[33]=l,a[34]=N,a[35]=M):M=a[35];var w;return a[36]!==y||a[37]!==M?(w=d.jsx(r("CometErrorBoundary.react"),{fallback:y,children:M}),a[36]=y,a[37]=M,a[38]=w):w=a[38],w}l.default=p}),98);
__d("FbNotesTypeUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return null;switch(e){case"TEXT_NOTE":return 1;case"MUSIC_NOTE_WITH_TEXT":return 2;case"MUSIC_NOTE_MUSIC_ONLY":return 3;case"POLL_NOTE":return 4;case"GIF_NOTE":return 5;case"GAME_NOTE":return 6;case"MARKETPLACE":return 7;case"FEELINGS_NOTE":return 8;case"MOODS_NOTE":return 9;default:return null}}i.getNoteTypeNumericValue=e}),66);
__d("ProfileCometAvatarCoverPhotoTakeoverDismissMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9578345382249418"}),null);
__d("ProfileCometAvatarCoverPhotoTakeoverDismissMutation.graphql",["ProfileCometAvatarCoverPhotoTakeoverDismissMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input_data",variableName:"input"}],concreteType:"DismissAvatarCoverPhotoTakeoverResponsePayload",kind:"LinkedField",name:"dismiss_avatar_cover_photo_takeover",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProfileCometAvatarCoverPhotoTakeoverDismissMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProfileCometAvatarCoverPhotoTakeoverDismissMutation",selections:t},params:{id:n("ProfileCometAvatarCoverPhotoTakeoverDismissMutation_facebookRelayOperation"),metadata:{},name:"ProfileCometAvatarCoverPhotoTakeoverDismissMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("ProfileCometAvatarCoverPhotoTakeoverDismissMutation",["CometRelay","ProfileCometAvatarCoverPhotoTakeoverDismissMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r=t.callbacks,a=t.environment,i=t.input;o("CometRelay").commitMutation(a,babelHelpers.extends({mutation:e!==void 0?e:e=n("ProfileCometAvatarCoverPhotoTakeoverDismissMutation.graphql")},r,{variables:{input:i}}))}l.incrementCometAvatarCoverPhotoTakeoverDismissal=s}),98);
__d("XCometCreateAvatarCoverPhotoDialogControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/avatar_cover_photo/edit/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("ProfileCometAvatarCoverPhotoTakeoverImpressionMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9998530810205441"}),null);
__d("ProfileCometAvatarCoverPhotoTakeoverImpressionMutation.graphql",["ProfileCometAvatarCoverPhotoTakeoverImpressionMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input_data",variableName:"input"}],concreteType:"AvatarCoverPhotoTakeoverImpressionResponsePayload",kind:"LinkedField",name:"avatar_cover_photo_takeover_impression",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProfileCometAvatarCoverPhotoTakeoverImpressionMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProfileCometAvatarCoverPhotoTakeoverImpressionMutation",selections:t},params:{id:n("ProfileCometAvatarCoverPhotoTakeoverImpressionMutation_facebookRelayOperation"),metadata:{},name:"ProfileCometAvatarCoverPhotoTakeoverImpressionMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("ProfileCometAvatarCoverPhotoTakeoverImpressionMutation",["CometRelay","ProfileCometAvatarCoverPhotoTakeoverImpressionMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r=t.callbacks,a=t.environment,i=t.input;o("CometRelay").commitMutation(a,babelHelpers.extends({mutation:e!==void 0?e:e=n("ProfileCometAvatarCoverPhotoTakeoverImpressionMutation.graphql")},r,{variables:{input:i}}))}l.incrementCometAvatarCoverPhotoTakeoverImpression=s}),98);
__d("useProfileCometAvatarCoverPhotoTakeoverImpressionLogging",["CometRelay","ProfileCometAvatarCoverPhotoTakeoverImpressionMutation","react","react-compiler-runtime","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(4),t=o("CometRelay").useRelayEnvironment(),n;e[0]!==t?(n=function(){o("ProfileCometAvatarCoverPhotoTakeoverImpressionMutation").incrementCometAvatarCoverPhotoTakeoverImpression({callbacks:{onCompleted:d,onError:c},environment:t,input:{client_mutation_id:"1"}})},e[0]=t,e[1]=n):n=e[1];var a=n,i;return e[2]!==a?(i={onImpressionStart:a},e[2]=a,e[3]=i):i=e[3],r("useSinglePartialViewImpression")(i)}function c(){}function d(){}l.default=u}),98);
__d("ProfileCometAvatarCoverPhotoTakeover.react",["CometEntityHeaderCoverMedia.react","CometRelay","ProfileCometAvatarCoverPhotoTakeoverDismissMutation","ViewportAwareKeyframes.react","XCometAvatarEditorControllerRouteBuilder","XCometCreateAvatarCoverPhotoDialogControllerRouteBuilder","bx","goForceFullPageRedirectTo","react","react-compiler-runtime","useProfileCometAvatarCoverPhotoTakeoverImpressionLogging"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(20),n=e.coverPhotoHeight,a=e.coverPhotoWidth,i=e.hasAvatar,l=e.onKeyframeEnd,u=e.stackedButton,c=o("CometRelay").useRelayEnvironment(),p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=r("bx").getURL(r("bx")("7537")),t[0]=p):p=t[0];var _=p,f=r("useProfileCometAvatarCoverPhotoTakeoverImpressionLogging")(),g;t[1]!==c||t[2]!==i?(g=function(){o("ProfileCometAvatarCoverPhotoTakeoverDismissMutation").incrementCometAvatarCoverPhotoTakeoverDismissal({callbacks:{onCompleted:m,onError:d},environment:c,input:{client_mutation_id:"1"}}),i===!1?r("goForceFullPageRedirectTo")(r("XCometAvatarEditorControllerRouteBuilder").buildURL({entry_point:"avatar_cover_photo"})):r("goForceFullPageRedirectTo")(r("XCometCreateAvatarCoverPhotoDialogControllerRouteBuilder").buildURL({}))},t[1]=c,t[2]=i,t[3]=g):g=t[3];var h=g,y;t[4]!==l?(y=function(){l(!1)},t[4]=l,t[5]=y):y=t[5];var C;t[6]!==a||t[7]!==y?(C=s.jsx(r("ViewportAwareKeyframes.react"),{assetName:"avatar-cover-photo-takeover-animation-look-update",delay:500,onRepeatEnd:y,projectName:"profile_avatars_animation_assets",source:_,width:a}),t[6]=a,t[7]=y,t[8]=C):C=t[8];var b;t[9]!==f||t[10]!==C?(b=s.jsx("div",{ref:f,children:C}),t[9]=f,t[10]=C,t[11]=b):b=t[11];var v=b,S;t[12]!==v||t[13]!==n||t[14]!==a||t[15]!==h?(S={height:n,mediaSource:v,onPress:h,width:a},t[12]=v,t[13]=n,t[14]=a,t[15]=h,t[16]=S):S=t[16];var R;return t[17]!==u||t[18]!==S?(R=s.jsx(r("CometEntityHeaderCoverMedia.react"),{backgroundMedia:void 0,coverButton:null,coverMedia:S,coverOverlay:null,roundCorners:"bottom",showCoverOverlayShade:!1,size:"normal",stackedCoverButton:u}),t[17]=u,t[18]=S,t[19]=R):R=t[19],R}function d(){}function m(){}l.default=c}),98);
__d("ProfileCometCoverPhoto_renderedProfile.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"contextualProfileContext"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometCoverPhoto_renderedProfile",selections:[{alias:null,args:[{kind:"Variable",name:"contextual_profile_context",variableName:"contextualProfileContext"}],concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:e,storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometPhotoViewerPlaceholderPassthroughProps_photo"},{alias:"blurred_image",args:[{kind:"Literal",name:"blur",value:50},{kind:"Literal",name:"width",value:320}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:e,storageKey:"image(blur:50,width:320)"},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"avatar_cover_photo_takeover_type",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_nickname",storageKey:null}],type:"GroupAnonAuthorProfile",abstractKey:null}],type:"RenderedProfile",abstractKey:"__isRenderedProfile"}})();a.exports=e}),null);
__d("ProfileCometCoverPhoto_user.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometCoverPhoto_user",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometLockedProfilePopoverTrigger_user"},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},{alias:null,args:null,concreteType:"Avatar",kind:"LinkedField",name:"user_avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_fb_app_avatar",storageKey:null}],storageKey:null}],type:"User",abstractKey:null};a.exports=e}),null);
__d("ProfileCometCoverPhoto_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometCoverPhoto_viewer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometLockedProfilePopoverTrigger_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("ProfileCometLockedProfilePopoverTrigger_user.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometLockedProfilePopoverTrigger_user",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometLockedProfilePopover_user"}],type:"User",abstractKey:null};a.exports=e}),null);
__d("ProfileCometLockedProfilePopoverTrigger_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometLockedProfilePopoverTrigger_viewer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometLockedProfilePopover_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("ProfileCometLockedProfilePopoverTrigger.react",["fbt","CometPressable.react","CometRelay","FDSLazyPopoverTrigger.react","FDSPopoverLoadingState.react","JSResourceForInteraction","ProfileCometLockedProfilePopoverTrigger_user.graphql","ProfileCometLockedProfilePopoverTrigger_viewer.graphql","XPlatReactEnvironment","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=r("JSResourceForInteraction")("ProfileCometLockedProfilePopover.react").__setRef("ProfileCometLockedProfilePopoverTrigger.react"),p={FBVRCoverOverlayContainer:{height:"x5yr21d",width:"xh8yej3",$$css:!0},coverOverlayContainer:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0}};function _(t){var a=o("react-compiler-runtime").c(5),i=t.user,l=t.viewer,s=t.withArrow,c=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometLockedProfilePopoverTrigger_user.graphql"),i),p=o("CometRelay").useFragment(u!==void 0?u:u=n("ProfileCometLockedProfilePopoverTrigger_viewer.graphql"),l),_=r("qex")._("2988")?"button_aggressive":"button",g;a[0]===Symbol.for("react.memo_cache_sentinel")?(g=d.jsx(r("FDSPopoverLoadingState.react"),{}),a[0]=g):g=a[0];var h;return a[1]!==c||a[2]!==p||a[3]!==s?(h=d.jsx(r("FDSLazyPopoverTrigger.react"),{align:"end",fallback:g,popoverProps:{user:c,viewer:p,withArrow:s},popoverResource:m,position:"below",preloadTrigger:_,children:f}),a[1]=c,a[2]=p,a[3]=s,a[4]=h):h=a[4],h}function f(e,t,n,a,i,l){return d.jsx(r("CometPressable.react"),{label:s._(/*BTDS*/"Learn more"),onHoverIn:a,onHoverOut:i,onPress:t,onPressIn:l,ref:e,testid:void 0,xstyle:o("XPlatReactEnvironment").isWeb()?p.coverOverlayContainer:p.FBVRCoverOverlayContainer})}f.displayName=f.name+" [from "+i.id+"]",l.default=_}),226);
__d("ProfileCometCoverPhoto.react",["fbt","CometAnimatePresenceGroup_DO_NOT_USE.react","CometAnimatePresence_DO_NOT_USE.react","CometAnimatedRevealContainer_DO_NOT_USE.react","CometCoverPhotoEditReducer","CometEntityHeaderCoverMedia.react","CometPlaceholder.react","CometRelay","CometTransientDialogProvider.react","JSResourceForInteraction","ProfileCometAvatarCoverPhotoTakeover.react","ProfileCometContext","ProfileCometContextualProfileContext","ProfileCometCoverPhotoEditContext","ProfileCometCoverPhoto_renderedProfile.graphql","ProfileCometCoverPhoto_user.graphql","ProfileCometCoverPhoto_viewer.graphql","ProfileCometLockedProfilePopoverTrigger.react","ProfileCometUtils","deferredLoadComponent","gkx","lazyLoadComponent","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","useCometPhotoViewerPlaceholderPassthroughProps","useResizeObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d,_=p.useContext,f=p.useEffect,g=p.useMemo,h=p.useReducer,y=p.useState,C=r("deferredLoadComponent")(r("requireDeferredForDisplay")("ProfileCometCoverPhotoEditButton.react").__setRef("ProfileCometCoverPhoto.react")),b=r("deferredLoadComponent")(r("requireDeferred")("ProfilishCometCoverPhotoLoadingOverlay.react").__setRef("ProfileCometCoverPhoto.react")),v=r("deferredLoadComponent")(r("requireDeferred")("ProfileCometCoverPhotoRepositioner.react").__setRef("ProfileCometCoverPhoto.react")),S=r("deferredLoadComponent")(r("requireDeferred")("CometScrollTo.react").__setRef("ProfileCometCoverPhoto.react")),R=r("lazyLoadComponent")(r("JSResourceForInteraction")("ProfilishCometCoverPhotoUploader.react").__setRef("ProfileCometCoverPhoto.react")),L=500;function E(t){var a,l,d,p,g,E,k,I,T,D,x,$,P,N,M=o("react-compiler-runtime").c(85),w=t.isLockedProfile,A=t.renderedProfile,F=t.user,O=t.viewer,B=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometCoverPhoto_user.graphql"),F),W=o("CometRelay").useFragment(u!==void 0?u:u=n("ProfileCometCoverPhoto_viewer.graphql"),O),q=o("CometRelay").useFragment(c!==void 0?c:c=n("ProfileCometCoverPhoto_renderedProfile.graphql"),A),U=(a=q.is_nickname)!=null?a:!1,V=q.cover_photo,H=(l=V==null||(d=V.photo)==null||(d=d.image)==null?void 0:d.uri)!=null?l:"",G=V==null||(p=V.photo)==null?void 0:p.blurred_image,z=V==null||(g=V.photo)==null?void 0:g.url,j=(E=V==null||(k=V.photo)==null||(k=k.image)==null?void 0:k.width)!=null?E:0,K=(I=V==null||(T=V.photo)==null||(T=T.image)==null?void 0:T.height)!=null?I:0,Q=V==null?void 0:V.focus,X=V==null?void 0:V.photo,Y;M[0]!==X||M[1]!==H?(Y={photo:X,placeholderImageSrc:H},M[0]=X,M[1]=H,M[2]=Y):Y=M[2];var J=r("useCometPhotoViewerPlaceholderPassthroughProps")(Y),Z=_(r("ProfileCometContext")),ee=Z.isInViewAs,te=Z.profileID,ne=Z.viewerID,re=_(r("ProfileCometContextualProfileContext")),oe=re.isContextualProfileView,ae;M[3]!==te||M[4]!==ne?(ae=o("ProfileCometUtils").isViewingSelfProfile(te,ne),M[3]=te,M[4]=ne,M[5]=ae):ae=M[5];var ie=ae,le=(D=B.is_viewer_friend)!=null?D:!1,se=y(0),ue=se[0],ce=se[1],de;M[6]===Symbol.for("react.memo_cache_sentinel")?(de=function(t){ce(t.width)},M[6]=de):de=M[6];var me=r("useResizeObserver")(de),pe=q.avatar_cover_photo_takeover_type,_e=pe!==null&&q.avatar_cover_photo_takeover_type!=="NONE",fe=w&&!le&&!ie,ge=r("gkx")("23876"),he;M[7]===Symbol.for("react.memo_cache_sentinel")?(he=o("CometCoverPhotoEditReducer").getInitialState(),M[7]=he):he=M[7];var ye=h(o("CometCoverPhotoEditReducer").reducer,he),Ce=ye[0],be=ye[1],ve,Se;M[8]!==Ce?(Se={dispatch:be,state:Ce},M[8]=Ce,M[9]=Se):Se=M[9],ve=Se;var Re=ve,Le=(x=($=B.user_avatar)==null?void 0:$.has_fb_app_avatar)!=null?x:!1,Ee;if(M[10]!==(G==null?void 0:G.uri)||M[11]!==V||M[12]!==K||M[13]!==j||M[14]!==(Q==null?void 0:Q.x)||M[15]!==(Q==null?void 0:Q.y)||M[16]!==oe||M[17]!==ie||M[18]!==Ce.isUploading||M[19]!==H){var ke,Ie,Te;Ee=ie&&!oe&&!Ce.isUploading?m.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:m.jsx(C,{currentCoverPhoto:V!==null?{blurredURI:(ke=G==null?void 0:G.uri)!=null?ke:"",focusX:Q==null?void 0:Q.x,focusY:Q==null?void 0:Q.y,height:K,id:(Ie=V==null||(Te=V.photo)==null?void 0:Te.id)!=null?Ie:"",uri:H,width:j}:void 0})}):null,M[10]=G==null?void 0:G.uri,M[11]=V,M[12]=K,M[13]=j,M[14]=Q==null?void 0:Q.x,M[15]=Q==null?void 0:Q.y,M[16]=oe,M[17]=ie,M[18]=Ce.isUploading,M[19]=H,M[20]=Ee}else Ee=M[20];var De=Ee,xe=y(!1),$e=xe[0],Pe=xe[1],Ne,Me;M[21]!==_e?(Me=function(){window.setTimeout(function(){Pe(_e)},L)},Ne=[_e],M[21]=_e,M[22]=Ne,M[23]=Me):(Ne=M[22],Me=M[23]),f(Me,Ne);var we;M[24]!==K||M[25]!==Le||M[26]!==_e||M[27]!==ue?(we=_e?m.jsx(r("ProfileCometAvatarCoverPhotoTakeover.react"),{coverPhotoHeight:K,coverPhotoWidth:ue,hasAvatar:Le,onKeyframeEnd:Pe,stackedButton:null}):null,M[24]=K,M[25]=Le,M[26]=_e,M[27]=ue,M[28]=we):we=M[28];var Ae=we,Fe=(P=Q==null?void 0:Q.x)!=null?P:.5,Oe=(N=Q==null?void 0:Q.y)!=null?N:.5,Be;M[29]!==K||M[30]!==j||M[31]!==Fe||M[32]!==Oe?(Be=m.jsx(r("CometEntityHeaderCoverMedia.react"),{coverMedia:{focusX:Fe,focusY:Oe,height:K,mediaSource:"/images/groups/nickname/comet-nickname-contextual-profile-cover-photo.png",width:j}}),M[29]=K,M[30]=j,M[31]=Fe,M[32]=Oe,M[33]=Be):Be=M[33];var We=Be,qe;if(M[34]!==(G==null?void 0:G.height)||M[35]!==(G==null?void 0:G.uri)||M[36]!==(G==null?void 0:G.width)||M[37]!==(Q==null?void 0:Q.x)||M[38]!==(Q==null?void 0:Q.y)){var Ue,Ve,He,Ge;qe=(G==null?void 0:G.uri)!=null?{focusX:(Ue=Q==null?void 0:Q.x)!=null?Ue:.5,focusY:(Ve=Q==null?void 0:Q.y)!=null?Ve:.5,height:(He=G==null?void 0:G.height)!=null?He:0,uri:G==null?void 0:G.uri,width:(Ge=G==null?void 0:G.width)!=null?Ge:0}:void 0,M[34]=G==null?void 0:G.height,M[35]=G==null?void 0:G.uri,M[36]=G==null?void 0:G.width,M[37]=Q==null?void 0:Q.x,M[38]=Q==null?void 0:Q.y,M[39]=qe}else qe=M[39];var ze;if(M[40]!==V||M[41]!==K||M[42]!==z||M[43]!==j||M[44]!==De||M[45]!==(Q==null?void 0:Q.x)||M[46]!==(Q==null?void 0:Q.y)||M[47]!==ee||M[48]!==J||M[49]!==fe||M[50]!==Ce.shouldShowEditMenu||M[51]!==H){var je,Ke;ze=V!=null&&H!==""?{"aria-label":s._(/*BTDS*/"View profile cover photo"),focusX:(je=Q==null?void 0:Q.x)!=null?je:.5,focusY:(Ke=Q==null?void 0:Q.y)!=null?Ke:.5,height:K,linkProps:z!=null&&!ee&&!fe?{passthroughProps:babelHelpers.extends({},J),url:z}:void 0,mediaSource:H,width:j}:De!=null&&!Ce.shouldShowEditMenu?{"aria-label":s._(/*BTDS*/"Edit cover photo"),height:0,onPress:function(){be({type:"SHOW_EDIT_MENU"})},width:0}:void 0,M[40]=V,M[41]=K,M[42]=z,M[43]=j,M[44]=De,M[45]=Q==null?void 0:Q.x,M[46]=Q==null?void 0:Q.y,M[47]=ee,M[48]=J,M[49]=fe,M[50]=Ce.shouldShowEditMenu,M[51]=H,M[52]=ze}else ze=M[52];var Qe;M[53]!==fe||M[54]!==B||M[55]!==W?(Qe=fe&&ge?m.jsx(r("ProfileCometLockedProfilePopoverTrigger.react"),{user:B,viewer:W,withArrow:!1}):null,M[53]=fe,M[54]=B,M[55]=W,M[56]=Qe):Qe=M[56];var Xe=fe?"short":"normal",Ye;M[57]!==De||M[58]!==me||M[59]!==qe||M[60]!==ze||M[61]!==Qe||M[62]!==Xe?(Ye=m.jsx(r("CometEntityHeaderCoverMedia.react"),{backgroundMedia:qe,coverButton:De,coverMedia:ze,coverMediaContainerRef:me,coverOverlay:Qe,roundCorners:"bottom",showCoverOverlayShade:!1,size:Xe,stackedCoverButton:null}),M[57]=De,M[58]=me,M[59]=qe,M[60]=ze,M[61]=Qe,M[62]=Xe,M[63]=Ye):Ye=M[63];var Je=Ye,Ze;M[64]!==Ae||M[65]!==Je||M[66]!==$e?(Ze=m.jsx(r("CometAnimatePresenceGroup_DO_NOT_USE.react"),{children:$e?m.jsx(r("CometAnimatePresence_DO_NOT_USE.react"),{children:function(t,n){return m.jsx(r("CometAnimatedRevealContainer_DO_NOT_USE.react"),{isPresent:t,onExitComplete:n,children:Ae})}},"boxA"):m.jsx(r("CometAnimatePresence_DO_NOT_USE.react"),{children:function(t,n){return m.jsx(r("CometAnimatedRevealContainer_DO_NOT_USE.react"),{isPresent:t,onExitComplete:n,children:Je})}},"boxB")}),M[64]=Ae,M[65]=Je,M[66]=$e,M[67]=Ze):Ze=M[67];var et=Ze,tt;M[68]===Symbol.for("react.memo_cache_sentinel")?(tt={className:"x5yr21d x1n2onr6 xh8yej3"},M[68]=tt):tt=M[68];var nt;M[69]!==Je||M[70]!==et||M[71]!==U||M[72]!==We||M[73]!==_e||M[74]!==Ce.canReposition?(nt=m.jsx("div",babelHelpers.extends({},tt,{"data-testid":void 0,children:Ce.canReposition?m.jsx(S,{enabled:!0,children:m.jsx(v,{})}):U?We:_e?et:Je})),M[69]=Je,M[70]=et,M[71]=U,M[72]=We,M[73]=_e,M[74]=Ce.canReposition,M[75]=nt):nt=M[75];var rt;M[76]!==te||M[77]!==Ce.isUploading?(rt=Ce.isUploading&&m.jsxs(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:[m.jsx(R,{profileID:te}),m.jsx(b,{height:"100%"})]}),M[76]=te,M[77]=Ce.isUploading,M[78]=rt):rt=M[78];var ot;M[79]!==nt||M[80]!==rt?(ot=m.jsxs(r("CometTransientDialogProvider.react"),{children:[nt,rt]}),M[79]=nt,M[80]=rt,M[81]=ot):ot=M[81];var at;return M[82]!==Re||M[83]!==ot?(at=m.jsx(r("ProfileCometCoverPhotoEditContext").Provider,{value:Re,children:ot}),M[82]=Re,M[83]=ot,M[84]=at):at=M[84],at}function k(e){var t=o("react-compiler-runtime").c(6),n=e.isLockedProfile,a=e.renderedProfile,l=e.user,s=e.viewer,u=n===void 0?!1:n,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=m.jsx(r("CometEntityHeaderCoverMedia.react"),{}),t[0]=c):c=t[0];var d;return t[1]!==u||t[2]!==a||t[3]!==l||t[4]!==s?(d=m.jsx(r("CometPlaceholder.react"),{fallback:c,name:i.id,children:m.jsx(E,{isLockedProfile:u,renderedProfile:a,user:l,viewer:s})}),t[1]=u,t[2]=a,t[3]=l,t[4]=s,t[5]=d):d=t[5],d}l.default=k}),226);
__d("ProfileCometEntityConvergenceHeader_profileHeaderRenderer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"FDSEntityHeaderStickyBottomRow_entity"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometHeaderPrimaryActionBar_actor"}]},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometHeaderMoreActionButton_actor"}]},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometHeaderActionBar_actor"}]},{args:null,kind:"FragmentSpread",name:"ProfileCometCoverPhoto_user"},{args:null,kind:"FragmentSpread",name:"ProfileCometCoverPhoto_renderedProfile"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePicture_user"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePicture_profile"},{alias:null,args:[{kind:"Literal",name:"supported",value:"1ypIjh"}],concreteType:null,kind:"LinkedField",name:"header_top_row",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_topRow",fragmentName:"ProfileCometDirectoryHeaderTopRow_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBProfileDirectoryHeaderTopRowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_topRow",fragmentName:"ProfileCometEntityConvergenceHeaderTopRow_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBProfileNonDirectoryHeaderTopRowRenderer",abstractKey:null}],storageKey:'header_top_row(supported:"1ypIjh")'},{alias:null,args:[{kind:"Literal",name:"supported",value:"2XtNVV"}],concreteType:null,kind:"LinkedField",name:"profile_tabs",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_profileTabs",fragmentName:"ProfileCometTabs_cometProfileTabs",fragmentPropName:"cometProfileTabs",kind:"ModuleImport"}],type:"ProfileDefaultTabs",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_profileTabs",fragmentName:"ProfileCometLoggedOutTabsWithJoinCTA_cometProfileTabs",fragmentPropName:"cometProfileTabs",kind:"ModuleImport"}],type:"ProfileLoggedOutTabsWithJoinCTA",abstractKey:null}],storageKey:'profile_tabs(supported:"2XtNVV")'},{args:null,kind:"FragmentSpread",name:"ProfileCometInfo_user"},{alias:null,args:null,concreteType:"WEMPrivateSharingBundle",kind:"LinkedField",name:"wem_private_sharing_bundle",plural:!1,selections:[{alias:null,args:null,concreteType:"WemPrivateSharingControlModel",kind:"LinkedField",name:"private_sharing_control_model_for_user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"private_sharing_enabled",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_comet_floating_action_bar",storageKey:null},{args:null,kind:"FragmentSpread",name:"ProfileCometProfileHeaderBanner_user"},{args:[{kind:"Literal",name:"renderLocation",value:"WWW_PROFILE"}],kind:"FragmentSpread",name:"useRecommendationsUnit_node"},{alias:null,args:null,kind:"ScalarField",name:"avatar_cover_photo_takeover_type",storageKey:null}],storageKey:null},action:"THROW",path:"user"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometCoverPhoto_viewer"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePicture_viewer"}],storageKey:null},action:"THROW",path:"viewer"},{alias:null,args:[{kind:"Literal",name:"nuxid",value:8362}],concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometTabs_mentions_nux"}],storageKey:"nux(nuxid:8362)"},{alias:null,args:null,kind:"ScalarField",name:"restriction_violation_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legal_reporting_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legal_reporting_cta_type",storageKey:null}],type:"XFBProfileEntityConvergenceHeaderRenderer",abstractKey:null};a.exports=e}),null);
__d("ProfileCometInfo_user.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometInfo_user",selections:[{alias:null,args:null,kind:"ScalarField",name:"alternate_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username_for_profile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ai_profile_attribution_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_verified_badge_on_profile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_visibly_memorialized",storageKey:null},{alias:null,args:null,concreteType:"ProfileSocialContext",kind:"LinkedField",name:"profile_social_context",plural:!1,selections:[{args:null,documentName:"ProfileCometInfo_user__profileSocialContext",fragmentName:"ProfileCometInfoSocialContext_profileSocialContext",fragmentPropName:"profileSocialContext",kind:"ModuleImport"}],storageKey:null}],type:"User",abstractKey:null};a.exports=e}),null);
__d("ProfileCometInfo.react",["fbt","BaseHeading.react","CometColumn.react","CometColumnItem.react","CometRelay","FDSText.react","FDSTextPairing.react","NMEBadgeWithImpressionLogs","ProfileCometInfo_user.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react"));function d(t){var a,i,l,u=o("react-compiler-runtime").c(35),d=t.align,m=t.user,p=d===void 0?"center":d,_=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometInfo_user.graphql"),m),f=(a=_==null?void 0:_.name)!=null?a:"",g=_.id,h=_==null?void 0:_.show_verified_badge_on_profile,y=(i=_.alternate_name)!=null?i:"",C=(l=_.username_for_profile)!=null?l:"",b=_.is_visibly_memorialized===!0,v=_.ai_profile_attribution_subtitle,S;u[0]!==h||u[1]!==g?(S=function(){return c.jsxs(c.Fragment,{children:["\xA0",c.jsx(r("NMEBadgeWithImpressionLogs"),{is_verified:h===!0,profile_id:g,size:"large",span_syle:null,surface:"fb_profile_comet"})]})},u[0]=h,u[1]=g,u[2]=S):S=u[2];var R=S,L;u[3]!==R?(L=R(),u[3]=R,u[4]=L):L=u[4];var E;u[5]!==y?(E=y!==""&&c.jsxs("span",{className:"x1q74xe4 x1fcty0u",children:[" ",s._(/*BTDS*/"({alternate name})",[s._param("alternate name",y)])]}),u[5]=y,u[6]=E):E=u[6];var k;u[7]!==f||u[8]!==L||u[9]!==E?(k=c.jsxs(r("BaseHeading.react"),{isPrimaryHeading:!0,children:[f,L,E]}),u[7]=f,u[8]=L,u[9]=E,u[10]=k):k=u[10];var I;u[11]!==p||u[12]!==k?(I=c.jsx(r("FDSTextPairing.react"),{headline:k,headlineColor:"primary",level:"entityHeader1",textAlign:p}),u[11]=p,u[12]=k,u[13]=I):I=u[13];var T=I,D;u[14]!==p||u[15]!==b?(D=b&&c.jsx(r("CometColumnItem.react"),{children:c.jsx(r("FDSText.react"),{align:p==="start"?"auto":"center",color:"secondary",type:"headline3",children:s._(/*BTDS*/"Remembering")})}),u[14]=p,u[15]=b,u[16]=D):D=u[16];var x=b?12:0,$;u[17]!==T||u[18]!==x?($=c.jsx(r("CometColumnItem.react"),{paddingTop:x,children:T}),u[17]=T,u[18]=x,u[19]=$):$=u[19];var P;u[20]!==v||u[21]!==p?(P=v!==null&&c.jsx(r("CometColumnItem.react"),{paddingTop:16,children:c.jsx(r("FDSText.react"),{align:p,color:"secondary",type:"headline3",children:s._(/*BTDS*/"{ai attribution}",[s._param("ai attribution",v)])})}),u[20]=v,u[21]=p,u[22]=P):P=u[22];var N;u[23]!==p||u[24]!==C?(N=C.length>0&&c.jsx(r("CometColumnItem.react"),{paddingTop:16,children:c.jsx(r("FDSText.react"),{align:p,color:"secondary",type:"headline3",children:s._(/*BTDS*/"\u0040{username}",[s._param("username",C)])})}),u[23]=p,u[24]=C,u[25]=N):N=u[25];var M;u[26]!==_.profile_social_context?(M=(_==null?void 0:_.profile_social_context)!=null&&c.jsx(o("CometRelay").MatchContainer,{match:_==null?void 0:_.profile_social_context}),u[26]=_.profile_social_context,u[27]=M):M=u[27];var w;return u[28]!==p||u[29]!==P||u[30]!==N||u[31]!==M||u[32]!==D||u[33]!==$?(w=c.jsxs(r("CometColumn.react"),{align:p,children:[D,$,P,N,M]}),u[28]=p,u[29]=P,u[30]=N,u[31]=M,u[32]=D,u[33]=$,u[34]=w):w=u[34],w}l.default=d}),226);
__d("ProfileCometProfileHeaderBanner_user.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometProfileHeaderBanner_user",selections:[{alias:"top_banner",args:[{kind:"Literal",name:"render_location",value:"PROFILE_HEADER"},{kind:"Literal",name:"supported",value:"1R3rmD"}],concreteType:null,kind:"LinkedField",name:"comet_profile_banner",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometProfileHeaderBanner_user",fragmentName:"ProfileCometPendingFriendBanner_cometProfileBanner",fragmentPropName:"cometProfileBanner",kind:"ModuleImport"}],type:"ProfilePendingFriendBanner",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometProfileHeaderBanner_user",fragmentName:"ProfilePlusCometAdminNoticeProfileBanner_cometProfileBanner",fragmentPropName:"cometProfileBanner",kind:"ModuleImport"}],type:"ProfilePlusAdminNoticeRenderer",abstractKey:null}],storageKey:'comet_profile_banner(render_location:"PROFILE_HEADER",supported:"1R3rmD")'}],type:"User",abstractKey:null};a.exports=e}),null);
__d("ProfileCometProfileHeaderBanner.react",["CometRelay","ProfileCometProfileHeaderBanner_user.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(3),a=t.user,i=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometProfileHeaderBanner_user.graphql"),a);if((i==null?void 0:i.top_banner)!=null){var l;r[0]===Symbol.for("react.memo_cache_sentinel")?(l={className:"xw7yly9"},r[0]=l):l=r[0];var s=i==null?void 0:i.top_banner,c;return r[1]!==s?(c=u.jsx("div",babelHelpers.extends({},l,{"data-testid":void 0,children:u.jsx(o("CometRelay").MatchContainer,{match:s})})),r[1]=s,r[2]=c):c=r[2],c}return null}l.default=c}),98);
__d("ProfileCometProfilePictureContainer_profile.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},t={kind:"Variable",name:"scale",variableName:"scale"},n=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureContainer_profile",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:"profilePhoto",args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[e,{args:null,kind:"FragmentSpread",name:"useCometPhotoViewerPlaceholderPassthroughProps_photo"}],storageKey:null},{alias:"profilePicLarge",args:[{kind:"Literal",name:"height",value:168},t,{kind:"Literal",name:"width",value:168}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:n,storageKey:null},{alias:"profilePicMedium",args:[{kind:"Literal",name:"height",value:132},t,{kind:"Literal",name:"width",value:132}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:n,storageKey:null},{alias:"profilePicSmall",args:[{kind:"Literal",name:"height",value:100},t,{kind:"Literal",name:"width",value:100}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"ProfileVideo",kind:"LinkedField",name:"profile_video",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[e],storageKey:null},{args:null,kind:"FragmentSpread",name:"FDSProfileVideoSection_profileVideo"}],storageKey:null}],type:"Profile",abstractKey:"__isProfile"}})();a.exports=e}),null);
__d("ProfileCometProfilePictureContainer_user.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{kind:"Literal",name:"location",value:"profile"}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureContainer_user",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},{alias:null,args:[{kind:"Literal",name:"render_location",value:"PROFILE_PICTURE"}],concreteType:"ProfileActiveMessengerRoom",kind:"LinkedField",name:"profile_active_messenger_room",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:'profile_active_messenger_room(render_location:"PROFILE_PICTURE")'},{args:null,kind:"FragmentSpread",name:"useProfileCometStoryStatus_user"},{alias:null,args:null,kind:"ScalarField",name:"is_additional_profile_plus",storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"delegate_page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_business_page_active",storageKey:null}],storageKey:null},{args:e,kind:"FragmentSpread",name:"useUserCometLiveRing_user"},{alias:null,args:e,concreteType:"Video",kind:"LinkedField",name:"live_video_for_comet_live_ring",plural:!1,selections:[{args:null,documentName:"ProfileCometProfilePictureContainer_user_video",fragmentName:"LiveVideoCometLiveBadgeText_video",fragmentPropName:"video",kind:"ModuleImport"}],storageKey:'live_video_for_comet_live_ring(location:"profile")'},{alias:null,args:null,concreteType:"MsgrUserRichStatus",kind:"LinkedField",name:"msgr_user_rich_status",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWNoteContentBubbleWrapper_note"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"note_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null}})();a.exports=e}),null);
__d("ProfileCometProfilePictureContainer_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureContainer_viewer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureEditButton_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("ProfileCometProfilePicture_profile.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometProfilePicture_profile",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureContainer_profile"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureEditMenu_profile"}]},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureTemporaryEditMenu_profile"}]},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureViewMenu_profile"}]},{alias:null,args:null,kind:"ScalarField",name:"profile_picture_expiration_time",storageKey:null}],type:"Profile",abstractKey:"__isProfile"};a.exports=e}),null);
__d("ProfileCometProfilePicture_user.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometProfilePicture_user",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureContainer_user"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometLockedProfilePopover_user"}]},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureViewMenu_user"}]},{args:null,kind:"FragmentSpread",name:"useProfileCometStoryStatus_user"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureEditMenu_user"}]},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureTemporaryEditMenu_user"}]},{alias:null,args:[{kind:"Literal",name:"location",value:"profile"}],kind:"ScalarField",name:"is_live_for_comet_live_ring",storageKey:'is_live_for_comet_live_ring(location:"profile")'},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null}],type:"User",abstractKey:null};a.exports=e}),null);
__d("ProfileCometProfilePicture_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometProfilePicture_viewer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometLockedProfilePopover_viewer"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureContainer_viewer"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureEditMenu_viewer"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureTemporaryEditMenu_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("useUUID",["react","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useRef;function u(){var e=s(null);return e.current===null&&(e.current=r("uuidv4")()),e.current}l.useUUID=u}),98);
__d("ProfileCometProfilePicture.react",["fbt","CometPlaceholder.react","CometRelay","FDSBadge.react","FDSLazyPopoverTrigger.react","FDSProfilePhoto.react","FDSProfileVideoSection.react","FbNotesEventsWebLogger","FbNotesTypeUtils","JSResourceForInteraction","MWInboxTrayNoteCreationDialog.entrypoint","ProfileCometContext","ProfileCometContextualProfileContext","ProfileCometProfilePictureContainer_profile.graphql","ProfileCometProfilePictureContainer_user.graphql","ProfileCometProfilePictureContainer_viewer.graphql","ProfileCometProfilePictureGlimmer.react","ProfileCometProfilePicture_profile.graphql","ProfileCometProfilePicture_user.graphql","ProfileCometProfilePicture_viewer.graphql","ProfileCometUtils","cr:9645","deferredLoadComponent","getCometNotesGating","qpl","react","react-compiler-runtime","requireDeferredForDisplay","useCometInteractionTracing","useCometPhotoViewerPlaceholderPassthroughProps","useMWXEntryPointDialog","useProfileCometStoryStatus","useUUID","useUserCometLiveRing","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p,_,f=_||(_=o("react")),g=_,h=g.useCallback,y=g.useContext,C=g.useState,b=r("JSResourceForInteraction")("ProfileCometLockedProfilePopover.react").__setRef("ProfileCometProfilePicture.react"),v=r("JSResourceForInteraction")("ProfileCometProfilePictureEditMenu.react").__setRef("ProfileCometProfilePicture.react"),S=r("JSResourceForInteraction")("ProfileCometProfilePictureViewMenu.react").__setRef("ProfileCometProfilePicture.react"),R=r("JSResourceForInteraction")("ProfileCometProfilePictureTemporaryEditMenu.react").__setRef("ProfileCometProfilePicture.react"),L=r("deferredLoadComponent")(r("requireDeferredForDisplay")("ProfileCometProfilePictureEditButton.react").__setRef("ProfileCometProfilePicture.react")),E=function(t){switch(t){case"small":return 100;case"medium":return 132;case"large":return 168}},k=I;function I(t){var a,l,d,m=o("react-compiler-runtime").c(93),p=t.forceRenderActivityBadge,_=t.onHoverIn,g=t.onHoverOut,h=t.onPress,b=t.onPressIn,v=t.profile,S=t.ref,R=t.size,k=t.user,I=t.viewer,D=C(!1),x=D[0],$=D[1],P=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometProfilePictureContainer_user.graphql"),k),N=o("CometRelay").useFragment(u!==void 0?u:u=n("ProfileCometProfilePictureContainer_profile.graphql"),v),M=o("CometRelay").useFragment(c!==void 0?c:c=n("ProfileCometProfilePictureContainer_viewer.graphql"),I),w=r("useProfileCometStoryStatus")(P),A=w.shouldShowCloseFriendsBadge,F=w.storyStatus,O=o("useUserCometLiveRing").useUserCometLiveRing(P,"user_timeline"),B=O.isLive,W=O.liveURL,q=O.passthroughProps,U;m[0]===Symbol.for("react.memo_cache_sentinel")?(U=r("qpl")._(30615365,"1240"),m[0]=U):U=m[0];var V=r("useCometInteractionTracing")(U,"fluid","INTERACTION"),H;m[1]!==x||m[2]!==h||m[3]!==V?(H=h?function(e){$(!x),V(function(){return h(e)})}:void 0,m[1]=x,m[2]=h,m[3]=V,m[4]=H):H=m[4];var G=H,z;m[5]!==R?(z=E(R),m[5]=R,m[6]=z):z=m[6];var j=z,K;if(R==="small"){var Q;K=(Q=N.profilePicSmall)==null?void 0:Q.uri}else if(R==="medium"){var X;K=(X=N.profilePicMedium)==null?void 0:X.uri}else{var Y;K=(Y=N.profilePicLarge)==null?void 0:Y.uri}var J;m[7]!==N.profilePhoto||m[8]!==K?(J={photo:N.profilePhoto,placeholderImageSrc:K},m[7]=N.profilePhoto,m[8]=K,m[9]=J):J=m[9];var Z=r("useCometPhotoViewerPlaceholderPassthroughProps")(J),ee=y(r("ProfileCometContext")),te=ee.isInViewAs,ne=ee.profileID,re=ee.viewerID,oe=y(r("ProfileCometContextualProfileContext")),ae=oe.isContextualProfileView,ie;m[10]!==ne||m[11]!==re?(ie=o("ProfileCometUtils").isViewingSelfProfile(ne,re),m[10]=ne,m[11]=re,m[12]=ie):ie=m[12];var le=ie,se;m[13]===Symbol.for("react.memo_cache_sentinel")?(se={size:"large"},m[13]=se):se=m[13];var ue;m[14]!==P.live_video_for_comet_live_ring?(ue=f.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:f.jsx(o("CometRelay").MatchContainer,{match:P.live_video_for_comet_live_ring,props:se})}),m[14]=P.live_video_for_comet_live_ring,m[15]=ue):ue=m[15];var ce=ue,de;m[16]===Symbol.for("react.memo_cache_sentinel")?(de=o("getCometNotesGating").getIsProfileNotesEnabled(),m[16]=de):de=m[16];var me=de,pe=P.msgr_user_rich_status,_e=T,fe;if(m[17]!==(pe==null?void 0:pe.visibility)||m[18]!==le||m[19]!==P.is_viewer_friend){var ge;fe=(le||_e(pe==null?void 0:pe.visibility,(ge=P.is_viewer_friend)!=null?ge:!1))&&me,m[17]=pe==null?void 0:pe.visibility,m[18]=le,m[19]=P.is_viewer_friend,m[20]=fe}else fe=m[20];var he=fe,ye=o("useUUID").useUUID(),Ce;m[21]===Symbol.for("react.memo_cache_sentinel")?(Ce={},m[21]=Ce):Ce=m[21];var be=r("useMWXEntryPointDialog")(r("MWInboxTrayNoteCreationDialog.entrypoint"),Ce),ve=be[0],Se=be[1],Re=be[2],Le=be[3],Ee;m[22]!==pe||m[23]!==ye||m[24]!==he?(Ee={onVisible:function(){if(he&&pe!=null&&pe.id!=null){var e;o("FbNotesEventsWebLogger").logFbNotesEvent({action:"fb_notes_profile_consumption_bubble_impression",creationSessionId:ye,entrypoint:"profile_notes_bubble",hasText:pe.description!=null,noteId:pe.id,noteType:o("FbNotesTypeUtils").getNoteTypeNumericValue(pe.note_type),textLength:(e=pe.description)==null||(e=e.length)==null?void 0:e.toString()})}else he&&pe==null&&o("FbNotesEventsWebLogger").logFbNotesEvent({action:"fb_notes_profile_creation_impression",creationSessionId:ye,entrypoint:"profile_notes_bubble"})}},m[22]=pe,m[23]=ye,m[24]=he,m[25]=Ee):Ee=m[25];var ke=r("useVisibilityObserver")(Ee),Ie;m[26]!==pe||m[27]!==ye||m[28]!==he||m[29]!==ve?(Ie=function(){if(o("FbNotesEventsWebLogger").logFbNotesEvent({action:"fb_notes_entry_click",creationSessionId:ye,entrypoint:"profile_notes_bubble"}),he){if(pe!=null&&pe.id!=null){var e;o("FbNotesEventsWebLogger").logFbNotesEvent({action:"fb_notes_profile_consumption_bubble_click",creationSessionId:ye,entrypoint:"profile_notes_bubble",hasText:pe.description!=null,noteId:pe.id,noteType:o("FbNotesTypeUtils").getNoteTypeNumericValue(pe.note_type),textLength:(e=pe.description)==null||(e=e.length)==null?void 0:e.toString()})}else o("FbNotesEventsWebLogger").logFbNotesEvent({action:"fb_notes_profile_creation_click",creationSessionId:ye,entrypoint:"profile_notes_bubble"});ve({})}},m[26]=pe,m[27]=ye,m[28]=he,m[29]=ve,m[30]=Ie):Ie=m[30];var Te=Ie,De;m[31]!==pe?(De=pe==null?s._(/*BTDS*/"Share a thought..."):void 0,m[31]=pe,m[32]=De):De=m[32];var xe=De,$e=void 0;if(P.profile_active_messenger_room===null)if(le&&!ae&&!me){var Pe;m[33]!==M?(Pe={icon:f.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:f.jsx(L,{viewer:M})}),type:"trigger"},m[33]=M,m[34]=Pe):Pe=m[34],$e=Pe}else{var Ne;if(p||(P.availability==="ACTIVE"||P.is_additional_profile_plus===!0&&((Ne=P.delegate_page)==null?void 0:Ne.is_business_page_active)===!0)&&!B){var Me;m[35]===Symbol.for("react.memo_cache_sentinel")?(Me={className:"x78zum5"},m[35]=Me):Me=m[35];var we;m[36]===Symbol.for("react.memo_cache_sentinel")?(we={icon:f.jsx("div",babelHelpers.extends({},Me,{children:f.jsx(r("FDSBadge.react"),{accessibilityText:s._(/*BTDS*/"Active status indicator"),border:"white",color:"green",isProfileBadge:!0,size:24})})),type:"trigger"},m[36]=we):we=m[36],$e=we}}var Ae;if(m[37]!==te||m[38]!==B||m[39]!==q||m[40]!==W||m[41]!==h||m[42]!==Z||m[43]!==((a=N.profilePhoto)==null?void 0:a.url)||m[44]!==((l=N.profile_video)==null||(l=l.associated_video)==null?void 0:l.url)){var Fe,Oe,Be,We,qe,Ue,Ve;Ae=h==null&&!te&&(((Fe=N.profilePhoto)==null?void 0:Fe.url)!=null||((Oe=N.profile_video)==null||(Oe=Oe.associated_video)==null?void 0:Oe.url)!=null)?{passthroughProps:babelHelpers.extends({},B?q:{},Z),url:(Be=W!=null?W:(We=N.profilePhoto)==null?void 0:We.url)!=null?Be:(qe=N.profile_video)==null||(qe=qe.associated_video)==null?void 0:qe.url}:void 0,m[37]=te,m[38]=B,m[39]=q,m[40]=W,m[41]=h,m[42]=Z,m[43]=(Ue=N.profilePhoto)==null?void 0:Ue.url,m[44]=(Ve=N.profile_video)==null||(Ve=Ve.associated_video)==null?void 0:Ve.url,m[45]=Ae}else Ae=m[45];var He=Ae,Ge;m[46]!==N.name?(Ge=N.name!=null&&N.name!==""?N.name:s._(/*BTDS*/"Profile photo"),m[46]=N.name,m[47]=Ge):Ge=m[47];var ze=Ge;if(le){var je;m[48]===Symbol.for("react.memo_cache_sentinel")?(je=s._(/*BTDS*/"Profile picture actions"),m[48]=je):je=m[48],ze=je}if(B){var Ke;m[49]!==ze?(Ke=s._(/*BTDS*/"{non-live profile picutre label} is on Live",[s._param("non-live profile picutre label",ze)]),m[49]=ze,m[50]=Ke):Ke=m[50],ze=Ke}var Qe=(d=N.profile_video)!=null?d:void 0,Xe=$e!=null?$e:void 0,Ye;m[51]!==Qe?(Ye=Qe?{ProfileVideoSection:r("FDSProfileVideoSection.react"),profileVideoFragment:Qe}:void 0,m[51]=Qe,m[52]=Ye):Ye=m[52];var Je=K!=null?K:"",Ze;m[53]!==Je?(Ze={uri:Je},m[53]=Je,m[54]=Ze):Ze=m[54];var et=B?"live":F,tt;m[55]!==ze||m[56]!==x||m[57]!==He||m[58]!==_||m[59]!==g||m[60]!==b||m[61]!==G||m[62]!==S||m[63]!==A||m[64]!==j||m[65]!==Xe||m[66]!==Ye||m[67]!==Ze||m[68]!==et?(tt=f.jsx(r("FDSProfilePhoto.react"),{addOn:Xe,alt:ze,"aria-expanded":x,"aria-label":ze,linkProps:He,onHoverIn:_,onHoverOut:g,onPress:G,onPressIn:b,profileVideo:Ye,ref:S,shape:"circle",shouldShowCloseFriendsBadge:A,size:j,source:Ze,storyStatus:et}),m[55]=ze,m[56]=x,m[57]=He,m[58]=_,m[59]=g,m[60]=b,m[61]=G,m[62]=S,m[63]=A,m[64]=j,m[65]=Xe,m[66]=Ye,m[67]=Ze,m[68]=et,m[69]=tt):tt=m[69];var nt=tt;if(n("cr:9645")&&he){var rt;m[70]!==pe?(rt=(pe==null?void 0:pe.description)!=null?s._(/*BTDS*/"View note: {note content}",[s._param("note content",pe.description)]):void 0,m[70]=pe,m[71]=rt):rt=m[71];var ot=R==="small",at;m[72]===Symbol.for("react.memo_cache_sentinel")?(at={className:"x1jx94hy x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1iorvi4 x11lfxj5 xjkvuk6 x135b78x"},m[72]=at):at=m[72];var it;m[73]!==ce||m[74]!==nt?(it=f.jsxs("div",babelHelpers.extends({},at,{"data-testid":void 0,children:[nt,ce]})),m[73]=ce,m[74]=nt,m[75]=it):it=m[75];var lt;m[76]!==pe||m[77]!==Te||m[78]!==Se||m[79]!==Re||m[80]!==Le||m[81]!==xe||m[82]!==rt||m[83]!==ot||m[84]!==it?(lt=f.jsx(n("cr:9645"),{"aria-label":rt,note:pe,onHoverIn:Se,onHoverOut:Re,onPress:Te,onPressIn:Le,placeholder:xe,renderSmall:ot,children:it}),m[76]=pe,m[77]=Te,m[78]=Se,m[79]=Re,m[80]=Le,m[81]=xe,m[82]=rt,m[83]=ot,m[84]=it,m[85]=lt):lt=m[85];var st;return m[86]!==ke||m[87]!==lt?(st=f.jsx("div",{ref:ke,children:lt}),m[86]=ke,m[87]=lt,m[88]=st):st=m[88],st}var ut;m[89]===Symbol.for("react.memo_cache_sentinel")?(ut={className:"x1jx94hy x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1iorvi4 x11lfxj5 xjkvuk6 x135b78x"},m[89]=ut):ut=m[89];var ct;return m[90]!==ce||m[91]!==nt?(ct=f.jsxs("div",babelHelpers.extends({},ut,{"data-testid":void 0,children:[nt,ce]})),m[90]=ce,m[91]=nt,m[92]=ct):ct=m[92],ct}function T(e,t){if(!e)return!1;switch(e){case"PUBLIC":return!0;case"FRIENDS":case"CONTACTS":return t;case"CUSTOM":case"META_INTERNAL":default:return!1}}function D(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.size,l;t[0]!==a?(l=f.jsx(r("ProfileCometProfilePictureGlimmer.react"),{size:a}),t[0]=a,t[1]=l):l=t[1];var s;return t[2]!==n||t[3]!==l?(s=f.jsx(r("CometPlaceholder.react"),{fallback:l,name:i.id,children:n}),t[2]=n,t[3]=l,t[4]=s):s=t[4],s}function x(e){var t,a,i=o("react-compiler-runtime").c(57),l=e.forceRenderActivityBadge,s=e.isLockedProfile,u=e.onPressOverride,c=e.profile,_=e.size,g=e.user,h=e.viewer,C=l===void 0?!1:l,L=_===void 0?"large":_,I=o("CometRelay").useFragment(d!==void 0?d:d=n("ProfileCometProfilePicture_user.graphql"),g),T=o("CometRelay").useFragment(m!==void 0?m:m=n("ProfileCometProfilePicture_viewer.graphql"),h),x=o("CometRelay").useFragment(p!==void 0?p:p=n("ProfileCometProfilePicture_profile.graphql"),c),$=y(r("ProfileCometContext")),P=$.profileID,N=$.viewerID,M=r("useProfileCometStoryStatus")(I),w=M.storyStatus,A=(t=I.is_live_for_comet_live_ring)!=null?t:!1,F=o("ProfileCometUtils").isViewingSelfProfile(P,N),O=(a=I.is_viewer_friend)!=null?a:!1,B=s&&!F&&!O,W=y(r("ProfileCometContextualProfileContext")),q=W.isContextualProfileView,U=(x==null?void 0:x.profile_picture_expiration_time)!=null,V=B?"small":L,H;i[0]!==V?(H=E(V),i[0]=V,i[1]=H):H=i[1];var G=H;if(B){var z;i[2]!==I||i[3]!==T?(z={user:I,viewer:T,withArrow:!0},i[2]=I,i[3]=T,i[4]=z):z=i[4];var j;i[5]!==V||i[6]!==C||i[7]!==x||i[8]!==B||i[9]!==I?(j=function(t,n,r,o,a,i){return f.jsx(k,{forceRenderActivityBadge:C,onHoverIn:o,onHoverOut:a,onPress:n,onPressIn:i,profile:x,ref:t,showPrivateSharingNonFriendTreatment:B,size:V,user:I})},i[5]=V,i[6]=C,i[7]=x,i[8]=B,i[9]=I,i[10]=j):j=i[10];var K;i[11]!==z||i[12]!==j?(K=f.jsx(r("FDSLazyPopoverTrigger.react"),{align:"middle",popoverProps:z,popoverResource:b,position:"below",preloadTrigger:"button",children:j}),i[11]=z,i[12]=j,i[13]=K):K=i[13];var Q;return i[14]!==G||i[15]!==K?(Q=f.jsx(D,{size:G,children:K}),i[14]=G,i[15]=K,i[16]=Q):Q=i[16],Q}if(F&&!q&&!A){var X;i[17]!==x||i[18]!==I||i[19]!==T?(X={includeViewOption:!0,profile:x,user:I,viewer:T},i[17]=x,i[18]=I,i[19]=T,i[20]=X):X=i[20];var Y=U?R:v,J;i[21]!==V||i[22]!==C||i[23]!==x||i[24]!==I||i[25]!==T?(J=function(t,n,r,o,a,i){return f.jsx(k,{forceRenderActivityBadge:C,onHoverIn:o,onHoverOut:a,onPress:n,onPressIn:i,profile:x,ref:t,size:V,user:I,viewer:T})},i[21]=V,i[22]=C,i[23]=x,i[24]=I,i[25]=T,i[26]=J):J=i[26];var Z;i[27]!==X||i[28]!==Y||i[29]!==J?(Z=f.jsx(r("FDSLazyPopoverTrigger.react"),{align:"middle",popoverProps:X,popoverResource:Y,preloadTrigger:"button",children:J}),i[27]=X,i[28]=Y,i[29]=J,i[30]=Z):Z=i[30];var ee;return i[31]!==G||i[32]!==Z?(ee=f.jsx(D,{size:G,children:Z}),i[31]=G,i[32]=Z,i[33]=ee):ee=i[33],ee}if((w==="unseen"||w==="seen")&&!A){var te;i[34]!==x||i[35]!==I?(te={profile:x,user:I},i[34]=x,i[35]=I,i[36]=te):te=i[36];var ne;i[37]!==V||i[38]!==C||i[39]!==x||i[40]!==I?(ne=function(t,n,r,o,a,i){return f.jsx(k,{forceRenderActivityBadge:C,onHoverIn:o,onHoverOut:a,onPress:n,onPressIn:i,profile:x,ref:t,size:V,user:I})},i[37]=V,i[38]=C,i[39]=x,i[40]=I,i[41]=ne):ne=i[41];var re;i[42]!==te||i[43]!==ne?(re=f.jsx(r("FDSLazyPopoverTrigger.react"),{align:"middle",popoverProps:te,popoverResource:S,preloadTrigger:"button",children:ne}),i[42]=te,i[43]=ne,i[44]=re):re=i[44];var oe;return i[45]!==G||i[46]!==re?(oe=f.jsx(D,{size:G,children:re}),i[45]=G,i[46]=re,i[47]=oe):oe=i[47],oe}var ae;i[48]!==V||i[49]!==C||i[50]!==u||i[51]!==x||i[52]!==I?(ae=f.jsx(k,{forceRenderActivityBadge:C,onPress:u,profile:x,size:V,user:I}),i[48]=V,i[49]=C,i[50]=u,i[51]=x,i[52]=I,i[53]=ae):ae=i[53];var ie;return i[54]!==G||i[55]!==ae?(ie=f.jsx(D,{size:G,children:ae}),i[54]=G,i[55]=ae,i[56]=ie):ie=i[56],ie}l.default=x}),226);
__d("useRecommendationsUnit_node.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"renderLocation"}],kind:"Fragment",metadata:null,name:"useRecommendationsUnit_node",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"if_viewer_can_see_pymk_unit_on_initial_load",plural:!1,selections:[{args:[{kind:"Variable",name:"renderLocation",variableName:"renderLocation"}],documentName:"useRecommendationsUnit_node_load",fragmentName:"RecommendationsUnit_user",fragmentPropName:"user",kind:"ModuleImport"}],storageKey:null}],type:"User",abstractKey:null};a.exports=e}),null);
__d("useRecommendationsUnit",["CometPlaceholder.react","CometRelay","RecommendationsUnitContext","react","react-compiler-runtime","useRecommendationsUnit_node.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext;function d(t){var a=o("react-compiler-runtime").c(5),l=t.node$key,s=o("CometRelay").useFragment(e!==void 0?e:e=n("useRecommendationsUnit_node.graphql"),l),d=c(o("RecommendationsUnitContext").RecommendationsUnitContext),m=d.isRecommendationsUnitExpanded,p=d.recommendationsUnitEntryPointContainer,_=d.shouldExpandOnInitialLoad;if(_===!0){var f;a[0]!==s?(f={user:s},a[0]=s,a[1]=f):f=a[1];var g;return a[2]!==s.if_viewer_can_see_pymk_unit_on_initial_load||a[3]!==f?(g=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:u.jsx(o("CometRelay").MatchContainer,{match:s.if_viewer_can_see_pymk_unit_on_initial_load,props:f})}),a[2]=s.if_viewer_can_see_pymk_unit_on_initial_load,a[3]=f,a[4]=g):g=a[4],g}return m?p:null}l.default=d}),98);
__d("ProfileCometEntityConvergenceHeader.react",["CometPageletWithDiv.react","CometRelay","FDSEntityHeaderBottomRow.react","FDSEntityHeaderCoverPhotoRow.react","FDSEntityHeaderStickyBottomRow.react","FDSEntityPageHeader.react","ProfileCometContext","ProfileCometCoverPhoto.react","ProfileCometEntityConvergenceHeader_profileHeaderRenderer.graphql","ProfileCometInfo.react","ProfileCometProfileHeaderBanner.react","ProfileCometProfilePicture.react","ProfileCometTabsGlimmer.react","ProfileCometUtils","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","useIsCometOnMobile","useProfileCometEngagementEventsImpression","useProfileCometIsCenteredLayout","useRecommendationsUnit"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext,d=r("deferredLoadComponent")(r("requireDeferredForDisplay")("ProfileCometHeaderPrimaryActionBar.react").__setRef("ProfileCometEntityConvergenceHeader.react")),m=r("deferredLoadComponent")(r("requireDeferredForDisplay")("ProfileCometHeaderMoreActionButton.react").__setRef("ProfileCometEntityConvergenceHeader.react")),p=r("deferredLoadComponent")(r("requireDeferredForDisplay")("ProfileCometHeaderActionBar.react").__setRef("ProfileCometEntityConvergenceHeader.react"));function _(t){var a,i,l,s=o("react-compiler-runtime").c(65),_=t.profileHeaderRenderer,f=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometEntityConvergenceHeader_profileHeaderRenderer.graphql"),_),g=f.legal_reporting_cta_type,h=f.legal_reporting_uri,y=f.nux,C=f.restriction_violation_status,b=f.user,v=f.viewer,S=r("useIsCometOnMobile")(),R=c(r("ProfileCometContext")),L=R.isInViewAs,E=R.profileID,k=R.viewerID,I;s[0]!==b?(I={node$key:b},s[0]=b,s[1]=I):I=s[1];var T=r("useRecommendationsUnit")(I),D=r("useProfileCometIsCenteredLayout")(),x;s[2]!==b?(x=u.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"FloatingProfileActions",children:u.jsx(p,{actor:b})}),s[2]=b,s[3]=x):x=s[3];var $=x,P;s[4]!==b?(P=u.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"ProfileActions",children:u.jsx(d,{actor:b})}),s[4]=b,s[5]=P):P=s[5];var N=P,M;s[6]===Symbol.for("react.memo_cache_sentinel")?(M={},s[6]=M):M=s[6];var w=M,A=!0;if(C===null||C==="No Violations.")A=!1;else if(C!=null&&C.includes("age")){var F=C!=null?C:"",O;s[7]!==F?(O={age_violation:F},s[7]=F,s[8]=O):O=s[8],w=O}else{var B=C!=null?C:"",W;s[9]!==B?(W={geo_violation:B},s[9]=B,s[10]=W):W=s[10],w=W}var q;s[11]!==w?(q={event_metadata:w,event_type:"impression",profile_feature:"action",profile_section:"profile_header"},s[11]=w,s[12]=q):q=s[12];var U=r("useProfileCometEngagementEventsImpression")(q),V;s[13]===Symbol.for("react.memo_cache_sentinel")?(V={className:"x78zum5"},s[13]=V):V=s[13];var H=A?U:null,G;s[14]!==g||s[15]!==h||s[16]!==b?(G=u.jsx(m,{actor:b,legal_reporting_cta_type:g,legal_reporting_uri:h}),s[14]=g,s[15]=h,s[16]=b,s[17]=G):G=s[17];var z;s[18]!==H||s[19]!==G?(z=u.jsx("div",babelHelpers.extends({},V,{ref:H,children:G})),s[18]=H,s[19]=G,s[20]=z):z=s[20];var j=z,K=(a=b==null?void 0:b.is_viewer_friend)!=null?a:!1,Q=o("ProfileCometUtils").isViewingSelfProfile(E,k),X=(i=(l=b.wem_private_sharing_bundle)==null||(l=l.private_sharing_control_model_for_user)==null?void 0:l.private_sharing_enabled)!=null?i:!1,Y=X&&!Q&&!K,J=Y||S?"small":"large",Z;s[21]!==X||s[22]!==J||s[23]!==b||s[24]!==v?(Z=u.jsx(r("ProfileCometProfilePicture.react"),{isLockedProfile:X,profile:b,size:J,user:b,viewer:v}),s[21]=X,s[22]=J,s[23]=b,s[24]=v,s[25]=Z):Z=s[25];var ee=Z,te;s[26]!==b?(te=u.jsx(r("ProfileCometProfileHeaderBanner.react"),{user:b}),s[26]=b,s[27]=te):te=s[27];var ne=te,re=b.avatar_cover_photo_takeover_type,oe=!(re!=null&&re!=="NONE"),ae=D?"center":"start",ie;s[28]!==ae||s[29]!==b?(ie=u.jsx(r("ProfileCometInfo.react"),{align:ae,user:b}),s[28]=ae,s[29]=b,s[30]=ie):ie=s[30];var le;s[31]!==N||s[32]!==ne||s[33]!==ee||s[34]!==J||s[35]!==T||s[36]!==oe||s[37]!==ie||s[38]!==b.header_top_row?(le={actionsBlock:N,actor:ee,actorPicSize:J,banner:ne,recommendationsUnit:T,renderer:b.header_top_row,shouldScrollPastCoverPhoto:oe,titleBlock:ie},s[31]=N,s[32]=ne,s[33]=ee,s[34]=J,s[35]=T,s[36]=oe,s[37]=ie,s[38]=b.header_top_row,s[39]=le):le=s[39];var se;s[40]!==le||s[41]!==b.header_top_row?(se=u.jsx(o("CometRelay").MatchContainer,{match:b.header_top_row,props:le}),s[40]=le,s[41]=b.header_top_row,s[42]=se):se=s[42];var ue=se,ce;s[43]===Symbol.for("react.memo_cache_sentinel")?(ce=u.jsx(r("ProfileCometTabsGlimmer.react"),{}),s[43]=ce):ce=s[43];var de;s[44]!==y||s[45]!==b?(de={nux:y,user:b},s[44]=y,s[45]=b,s[46]=de):de=s[46];var me;s[47]!==de||s[48]!==b.profile_tabs?(me=u.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:ce,name:"ProfileTabs",children:u.jsx(o("CometRelay").MatchContainer,{match:b.profile_tabs,props:de})}),s[47]=de,s[48]=b.profile_tabs,s[49]=me):me=s[49];var pe=me,_e=b.is_eligible_for_comet_floating_action_bar!=null&&b.is_eligible_for_comet_floating_action_bar?$:j,fe;s[50]!==pe||s[51]!==_e||s[52]!==S||s[53]!==L||s[54]!==j||s[55]!==b?(fe=S||L?u.jsx(r("FDSEntityHeaderBottomRow.react"),{buttonGroup:j,tabs:pe}):u.jsx(r("FDSEntityHeaderStickyBottomRow.react"),{entity:b,primaryContent:pe,secondaryContent:function(t){var e=t.sticky;return e?_e:j}}),s[50]=pe,s[51]=_e,s[52]=S,s[53]=L,s[54]=j,s[55]=b,s[56]=fe):fe=s[56];var ge=fe,he;s[57]!==X||s[58]!==b||s[59]!==v?(he=u.jsx(r("FDSEntityHeaderCoverPhotoRow.react"),{coverPhoto:u.jsx(r("ProfileCometCoverPhoto.react"),{isLockedProfile:X,renderedProfile:b,user:b,viewer:v})}),s[57]=X,s[58]=b,s[59]=v,s[60]=he):he=s[60];var ye;return s[61]!==ge||s[62]!==he||s[63]!==ue?(ye=u.jsx(r("FDSEntityPageHeader.react"),{bottomRow:ge,coverPhotoRow:he,topRow:ue}),s[61]=ge,s[62]=he,s[63]=ue,s[64]=ye):ye=s[64],ye}l.default=_}),98);
__d("ProfileCometEntityConvergenceHeaderWrapper_profileHeaderRenderer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometEntityConvergenceHeaderWrapper_profileHeaderRenderer",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer"},{args:null,kind:"FragmentSpread",name:"RecommendationsUnitContext_recommendationUnitFragmentRef"}],type:"XFBProfileEntityConvergenceHeaderRenderer",abstractKey:null};a.exports=e}),null);
__d("ProfileCometEntityConvergenceHeaderWrapper.react",["CometRelay","ProfileCometContext","ProfileCometEntityConvergenceHeader.react","ProfileCometEntityConvergenceHeaderWrapper_profileHeaderRenderer.graphql","RecommendationsUnitContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext;function d(t){var a=o("react-compiler-runtime").c(6),i=t.profileHeaderRenderer,l=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometEntityConvergenceHeaderWrapper_profileHeaderRenderer.graphql"),i),s=c(r("ProfileCometContext")),d=s.profileID,m;a[0]!==l?(m=u.jsx(r("ProfileCometEntityConvergenceHeader.react"),{profileHeaderRenderer:l}),a[0]=l,a[1]=m):m=a[1];var p;return a[2]!==l||a[3]!==d||a[4]!==m?(p=u.jsx(o("RecommendationsUnitContext").RecommendationsUnitContextProvider,{parentID:d,recommendationUnitFragmentRef:l,renderLocation:"WWW_PROFILE",children:m}),a[2]=l,a[3]=d,a[4]=m,a[5]=p):p=a[5],p}l.default=d}),98);
__d("ProfileCometEntityConvergenceHeaderWrapper_profileHeaderRenderer$normalization.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"private_sharing_show_private_branding",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a=[o],i={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"DirectInboxBroadcastBucketConnection",kind:"LinkedField",name:"story_bucket",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThreadBucket",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null},r,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[r,{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_seen_by_viewer",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"story_overlays",plural:!0,selections:a,storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"story_bucket(first:1)"},l=[{kind:"Literal",name:"location",value:"profile"}],s=[r],u=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],c={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:u,storageKey:null},d=[o,r],m={kind:"Variable",name:"scale",variableName:"scale"},p={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},_=[p],f={alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},g={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},y={alias:"viewer_image",args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},m,{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[g,h],storageKey:null},C={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[f,r],storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"profile_picture_expiration_time",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},S={kind:"TypeDiscriminator",abstractKey:"__isProfile"},R={alias:"profilePic160",args:[{kind:"Literal",name:"height",value:160},m,{kind:"Literal",name:"width",value:160}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},L={alias:null,args:null,concreteType:"ProfileVideo",kind:"LinkedField",name:"profile_video",plural:!1,selections:[C,r],storageKey:null},E=[S,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[v,y,r],storageKey:null},R,L,{alias:null,args:null,kind:"ScalarField",name:"profile_picture_is_silhouette",storageKey:null}],k={kind:"Literal",name:"render_location",value:"WWW_COMET_PROFILE"},I=[k,{kind:"Literal",name:"subsurface_type",value:"PRIMARY_SURFACE"}],T={kind:"TypeDiscriminator",abstractKey:"__isProfileAction"},D={kind:"Literal",name:"icon_color",value:"fds-black"},x={kind:"Literal",name:"icon_variant",value:"filled"},$=[g,{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},p,h],P={alias:null,args:null,kind:"ScalarField",name:"profile_action_type",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},M={alias:null,args:[{kind:"Literal",name:"supported",value:"24l1eX"}],concreteType:null,kind:"LinkedField",name:"client_handler",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionBlockHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionBlockHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionBlockUserFromGroupHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionBlockUserFromGroupHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionCallHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionCallHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionContactUsHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionContactUsHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionDefaultHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionDefaultHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionEditFriendListHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionEditFriendListHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionEditProfileHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionEditProfileHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionFollowHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionFollowHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionLikeHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionLikeHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionFollowingStatusHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionFollowingStatusHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionFriendRequestHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionFriendRequestHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionContextualProfileFriendRequestHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionContextualProfileFriendRequestHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionInsightsHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionInsightsHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionProfessionalModeRollbackHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionProfessionalModeRollbackHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionProfessionalModeOnboardingHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionProfessionalModeOnboardingHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionMessageHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionMessageHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionContextualProfileMessageHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionContextualProfileMessageHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionMessengerAudioCallHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionMessengerAudioCallHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionMessengerVideoCallHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionMessengerVideoCallHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionPreferredInteractionHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionPreferredInteractionHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionReportHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionReportHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionGetSupportHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionGetSupportHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionReportMarketplaceUserHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionReportMarketplaceHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionSeeFirstHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionSeeFirstHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionViewProfileTransparencyHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionViewProfileTransparencyHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionRemoveMemberHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionRemoveMemberHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionSearchProfileHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionSearchProfileHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionLikeAsYourPageHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionLikeAsYourPageHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionSetContentControlsHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionSetContentControlsHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionMuteMemberHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionMuteMemberHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionTurnOnPostApprovalForMemberHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionTurnOnPostApprovalForMemberHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionInviteAdminHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionInviteAdminHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionInviteModeratorHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionInviteModeratorHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionInviteExpertHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionInviteExpertHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionLeaveGroupHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionLeaveGroupHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionRemoveGroupAdminHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionRemoveGroupAdminHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionRemoveExpertiseShowAsBadgeHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionRemoveExpertiseShowAsBadgeHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionRemoveExpertHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionRemoveExpertHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionEditContextualProfileHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionEditContextualProfileHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionContextualProfileReportBioHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionContextualProfileReportBioHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionContextualProfileReportExpertiseExperienceHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionContextualProfileReportExpertiseExperienceHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionContextualProfileReportMemberNameHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionContextualProfileReportMemberNameHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionPromoteHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionPromoteHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionAdminToolsHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionAdminToolsHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionManageFollowerHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionManageFollowerHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionInviteToFollowHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionInviteToFollowHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionInvitePostReactorsToFollowHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionInvitePostReactorsToFollowHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionBookNowHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionBookNowHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionLockProfileHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionLockProfileHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionDonateNowHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionDonateNowHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionTopFanBadgeSettingHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionTopFanBadgeSettingHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionStartTourHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionStartTourHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionRecurringNotificationsOptInHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionRecurringNotificationsOptInHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionFubsSubscribeHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionFubsSubscribeHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionSwitchRegionHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionSwitchRegionHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometGroupActionManageRolesHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileGroupActionManageRolesHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionCheckInHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionCheckInHandler",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionTrigger_action",fragmentName:"ProfileCometActionContextualProfileReportNicknameHandler_handler",fragmentPropName:"handler",kind:"ModuleImport"}],type:"ProfileActionContextualProfileReportNicknameHandler",abstractKey:null}],storageKey:'client_handler(supported:"24l1eX")'},w={alias:"primaryActions",args:I,concreteType:null,kind:"LinkedField",name:"profile_actions",plural:!0,selections:[o,T,c,{alias:"primary_icon",args:[D,{kind:"Literal",name:"icon_size",value:"16"},x,m],concreteType:"Image",kind:"LinkedField",name:"icon_image",plural:!1,selections:$,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_swapped_icon_alignment",storageKey:null},P,N,M,r,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_optimistic_update",storageKey:null}]}],storageKey:'profile_actions(render_location:"WWW_COMET_PROFILE",subsurface_type:"PRIMARY_SURFACE")'},A={kind:"Literal",name:"icon_size",value:"20"},F=[o,r,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"secondary_title",plural:!1,selections:u,storageKey:null},T,P,{alias:"secondary_icon",args:[D,A,{kind:"Literal",name:"icon_variant",value:"outline"},m],concreteType:"Image",kind:"LinkedField",name:"icon_image",plural:!1,selections:$,storageKey:null},{alias:"active_secondary_icon",args:[D,A,x,m],concreteType:"Image",kind:"LinkedField",name:"icon_image",plural:!1,selections:$,storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"is_disabled",storageKey:null},N,M,{alias:null,args:[{kind:"Literal",name:"supported",value:"X5gYL"}],concreteType:null,kind:"LinkedField",name:"client_logger",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionLogger_action",fragmentName:"ProfileCometActionProfessionalModeRollbackLogger_logger",fragmentPropName:"logger",kind:"ModuleImport"}],type:"ProfileActionProfessionalModeRollbackLogger",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometActionLogger_action",fragmentName:"ProfileCometActionProfessionalModeOnboardingLogger_logger",fragmentPropName:"logger",kind:"ModuleImport"}],type:"ProfileActionProfessionalModeOnboardingLogger",abstractKey:null}],storageKey:'client_logger(supported:"X5gYL")'}],O={alias:"secondaryActions",args:[k,{kind:"Literal",name:"subsurface_type",value:"SECONDARY_SURFACE"}],concreteType:null,kind:"LinkedField",name:"profile_actions",plural:!0,selections:F,storageKey:'profile_actions(render_location:"WWW_COMET_PROFILE",subsurface_type:"SECONDARY_SURFACE")'},B={alias:"newMoreOptionsActions",args:[k],concreteType:null,kind:"LinkedField",name:"profile_action_categories",plural:!0,selections:[o,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"category",plural:!1,selections:u,storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"profile_actions",plural:!0,selections:F,storageKey:null}],storageKey:'profile_action_categories(render_location:"WWW_COMET_PROFILE")'},W={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"profile_plus_transition_path",storageKey:null}],type:"User",abstractKey:null},q={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_nickname",storageKey:null}],type:"GroupAnonAuthorProfile",abstractKey:null},U=[p,h,g],V=[i];return{kind:"SplitOperation",metadata:{},name:"ProfileCometEntityConvergenceHeaderWrapper_profileHeaderRenderer$normalization",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[e,t,{alias:null,args:null,concreteType:"WEMPrivateSharingBundle",kind:"LinkedField",name:"wem_private_sharing_bundle",plural:!1,selections:[{alias:null,args:null,concreteType:"WemPrivateSharingControlModel",kind:"LinkedField",name:"private_sharing_control_model_for_user",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"private_sharing_enabled",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},{alias:null,args:null,concreteType:"Avatar",kind:"LinkedField",name:"user_avatar",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_fb_app_avatar",storageKey:null},r],storageKey:null},{alias:null,args:[{kind:"Literal",name:"render_location",value:"PROFILE_PICTURE"}],concreteType:"ProfileActiveMessengerRoom",kind:"LinkedField",name:"profile_active_messenger_room",plural:!1,selections:a,storageKey:'profile_active_messenger_room(render_location:"PROFILE_PICTURE")'},i,{alias:null,args:null,kind:"ScalarField",name:"is_additional_profile_plus",storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"delegate_page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_business_page_active",storageKey:null},r],storageKey:null},r,{alias:null,args:l,concreteType:"Video",kind:"LinkedField",name:"live_video_for_comet_live_ring",plural:!1,selections:s,storageKey:'live_video_for_comet_live_ring(location:"profile")'},{alias:null,args:l,concreteType:"Video",kind:"LinkedField",name:"live_video_for_comet_live_ring",plural:!1,selections:[{args:null,documentName:"ProfileCometProfilePictureContainer_user_video",fragmentName:"LiveVideoCometLiveBadgeText_video",fragmentPropName:"video",kind:"ModuleImport"},r],storageKey:'live_video_for_comet_live_ring(location:"profile")'},{alias:null,args:null,concreteType:"MsgrUserRichStatus",kind:"LinkedField",name:"msgr_user_rich_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"note_type",storageKey:null},{alias:null,args:null,concreteType:"XFBMusicAttachmentMetadata",kind:"LinkedField",name:"music_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"MusicSong",kind:"LinkedField",name:"license_music",plural:!0,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"display_artist",plural:!1,selections:u,storageKey:null},c,r],storageKey:null},r],storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"visibility",storageKey:null}],storageKey:null},{alias:null,args:l,kind:"ScalarField",name:"is_live_for_comet_live_ring",storageKey:'is_live_for_comet_live_ring(location:"profile")'},{alias:null,args:[{kind:"Literal",name:"supported",value:"1ypIjh"}],concreteType:null,kind:"LinkedField",name:"header_top_row",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_topRow",fragmentName:"ProfileCometDirectoryHeaderTopRow_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBProfileDirectoryHeaderTopRowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_topRow",fragmentName:"ProfileCometEntityConvergenceHeaderTopRow_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBProfileNonDirectoryHeaderTopRowRenderer",abstractKey:null}],storageKey:'header_top_row(supported:"1ypIjh")'},{alias:null,args:[{kind:"Literal",name:"supported",value:"2XtNVV"}],concreteType:null,kind:"LinkedField",name:"profile_tabs",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_profileTabs",fragmentName:"ProfileCometTabs_cometProfileTabs",fragmentPropName:"cometProfileTabs",kind:"ModuleImport"}],type:"ProfileDefaultTabs",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer_profileTabs",fragmentName:"ProfileCometLoggedOutTabsWithJoinCTA_cometProfileTabs",fragmentPropName:"cometProfileTabs",kind:"ModuleImport"}],type:"ProfileLoggedOutTabsWithJoinCTA",abstractKey:null}],storageKey:'profile_tabs(supported:"2XtNVV")'},{alias:null,args:null,kind:"ScalarField",name:"alternate_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username_for_profile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ai_profile_attribution_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_verified_badge_on_profile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_visibly_memorialized",storageKey:null},{alias:null,args:null,concreteType:"ProfileSocialContext",kind:"LinkedField",name:"profile_social_context",plural:!1,selections:[{args:null,documentName:"ProfileCometInfo_user__profileSocialContext",fragmentName:"ProfileCometInfoSocialContext_profileSocialContext",fragmentPropName:"profileSocialContext",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eligible_for_comet_floating_action_bar",storageKey:null},{alias:"top_banner",args:[{kind:"Literal",name:"render_location",value:"PROFILE_HEADER"},{kind:"Literal",name:"supported",value:"1R3rmD"}],concreteType:null,kind:"LinkedField",name:"comet_profile_banner",plural:!1,selections:[o,{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometProfileHeaderBanner_user",fragmentName:"ProfileCometPendingFriendBanner_cometProfileBanner",fragmentPropName:"cometProfileBanner",kind:"ModuleImport"}],type:"ProfilePendingFriendBanner",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"ProfileCometProfileHeaderBanner_user",fragmentName:"ProfilePlusCometAdminNoticeProfileBanner_cometProfileBanner",fragmentPropName:"cometProfileBanner",kind:"ModuleImport"}],type:"ProfilePlusAdminNoticeRenderer",abstractKey:null},{kind:"InlineFragment",selections:s,type:"Node",abstractKey:"__isNode"}],storageKey:'comet_profile_banner(render_location:"PROFILE_HEADER",supported:"1R3rmD")'},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"if_viewer_can_see_pymk_unit_on_initial_load",plural:!1,selections:[{args:[{kind:"Literal",name:"RecommendationsUnit_user$renderLocation",value:"WWW_PROFILE"}],documentName:"useRecommendationsUnit_node_load",fragmentName:"RecommendationsUnit_user",fragmentPropName:"user",kind:"ModuleImport"},r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"avatar_cover_photo_takeover_type",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"if_viewer_can_see_pymk_unit_on_initial_load",plural:!1,selections:d,storageKey:null},{kind:"InlineFragment",selections:[{alias:"profile_picture_for_sticky_bar",args:[{kind:"Literal",name:"height",value:40},m,{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},{alias:"profilePhoto",args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[f,y,r],storageKey:null},{alias:"profilePicLarge",args:[{kind:"Literal",name:"height",value:168},m,{kind:"Literal",name:"width",value:168}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},{alias:"profilePicMedium",args:[{kind:"Literal",name:"height",value:132},m,{kind:"Literal",name:"width",value:132}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},{alias:"profilePicSmall",args:[{kind:"Literal",name:"height",value:100},m,{kind:"Literal",name:"width",value:100}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:_,storageKey:null},{alias:null,args:null,concreteType:"ProfileVideo",kind:"LinkedField",name:"profile_video",plural:!1,selections:[C,{args:null,documentName:"FDSProfileVideoSection_profileVideo",fragmentName:"FDSProfileVideo_profileVideo",fragmentPropName:"profileVideo",kind:"ModuleImport"},r],storageKey:null},b,{kind:"InlineFragment",selections:[o,v],type:"Entity",abstractKey:"__isEntity"},{if:null,kind:"Defer",label:"ProfileCometProfilePicture_profile$defer$ProfileCometProfilePictureEditMenu_profile",selections:E},{if:null,kind:"Defer",label:"ProfileCometProfilePicture_profile$defer$ProfileCometProfilePictureTemporaryEditMenu_profile",selections:[S,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[r,v,y],storageKey:null},b,R,L]},{if:null,kind:"Defer",label:"ProfileCometProfilePicture_profile$defer$ProfileCometProfilePictureViewMenu_profile",selections:E}],type:"Profile",abstractKey:"__isProfile"},{if:null,kind:"Defer",label:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer$defer$ProfileCometHeaderPrimaryActionBar_actor",selections:[{kind:"InlineFragment",selections:[w,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_eligible_for_directory_on_comet",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"render_location",value:"WWW_PROFILE"},{kind:"Literal",name:"supported_items",value:["XFBFriendableProfileRecommendationsUnitItem"]}],concreteType:"XFBRecommendationsUnit",kind:"LinkedField",name:"recommendations_unit",plural:!1,selections:[{args:null,documentName:"useRecommendationsUnitTriggerButton_node",fragmentName:"RecommendationsUnitTriggerButton_recommendationsUnit",fragmentPropName:"recommendationsUnit",kind:"ModuleImport"},r],storageKey:'recommendations_unit(render_location:"WWW_PROFILE",supported_items:["XFBFriendableProfileRecommendationsUnitItem"])'}],type:"HasRecommendationsUnit",abstractKey:"__isHasRecommendationsUnit"}],type:"Node",abstractKey:"__isNode"}],type:"ActorWithActionBar",abstractKey:"__isActorWithActionBar"}]},{if:null,kind:"Defer",label:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer$defer$ProfileCometHeaderMoreActionButton_actor",selections:[{kind:"InlineFragment",selections:[{alias:"primaryActions",args:I,concreteType:null,kind:"LinkedField",name:"profile_actions",plural:!0,selections:d,storageKey:'profile_actions(render_location:"WWW_COMET_PROFILE",subsurface_type:"PRIMARY_SURFACE")'},O,B,W,q],type:"ActorWithActionBar",abstractKey:"__isActorWithActionBar"}]},{if:null,kind:"Defer",label:"ProfileCometEntityConvergenceHeader_profileHeaderRenderer$defer$ProfileCometHeaderActionBar_actor",selections:[{kind:"InlineFragment",selections:[w,O,B,W,q],type:"ActorWithActionBar",abstractKey:"__isActorWithActionBar"}]},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"FocusedPhoto",kind:"LinkedField",name:"cover_photo",plural:!1,selections:[{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"photo",plural:!1,selections:[r,{alias:null,args:[m],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:U,storageKey:null},y,{alias:"blurred_image",args:[{kind:"Literal",name:"blur",value:50},{kind:"Literal",name:"width",value:320}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:U,storageKey:"image(blur:50,width:320)"},v],storageKey:null}],storageKey:null},q],type:"RenderedProfile",abstractKey:"__isRenderedProfile"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]},{if:null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometLockedProfilePopover_user",selections:[e,t,{alias:null,args:null,concreteType:"WEMPrivateSharingBundle",kind:"LinkedField",name:"wem_private_sharing_bundle",plural:!1,selections:[{alias:null,args:null,concreteType:"WemPrivateSharingControlModel",kind:"LinkedField",name:"private_sharing_control_model_for_user",plural:!1,selections:[n],storageKey:null}],storageKey:null}]},{if:null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometProfilePictureViewMenu_user",selections:V},{if:null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometProfilePictureEditMenu_user",selections:V},{if:null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometProfilePictureTemporaryEditMenu_user",selections:V}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_wem_private_sharing_enabled",storageKey:null},{condition:"shouldUseFXIMProfilePicEditor",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"fxim_identity",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"identity_id",storageKey:null}],storageKey:null}]}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"nuxid",value:8362}],concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[o,r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null}],type:"DefaultNUX",abstractKey:null}],storageKey:"nux(nuxid:8362)"},{alias:null,args:null,kind:"ScalarField",name:"restriction_violation_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legal_reporting_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legal_reporting_cta_type",storageKey:null}]}})();a.exports=e}),null);
__d("ProfileCometInfoSocialContext_profileSocialContext.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometInfoSocialContext_profileSocialContext",selections:[{alias:null,args:null,concreteType:"ProfileSocialContextContent",kind:"LinkedField",name:"content",plural:!0,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"facepile_profiles",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"useProfileCometFacepileItems_users"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"facepile_profile_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"facepile_uri",storageKey:null}],type:"ProfileSocialContext",abstractKey:null};a.exports=e}),null);
__d("useProfileCometFacepileItems_users.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:{plural:!0},name:"useProfileCometFacepileItems_users",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:32},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"User",abstractKey:null};a.exports=e}),null);
__d("useProfileCometFacepileItems",["fbt","CometRelay","react-compiler-runtime","useProfileCometFacepileItems_users.graphql"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(t,r){var a=o("react-compiler-runtime").c(3),i=o("CometRelay").useFragment(e!==void 0?e:e=n("useProfileCometFacepileItems_users.graphql"),t),l;return a[0]!==r||a[1]!==i?(l=i.map(function(e){var t,n,o=(t=e.profile_picture)==null?void 0:t.uri;if(o==null)return null;var a=e.name,i=(n=r!=null?r:e.url)!=null?n:"";return{"aria-label":s._(/*BTDS*/"{username}",[s._param("username",a)]),linkProps:i?{url:i}:void 0,source:{uri:o}}}).filter(Boolean),a[0]=r,a[1]=i,a[2]=l):l=a[2],l}l.default=u}),226);
__d("ProfileCometInfoSocialContext.react",["CometColumnItem.react","CometInlineEntityRenderer","CometRelay","CometRow.react","CometRowItem.react","CometTextColorEntityRenderer","CometTextWithEntitiesRelay.react","FDSLink.react","FDSPressableFacepile.react","FDSText.react","ProfileCometInfoSocialContext_profileSocialContext.graphql","filterNulls","intlList","react","react-compiler-runtime","useCurrentDisplayMode","useProfileCometFacepileItems"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(24),i=t.profileSocialContext,l=o("CometRelay").useFragment(e!==void 0?e:e=n("ProfileCometInfoSocialContext_profileSocialContext.graphql"),i),s=r("useCurrentDisplayMode")(),c=s==="dark",d;a[0]!==c?(d=c?[]:[r("CometTextColorEntityRenderer")],a[0]=c,a[1]=d):d=a[1];var m;a[2]===Symbol.for("react.memo_cache_sentinel")?(m=[r("CometInlineEntityRenderer")],a[2]=m):m=a[2];var p;a[3]!==d?(p={Color:d,Inline:m},a[3]=d,a[4]=p):p=a[4];var _=p,f;a[5]!==l.facepile_profiles?(f=l.facepile_profiles||[],a[5]=l.facepile_profiles,a[6]=f):f=a[6];var g=r("useProfileCometFacepileItems")(f,l==null?void 0:l.facepile_uri),h;if(a[7]!==l.facepile_profiles){var y;h=(y=l==null?void 0:l.facepile_profiles)!=null?y:[],a[7]=l.facepile_profiles,a[8]=h}else h=a[8];var C=h,b;a[9]!==_||a[10]!==l.content?(b=r("intlList")(r("filterNulls")(l==null?void 0:l.content.map(function(e){if(e.text!=null){var t=u.jsx(r("CometTextWithEntitiesRelay.react"),{renderers:_,textWithEntities:e.text});return e.uri!=null&&(t=u.jsx(r("FDSLink.react"),{color_DEPRECATED:"secondary",href:e.uri,testid:void 0,children:t})),t}return null})),r("intlList").CONJUNCTIONS.NONE,r("intlList").DELIMITERS.BULLET),a[9]=_,a[10]=l.content,a[11]=b):b=a[11];var v;a[12]!==b?(v=u.jsx(r("CometColumnItem.react"),{paddingTop:16,children:u.jsx(r("FDSText.react"),{color:"secondary",type:"body3",children:b})},"context"),a[12]=b,a[13]=v):v=a[13];var S;if(a[14]!==g||a[15]!==C||a[16]!==l.facepile_profile_count||a[17]!==l.facepile_uri){var R;S=g.length>0?u.jsx(r("CometRowItem.react"),{children:u.jsx(r("FDSPressableFacepile.react"),{count:(R=l==null?void 0:l.facepile_profile_count)!=null?R:C.length,isOverlapping:!0,items:g,linkProps:(l==null?void 0:l.facepile_uri)!=null?{routeTarget:"self",url:l==null?void 0:l.facepile_uri}:void 0,size:32})},"facepile"):null,a[14]=g,a[15]=C,a[16]=l.facepile_profile_count,a[17]=l.facepile_uri,a[18]=S}else S=a[18];var L;a[19]!==S?(L=u.jsx(r("CometColumnItem.react"),{paddingTop:16,children:u.jsx(r("CometRow.react"),{paddingHorizontal:0,paddingVertical:0,children:S})},"facepile-button"),a[19]=S,a[20]=L):L=a[20];var E;return a[21]!==v||a[22]!==L?(E=[v,L],a[21]=v,a[22]=L,a[23]=E):E=a[23],E}l.default=c}),98);
__d("ProfileCometInfoSocialContext_profileSocialContext$normalization.graphql",["CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null};return{kind:"SplitOperation",metadata:{},name:"ProfileCometInfoSocialContext_profileSocialContext$normalization",selections:[{alias:null,args:null,concreteType:"ProfileSocialContextContent",kind:"LinkedField",name:"content",plural:!0,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"text",plural:!1,selections:[{args:null,fragment:n("CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"),kind:"FragmentSpread"}],storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"facepile_profiles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:32},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[e],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"facepile_profile_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"facepile_uri",storageKey:null}]}})();a.exports=e}),null);
__d("ProfileCometManageSectionsDialogQuery$Parameters",["ProfileCometManageSectionsDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("ProfileCometManageSectionsDialogQuery_facebookRelayOperation"),metadata:{},name:"ProfileCometManageSectionsDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("ProfileCometManageSectionsDialog.entrypoint",["JSResourceForInteraction","ProfileCometManageSectionsDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.profileID;return{queries:{queryReference:{parameters:r("ProfileCometManageSectionsDialogQuery$Parameters"),variables:{id:e}}}}},root:r("JSResourceForInteraction")("ProfileCometManageSectionsDialog.react").__setRef("ProfileCometManageSectionsDialog.entrypoint")};l.default=e}),98);
__d("ProfileCometTabs_cometProfileTabs.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"tab_key",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometTabs_cometProfileTabs",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profile_user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_eligible_for_directory_on_comet",storageKey:null},{alias:null,args:null,concreteType:"WoodhengeCreatorInfo",kind:"LinkedField",name:"profile_plus_woodhenge_creator_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_can_see_supporter_hub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supporter_hub_tab_redirect_type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"delegate_page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mentions_tab_tooltip_nux_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_memorialized",storageKey:null},{alias:null,args:null,concreteType:"MemorializedUserInfo",kind:"LinkedField",name:"memorialized_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_tributes_section",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TimelineNavAppSectionsConnection",kind:"LinkedField",name:"timeline_nav_app_sections",plural:!1,selections:[{alias:null,args:null,concreteType:"TimelineNavAppSectionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TimelineAppSection",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayable_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"section_type",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},{alias:null,args:null,concreteType:"AllTimelineAppCollectionsConnection",kind:"LinkedField",name:"all_collections",plural:!1,selections:[{alias:null,args:null,concreteType:"TimelineAppCollection",kind:"LinkedField",name:"nodes",plural:!0,selections:[e],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"WEMPrivateSharingBundle",kind:"LinkedField",name:"wem_private_sharing_bundle",plural:!1,selections:[{alias:null,args:null,concreteType:"WemPrivateSharingControlModel",kind:"LinkedField",name:"private_sharing_control_model_for_user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"private_sharing_enabled",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_currently_live",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_ap_plus_profile_page_broadcast_channel_creation_nux",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:1},{kind:"Literal",name:"surface_nux_id",value:10707},{kind:"Literal",name:"trigger",value:"AP_PLUS_BROADCAST_CHANNEL"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"useCometTooltipQP_quickPromotion"}],storageKey:null}],storageKey:'eligible_promotions(first:1,surface_nux_id:10707,trigger:"AP_PLUS_BROADCAST_CHANNEL")'}],storageKey:null}],storageKey:null}],type:"ProfileDefaultTabs",abstractKey:null}})();a.exports=e}),null);
__d("ProfileCometTabs_mentions_nux.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometTabs_mentions_nux",selections:[{args:null,kind:"FragmentSpread",name:"useMaybeNUX_nux"}],type:"DefaultNUX",abstractKey:null};a.exports=e}),null);
__d("TimelineAppSectionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({APP:0,ABOUT:1,FRIENDS:2,PHOTOS:3,LIKES:4,MAP:5,SUBSCRIPTIONS:6,SUBSCRIBERS:7,PAGE_LIKES:8,NOTES:9,EVENTS:10,BOOKS:11,MUSIC:12,TV_SHOWS:13,MOVIES:14,FITNESS:15,CONTACT:16,GROUPS:17,SPORTS:18,GAMES:19,SAVED_FOR_LATER:20,REVIEWS:21,AT_WORK:22,VIDEOS:23,SAVE_LISTS:24,TASKS:25,FUN_FACT_ANSWERS:26,SPACES:27,STORIES_ARCHIVE:28,WORK_CHAT:29,TIMELINE:30,WORK_FILES:31,SHOP:32,FRONTLINE_AREAS:33,MENTIONS:34,SERVICES:35,FUNDRAISERS:36,RATINGS:38,JOBS:39,LIVE_VIDEOS:40,SOCIAL_LEARNING:41,COMMUNITY:42,MENU:43,EXCLUSIVE_CONTENT:44,COMMUNITY_PERMALINK:45,HASHTAGS:46,VOLUNTEERING:47,MEMBERS:48,COMMUNITY_RULES:49,MEMBERS_BADGES:50,LIVE_SHOPPING:51,COLLECTIBLES:52,PLACES_LIVED:53,WORK:54,EDUCATION:55,CONTACT_INFO:56,BASIC_INFO:57,BLOOD_DONOR_INFO:58,NAME_PRONUNCIATION:59,NICKNAMES:60,RELATIONSHIP:61,FAMILY:62,CATEGORY:63,TRANSPARENCY:64,INTERESTED_IN:65,POLITICAL_VIEWS:66,RELIGIOUS_VIEWS:67,LIFE_EVENTS:68,REELS:69,MUSIC_CHARTS:70,ARTICLES:71,PUBLIC_CHATS:72,CHANNELS:73,FANDOM_BADGES:74,RELATED_ACCOUNTS:75});i.default=e}),66);
__d("ProfileCometTabs.react",["fbt","Banzai","BroadcastChannelQPL","CometRelay","FDSBadge.react","FDSEntityHeaderTabBar.react","ProfileCometContext","ProfileCometManageSectionsDialog.entrypoint","ProfileCometSession","ProfileCometTabs_cometProfileTabs.graphql","ProfileCometTabs_mentions_nux.graphql","ProfileCometURIUtils","ProfileCometUtils","TimelineAppSectionType","getJSEnumSafe","gkx","keyMirror","partitionArray","qex","qpl","react","react-compiler-runtime","requireDeferred","useCometEntryPointDialog","useCometTooltipQP","useCurrentRoute","useFDSCallout","useMaybeNUX","useTopMostRouteCometEntityKey"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["key"],u=["key"],c,d,m,p=m||(m=o("react")),_=m,f=_.useContext,g=_.useRef,h=r("requireDeferred")("ProfileEngagementEventsFalcoEvent").__setRef("ProfileCometTabs.react"),y=r("requireDeferred")("ProfileEngagementFalcoEvent").__setRef("ProfileCometTabs.react"),C=r("requireDeferred")("QPLUserFlow").__setRef("ProfileCometTabs.react"),b=r("keyMirror")(r("TimelineAppSectionType")),v={mentionsNux:{maxWidth:"xw5ewwj",$$css:!0}};function S(e){var t,a,i,l,u,m,_,S,T,D,x,$,P,N,M,w=o("react-compiler-runtime").c(18),A=e.cometProfileTabs,F=e.nux,O=o("CometRelay").useFragment(c!==void 0?c:c=n("ProfileCometTabs_cometProfileTabs.graphql"),A),B=o("CometRelay").useFragment(d!==void 0?d:d=n("ProfileCometTabs_mentions_nux.graphql"),F),W=O.profile_user,q=f(r("ProfileCometContext")),U=q.profileID,V=q.viewerID;g(null);var H;w[0]!==U?(H={profileID:U},w[0]=U,w[1]=H):H=w[1];var G=r("useCometEntryPointDialog")(r("ProfileCometManageSectionsDialog.entrypoint"),H,"button"),z=G[0],j=G[1],K=G[2],Q=G[3],X=r("useCurrentRoute")(),Y={event_metadata:{super_tab:""},event_type:"click",profile_feature:"tab_nav",profile_section:"navigation",profile_session_id:o("ProfileCometSession").get(U,X),viewee_userid:U},J={content_id:null,profile_event_type:"click",profile_id:U,profile_product_bucket:"nav_bar",profile_session_id:o("ProfileCometSession").get(U),profile_subsurface:"nav_bar",profile_surface:"timeline"},Z=o("ProfileCometUtils").isViewingSelfProfile(U,V),ee=r("useMaybeNUX")(B),te=ee[0],ne=ee[1],re;w[2]===Symbol.for("react.memo_cache_sentinel")?(re=s._(/*BTDS*/"Mentions tooltip"),w[2]=re):re=w[2];var oe=(t=W==null?void 0:W.mentions_tab_tooltip_nux_text)!=null?t:"",ae;w[3]!==ne||w[4]!==oe?(ae={"aria-label":re,arrowStyle:"inset",content:oe,hasCloseButton:!0,onHide:ne,position:"above",type:"accent",xstyle:v.mentionsNux},w[3]=ne,w[4]=oe,w[5]=ae):ae=w[5];var ie=r("useFDSCallout")(ae,te!=null?te:!1),le=ie.anchorRef,se=(O==null||(a=O.profile_user)==null||(a=a.viewer)==null?void 0:a.show_ap_plus_profile_page_broadcast_channel_creation_nux)===!1,ue=Z&&se?O==null||(i=O.profile_user)==null||(i=i.viewer)==null||(i=i.eligible_promotions)==null||(i=i.nodes)==null?void 0:i[0]:null,ce;w[6]===Symbol.for("react.memo_cache_sentinel")?(ce={arrowStyle:"inset",hasCloseButton:!1,position:"below"},w[6]=ce):ce=w[6];var de=r("useCometTooltipQP")(ue,ce),me=(l=W==null?void 0:W.is_currently_live)!=null?l:!1,pe=(u=W==null?void 0:W.is_viewer_friend)!=null?u:!1,_e=(m=W==null||(_=W.wem_private_sharing_bundle)==null||(_=_.private_sharing_control_model_for_user)==null?void 0:_.private_sharing_enabled)!=null?m:!1,fe=(S=W==null?void 0:W.is_viewer_eligible_for_directory_on_comet)!=null?S:!1,ge=!Z&&_e&&!pe,he=(T=r("useTopMostRouteCometEntityKey")())==null?void 0:T.section,ye=o("ProfileCometURIUtils").useURIForProfile(),Ce=(D=W==null||(x=W.memorialized_user_info)==null?void 0:x.has_tributes_section)!=null?D:!1,be=($=W==null?void 0:W.is_memorialized)!=null?$:!1,ve=[],Se=o("ProfileCometURIUtils").useURIForProfileSection("tributes"),Re=o("ProfileCometURIUtils").useIsProfileSectionActive("tributes"),Le=o("ProfileCometURIUtils").useURIForProfileSection("timeline"),Ee=o("ProfileCometURIUtils").useIsProfileSectionActive("timeline"),ke=o("ProfileCometURIUtils").useIsProfileSectionActive("pretributestimeline"),Ie=o("ProfileCometURIUtils").useIsProfileSectionActive("grid"),Te=o("ProfileCometURIUtils").useURIForProfileSection("supporters"),De=o("ProfileCometURIUtils").useIsProfileSectionActive("supporters");Ce&&ve.push({isActive:function(){return Re},key:"tributes",label:s._(/*BTDS*/"Tributes"),linkProps:{replace:!0,url:Se},onPress:function(){y.onReady(function(e){var t=e.log;t(function(){return babelHelpers.extends({},J,{profile_item_subtype:"tributes",profile_item_type:"tributes"})})})}});var xe;if(w[7]!==Ie||w[8]!==be||w[9]!==ke||w[10]!==Ee?(xe=function(){return be?ke:Ee||Ie},w[7]=Ie,w[8]=be,w[9]=ke,w[10]=Ee,w[11]=xe):xe=w[11],ve.push({isActive:xe,key:"timeline",label:fe?s._(/*BTDS*/"All"):s._(/*BTDS*/"Posts"),linkProps:{replace:!0,url:Ce?Le:ye},onPress:function(){h.onReady(function(e){var t=e.log;t(function(){return babelHelpers.extends({},Y,{feature_item:b.TIMELINE.toLowerCase()})})}),y.onReady(function(e){var t=e.log;t(function(){return babelHelpers.extends({},J,{profile_item_subtype:"home",profile_item_type:"timeline"})})})},testid:"profile-tab-timeline"}),(P=W==null||(N=W.profile_plus_woodhenge_creator_info)==null?void 0:N.viewer_can_see_supporter_hub)!=null?P:Z&&(W==null?void 0:W.profile_plus_woodhenge_creator_info)!=null){var $e;w[12]!==De?($e=function(){return De},w[12]=De,w[13]=$e):$e=w[13],ve.push({isActive:$e,key:"subscriber_hub",label:s._(/*BTDS*/"Subscriber hub"),linkProps:{replace:!1,url:Te},onPress:function(){var e;if(y.onReady(function(e){var t=e.log;t(function(){return babelHelpers.extends({},J,{profile_item_subtype:"home",profile_item_type:"timeline"})})}),(W==null||(e=W.profile_plus_woodhenge_creator_info)==null?void 0:e.supporter_hub_tab_redirect_type)==="consideration_flow"){var t;C.onReady(k),r("Banzai").post("logger:WoodhengeClientLoggerConfig",{creator_page_id:W==null||(t=W.delegate_page)==null?void 0:t.id,entrypoint_surface:"supporter_hub_tab_on_profile_plus_surface",name:"funding_consideration_page_cta_click",surface:"supporter_hub_tab_on_profile_plus_surface"})}}})}var Pe=o("BroadcastChannelQPL").useLogChannelsTabStart(),Ne=W==null||(M=W.timeline_nav_app_sections)==null?void 0:M.edges;if(Ne&&Ne.forEach(function(e){var t,n,o=e.node;if(o){var a=o.displayable_count,i=o.name,l=o.section_type,s=o.tab_key,u=o.tracking,c=o.url;if(!(c==null||i==null)){var d=(t=o.all_collections)==null?void 0:t.nodes;ve.push({badge:l==="LIVE_VIDEOS"&&me?p.jsx(r("FDSBadge.react"),{}):a!=null?a:void 0,isActive:function(){var e=he===s;return e||he==="album"&&l==="PHOTOS"?!0:d==null?!1:d.some(function(e){var t=e.tab_key;return t===he})},key:(n=o.tab_key)!=null?n:"",label:i,linkProps:{prefetchQueriesOnHover:r("gkx")("18145"),prefetchQueriesOnMount_I_KNOW_WHAT_IM_DOING:l==="FRIENDS"&&(r("qex")._("4046")||!1),replace:!0,url:l==="PHOTOS"&&ge?null:c},onPress:function(){h.onReady(function(e){var t,n=e.log,o=((t=r("getJSEnumSafe")(b,l))!=null?t:"unknown").toLowerCase();n(function(){return babelHelpers.extends({},Y,{feature_item:o})})}),y.onReady(function(e){var t=e.log;t(function(){return babelHelpers.extends({},J,{profile_item_subtype:l==null?void 0:l.toLowerCase(),profile_item_type:u})})}),l==="CHANNELS"&&Pe("channels_tab",Z)},tabRef:l==="MENTIONS"?le:l==="CHANNELS"?de:void 0,testid:l!=null?"profile-tab-"+l.toLowerCase():void 0})}}}),U===V&&ve.push({isActive:E,key:"manage_sections",label:s._(/*BTDS*/"Manage sections"),onHoverIn:j,onHoverOut:K,onPress:function(){y.onReady(function(e){var t=e.log;t(function(){return babelHelpers.extends({},J,{profile_item_type:"manage_sections"})})}),z({profileID:U})},onPressIn:Q}),fe){var Me=I(ve),we=Me.map(L),Ae;return w[14]!==we?(Ae=p.jsx(r("FDSEntityHeaderTabBar.react"),{maxTabs:5,tabs:we}),w[14]=we,w[15]=Ae):Ae=w[15],Ae}var Fe=ve.map(R),Oe;return w[16]!==Fe?(Oe=p.jsx(r("FDSEntityHeaderTabBar.react"),{maxTabs:6,tabs:Fe}),w[16]=Fe,w[17]=Oe):Oe=w[17],Oe}function R(t){var n=t.key,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}function L(e){var t=e.key,n=babelHelpers.objectWithoutPropertiesLoose(e,u);return n}function E(){return!1}function k(e){return e.start(r("qpl")._(930220853,"760"),{annotations:{string:{device_os:"comet",entrypoint_surface:"supporter_hub_tab_on_profile_plus_surface"}}})}function I(e){var t=e[0];if(t.key!=="timeline")return e;var n=["about","photos","videos","friends"],o=r("partitionArray")(e.slice(1),function(e){return n.includes(e.key)}),a=o[0],i=o[1];return[t].concat(a,i)}l.default=S}),226);
__d("ProfileCometTabs_cometProfileTabs$normalization.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t=[e],n={alias:null,args:null,kind:"ScalarField",name:"tab_key",storageKey:null};return{kind:"SplitOperation",metadata:{},name:"ProfileCometTabs_cometProfileTabs$normalization",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"profile_user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_eligible_for_directory_on_comet",storageKey:null},{alias:null,args:null,concreteType:"WoodhengeCreatorInfo",kind:"LinkedField",name:"profile_plus_woodhenge_creator_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_can_see_supporter_hub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supporter_hub_tab_redirect_type",storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"delegate_page",plural:!1,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mentions_tab_tooltip_nux_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_memorialized",storageKey:null},{alias:null,args:null,concreteType:"MemorializedUserInfo",kind:"LinkedField",name:"memorialized_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_tributes_section",storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"TimelineNavAppSectionsConnection",kind:"LinkedField",name:"timeline_nav_app_sections",plural:!1,selections:[{alias:null,args:null,concreteType:"TimelineNavAppSectionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"TimelineAppSection",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayable_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"section_type",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'},{alias:null,args:null,concreteType:"AllTimelineAppCollectionsConnection",kind:"LinkedField",name:"all_collections",plural:!1,selections:[{alias:null,args:null,concreteType:"TimelineAppCollection",kind:"LinkedField",name:"nodes",plural:!0,selections:[n,e],storageKey:null}],storageKey:null},e],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"WEMPrivateSharingBundle",kind:"LinkedField",name:"wem_private_sharing_bundle",plural:!1,selections:[{alias:null,args:null,concreteType:"WemPrivateSharingControlModel",kind:"LinkedField",name:"private_sharing_control_model_for_user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"private_sharing_enabled",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_currently_live",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"show_ap_plus_profile_page_broadcast_channel_creation_nux",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:1},{kind:"Literal",name:"surface_nux_id",value:10707},{kind:"Literal",name:"trigger",value:"AP_PLUS_BROADCAST_CHANNEL"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"promotion_creatives",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title_text",storageKey:null},{kind:"InlineFragment",selections:t,type:"Node",abstractKey:"__isNode"}],storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"encrypted_logging_data",storageKey:null},{alias:"surface_id",args:null,kind:"ScalarField",name:"nux_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trigger",storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(first:1,surface_nux_id:10707,trigger:"AP_PLUS_BROADCAST_CHANNEL")'}],storageKey:null},e],storageKey:null}]}})();a.exports=e}),null);
__d("RecommendationsUnitTriggerButton_recommendationsUnit.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecommendationsUnitTriggerButton_recommendationsUnit",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],type:"XFBRecommendationsUnit",abstractKey:null};a.exports=e}),null);
__d("RecommendationsUnitTriggerButton.react",["fbt","CometRelay","FDSButton.react","FDSChevronDownFilled16Icon","FDSChevronUpFilled16Icon","ProfileCometContext","RecommendationsUnitTriggerButton_recommendationsUnit.graphql","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useContext;function p(t){var a=o("react-compiler-runtime").c(11),i=t.Recommendations$key,l=t.isExpanded,c=t.onPress,p=t.xstyle;o("CometRelay").useFragment(e!==void 0?e:e=n("RecommendationsUnitTriggerButton_recommendationsUnit.graphql"),i);var _=m(r("ProfileCometContext")),f=_.isInViewAs,g;a[0]!==p?(g=(u||(u=r("stylex"))).props(p),a[0]=p,a[1]=g):g=a[1];var h=r(l?"FDSChevronUpFilled16Icon":"FDSChevronDownFilled16Icon"),y;a[2]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"See recommendations"),a[2]=y):y=a[2];var C;a[3]!==l||a[4]!==f||a[5]!==c||a[6]!==h?(C=d.jsx(r("FDSButton.react"),{"aria-expanded":l,disabled:f,icon:h,label:y,labelIsHidden:!0,onPress:c,type:"secondary"}),a[3]=l,a[4]=f,a[5]=c,a[6]=h,a[7]=C):C=a[7];var b;return a[8]!==g||a[9]!==C?(b=d.jsx("div",babelHelpers.extends({},g,{children:C})),a[8]=g,a[9]=C,a[10]=b):b=a[10],b}l.default=p}),226);
__d("RecommendationsUnitTriggerButton_recommendationsUnit$normalization.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={kind:"SplitOperation",metadata:{},name:"RecommendationsUnitTriggerButton_recommendationsUnit$normalization",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}]};a.exports=e}),null);/*FB_PKG_DELIM*/
__d("EntMessageReplyType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REGULAR:0,BUMP:1});i.default=e}),66);
__d("LSHotEmojiSize",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});i.default=e}),66);
__d("LSMessageReplySourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});i.default=e}),66);
__d("LSMessageReplySourceTypeV2",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28,IG_COLLAB_INVITE:29,FB_QUICKSNAP:30});i.default=e}),66);
__d("LSMessageSendStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});i.default=e}),66);
__d("LSReplyMessageAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});i.default=e}),66);
__d("LSRequestId",["uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e="0123456789abcdef",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function u(){for(var t=r("uuidv4")().replace(/[^0-9a-f]/gi,""),n=0,o=["#"];n<33;){var a=e.indexOf(t.charAt(n))<<8,i=e.indexOf(t.charAt(n+1))<<4,l=e.indexOf(t.charAt(n+2)),u=l|(i|a),c=u>>6;o.push(s.charAt(c)),o.push(s.charAt(u&63)),n+=3}return o.join("")}var c={generate:u};l.default=c}),98);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function u(e){return e>0}function c(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(0);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(1);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(2);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(5);default:return(e||(e=o("LSIntEnum"))).ofNumber(4)}}function d(t){switch(t){case s.partialOptimistic:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NONE);case s.clock:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER);case s.sent:case s.received:case s.read:case s.played:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").SERVER_RECEIVED);case s.failedRetryable:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").RETRIABLE_ERROR);default:return(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}l.ACK=s,l.isMsgAuthoritative=u,l.levelToMessagingSendStatusV2=c,l.levelToMessagingSendStatus=d}),98);
__d("MAWAdminMsgType",[],(function(t,n,r,o,a,i){"use strict";var e="currentUserAddedDevice",l="participantAddedDevice",s="currentUserRemovedDevice",u="participantRemovedDevice",c="currentUserUpdatedDevice",d="participantUpdatedDevice",m="participantAddedYou",p="participantAddedYouAndOneUser",_="participantAddedYouAndMoreThanOneUsers",f="unknowUserAddedYou",g="unknowUserAddedYouAndOneUser",h="unknowUserAddedYouAndMoreThanOneUser",y="unknownUserAddedOneUser",C="unknownUserAddedTwoUser",b="unknownUserAddedMoreThanTwoUser",v="participantAddedOneUser",S="participantAddedTwoUser",R="participantAddedMoreThanTwoUser",L="currentUserRemovedOneParticipant",E="currentUserRemovedTwoParticipant",k="currentUserRemovedMoreThanTwoParticipant",I="currentUserAddedOneParticipant",T="currentUserAddedTwoParticipant",D="currentUserAddedMoreThanTwoParticipant",x="participantRemovedYou",$="participantRemovedYouAndOneUser",P="participantRemovedYouAndMoreThanOneUsers",N="unknowUserRemovedYou",M="unknowUserRemovedYouAndOneUser",w="unknowUserRemovedYouAndMoreThanOneUser",A="unknownUserRemovedOneUser",F="unknownUserRemovedTwoUser",O="unknownUserRemovedMoreThanTwoUser",B="participantRemovedOneUser",W="participantRemovedTwoUser",q="participantRemovedMoreThanTwoUser",U="participantLeftGroup",V="currentUserLeftGroup",H="participantCustomizeParticipantNickname",G="participantClearParticipantNickname",z="participantCustomizeCurrentUserNickname",j="currentUserSetOwnNickname",K="currentUserClearOwnNickname",Q="currentUserClearParticipantNickname",X="participantSetOwnNickname",Y="participantClearOwnNickname",J="participantClearCurrentUserNickname",Z="currentUserCustomizeNickname",ee="currentUserNamedGroup",te="unkonwnUserNamedGroup",ne="participantNamedGroup",re="currentUserCustomizeHotlike",oe="participantCustomizeHotlike",ae="currentUserCustomizeTheme",ie="currentUserCustomizeAITheme",le="currentUserCustomizePhoto",se="participantCustomizeTheme",ue="participantCustomizeAITheme",ce="participantCustomizePhoto",de="currentUserSetAddModeAdminOnly",me="currentUserSetAddModeAllMembers",pe="participantSetAddModeAdminOnly",_e="participantSetAddModeAllMembers",fe="serverSetAddModeAdminOnly",ge="serverSetAddModeAllMembers",he="currentUserPinnedMessage",ye="currentUserUnpinnedMessage",Ce="participantPinnedMessage",be="participantUnpinnedMessage",ve="currentUserLimitSharingDisabled",Se="currentUserLimitSharingEnabled",Re="participantLimitSharingDisabled",Le="participantLimitSharingEnabled",Ee="cutoverThreadAdminMessage",ke="cutoverIGDThreadAdminMessage",Ie="cutoverRollbackAdminMessage",Te="dualThreadCutoverAdminMessage",De="dualThreadCutoverAdminMessageSelfThread",xe="dualThreadCutoverAdminMessageWithOtherUserName",$e="dualThreadCutoverAdminMessageOtherUserNameUnknown",Pe="e2eeThreadDescription",Ne="e2eeThreadUKOSAAdminMessage",Me="debugMsg",we="reachabilityError",Ae="twoUsersConnected",Fe="twoUsersConnectedOneMSplit",Oe="CurrentUserCreatedPoll",Be="ParticipantCreatedPoll",We="CurrentUserAddedPollOption",qe="ParticipantAddedPollOption",Ue="CurrentUserAddedMultiplePollOptions",Ve="ParticipantAddedMultiplePollOptions",He="CurrentUserAddedPollVote",Ge="ParticipantAddedPollVote",ze="CurrentUserAddedMultiplePollVotes",je="ParticipantAddedMultiplePollVotes",Ke="CurrentUserRemovedPollVote",Qe="ParticipantRemovedPollVote",Xe="CurrentUserRemovedMultiplePollVotes",Ye="ParticipantRemovedMultiplePollVotes",Je="CurrentUserMixedPollUpdate",Ze="ParticipantMixedPollUpdate",et="CurrentUserChangedPollVote",tt="ParticipantChangedPollVote",nt="CurrentUserChangedMultiplePollVotes",rt="ParticipantChangedMultiplePollVotes",ot="PollUnsentUpdate",at={CURRENT_USER_ADDED_DEVICE:e,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:D,CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:Ue,CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:ze,CURRENT_USER_ADDED_ONE_PARTICIPANT:I,CURRENT_USER_ADDED_POLL_OPTION:We,CURRENT_USER_ADDED_POLL_VOTE:He,CURRENT_USER_ADDED_TWO_PARTICIPANTS:T,CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:nt,CURRENT_USER_CHANGED_POLL_VOTE:et,CURRENT_USER_CLEAR_OWN_NICKNAME:K,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:Q,CURRENT_USER_CREATED_POLL:Oe,CURRENT_USER_CUSTOMIZE_AI_THEME:ie,CURRENT_USER_CUSTOMIZE_HOTLIKE:re,CURRENT_USER_CUSTOMIZE_NICKNAME:Z,CURRENT_USER_CUSTOMIZE_PHOTO:le,CURRENT_USER_CUSTOMIZE_THEME:ae,CURRENT_USER_LEFT_GROUP:V,CURRENT_USER_LIMIT_SHARING_DISABLED:ve,CURRENT_USER_LIMIT_SHARING_ENABLED:Se,CURRENT_USER_MIXED_POLL_UPDATE:Je,CURRENT_USER_NAMED_GROUP:ee,CURRENT_USER_PINNED_MESSAGE:he,CURRENT_USER_REMOVED_DEVICE:s,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:k,CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:Xe,CURRENT_USER_REMOVED_ONE_PARTICIPANT:L,CURRENT_USER_REMOVED_POLL_VOTE:Ke,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:de,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:me,CURRENT_USER_SET_OWN_NICKNAME:j,CURRENT_USER_UNPINNED_MESSAGE:ye,CURRENT_USER_UPDATED_DEVICE:c,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:ke,CUTOVER_ROLLBACK_ADMIN_MESSAGE:Ie,CUTOVER_THREAD_ADMIN_MESSAGE:Ee,DEBUG_MSG:Me,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Te,E2EE_THREAD_DESCRIPTION:Pe,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:Ne,PARTICIPANT_ADDED_DEVICE:l,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:R,PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:Ve,PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:je,PARTICIPANT_ADDED_ONE_USER:v,PARTICIPANT_ADDED_POLL_OPTION:qe,PARTICIPANT_ADDED_POLL_VOTE:Ge,PARTICIPANT_ADDED_TWO_USER:S,PARTICIPANT_ADDED_YOU:m,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:_,PARTICIPANT_ADDED_YOU_AND_ONE_USER:p,PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:rt,PARTICIPANT_CHANGED_POLL_VOTE:tt,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:J,PARTICIPANT_CLEAR_OWN_NICKNAME:Y,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:G,PARTICIPANT_CREATED_POLL:Be,PARTICIPANT_CUSTOMIZE_AI_THEME:ue,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:z,PARTICIPANT_CUSTOMIZE_HOTLIKE:oe,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:H,PARTICIPANT_CUSTOMIZE_PHOTO:ce,PARTICIPANT_CUSTOMIZE_THEME:se,PARTICIPANT_LEFT_GROUP:U,PARTICIPANT_LIMIT_SHARING_DISABLED:Re,PARTICIPANT_LIMIT_SHARING_ENABLED:Le,PARTICIPANT_MIXED_POLL_UPDATE:Ze,PARTICIPANT_NAMED_GROUP:ne,PARTICIPANT_PINNED_MESSAGE:Ce,PARTICIPANT_REMOVED_DEVICE:u,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:q,PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:Ye,PARTICIPANT_REMOVED_ONE_USER:B,PARTICIPANT_REMOVED_POLL_VOTE:Qe,PARTICIPANT_REMOVED_TWO_USER:W,PARTICIPANT_REMOVED_YOU:x,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:P,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:$,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:pe,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:_e,PARTICIPANT_SET_OWN_NICKNAME:X,PARTICIPANT_UNPINNED_MESSAGE:be,PARTICIPANT_UPDATED_DEVICE:d,POLL_UNSENT_UPDATE:ot,REACHABILITY_ERROR:we,SERVER_SET_ADD_MODE_ADMIN_ONLY:fe,SERVER_SET_ADD_MODE_ALL_MEMBERS:ge,TWO_USERS_CONNECTED:Ae,TWO_USERS_CONNECTED_ONE_MSPLIT:Fe,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:b,UNKNOWN_USER_ADDED_ONE_USER:y,UNKNOWN_USER_ADDED_TWO_USER:C,UNKNOWN_USER_ADDED_YOU:f,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:h,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:g,UNKNOWN_USER_NAMED_GROUP:te,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:O,UNKNOWN_USER_REMOVED_ONE_USER:A,UNKNOWN_USER_REMOVED_TWO_USER:F,UNKNOWN_USER_REMOVED_YOU:N,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:M};i.CURRENT_USER_ADDED_DEVICE=e,i.CURRENT_USER_PINNED_MESSAGE=he,i.CURRENT_USER_UNPINNED_MESSAGE=ye,i.PARTICIPANT_PINNED_MESSAGE=Ce,i.PARTICIPANT_UNPINNED_MESSAGE=be,i.CURRENT_USER_LIMIT_SHARING_DISABLED=ve,i.CURRENT_USER_LIMIT_SHARING_ENABLED=Se,i.PARTICIPANT_LIMIT_SHARING_DISABLED=Re,i.PARTICIPANT_LIMIT_SHARING_ENABLED=Le,i.CUTOVER_THREAD_ADMIN_MESSAGE=Ee,i.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=ke,i.CUTOVER_ROLLBACK_ADMIN_MESSAGE=Ie,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Te,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=De,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=xe,i.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=$e,i.E2EE_THREAD_DESCRIPTION=Pe,i.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=Ne,i.CURRENT_USER_CREATED_POLL=Oe,i.PARTICIPANT_CREATED_POLL=Be,i.CURRENT_USER_ADDED_POLL_OPTION=We,i.PARTICIPANT_ADDED_POLL_OPTION=qe,i.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS=Ue,i.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS=Ve,i.CURRENT_USER_ADDED_POLL_VOTE=He,i.PARTICIPANT_ADDED_POLL_VOTE=Ge,i.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES=ze,i.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES=je,i.CURRENT_USER_REMOVED_POLL_VOTE=Ke,i.PARTICIPANT_REMOVED_POLL_VOTE=Qe,i.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES=Xe,i.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES=Ye,i.CURRENT_USER_MIXED_POLL_UPDATE=Je,i.PARTICIPANT_MIXED_POLL_UPDATE=Ze,i.CURRENT_USER_CHANGED_POLL_VOTE=et,i.PARTICIPANT_CHANGED_POLL_VOTE=tt,i.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES=nt,i.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES=rt,i.POLL_UNSENT_UPDATE=ot,i.ADMIN_MSG_TYPE=at}),66);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e="emptySnippet",s="currentUserCreatedGroup",u="participantCreatedGroup",c="unknownUserCreatedGroup",d="currentUserGotPromoted",m="currentUserGotDemoted",p="participantGotPromoted",_="participantGotDemoted",f="participantPromotedYou",g="participantDemotedYou",h="currentUserPromotedParticipant",y="currentUserDemotedParticipant",C="participantDemotedParticipant",b="participantPromotedParticipant",v="participantSelfDemoted",S="currentUserSelfDemoted",R="currentUserSendText",L="currentUserSendImage",E="currentUserSendVideo",k="currentUserSendAudio",I="currentUserSendGif",T="currentUserSendSticker",D="participantSendText",x="participantSendTextInGroup",$="participantSendImage",P="participantSendVideo",N="participantSendAudio",M="participantSendGif",w="participantSendSticker",A="unavailableSnippet",F="messageUnavailableSnippet",O="unknownUserEphemeralSettingTurnedOnSeconds",B="unknownUserEphemeralSettingTurnedOnMinutes",W="unknownUserEphemeralSettingTurnedOnHours",q="unknownUserEphemeralSettingTurnedOnDays",U="youEphemeralSettingTurnedOnSeconds",V="youEphemeralSettingTurnedOnMinutes",H="youEphemeralSettingTurnedOnHours",G="youEphemeralSettingTurnedOnDays",z="participantEphemeralSettingTurnedOnSeconds",j="participantEphemeralSettingTurnedOnMinutes",K="participantEphemeralSettingTurnedOnHours",Q="participantEphemeralSettingTurnedOnDays",X="unknownUserEphemeralSettingChangeSeconds",Y="unknownUserEphemeralSettingChangeMinutes",J="unknownUserEphemeralSettingChangeHours",Z="unknownUserEphemeralSettingChangeDays",ee="youEphemeralSettingChangeSeconds",te="youEphemeralSettingChangeMinutes",ne="youEphemeralSettingChangeHours",re="youEphemeralSettingChangeDays",oe="participantEphemeralSettingChangeSeconds",ae="participantEphemeralSettingChangeMinutes",ie="participantEphemeralSettingChangeHours",le="participantEphemeralSettingChangeDays",se="unknownUserEphemeralSettingTurnedOff",ue="youEphemeralSettingTurnedOff",ce="participantEphemeralSettingTurnedOff",de="ephemeralSettingsAutoReset",me="currentUserUnsentMessage",pe="participantUnsentMessage",_e="participantReactMessage",fe="participantReactMessageInGroup",ge="unknownUserEphemeralTakeScreenshot",he="unknownUserEphemeralRecordScreen",ye="youEphemeralTakeScreenshot",Ce="youEphemeralRecordScreen",be="participantEphemeralTakeScreenshot",ve="participantEphemeralRecordScreen",Se="icdcAlertAdminMessage",Re="yourDeviceICDCAlertAdminMessage",Le="currentUserSendAttachment",Ee="participantSendAttachment",ke="currentUserSentPost",Ie="currentUserSentReel",Te="currentUserSentStory",De="currentUserSentEvent",xe="currentUserMentionedStoryIG",$e="currentUserReceivedStoryMentionIG",Pe="participantSentPost",Ne="participantSentReel",Me="participantSentStory",we="participantSentEvent",Ae="currentUserSentStoryHighlight",Fe="participantSentStoryHighlight",Oe="currentUserMissedAudioCall",Be="participantMissedAudioCall",We="currentUserMissedVideoCall",qe="participantMissedVideoCall",Ue="currentUserAudioCalled",Ve="participantAudioCalled",He="currentUserVideoCalled",Ge="participantVideoCalled",ze="currentUserStartedGroupAudioCall",je="participantStartedGroupAudioCall",Ke="currentUserStartedGroupVideoCall",Qe="participantStartedGroupVideoCall",Xe="currentUserBumpedOwnMessage",Ye="currentUserBumpedMessage",Je="participantBumpedOwnMessage",Ze="participantBumpedParticipantMessage",et="participantBumpedCurrentUserMessage",tt="userSendUnavailableMessage",nt="userSendEncryptedMessage",rt="currentUserSendUnrenderableMessage",ot="participantSendUnrenderableMessage",at="currentUserSendLocationFallback",it="participantSendLocation",lt="currentUserSendLiveLocationFallback",st="participantSendLiveLocation",ut="currentUserSendLocation",ct="participantSendLocation",dt="currentUserSendPollCreationFallback",mt="participantSendPollCreation",pt="currentUserSendContactShareFallback",_t="participantSendContactShareFallback",ft="currentUserSendContactShare",gt="participantSendContactShare",ht="currentUserSendAIContactShare",yt="participantSendAIContactShare",Ct="currentUserSendStoryMentionFallback",bt="currentUserSendStoryMention",vt="participantSendStoryMention",St="participantSendStoryMentionFallback",Rt="currentUserSendPostMentionFallback",Lt="participantSendPostMentionFallback",Et="currentUserSendMemoriesShare",kt="participantSendMemoriesShare",It="currentUserSendPostMention",Tt="participantSendPostMention",Dt="currentUserSendNoteMentionFallback",xt="participantSendNoteMentionFallback",$t="messengerMemoryEncryptedMessageFallback",Pt="rtcXMAMessageFallback",Nt="metaAISendMessageFallback",Mt="currentUserSendBumpMessageFallback",wt="participantSendBumpMessageFallback",At="participantSendBumpMessageOriginalUnavailable",Ft="currentUserSendStickerReceiverFetchMessageFallback",Ot="participantSendStickerReceiverFetchMessageFallback",Bt="viewOncePhotoMessageFallback",Wt="viewOnceVideoMessageFallback",qt="unavailableStory",Ut="currentUserLimitSharingDisabled",Vt="currentUserLimitSharingEnabled",Ht="participantLimitSharingDisabled",Gt="participantLimitSharingEnabled",zt="dualThreadCutoverAdminMessageOtherUserNameUnknown",jt="dualThreadCutoverAdminMessageSelfThread",Kt="dualThreadCutoverAdminMessageWithOtherUserName",Qt=babelHelpers.extends({},o("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:Ue,CURRENT_USER_BUMPED_MESSAGE:Ye,CURRENT_USER_BUMPED_OWN_MESSAGE:Xe,CURRENT_USER_CREATED_GROUP:s,CURRENT_USER_DEMOTED_PARTICIPANT:y,CURRENT_USER_GOT_DEMOTED:m,CURRENT_USER_GOT_PROMOTED:d,CURRENT_USER_LIMIT_SHARING_DISABLED:Ut,CURRENT_USER_LIMIT_SHARING_ENABLED:Vt,CURRENT_USER_MENTIONED_STORY_IG:xe,CURRENT_USER_MISSED_AUDIO_CALL:Oe,CURRENT_USER_MISSED_VIDEO_CALL:We,CURRENT_USER_PROMOTED_PARTICIPANT:h,CURRENT_USER_RECEIVED_STORY_MENTION_IG:$e,CURRENT_USER_SELF_DEMOTED:S,CURRENT_USER_SEND_AI_CONTACT_SHARE:ht,CURRENT_USER_SEND_ATTACHMENT:Le,CURRENT_USER_SEND_AUDIO:k,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:Mt,CURRENT_USER_SEND_CONTACT_SHARE:ft,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:pt,CURRENT_USER_SEND_GIF:I,CURRENT_USER_SEND_IMAGE:L,CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK:lt,CURRENT_USER_SEND_LOCATION:ut,CURRENT_USER_SEND_LOCATION_FALLBACK:at,CURRENT_USER_SEND_MEMORIES_SHARE:Et,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:Dt,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:dt,CURRENT_USER_SEND_POST_MENTION:It,CURRENT_USER_SEND_POST_MENTION_FALLBACK:Rt,CURRENT_USER_SEND_STICKER:T,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ft,CURRENT_USER_SEND_STORY_MENTION:bt,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:Ct,CURRENT_USER_SEND_TEXT:R,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:rt,CURRENT_USER_SEND_VIDEO:E,CURRENT_USER_SENT_EVENT:De,CURRENT_USER_SENT_POST:ke,CURRENT_USER_SENT_REEL:Ie,CURRENT_USER_SENT_STORY:Te,CURRENT_USER_SENT_STORY_HIGHLIGHT:Ae,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:ze,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ke,CURRENT_USER_UNSENT_MESSAGE:me,CURRENT_USER_VIDEO_CALLED:He,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:zt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:jt,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:Kt,EMPTY_SNIPPET:e,EPHEMERAL_SETTINGS_AUTO_RESET:de,ICDC_ALERT_ADMIN_MESSAGE:Se,MESSAGE_UNAVAILABLE_SNIPPET:F,MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK:$t,META_AI_SEND_MESSAGE_FALLBACK:Nt,PARTICIPANT_AUDIO_CALLED:Ve,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:et,PARTICIPANT_BUMPED_OWN_MESSAGE:Je,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Ze,PARTICIPANT_CREATED_GROUP:u,PARTICIPANT_DEMOTED_PARTICIPANT:C,PARTICIPANT_DEMOTED_YOU:g,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ve,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:le,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:ie,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:ae,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:oe,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ce,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:K,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:j,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:z,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:be,PARTICIPANT_GOT_DEMOTED:_,PARTICIPANT_GOT_PROMOTED:p,PARTICIPANT_LIMIT_SHARING_DISABLED:Ht,PARTICIPANT_LIMIT_SHARING_ENABLED:Gt,PARTICIPANT_MISSED_AUDIO_CALL:Be,PARTICIPANT_MISSED_VIDEO_CALL:qe,PARTICIPANT_PROMOTED_PARTICIPANT:b,PARTICIPANT_PROMOTED_YOU:f,PARTICIPANT_REACT_MESSAGE:_e,PARTICIPANT_REACT_MESSAGE_IN_GROUP:fe,PARTICIPANT_SELF_DEMOTED:v,PARTICIPANT_SEND_AI_CONTACT_SHARE:yt,PARTICIPANT_SEND_ATTACHMENT:Ee,PARTICIPANT_SEND_AUDIO:N,PARTICIPANT_SEND_BUMP_MESSAGE:wt,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:At,PARTICIPANT_SEND_CONTACT_SHARE:gt,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:_t,PARTICIPANT_SEND_GIF:M,PARTICIPANT_SEND_IMAGE:$,PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK:st,PARTICIPANT_SEND_LOCATION:ct,PARTICIPANT_SEND_LOCATION_FALLBACK:it,PARTICIPANT_SEND_MEMORIES_SHARE:kt,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:xt,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:mt,PARTICIPANT_SEND_POST_MENTION:Tt,PARTICIPANT_SEND_POST_MENTION_FALLBACK:Lt,PARTICIPANT_SEND_STICKER:w,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:Ot,PARTICIPANT_SEND_STORY_MENTION:vt,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:St,PARTICIPANT_SEND_TEXT:D,PARTICIPANT_SEND_TEXT_IN_GROUP:x,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:ot,PARTICIPANT_SEND_VIDEO:P,PARTICIPANT_SENT_EVENT:we,PARTICIPANT_SENT_POST:Pe,PARTICIPANT_SENT_REEL:Ne,PARTICIPANT_SENT_STORY:Me,PARTICIPANT_SENT_STORY_HIGHLIGHT:Fe,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:je,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Qe,PARTICIPANT_UNSENT_MESSAGE:pe,PARTICIPANT_VIDEO_CALLED:Ge,RTC_XMA_FALLBACK:Pt,UNAVAILABLE_SNIPPET:A,UNAVAILABLE_STORY:qt,UNKNOWN_USER_CREATED_GROUP:c,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:he,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Z,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:J,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Y,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:X,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:se,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:q,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:W,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:B,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:ge,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:nt,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:tt,VIEW_ONCE_PHOTO_MESSAGE:Bt,VIEW_ONCE_VIDEO_MESSAGE:Wt,YOU_EPHEMERAL_RECORD_SCREEN:Ce,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:re,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:ne,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:te,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:ee,YOU_EPHEMERAL_SETTING_TURNED_OFF:ue,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:G,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:H,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:V,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:U,YOU_EPHEMERAL_TAKE_SCREENSHOT:ye,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:Re});l.CURRENT_USER_CREATED_GROUP=s,l.CURRENT_USER_SEND_TEXT=R,l.CURRENT_USER_SEND_IMAGE=L,l.CURRENT_USER_SEND_VIDEO=E,l.CURRENT_USER_SEND_AUDIO=k,l.CURRENT_USER_SEND_GIF=I,l.CURRENT_USER_SEND_STICKER=T,l.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=O,l.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=ge,l.CURRENT_USER_SEND_ATTACHMENT=Le,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN=zt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD=jt,l.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME=Kt,l.LOCALIZATION_TYPE=Qt}),98);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return{contactIds:t,contents:[]};case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:{var n=t[0],r=t[1];return{contactIds:[n],contents:[r]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:{var a=t[0],i=t[1],l=t[2];return{contactIds:[a,i],contents:[l]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:{var s=t[0],u=t[1],c=t[2];return{contactIds:[s],contents:[u,c]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION:{var d=t[0],m=t[1],p=t[2];return{contactIds:[d],contents:[m]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS:{var _=t[0],f=t[1],g=t[2],h=t[3];return{contactIds:[_],contents:[f,g]}}case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_AI_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE:case o("MAWLocalizationType").LOCALIZATION_TYPE.POLL_UNSENT_UPDATE:default:return{contactIds:[],contents:t}}}l.deconstructContactIdsFromAdminContent=e}),98);
__d("MAWAnimatedImageThumbnailStore",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n;return(n=e.get(t))!=null?n:null}function s(t,n){e.set(t,n)}i.getThumbnailSpec=l,i.setThumbnailSpec=s}),66);
__d("WABlobToArrayBuffer",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return"arrayBuffer"in t&&typeof t.arrayBuffer=="function"?t.arrayBuffer():new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onload=function(){var t=o.result;t instanceof ArrayBuffer?e(t):n(r("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof t))},o.onerror=function(){var e;n((e=o.error)!=null?e:r("err")("blobToArrayBuffer got unknown error"))},o.readAsArrayBuffer(t)})}l.blobToArrayBuffer=s}),98);
__d("WAIsOgg",[],(function(t,n,r,o,a,i){"use strict";function e(e){return!(e.length<4||e[0]!==79||e[1]!==103||e[2]!==103||e[3]!==83)}i.isOgg=e}),66);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.$1=o("WorkerBundleResource").createDedicatedWebWorker(r("WAWebOpusRecorderWorkerResource")),this.$1.onmessage=e!=null?e:null}var t=e.prototype;return t.getWorker=function(){return this.$1},t.postMessage=function(t,n){var e={type:"message",message:t};this.$1.postMessage(e,n)},t.addEventListener=function(t,n){this.$1.addEventListener(t,n)},t.removeEventListener=function(t,n){this.$1.addEventListener(t,n)},e})();function s(){return new e}function u(t){return new e(t)}l.WAOpusRecorderWorkerClient=e,l.getOpusEncoderWorker=s,l.getOpusDecoderWorker=u}),98);
__d("WAOpusRecorderPlayer",["Promise","WABinary","WABlobToArrayBuffer","WALogger","WAOpusRecorderWorkerClient"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="audio/wav",m,p=0;function _(){return p++,m||(m=new window.AudioContext),m}function f(){if(p--,p===0&&m){try{m.close().catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close async error: ",""])),t).devConsole(t)})}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["releaseAudioContext close sync error: ",""])),e).devConsole(e)}m=void 0}}var g=(function(){function e(e){this.oggBlob=e}var t=e.prototype;return t.generateBlob=function(){return this.oggBlobToWAVBlob(this.oggBlob,1)},t.oggBlobToWAVBlob=function(t,r){var e=this;r===void 0&&(r=2);var a=r;return new(c||(c=n("Promise")))(function(n){var r=function(r){if(r.data==null){for(var t=function(t){l.forEach(function(e){for(var n=e[t]||e[0],r=0;r<n.length;r++)s.push(n[r])})},o=0;o<a;o++)t(o);var i=e.encodeWAV(s,c,a),u=new Blob([i.readByteArrayView()],{type:d});f(),n(u)}else l.push(r.data),a=l[0].length},i=o("WAOpusRecorderWorkerClient").getOpusDecoderWorker(r),l=[],s=[],c=_(),m={outputBufferSampleRate:c.sampleRate,bufferLength:4096};i.postMessage({command:"decode-init",config:m}),o("WABlobToArrayBuffer").blobToArrayBuffer(t).then(function(e){i.postMessage({command:"decode",pages:new Uint8Array(e)}),i.postMessage({command:"decode-done"})}).catch(function(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Player::oggBlobToWAVBlob error: ",""])),e).devConsole(e)})})},t.encodeWAV=function(t,n,r){var e=new(o("WABinary")).Binary(void 0,!0);e.ensureCapacity(44+t.length*2),e.writeString("RIFF"),e.writeUint32(36+t.length*2),e.writeString("WAVE"),e.writeString("fmt "),e.writeUint32(16),e.writeUint16(1),e.writeUint16(r),e.writeUint32(n.sampleRate),e.writeUint32(n.sampleRate*r*2),e.writeUint16(r*2),e.writeUint16(16),e.writeString("data"),e.writeUint32(t.length*2);for(var a=0;a<t.length;a++){var i=Math.max(-1,Math.min(t[a],1));i*=i>0?32767:32768,e.writeInt16(Math.floor(i))}return e},e})();l.default=g}),98);
__d("WAMaybeTranscodeOggOpusToWavForPlayback",["FBLogger","WABlobToArrayBuffer","WAIsOgg","WAOpusRecorderPlayer","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=function(){return r("FBLogger")("wmi").tags(["audio"])},m=r("justknobx")._("4988"),p=new Audio().canPlayType("audio/ogg"),_=p==="probably"||p==="maybe";async function f(t){if(_)return d().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback supported no need to transcode"]))),t;if(d().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Ogg playback is not supported. Start transcoding"]))),t.size>m)return d().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["blob size too large"]))),t;var n=await o("WABlobToArrayBuffer").blobToArrayBuffer(t);if(!o("WAIsOgg").isOgg(new Uint8Array(n)))return d().DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["blob is not Ogg, skip transcode"]))),t;var a=new(r("WAOpusRecorderPlayer"))(t);return a.generateBlob()}l.isOggPlaybackSupported=_,l.maybeTranscodeOggOpusToWavForPlayback=f}),98);
__d("MAWAudioUtils",["FBLogger","WAMaybeTranscodeOggOpusToWavForPlayback","gkx"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=r("gkx")("3053")?URL.createObjectURL(await o("WAMaybeTranscodeOggOpusToWavForPlayback").maybeTranscodeOggOpusToWavForPlayback(e)):URL.createObjectURL(e);return new Promise(function(e,n){var o=new Audio;o.setAttribute("crossOrigin","anonymous"),o.addEventListener("loadedmetadata",function(t){var r=t.currentTarget;if(r instanceof HTMLAudioElement){var o=r.duration;e(Math.ceil(o))}else n("EventTarget returned for event should be HTMLAudioElement")}),o.src=t,o.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading audio from provided URL"))},o.onerror=function(){var e,t;n(r("FBLogger")("messenger_web").mustfixThrow("getAudioDurationInSeconds: audioElement error code: %s. message: %s",(e=o.error)==null?void 0:e.code,(t=o.error)==null?void 0:t.message))}})}function s(e){return Array.from(new Uint8Array(e)).join(",")}l.getAudioDurationInSeconds=e,l.serializeWaveform=s}),98);
__d("MAWMediaPreProcessQpl",["MAWSendQplToServer","Random","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof self.BigInt=="function",s=r("justknobx")._("3427")*1e3;function u(t,n){var a=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),i=o("MAWSendQplToServer").startQplUserFlow(r("qpl")._(1056840460,"718"),{bool:{has_big_int_support:e},string:{preprocess_type:t}},a,s);return n&&i.addAnnotations({int:{input_file_size:n.size},string:{mimetype:n.type}}),babelHelpers.extends({},i,{flowDetails:{event:r("qpl")._(1056840460,"718"),instanceKey:a}})}l.startMediaPreProcessQpl=u}),98);
__d("WABlobToImage",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r;return new(e||(e=n("Promise")))(function(e,n){r=new Image;var o=URL.createObjectURL(t),a=function(){return URL.revokeObjectURL(o)};r.onload=function(){e({image:r,releaseImageMemory:a})},r.onerror=function(){a(),n("loadBlobToImage error")},r.src=o})}i.blobToImage=l}),66);
__d("WACalculateBoundOutputSize",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t!=null?l(e.width,e.height,t.width,t.height):{outputWidth:e.width,outputHeight:e.height}}function l(e,t,n,r){var o=e,a=t;return e>t?e>n&&(a*=n/o,o=n):a>r&&(o*=r/a,a=r),{outputWidth:Math.round(Math.max(o,1)),outputHeight:Math.round(Math.max(a,1))}}i.calculateBoundOutputSize=e}),66);
__d("WADecodeImage",["WABlobToImage","WACalculateBoundOutputSize","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["decodeImage"]),c=typeof self.createImageBitmap=="function"&&typeof self.OffscreenCanvas=="function",d=c?m:p;async function m(t,n){u.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start decoding image without DOM: ",""])),t.name);var r=await self.createImageBitmap(t),a=r.width,i=r.height,l=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:a,height:i},n),s=l.outputWidth,c=l.outputHeight,d=new self.OffscreenCanvas(s,c),m=_({canvas:d,inputWidth:a,inputHeight:i,outputWidth:s,outputHeight:c,image:r});return m}async function p(e,t){u.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["start decoding image with DOM: ",""])),e.name);var n=await o("WABlobToImage").blobToImage(e),r=n.image,a=n.releaseImageMemory,i=r.width,l=r.height,c=o("WACalculateBoundOutputSize").calculateBoundOutputSize({width:i,height:l},t),d=c.outputWidth,m=c.outputHeight,p=document.createElement("canvas"),f=_({canvas:p,inputWidth:i,inputHeight:l,outputWidth:d,outputHeight:m,image:r});return a(),f}function _(e){var t=e.canvas,n=e.image,r=e.inputWidth,o=e.inputHeight,a=e.outputWidth,i=e.outputHeight;t.width=a,t.height=i;var l=t.getContext("2d");l.fillStyle="rgb(255,255,255)",l.fillRect(0,0,t.width,t.height),l.drawImage(n,0,0,r,o,0,0,a,i);var s=l.getImageData(0,0,a,i);return s}l.canDecodeWithoutDOM=c,l.decodeImage=d,l.decodeImageWithoutDOM=m,l.decodeImageWithDOM=p}),98);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=null,l=new(e||(e=n("Promise")))(function(e,n){t=setTimeout(function(){n(new(o("WACustomError")).TimeoutError(i)),clearTimeout(t)},a)});return e.race([r,l]).finally(function(){clearTimeout(t)})};l.promiseTimeout=s}),98);
__d("WAMediaWasmWorkerClient",["FBLogger","QPLUserFlow","WAByteArray","WACustomError","WAMediaWasmWorkerResource","WAPromiseTimeout","WAResultOrError","WorkerBundleResource","WorkerClient","WorkerMessagePort"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D=o("WorkerBundleResource").createDedicatedWebWorker(r("WAMediaWasmWorkerResource")),x="media_platform",$=function(){return r("FBLogger")(x).tags(["WAMediaWasmWorkerClient"])},P=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(D,"WAMediaWasmWorker");o("WorkerClient").init(P),$().DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["initiated."]))),P.addMessageListener("log",function(e){var t=e.logType,n=e.message;switch(t){case"dev":$().DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["from worker: ",""])),n);break;case"error":$().MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["worker error: ",""])),n);break;default:}}),P.addMessageListener("qpl",function(e){N(e)});function N(e){var t=e.event,n=e.action;switch(n.type){case"point":{r("QPLUserFlow").addPoint(t,n.pointName,{instanceKey:n.instanceKey});break}case"annotations":{r("QPLUserFlow").addAnnotations(t,n.annotations,{instanceKey:n.instanceKey});break}default:$().MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unknown QPL action type from worker: ",""])),n.type)}}function M(e){var t=e.input,n=e.eventFlow;return q({operation:"webpCheck",input:o("WAByteArray").uint8ArrayToBuffer(t)},n)}function w(e){var t=e.input,n=e.eventFlow;return $().INFO(d||(d=babelHelpers.taggedTemplateLiteralLoose(["mp4RepairMuxInWorker processing video"]))),q({operation:"mp4RepairMux",input:o("WAByteArray").uint8ArrayToBuffer(t)},n)}async function A(e){var t=e.input,n=e.forceTranscode,r=e.supportsHevc,a=e.eventFlow;$().INFO(m||(m=babelHelpers.taggedTemplateLiteralLoose(["transcodeToMp4InWorker processing video"])));var i=W();$().INFO(p||(p=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),i);var l=await U();if(!l.success)return o("WAResultOrError").makeError(l.error);var s=l.value,u=s.onMessageOnce("transcodeToMp4Response",function(e){return e.requestId===i}),c=o("WAByteArray").uint8ArrayToBuffer(t),d=c?[c]:void 0;s.postMessage({input:c,requestId:i,forceTranscode:n,supportsHevc:r,type:"transcodeToMp4Request",qplData:a.flowDetails},d),a==null||a.addPoint("sent_request_to_media_worker_start");var f=await u,g=f.output;return $().INFO(_||(_=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),i,g.success),g.success?(a==null||a.addPoint("sent_request_to_media_worker_end"),g):(a==null||a.addPoint("sent_request_to_media_worker_end"),a==null||a.addAnnotations({string:{errorMessage:g.error.errorMessage}}),o("WAResultOrError").makeError(g.error.errorType))}function F(e){var t=e.imageData,n=e.quality,r=e.useHdScanConfig,a=e.eventFlow;return q({operation:"progressiveJpegEncode",input:o("WAByteArray").uint8ArrayToBuffer(t.data),height:t.height,width:t.width,quality:n,useHdScanConfig:r},a)}async function O(e){var t=e.file,n=e.quality,r=e.useHdScanConfig,o=e.eventFlow,a=e.maxOutputResolution,i=await t.arrayBuffer();return q({operation:"progressiveJpegEncodeWithFile",input:i,fileName:t.name,fileType:t.type,quality:n,useHdScanConfig:r,maxOutputWidth:a==null?void 0:a.width,maxOutputHeight:a==null?void 0:a.height},o)}function B(e){$().INFO(f||(f=babelHelpers.taggedTemplateLiteralLoose(["start prewarming media wasm worker, operation: ",""])),e),P.postMessage({type:"prewarm",operation:e})}var W=(function(){var e=0;return function(){return++e}})();async function q(e,t){var n=W();$().INFO(g||(g=babelHelpers.taggedTemplateLiteralLoose(["sending input bytes to worker, requestId: ",""])),n);var r=await U(t);if(!r.success)return r;var a=r.value,i=a.onMessageOnce("mediaOperationResponse",function(e){return e.requestId===n}),l=e.input?[e.input]:void 0;a.postMessage(babelHelpers.extends({},e,{requestId:n,type:"mediaOperationRequest"}),l),t==null||t.addPoint("sent_request_to_media_worker_start");var s=await i,u=s.output;return u.success?($().INFO(h||(h=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),n),t==null||t.addPoint("sent_request_to_media_worker_end",{bool:{isOpfsSyncSupported:u.value.isOpfsSyncSupported}}),o("WAResultOrError").makeResult(u.value.bytes)):($().MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),n,u.error.errorMessage),t==null||t.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(u.error.errorType))}function U(e){e==null||e.addPoint("get_connected_worker_port_start");var t=3e4;return o("WAPromiseTimeout").promiseTimeout(P.fullyConnected,t).then(function(t){return e==null||e.addPoint("get_connected_worker_port_end"),o("WAResultOrError").makeResult(t)}).catch(function(t){return e==null||e.addPoint("get_connected_worker_port_fail",{string:{workerPortFailure:t instanceof o("WACustomError").TimeoutError?"timeout":"runtime-error"}}),t instanceof o("WACustomError").TimeoutError?o("WAResultOrError").makeError("worker-connection-timeout"):($().MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["worker-connection-runtime-error: ",""])),t),o("WAResultOrError").makeError("worker-connection-runtime-error"))})}async function V(e){var t,n,r=e.file,a=e.maxDimension,i=e.thumbnailBlobByteSizeLimitBytes,l=e.thumbnailQualityPercentageWhenAboveByteSizeLimit,s=W();$().INFO(b||(b=babelHelpers.taggedTemplateLiteralLoose(["sending input to worker, requestId: ",""])),s);var u=await U();if(!u.success)return u;var c=u.value,d=c.onMessageOnce("mediaGenerateImageThumbnailResponse",function(e){return e.requestId===s}),m=await r.arrayBuffer(),p=m?[m]:void 0;c.postMessage({input:m,fileName:r.name,fileType:r.type,maxDimension:a,requestId:s,thumbnailBlobByteSizeLimitBytes:i,thumbnailQualityPercentageWhenAboveByteSizeLimit:l,type:"mediaGenerateImageThumbnailRequest"},p);var _=await d;return $().INFO(v||(v=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",", success: ",""])),s,_.output.success),_.output.success?o("WAResultOrError").makeResult(_.output.value):($().MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["requestId: ",", error: ",""])),s,(t=_.output.error)==null?void 0:t.errorMessage),Promise.reject((n=_.output.error)==null?void 0:n.errorMessage))}async function H(e,t){$().INFO(R||(R=babelHelpers.taggedTemplateLiteralLoose(["start media storage shadow test"])));var n=W(),r=await U();if(!r.success)return o("WAResultOrError").makeError({errorName:"port-init",errorMessage:r.error});var a=r.value,i=a.onMessageOnce("mediaStorageShadowTestResponse",function(e){return e.requestId===n});a.postMessage({input:e,requestId:n,storageType:t,type:"mediaStorageShadowTestRequest"});var l=await i,s=l.output;return s.success?($().INFO(L||(L=babelHelpers.taggedTemplateLiteralLoose(["received storage results from worker, requestId: ",""])),n),o("WAResultOrError").makeResult(s.value)):($().MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["media storage test failed for storageType: ",", error: ",""])),t,s.error.errorMessage),o("WAResultOrError").makeError({errorName:s.error.errorName,errorMessage:s.error.errorMessage}))}async function G(e){var t=e.mediaType,n=e.rawMimeType,r=e.input,a=e.eventFlow,i=W();$().INFO(k||(k=babelHelpers.taggedTemplateLiteralLoose(["start kaleidoscope classifiy in worker, requestId: ",""])),i);var l=await U(a);if(!l.success)return l;var s=l.value,u=s.onMessageOnce("kaleidoscopeClassifyResponse",function(e){return e.requestId===i});s.postMessage({mediaType:t,rawMimeType:n,input:r,requestId:i,type:"kaleidoscopeClassifyRequest"}),a==null||a.addPoint("sent_request_to_media_worker_start");var c=await u,d=c.output;return d.success?($().INFO(I||(I=babelHelpers.taggedTemplateLiteralLoose(["received output from worker, requestId: ",""])),i),a==null||a.addPoint("sent_request_to_media_worker_end"),d):($().MUSTFIX(T||(T=babelHelpers.taggedTemplateLiteralLoose(["kaleidoscope classifiy error: ",", requestId: ",","])),d.error,i),a==null||a.addPoint("sent_request_to_media_worker_fail"),o("WAResultOrError").makeError(d.error))}l.webpCheckInWorker=M,l.mp4RepairMuxInWorker=w,l.transcodeToMp4InWorker=A,l.progressiveJpegEncodeInWorker=F,l.progressiveJpegEncodeInWorkerWithFile=O,l.prewarmMediaWasmWorker=B,l.getConnectedWorkerPortWithTimeout=U,l.generateImageThumbnailInWorker=V,l.runMediaStorageShadowTestWasmWorker=H,l.kaleidoscopeClassifyInWorker=G}),98);
__d("MAWImagePreProcess",["MAWGetImageSpec","MAWImageUtils","MAWMediaPreProcessQpl","MWFBLogger","WABlobToArrayBuffer","WACustomError","WADecodeImage","WAMediaWasmWorkerClient","WAPromiseTimeout","WAResultOrError","cometIsMimeTypeForMedia","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=12e4,f=o("MWFBLogger").MWMediaLogger().tags(["ImagePreProcess"]),g=85,h=["image/heic"];function y(e,t,n,a){var i;a===!0?i={height:r("justknobx")._("187"),width:r("justknobx")._("187")}:i={height:r("justknobx")._("2144"),width:r("justknobx")._("2144")};var l;t?l=e.type==="image/webp"?Promise.resolve(e):S(e,"image/webp",t,n,i):l=e.type==="image/gif"?Promise.resolve(e):S(e,"image/jpeg",!1,n,i);var s=e.type==="image/gif";return s?l.then(function(e){return Promise.all([o("MAWGetImageSpec").getImageSpec(e),e])}).then(async function(n){var r=n[0],a=n[1];return{file:a,imageSpec:r,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(a),thumbnailUrlAndSpec:null,type:v(e,t)}}):l.then(function(t){return Promise.all([k(e,r("justknobx")._("2033")),o("MAWGetImageSpec").getImageSpec(t),t])}).then(async function(n){var r=n[0],a=n[1],i=n[2];return Promise.resolve({file:i,imageSpec:a,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(i),thumbnailUrlAndSpec:r,type:v(e,t)})})}async function C(e,n){var a=t.URL.createObjectURL(e),i=n===!0?r("justknobx")._("2545"):r("justknobx")._("2033"),l=await o("MAWImageUtils").urlToThumbnailSpec(a,i),s={height:l.height,width:l.width};return{file:e,imageSpec:s,thumbnailSpec:l,type:v(e,n),url:a}}function b(e,t){return o("MAWGetImageSpec").getImageSpec(e).then(function(n){return Promise.resolve({file:e,imageSpec:n,stickerReceiverFetchId:t,type:"sticker"})})}function v(e,t){return t===!0?"sticker":e.type==="image/gif"?"animated_image":"image"}async function S(t,n,r,a,i){f.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start image transcode ",""])),t.name);var l=o("MAWMediaPreProcessQpl").startMediaPreProcessQpl("image",t);l.addAnnotations({int:{total_number_of_files:a!=null?a:1},string:{targetMimetype:n}});var u=function(){return L(t,n,g,r,i).then(function(e){return e.success?e.value:Promise.reject("runtime-error")}).catch(function(e){return f.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error while transcoding image through browser api: ",""])),String(e)),l.addPoint("native_encode_failure",{string:{native_encode_error:e.toString()}}),null})},c=n==="image/jpeg"?await o("WAPromiseTimeout").promiseTimeout(E(t,g,l,i).then(function(e){return e.success?e.value:Promise.reject(e.error)}),_).catch(function(e){return e instanceof o("WACustomError").TimeoutError?l.addPoint("mozjpeg_encode_timeout"):l.addPoint("mozjpeg_encode_failure",{string:{mozjpeg_encode_error:e.toString()}}),u()}):await u();if(c==null)throw l.endFail("unable_to_transcode_image"),f.mustfixThrow("unable to transcode image");return l.endSuccess({int:{compressed_file_size:c.size}}),c}function R(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToThumbnail(r,n)}function L(e,n,r,a,i){f.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["start image transcoding through browser api"])));var l=t.URL.createObjectURL(e),s=e.name;return o("MAWImageUtils").urlToFile(l,n,r,a,i).then(function(e){var t=e.blob;return f.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["finished image transcoding through browser api: "," bytes"])),t.size),o("WAResultOrError").makeResult(new File([t],s,{type:n}))})}async function E(e,t,n,r){f.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["start process image through wasm, file name: ",""])),e.name),o("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("progressiveJpegEncode"),n.addPoint("prewarm_worker_started");var a;if(o("WADecodeImage").canDecodeWithoutDOM&&(a=await o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorkerWithFile({eventFlow:n,file:e,maxOutputResolution:r,quality:t,useHdScanConfig:!0})),a==null||!a.success&&a.error==="decode-image-error"){var i=await o("WADecodeImage").decodeImageWithDOM(e,r).catch(function(e){throw n.addPoint("image_decode_failure"),e});n.addPoint("image_decode_success"),a=await o("WAMediaWasmWorkerClient").progressiveJpegEncodeInWorker({eventFlow:n,imageData:i,quality:t,useHdScanConfig:!0})}return a.success?(n.addPoint("pjpeg_encode_success"),f.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["finished jpeg transcoding through mozjpeg: "," bytes"])),a.value.byteLength),o("WAResultOrError").makeResult(new File([a.value],e.name,{type:"image/jpeg"}))):a}function k(e,n){var a=async function(){var r=t.URL.createObjectURL(e),a=await o("MAWImageUtils").urlToThumbnail(r,n);return t.URL.revokeObjectURL(r),a};if(!o("WADecodeImage").canDecodeWithoutDOM)return a();var i=r("justknobx")._("2338")*1024,l=r("justknobx")._("2340");return o("WAPromiseTimeout").promiseTimeout(o("WAMediaWasmWorkerClient").generateImageThumbnailInWorker({file:e,maxDimension:n,thumbnailBlobByteSizeLimitBytes:i,thumbnailQualityPercentageWhenAboveByteSizeLimit:l}).then(function(e){if(!e.success)throw f.mustfixThrow("urlToFileInWorker error: "+e.error);return{height:e.value.height,jpegThumbnail:e.value.blob,width:e.value.width}}).catch(function(e){throw f.catching(e).MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Error while processing url to thumbnail in worker"]))),e}),_).catch(function(e){return a()})}function I(e){return e==="image/gif"||e==="image/webp"?!0:o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(e)?!h.includes(e):!1}l.imagePreprocess=y,l.optimisticImagePreprocess=C,l.stickerPreprocess=b,l.getJpegThumbnailInfo=R,l.generateImageThumbnailInWorkerWithFallback=k,l.isSupportedImageFileType=I}),98);
__d("WAWebDataUrlToBlob",["err"],(function(t,n,r,o,a,i,l){var e=/^data:((.*?)(;charset=.*?)?)(;base64)?,/;function s(t){var n=t.match(e);if(!n)throw r("err")("invalid data URI");var o=n[2]?n[1]:"text/plain"+(n[3]||";charset=US-ASCII"),a=!!n[4],i=t.slice(n[0].length),l;a?l=atob(i):l=decodeURIComponent(i);for(var s=new ArrayBuffer(l.length),u=new Uint8Array(s),c=0;c<l.length;c+=1)u[c]=l.charCodeAt(c);return new Blob([u],{type:o})}l.dataURLtoBlob=s}),98);
__d("MAWImageUtils",["FBLogger","MAWAnimatedImageThumbnailStore","MAWDbMedia","MAWFrontendMediaUtils","MAWImagePreProcess","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WACalculateBoundOutputSize","WAWebDataUrlToBlob","err","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s="image/jpeg",u=100,c=r("justknobx")._("2338")*1024,d=r("justknobx")._("2340"),m=r("justknobx")._("2545");function p(t,o){o===void 0&&(o=!0);var a;return new(e||(e=n("Promise")))(function(e,n){a=new Image;var i=/^(?:data|blob):/.test(t);o&&!i&&a.setAttribute("crossOrigin","anonymous"),a.onload=e,a.onabort=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Error loading image from provided URL"))},a.onerror=function(){n(r("FBLogger")("messenger_web").mustfixThrow("Wrong blob type"))},a.src=t}).then(function(){return a})}function _(t){return window.fetch(t,{cache:"no-store",method:"GET",mode:"cors"}).then(function(e){if(!e.ok)throw r("FBLogger")("messenger_web").mustfixThrow("Failed to fetch image: %s %s",e.status,e.statusText);return e.blob()}).then(function(t){return new(e||(e=n("Promise")))(function(e,n){var o=new FileReader;o.onloadend=function(){var t=new Image;t.onload=function(){e(t)},t.onerror=function(){n(function(){throw r("FBLogger")("messenger_web").mustfixThrow("Error loading image from blob data")})},typeof o.result=="string"?t.src=o.result:n(r("err")("FileReader result is not a string"))},o.onerror=function(){n(r("err")("Error reading blob as data URL"))},o.readAsDataURL(t)})}).catch(function(e){throw r("FBLogger")("messenger_web").mustfixThrow("Failed to load image from URL: %s, %s",t,String(e))})}function f(t,r,a,i){if(a===void 0&&(a=!1),t.toBlob)return new(e||(e=n("Promise")))(function(e){var n=i==null?void 0:i/100;t.toBlob(e,r,n)}).then(function(o){var i=c,l=d/100;return a&&o.size>=i?new(e||(e=n("Promise")))(function(e){t.toBlob(e,r,l)}):o});var l;o("MWPBumpEntityKey").bumpEntityKey("maw","data_url_to_blob");var s=(l=o("WAWebDataUrlToBlob").dataURLtoBlob)!=null?l:window.dataURLtoBlob;return(e||(e=n("Promise"))).resolve(s(t.toDataURL(r))).then(function(o){var i=c,l=d/100;return a&&o.size>=i?(e||(e=n("Promise"))).resolve(s(t.toDataURL(r,l))):o})}function g(t,a,i,l,s,u){u===void 0&&(u=!1);var c=u?_(t):p(t);return c.then(function(e){var t=e.naturalWidth,n=e.naturalHeight,r=o("WACalculateBoundOutputSize").calculateBoundOutputSize({height:n,width:t},s),u=r.outputHeight,c=r.outputWidth,d=document.createElement("canvas");d.width=c,d.height=u;var m=d.getContext("2d");return l!==!0&&b(d),m.drawImage(e,0,0,t,n,0,0,c,u),f(d,a,!1,i).then(function(e){return{blob:e,height:u,width:c}})}).catch(function(t){return(e||(e=n("Promise"))).reject(t!=null?t:r("err")("Error loading image from URL"))})}function h(e,t){return p(e).then(function(e){var n=document.createElement("canvas"),r=e.naturalWidth,a=e.naturalHeight,i=n.getContext("2d"),l=v(a,r,t);n.width=l.width,n.height=l.height;var u=n.width,c=n.height;return C(n),i.drawImage(e,0,0,u,c),f(n,s,!0).then(function(e){return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(function(e){return{height:c,jpegThumbnail:e,width:u}})})})}function y(e,t){return p(e).then(function(e){var n=v(e.naturalHeight,e.naturalWidth,t);return{height:n.height,width:n.width}})}function C(e){var t=e.getContext("2d");t.fillStyle="rgb(247,247,247)",t.fillRect(0,0,e.width,e.height)}function b(e){var t=e.getContext("2d");t.fillStyle="rgb(255,255,255)",t.fillRect(0,0,e.width,e.height)}function v(e,t,n){var r=t!=null?t:n,o=e!=null?e:n;return r>o?r>n&&(o*=n/r,r=n):o>n&&(r*=n/o,o=n),{height:Math.round(Math.max(o,1)),width:Math.round(Math.max(r,1))}}function S(e){return p(e).then(function(e){return{height:e.naturalHeight,width:e.naturalWidth}})}function R(t,a,i,l){l===void 0&&(l=!1);var s=o("MAWAnimatedImageThumbnailStore").getThumbnailSpec(t);if(s)return(e||(e=n("Promise"))).resolve(s);var u=g(t,"image/gif",void 0,void 0,void 0,l);return u==null?null:u.then(function(e){var n=new File([e.blob],"gif",{type:"image/gif"});return o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(n,Math.max(i!=null?i:e.width,a!=null?a:e.height)).then(function(e){return o("MAWAnimatedImageThumbnailStore").setThumbnailSpec(t,e),e})}).catch(function(e){throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed while generating thumbnail for GIF. URL: ",t,e)})}function L(t){var r=t==null?void 0:t.file,a=t==null?void 0:t.width,i=t==null?void 0:t.height;if(r==null||a==null||i==null)return(e||(e=n("Promise"))).resolve(t);var l=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(r.type,!0),s=l.mediaType;return s!==o("MAWDbMedia").MEDIA_TYPE.GIF?(e||(e=n("Promise"))).resolve(t):o("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(r,Math.max(a,i)).then(function(e){var t=new File([e.jpegThumbnail],"secure_threads_xma_preview_thumbnail",{type:"image/jpeg"});return{file:t,height:e.height,width:e.width}})}l.TYPE_JPEG=s,l.IMG_THUMB_MAX_EDGE=u,l.STICKER_THUMBNAIL_MAX_SIZE=m,l.canvasToBlob=f,l.urlToFile=g,l.urlToThumbnail=h,l.urlToThumbnailSpec=y,l.boundHeightWidth=v,l.urlToImageSpec=S,l.generateGIFThumbnail=R,l.generatePreviewBlobForShare=L}),98);
__d("MAWGetImageSpec",["MAWImageUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,n){var r=t.URL.createObjectURL(e);return o("MAWImageUtils").urlToFile(r,n!=null?n:e.type).then(function(e){var t=e.height,n=e.width;return{height:t,width:n}})}async function s(e){var n=t.URL.createObjectURL(e),r=await o("MAWImageUtils").urlToImageSpec(n);return t.URL.revokeObjectURL(n),r}l.getImageSpec_DEPRECATED=e,l.getImageSpec=s}),98);
__d("MAWMpsMigrationStatus",["ExecutionEnvironment","FBLogger","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){return r("justknobx")._("5255")?!0:c==null?(r("FBLogger")("wmi").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is not initialised, main thread: ",""])),(u||(u=r("ExecutionEnvironment"))).isInMainThread),!1):c}function m(e){r("FBLogger")("wmi").DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MAWMpsMigrationStatus is ",""])),e),c=e}l.isMigrated=d,l.setStatus=m}),98);
__d("MAWMpsGating",["MAWMpsMigrationStatus","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("10465")}function s(){return r("gkx")("19024")}function u(){return o("MAWMpsMigrationStatus").isMigrated()&&(e()||r("gkx")("17181"))}function c(){return e()||r("gkx")("17846")}function d(){return r("gkx")("17946")}function m(){return u()&&r("gkx")("19368")}function p(){return u()&&r("gkx")("19318")}l.isFullMpsEnabled=e,l.isMpsSpamReports=s,l.isMpsMessageRendering=u,l.isMpsSnippetsCacheServiceEnabled=c,l.isEBMessageProbeEnabled=d,l.isFileGalleryEBTaggingEnabled=m,l.isMediaGalleryEnabled=p}),98);
__d("MsgrWebGating",["MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15418")||o("MAWMpsGating").isMpsMessageRendering()}l.isQuotedMessagesInLsEnabled=e}),98);
__d("WAHashUtils",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function s(e,t){return o("WABase64").encodeB64UrlSafe(e,t)}function u(e){return e}function c(e){return e}function d(e){return""+e.slice(0,3)}l.toPlaintextHash=e,l.toCiphertextHash=s,l.stringToPlaintextHash=u,l.toHashedPlaintextHash=c,l.sanitisePlaintextHash=d}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,a=e.author,i=e.msgId,l=o("WAJids").authorToUserId(a,t),s=(n=e.quote)==null||(n=n.content.msgContent)==null?void 0:n.content,u=(r=e.quote)==null?void 0:r.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:u!=null?u*1e3:void 0,replyMessageText:s,replySourceId:i,replyToUserId:l}}l.default=e}),98);
__d("MAWBridgeMsg",["FBLogger","LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","MsgrWebGating","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","WATimeUtils","getReplyContentForNoteReply","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n;if(o("MsgrWebGating").isQuotedMessagesInLsEnabled()){if(e.isForwarded===!0&&e.type!==o("MAWMsgType").MSG_TYPE.STICKER)return{replyType:"FORWARD"};if(o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))return{replyToMsgId:e.msgId,replyToUserId:o("WAJids").authorToUserId(e.author,t),replyType:"HIGHLIGHTS_TAB_POST_REPLY",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null};if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var r=e.threadJid,a=o("WAJids").interpretAsUserJid(r),i;return a!=null&&(i=o("WAJids").userIdFromJid(a)),o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)?{mentionedUserId:i!=null?i:t,replyType:"FB_POST_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}:{mentionedUserId:i!=null?i:t,replyType:"FB_STORY_MENTION",timestampMs:e.sortOrderMs!=null?o("WATimeUtils").castToMillisTime(e.sortOrderMs):null}}if(!(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType))){var l=(n=e.quote)==null?void 0:n.content;if(l!=null){var s=l.author,u=l.expirationTs,c=l.mediaId,d=l.msgContent,m=l.msgId,p=l.plaintextHash,_=l.sourceId,f=l.ts,g=l.type,h=l.xmaMessageType,y=o("WAJids").authorToUserId(s,t);if(g===o("WAMsgType").NOTE_REPLY)return{noteContent:d==null?void 0:d.content,replyMediaExpirationTimestampMs:u!=null?o("WATimeUtils").castToMillisTime(u*1e3):void 0,replyToMsgId:e.msgId,replyToUserId:y,replyType:"LIGHTWEIGHT_STATUS"};if(g===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isXMAStoryReply(h)){if(_==null)return;var C=o("MAWXMAUtils").isXMAStoryProducerReply(h);return C?{replyType:"FB_PRODUCER_STORY_REPLY",storyMediaId:c!=null?c:void 0,storyMediaPlaintextHash:p,storyMsgType:c!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}:{replyType:"STORY",storyMediaPlaintextHash:p,storyOwnerId:y,storyUrl:_,timestampMs:f!=null?o("WATimeUtils").castUnixTimeToMillisTime(f):null}}if(m!=null)return{isBumpMsg:e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,replyToMsgId:m,replyType:"MESSAGE"}}}}}function c(e,t,n){var a,i,l,s=((a=e.quote)==null?void 0:a.content.type)===o("WAMsgType").NOTE_REPLY;if(s)return r("getReplyContentForNoteReply")(e,n);var u=(i=e.quote)==null?void 0:i.content;if(o("MAWXMAUtils").isXMAStoryShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var c,d=e.author,m=e.mediaId,p=e.msgId,_=o("WAJids").authorToUserId(d,n);if(o("MAWXMAUtils").isXMAStoryMention(e.xmaMessageType)||o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType)){var f=e.threadJid,g;f!=null&&(g=o("WAJids").interpretAsUserJid(f)),g!=null&&(_=o("WAJids").userIdFromJid(g))}return m!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content"),{isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(e.xmaMessageType),isFBStoryMention:o("MAWXMAUtils").isFBXMAStoryMention(e.xmaMessageType),isIGStoryMention:o("MAWXMAUtils").isIGXMAStoryMention(e.xmaMessageType),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(e.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e.xmaMessageType),isStoryHighlightShare:o("MAWXMAUtils").isXMAStoryHighlightShare(e.xmaMessageType),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(e.xmaMessageType),isStoryReply:o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType),replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:m,replyPlaintextHash:(c=e.plaintextHash)!=null?c:void 0,replySenderIsMe:d===o("WAJids").AUTHOR_ME||_===n,replySourceId:p,replySourceTimestampMs:e.sortOrderMs,replyStatusType:m!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:_}}if(!(u==null||(u==null?void 0:u.msgId)==null&&(u==null?void 0:u.sourceId)==null)){var h=u||{},y=h.author,C=h.mediaId,b=h.msgId,v=h.plaintextHash,S=h.sourceId,R=h.specialTextSize,L=h.ts,E=h.type,k=h.xmaMessageType,I=L!=null?L*1e3:void 0,T=u.type===o("MAWMsgType").MSG_TYPE.TEXT||o("MAWXMAUtils").isXMAExternalLinkShare(k)?(l=u.msgContent)==null?void 0:l.content:void 0,D=o("WAJids").authorToUserId(y,n),x=u.type===o("MAWMsgType").MSG_TYPE.TEXT?u.msgContent.mentionedJids:void 0,$=y===o("WAJids").AUTHOR_ME||D===n,P=t||{},N=P.replyMediaId,M=P.replyMediaPreviewHeight,w=P.replyMediaPreviewWidth,A=P.replyMediaUrlFallback,F=P.replyPlaintextHash,O=P.replyXMAId;if(o("MAWXMAUtils").isXMAStoryReply(k)){var B;return{isStoryProducerReply:o("MAWXMAUtils").isXMAStoryProducerReply(k),isStoryReaction:o("MAWXMAUtils").isXMAStoryReaction(k),isStoryReply:!0,replyMediaExpirationTimestampMs:u==null?void 0:u.expirationTs,replyMediaId:C,replyPlaintextHash:(B=F!=null?o("WAHashUtils").stringToPlaintextHash(F):v)!=null?B:void 0,replySenderIsMe:$,replySourceId:S,replySourceTimestampMs:I,replyStatusType:C!=null?o("MAWMsgType").MSG_TYPE.IMAGE:void 0,replyToUserId:D}}var W=o("MAWImageUtils").boundHeightWidth(M,w,96*.8),q=W.height,U=W.width;return{isIGXMAPostShare:o("MAWXMAUtils").isIGXMAPostShare(k),isIGXMAStoryShare:o("MAWXMAUtils").isIGXMAStoryShare(k),isStoryReply:!1,replyMediaId:N,replyMediaPreviewHeight:E===o("MAWMsgType").MSG_TYPE.STICKER?q:M,replyMediaPreviewWidth:E===o("MAWMsgType").MSG_TYPE.STICKER?U:w,replyMediaUrlFallback:A,replyMentionedJids:x,replyMessageText:T,replyPlaintextHash:F!=null?o("WAHashUtils").stringToPlaintextHash(F):void 0,replySenderIsMe:$,replySourceId:b,replySourceTimestampMs:I,replyStatusType:R===1||R===2||R===3?o("MAWMsgType").MSG_TYPE.STICKER:E,replyToUserId:D,replyXMAId:O}}}function d(e){var t=e.specialTextSize;switch(t){case 1:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL);case 2:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM);case 3:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE);default:return(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").NONE)}}function m(e){if(r("justknobx")._("3424")&&e==="media_restore")return"EncryptedBackupsMedia";switch(e){case"eb_restore":return"EncryptedBackups";case"media_restore":return"EncryptedBackupsMedia";case"whatsapp":return"WhatsApp";default:return}}function p(t,n,a){var i,l,s,d,p=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),_=((i=t.isForwarded)!=null?i:!1)&&t.type!==o("MAWMsgType").MSG_TYPE.STICKER,f=(l=t.forwardingScore)!=null?l:0,g=o("MAWDbMsg").getCanonicalTsFromMsg(t),h=c(t,n,p),y=u(t,p),C=o("MAWXMAUtils").isXMAStoryShare(t.xmaMessageType),b=o("MAWXMAUtils").isXMAStoryReaction(t.xmaMessageType),v=o("MAWXMAUtils").isXMAExternalLinkShare(t.xmaMessageType),S=o("MAWXMAUtils").isIGXMAStoryMention(t.xmaMessageType),R=o("MAWXMAUtils").isFBXMAStoryMention(t.xmaMessageType),L=o("MAWXMAUtils").isXMAStoryHighlightShare(t.xmaMessageType),E=o("MAWXMAUtils").isXMAPostPrivateReply(t.xmaMessageType),k=o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(t.xmaMessageType),I=t.messageExpirationTs!=null&&t.messageExpirationTs<=o("WATimeUtils").unixTime(),T=o("MAWDbMsg").getSortOrderWithFallback(t),D=t.externalId,x=m(t.source);(n==null?void 0:n.replyPlaintextHash)!==(h==null?void 0:h.replyPlaintextHash)&&r("FBLogger")("messenger_web").warn("replyPlaintextHash mismatch. From replyMeta is null: %s, from replyContent is null: %s. Message type: %s",(n==null?void 0:n.replyPlaintextHash)==null,(h==null?void 0:h.replyPlaintextHash)==null,t.type);var $=(n==null?void 0:n.replyPlaintextHash)!=null?o("WAHashUtils").stringToPlaintextHash(n==null?void 0:n.replyPlaintextHash):(s=h==null?void 0:h.replyPlaintextHash)!=null?s:void 0;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:{var P,N=o("MAWVault").isVaulted(t.msgContent.content)?t.msgContent.content:o("MAWVault").vault(t.msgContent.content);return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:t.msgContent.commands,content:N,editCount:t.editCount,ephemeralDurationInSec:(P=t.ephemeralSetting)==null?void 0:P.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,mentionedJids:t.msgContent.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,specialTextSize:t.specialTextSize,transportKey:x,ts:g,type_:t.type})}case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,ephemeralDurationInSec:(d=t.ephemeralSetting)==null?void 0:d.ephemeralExpirationInSec,externalId:D,forwardingScore:f,groupId:t.groupId,groupIndex:t.groupIndex,groupSize:t.groupSize,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,unsupportedType:t.msgContent.subtype});case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type});case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:[t.msgContent.authorName],adminType:t.msgContent.adminType,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:{var M,w,A;return{_META_loaded_as_quoted_msg:a,ack:t.ack,adminContent:(M=t.msgContent)==null||(M=M.adminMsgContent)==null?void 0:M.map(function(e){return e==="Facebook User"?"0":e}),adminType:(w=t.msgContent)==null?void 0:w.adminType,adminVersion:(A=t.msgContent)==null?void 0:A.version,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!0,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type}}case o("MAWMsgType").MSG_TYPE.REVOKED:return{_META_loaded_as_quoted_msg:a,ack:t.ack,chatJid:t.threadJid,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isExpiredMsg:I,isForwarded:_,msgId:t.msgId,originalTs:t.originalTs,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type};case o("MAWMsgType").MSG_TYPE.XMA:{var F,O,B,W,q,U=(F=t.msgContent)==null?void 0:F.content,V=U!=null?o("MAWVault").isVaulted(U)?(O=t.msgContent)==null?void 0:O.content:o("MAWVault").vault(U):void 0;v&&V==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"])));var H=V;return babelHelpers.extends({},h,{_META_loaded_as_quoted_msg:a,ack:t.ack,applicationErrorCode:t.applicationErrorCode,chatJid:t.threadJid,commands:(B=t.msgContent)==null?void 0:B.commands,content:H,ephemeralDurationInSec:(W=t.ephemeralSetting)==null?void 0:W.ephemeralExpirationInSec,externalId:D,forwardingScore:f,isAdminMessage:!1,isAuthorMe:t.author===o("WAJids").AUTHOR_ME,isCollapsed:t.isCollapsed,isExpiredMsg:I,isExpiredXmaMsg:t.isExpiredXmaMsg,isFBPostMention:o("MAWXMAUtils").isFBXMAPostMention(t.xmaMessageType),isFBStoryMention:R,isForwarded:_,isIGStoryMention:S,isMsgHighlightsTabFriendUpdatesReply:k,isPostPrivateReply:E,isStoryHighlightShare:L,isStoryReaction:b,isStoryShare:C,mentionedJids:(q=t.msgContent)==null?void 0:q.mentionedJids,msgId:t.msgId,replyContent:y,replyPlaintextHash:$,sender:o("WAJids").authorToUserId(t.author,p),sortOrderMs:T,transportKey:x,ts:g,type_:t.type,xmaMessageType:t.xmaMessageType})}default:return r("WAAssertUnreachable")(t.type)}}l.getSpecialTextSize=d,l.convertDbMsgSourceToLSTransportKey=m,l.createBridgeMsg=p}),98);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWVault","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t=!0);var n=e,r=o("MAWCurrentUser").getID(),a=e.author,i=e.externalId,l=e.msgId,s=e.threadJid;if(s==null)return null;var u=n.content,c=n.sortOrderMs,d={chatJid:s,externalId:i,msg:{msgId:l,sender:o("WAJids").authorToUserId(a,r),ts:e.canonicalTs},sortOrderMs:c},m=u;return babelHelpers.extends({},d,{msg:babelHelpers.extends({},d.msg,{content:m!=null?o("MAWVault").isVaulted(m)?t?m:o("MAWVault").unvault(m):t?o("MAWVault").vault(m):m:void 0})})}var s="message_content_search",u="non_message_content_search";l.createBridgeSearchMsg=e,l.MESSAGE_CONTENT_SEARCH=s,l.NON_MESSAGE_CONTENT_SEARCH=u}),98);
__d("MAWCacheServiceDB",["FBLogger","MAWCurrentUser","MAWIndexedDbMetadata","MAWWormOdsLogger","MessengerWebInitData","WAHex","Worm","WormDump","WormEAR","WormIDbDriver","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{key:{fields:["key"],unique:!0}},primaryKey:"id",secure:!0},s={messageComposerDrafts:e,snippets:e},u=null,c=function(t,n,a){var e="maw_cache_service",i=new(o("WormEAR")).WormEAR(a,e,n),l=new(o("WormIDbDriver")).WormIDbDriver(t,e,a,i,o("MAWWormOdsLogger").wormOdsWorkerLogger,{onTransactionError:m});return new(o("Worm")).WormDatabase(l,r("qpl")._(1056840657,"2716"))};function d(){return u!==null||(u=new Promise(async function(e,t){try{var n=c(o("MAWIndexedDbMetadata").MAWcacheServiceDbName(o("MAWCurrentUser").getID()),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),s);await n.init(),e(n)}catch(e){var a=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(a).mustfix("Failed to create cache service DB"),u=null,t(a)}})),u}function m(e){if(e instanceof o("WormEAR").DecryptionError){var t=e;r("FBLogger")("MAWCacheService").mustfix("EAR decryption error in store: %s. Attempting to delete the store:",t.store),r("promiseDone")(d().then(function(e){return e.runInTransaction([t.store],"readwrite",function(e){return e.stores[t.store].clear()},"delete-corrupted-entity")}).then(function(){r("FBLogger")("MAWCacheService").info("Successfully deleted corrupted store %s",t.store)}).catch(function(e){var n=r("getErrorSafe")(e);r("FBLogger")("MAWCacheService").catching(n).mustfix("Failed to delete corrupted store %s, err: %s",t.store,n.message)}))}}function p(e){return e.map(function(e){var t=e[0],n=e[1];return n})}async function _(){var e=await d();return e.dump({snippets:{customFields:{id:o("WormDump").wormNonSensitiveField,key:o("WormDump").wormNonSensitiveField,timestamp:o("WormDump").wormNonSensitiveField,value:function(t){var e;return{snippet:(e=o("WormDump")).wormRedact(t.snippet),snippetMsgAckLevel:e.wormNonSensitiveField(t.snippetMsgAckLevel),snippetMsgId:e.wormNonSensitiveField(t.snippetMsgId),snippetNewestIncomingMsgs:e.wormNonSensitiveField(t.snippetNewestIncomingMsgs),snippetReactionId:e.wormRedact(t.snippetReactionId)}}}}})}l.getOrSetupMAWCacheDB=d,l.convertCacheValueToDBRawValue=p,l.getDbDump=_}),98);
__d("MAWCacheServiceQPL",["ExecutionEnvironment","MAWCurrentUser","MAWQplProxy","QPLUserFlow","performanceAbsoluteNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=new Set,c=new Set,d=3e3,m=r("qpl")._(1056836703,"2955");function p(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(c.has(t))return;f(t),o("MAWQplProxy").startQplUserFlow(m,{},{callBridgeWithTimestamp:!0,providedInstanceKey:t})}else{if(u.has(t))return;_(t),r("QPLUserFlow").start(m,{annotations:{string:{service:n}},instanceKey:t})}}function _(e){u.add(e)}function f(e){c.add(e)}function g(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQplPointThroughBridge(m,"worker@"+i+n,{instanceKey:t},!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();a==="realtime-update"?window.setTimeout(function(){r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t,timestamp:p})},d):r("QPLUserFlow").addPoint(m,"ui@"+n,{instanceKey:t})}}function h(t,n){var a=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(a){if(!c.has(t))return;o("MAWQplProxy").sendQPLAnnotationsThroughBridge(m,n,t)}else{if(!u.has(t))return;r("QPLUserFlow").addAnnotations(m,n,{instanceKey:t})}}function y(t){var n=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(n){if(!c.has(t))return;c.delete(t),o("MAWQplProxy").sendQPLSuccessThroughBridge(m,{},t,!0)}else{if(!u.has(t))return;var a=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endSuccess(m,{instanceKey:t,timestamp:a})},d)}}function C(t,n,a){var i=b(a),l=(e||(e=r("ExecutionEnvironment"))).isInWorker||(e||(e=r("ExecutionEnvironment"))).isInSharedWorker;if(l){if(!c.has(t))return;o("MAWQplProxy").sendQPLFailThroughBridge(m,"worker@"+i+n,{},t,!0)}else{if(!u.has(t))return;var p=(s||(s=r("performanceAbsoluteNow")))();window.setTimeout(function(){u.delete(t),r("QPLUserFlow").endFailure(m,"ui@"+n,{instanceKey:t,timestamp:p})},d),u.delete(t)}}function b(e){return e?e.replace(/-/g,"_")+"_":""}function v(e){return o("MAWCurrentUser").isEmployee()||o("MAWCurrentUser").isTestUser()?e:void 0}var S={addAnnotationsQPL:h,addPointQPL:g,endFailureQPL:C,endSuccessQPL:y,redactKeysForNonEmployee:v,registerInstanceKeyInUI:_,registerInstanceKeyInWorker:f,startQPL:p};l.default=S}),98);
__d("MAWCacheServiceUtils",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_cache_service_broadcast",s=typeof window!="undefined"?window:self,u=function(){return s.BroadcastChannel?new s.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},c={concurrency:1,maxTaskLimit:1,maxThrottleMs:500};function d(e){return"maw-cache-service-"+e}function m(e,t){var n=new Set,r=[];return e.forEach(function(e){var o=t(e);if(n.has(o)){r.push(e);return}n.add(o)}),r}l.MAW_CACHE_SERVICE_BROADCAST_CHANNEL=e,l.globalScope=s,l.getMAWCacheServiceBroadcastChannel=u,l.SCHEDULER_CONFIG=c,l.getSchedulerName=d,l.findDuplicates=m}),98);
__d("MAWEBLSInWorkerSwitch",["MAWEBEnabledStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("MAWEBEnabledStateManager")).MAWEBEnabledStateManager,s=e;l.default=s}),98);
__d("MAWEBCombinedSwitch",["MAWEBEnabledStateManager","MAWEBLSInWorkerSwitch","MAWEBSwitch","MAWODSProxy","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.$MAWCombinedStateManager$p_1=t,r.$MAWCombinedStateManager$p_2=n,r.$MAWCombinedStateManager$p_3=null,r.$MAWCombinedStateManager$p_4=!1,r.$MAWCombinedStateManager$p_1.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_2.onSet(function(){r.$MAWCombinedStateManager$p_5()}),r.$MAWCombinedStateManager$p_5(),r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isEnabled=function(){var t=e.prototype.isEnabled.call(this);return this.$MAWCombinedStateManager$p_6(),t},n.$MAWCombinedStateManager$p_6=function(){var e=this.$MAWCombinedStateManager$p_1.isEnabled(),t=this.$MAWCombinedStateManager$p_2.isEnabled(),n=e!==t,r=e?"enabled":"disabled",a=t?"enabled":"disabled",i=n?"mismatch":"match";if(n&&!this.$MAWCombinedStateManager$p_4)this.$MAWCombinedStateManager$p_3=Date.now(),this.$MAWCombinedStateManager$p_4=!0;else if(this.$MAWCombinedStateManager$p_4&&this.$MAWCombinedStateManager$p_3!=null){var l=this.$MAWCombinedStateManager$p_3,s=Date.now()-l;this.$MAWCombinedStateManager$p_4=n,this.$MAWCombinedStateManager$p_3=n?Date.now():null;var u=this.$MAWCombinedStateManager$p_7(s);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.duration_bucket."+u});var c=n?"failed":"success";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch.sync.result."+c})}o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_SWITCH_STATE,key:"eb_switch."+i+"."+r+"."+a})},n.$MAWCombinedStateManager$p_7=function(t){return t<100?"under_100ms":t<500?"100_to_500ms":t<1e3?"500ms_to_1s":t<5e3?"1s_to_5s":t<1e4?"5s_to_10s":"over_10s"},n.$MAWCombinedStateManager$p_5=function(){this.set(this.$MAWCombinedStateManager$p_1.isEnabled()&&this.$MAWCombinedStateManager$p_2.isEnabled()),this.$MAWCombinedStateManager$p_6()},t})(o("MAWEBEnabledStateManager").MAWEBEnabledStateManager),s=new e(r("MAWEBSwitch"),r("MAWEBLSInWorkerSwitch"));l.MAWCombinedStateManager=e,l.MAWEBCombinedSwitch=s}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=300,u=600,c=900,d=1800,m=Math.imul((e=o("WATimeUtils")).HOUR_SECONDS,6),p=Math.imul(e.HOUR_SECONDS,12),_=Math.imul(e.DAY_SECONDS,14),f=1e3,g=5,h=10,y=30,C=60,b=m;l.fiveMinutesInSeconds=s,l.tenMinutesInSeconds=u,l.fifteenMinutesInSeconds=c,l.thirtyMinutesInSeconds=d,l.oneHourInSeconds=e.HOUR_SECONDS,l.sixHoursInSeconds=m,l.twelveHoursInSeconds=p,l.oneDayInSeconds=e.DAY_SECONDS,l.ephemeralMaxDelectionWindowForUnseenMessage=_,l.msPerSec=f,l.fiveSeconds=g,l.tenSeconds=h,l.thirtySeconds=y,l.oneMinuteInSeconds=C,l.ephemeralReportingWindowInSeconds=b}),98);
__d("MAWIsFbProfileDirectoryItemXmaEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("15740")}l.isFbProfileDirectoryItemXmaEnabled=e}),98);
__d("MAWJobDefinitions",["MAWExternalId"],(function(t,n,r,o,a,i,l){"use strict";var e=["s2sInstanceKey","s2sUserFlowQPLEvent"],s=["scheduleConfig"];function u(e){return e}function c(e){return e}var d={acceptGroupInvite:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,inviteCode:o,invitedParticipantUserId:r,inviteExpirationTs:a,inviterUserId:n},scheduleConfig:e!=null?e:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(t,n,r,o){var e=_(o);return{args:{group:t,s2sInstanceKey:r,users:n},scheduleConfig:e!=null?e:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(t,n){var e=_(n);return{args:{msgIds:t},scheduleConfig:e!=null?e:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(t,n,r,o,a,i,l,s){var e=_(s);return{args:{downloadType:a,hash:n,metricInstanceKeys:l,msgType:o,protocolMsgId:t,qplEntryPoint:r},scheduleConfig:e!=null?e:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(n,r,a,i,l,s,u){var t=_(u),c=a!=null?a:{},d=c.s2sInstanceKey,m=c.s2sUserFlowQPLEvent,p=babelHelpers.objectWithoutPropertiesLoose(c,e);return{args:{args:p,chatJid:n,ephemeralSetting:i,externalId:l!=null?l:o("MAWExternalId").generateExternalId(),isFirstMsg:s,protocolMsgId:r,s2sInstanceKey:d},scheduleConfig:t!=null?t:void 0,type:"forwardMsg"}},getSpams:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"getSpams"}},handleFutureproofMsg:function(t){var e=_(t);return{args:{},scheduleConfig:e!=null?e:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(t){var e=_(t);return{args:void 0,scheduleConfig:e!=null?e:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(t,n){var e=t.chatJid,r=t.context,o=t.frxParams,a=t.frxTags,i=t.msgs,l=t.reportedMessageId,s=t.spamFlow,u=t.userJid,c=_(n);return{args:{chatJid:e,context:r,frxParams:o,frxTags:a,msgs:i,reportedMessageId:l,spamFlow:s,userJid:u},scheduleConfig:c!=null?c:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(t,n){var e=t.actorID,r=t.taskID,o=_(n);return{args:{actorID:e,taskID:r},scheduleConfig:o!=null?o:void 0,type:"igdSendMsg"}},leaveGroups:function(t,n){var e=_(n);return{args:{groups:t},scheduleConfig:e!=null?e:void 0,type:"leaveGroups"}},markThreadAsRead:function(t,n,r,o,a,i){var e=_(i);return{args:{chatJid:t,isBlocked:r,isReadReceiptsDisabled:a,isRestricted:o,relationship:n},scheduleConfig:e!=null?e:void 0,type:"markThreadAsRead"}},promoteGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(t,n,r){var e=_(r);return{args:{group:t,users:n},scheduleConfig:e!=null?e:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(t,n,r,o,a,i,l,s,u,c){var e=_(u);return{args:{chatJid:r,context:i,frxParams:l,frxTags:a,isIgd:o,openMsgs:c,reportedMessageId:s,spamFlow:n,userJid:t},scheduleConfig:e!=null?e:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g){var e=_(p);return{args:{deanonApiPayload:f,hasMoreAfter:a,hasMoreBefore:o,instanceKey:c,isMediaGalleryRestore:g,isPointQuery:i,messages:r,minMsgId:l,optimisticMsgs:d,startSortKey:u,taskSource:m,threadId:n,traceId:s,transportKey:t},scheduleConfig:e!=null?e:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(t,n,r,o,a,i,l,s,u,c,d,m,p,f,g,h){var e=_(m);return{args:{chatJid:h,deanonApiPayload:f,echoMessages:t,hasMoreAfter:i,hasMoreBefore:a,instanceKey:d,isMediaGalleryRestore:g,isPointQuery:l,messages:o,minMsgId:s,referenceTimestamp:c,requestId:u,taskSource:p,threadId:r,transportKey:n},scheduleConfig:e!=null?e:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(t,n){var e=_(n);return{args:t,scheduleConfig:e!=null?e:void 0,type:"revokeMsgs"}},sendAppData:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendAppData"}},sendBumpMsg:function(t,n,r,a){var e=_(a);return{args:{args:n,chatJid:t,externalId:r!=null?r:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendBumpMsg"}},sendGroupInviteMsg:function(t,n,r){var e=_(r);return{args:{args:t,externalId:n!=null?n:o("MAWExternalId").generateExternalId()},scheduleConfig:e!=null?e:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:L,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:r,source:b,width:i},attachmentType:R,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),file:n},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(t,n,r,a,i,l,s,u,c,d,m,p,f,g,h,y,C,b,v,S,R,L,E){var e=_(C);return{args:{args:{duration:c,ephemeralSetting:m,filename:v,height:l,isFirstMsg:h,isForwarded:g,isPtt:d,jpegThumbnail:a,jpegThumbnailHeight:u,jpegThumbnailWidth:s,mediaGroupMetadata:E,offlineAttachmentId:S,openMessageOtid:f,quote:p,s2sInstanceKey:R,source:b,width:i},attachmentType:L,chatJid:t,externalId:y!=null?y:o("MAWExternalId").generateExternalId(),mimeType:n,plaintext:r},scheduleConfig:e!=null?e:void 0,type:"sendMediaMsgV2"}},sendWrittenAppData:function(t,n){var e=_(n);return{args:{appDataExternalId:t},scheduleConfig:e!=null?e:void 0,type:"sendWrittenAppData"}},setGroupMemberAddMode:function(t,n,r){var e=_(r);return{args:{groupJid:t,memberAddMode:n},scheduleConfig:e!=null?e:void 0,type:"setGroupMemberAddMode"}},setGroupSubject:function(t,n,r){var e=_(r);return{args:{group:t,subject:n},scheduleConfig:e!=null?e:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(t,n){var e=_(n);return{args:{qplInstanceKey:t},scheduleConfig:e!=null?e:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(t,n,r,o){var e=_(o);return{args:{backupEntFbid:n,deliveryObjectId:t,traceId:r},scheduleConfig:e!=null?e:void 0,type:"updateBackupEntFbidForMedia"}}};function m(e,t){return p(e,t)}function p(e,t){var n=t.scheduleConfig,r=babelHelpers.objectWithoutPropertiesLoose(t,s),a={args:{},scheduleConfig:n,type:e};return t.externalIdJob&&(a.args.externalId=o("MAWExternalId").generateExternalId()),a.args=babelHelpers.extends({},a.args,r),t.uniqueJob&&(a.uniqKey=e),a}function _(e){if(e!=null)return{jobId:e.jobId,maxTimeoutMs:e.maxTimeoutMs,priority:e.priority}}function f(e){return{otid:e.toplevelProtobuf.messageId,supplementalProtobufs:new Map(e.supplementalProtobufs.entries().map(function(e){var t=e[0],n=e[1];return[t,{decryptedProtobuf:n.payload,protobufTimestampMS:n.timestampMs}]})),tags:e.tags,toplevelProtobuf:{decryptedProtobuf:e.toplevelProtobuf.payload,protobufTimestampMS:e.toplevelProtobuf.timestampMs}}}l.toThreadJidPrimaryId=u,l.toEncodedEchoMessage=c,l.jobSerializers=d,l.createStartJobInfo=m,l.createStartJobInfoGeneric=p,l.serializeJobScheduledConfig=_,l.mpsMessageToEncryptedBackupsMessage=f}),98);
__d("MAWMediaDownloadStatus",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["DOWNLOADING","SUCCESS","NOT_MANUAL_RETRYABLE_FAILURE","MANUAL_RETRYABLE_FAILURE","MISSING_FILE","RETRYING","AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE"]),l=e;i.default=l}),66);
__d("MAWMsg",["$InternalEnum","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","MsgrWebGating","WAArmadilloXMA.pb"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n,r,a,i){return e===o("MAWMsgType").MSG_TYPE.TEXT?t?(u||(u=o("LSIntEnum"))).ofNumber(8192):(u||(u=o("LSIntEnum"))).ofNumber(1):e===o("MAWMsgType").MSG_TYPE.IMAGE||e===o("MAWMsgType").MSG_TYPE.VIDEO||e===o("MAWMsgType").MSG_TYPE.RAVEN?(u||(u=o("LSIntEnum"))).ofNumber(2):e===o("MAWMsgType").MSG_TYPE.PTT?(u||(u=o("LSIntEnum"))).ofNumber(4):e===o("MAWMsgType").MSG_TYPE.FUTUREPROOF?m(a):e===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?(u||(u=o("LSIntEnum"))).ofNumber(65536):e===o("MAWMsgType").MSG_TYPE.UNAVAILABLE?(u||(u=o("LSIntEnum"))).ofNumber(262144):e===o("MAWMsgType").MSG_TYPE.GIF?(u||(u=o("LSIntEnum"))).ofNumber(16384):e===o("MAWMsgType").MSG_TYPE.STICKER?(u||(u=o("LSIntEnum"))).ofNumber(4096):e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE?(u||(u=o("LSIntEnum"))).ofNumber(64):e===o("MAWMsgType").MSG_TYPE.XMA?n!=null&&n?(u||(u=o("LSIntEnum"))).ofNumber(256):i===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(536870912):(u||(u=o("LSIntEnum"))).ofNumber(1024):e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE?r?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(33554432):e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?(u||(u=o("LSIntEnum"))).ofNumber(134217728):(u||(u=o("LSIntEnum"))).ofNumber(1)}function m(e){switch(e){case"liveLocationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4294967296);case"locationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(u||(u=o("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(u||(u=o("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(u||(u=o("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(u||(u=o("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(u||(u=o("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(u||(u=o("LSIntEnum"))).ofNumber(1073741824);case"messengerMemory":return(u||(u=o("LSIntEnum"))).ofNumber(8589934592);case"rtcMessage":return(u||(u=o("LSIntEnum"))).ofNumber(17179869184);default:return(u||(u=o("LSIntEnum"))).ofNumber(131072)}}function p(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16384))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(64))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4096))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function _(e,t){var n=e.replyAttachmentType;if(n==null)return!1;var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t);return a&&e.replyAttachmentId==null&&(!o("MsgrWebGating").isQuotedMessagesInLsEnabled()||e.replyAttachmentPlaintextHash==null)?!1:(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").AUDIO))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER))||(c||(c=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO))}function f(e){return(c||(c=o("I64"))).equal(e.displayedContentTypes,(u||(u=o("LSIntEnum"))).ofNumber(134217728))}function g(e){return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),e.displayedContentTypes)}function h(e){var t=e.displayedContentTypes;return!!(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(32))}function y(e){return(c||(c=o("I64"))).lt(e.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))}function C(e){var t=e.displayedContentTypes;return o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),t)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(536870912),t)}function b(e){var t=e.displayedContentTypes;return(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(65536))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(131072))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(524288))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4294967296))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1048576))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2097152))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4194304))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2147483648))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8388608))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(16777216))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1073741824))||(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(8589934592))?!0:(c||(c=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(262144))}var v=(s=n("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),S=s({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),R=s({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2}),L=s({IMAGE:0,VIDEO:1});l.text=(e=o("MAWMsgType")).MSG_TYPE.TEXT,l.image=e.MSG_TYPE.IMAGE,l.video=e.MSG_TYPE.VIDEO,l.ptt=e.MSG_TYPE.PTT,l.unsent=e.MSG_TYPE.REVOKED,l.gif=e.MSG_TYPE.GIF,l.bumpExistingMessage=e.MSG_TYPE.BUMP_EXISTING_MESSAGE,l.getDisplayedContentTypes=d,l.isMediaMsg=p,l.isMediaReplyAttachmentType=_,l.isReceiverFetchMsg=f,l.isReceiverFetchXMAMsg=g,l.isAdminMsg=h,l.isOptimistic=y,l.isXMAMsg=C,l.isPlaceholder=b,l.MAWRavenActionNotifType=v,l.MAWRavenMsgEphemeralMediaState=S,l.MAWRavenMsgEphemeralType=R,l.MAWRavenMsgMediaType=L}),98);
__d("MAWParseXMAFBConfig",["FBLogger","MAWIsFbProfileDirectoryItemXmaEnabled","WAArmadilloXMA.pb","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY,e.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH]);function u(e){var t=e.fbTargetType,n=e.silentExposure;if(t!=null&&s.has(t))return!0;var a=n!=null?n:!1;switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return a?r("gkx")("9338"):r("gkx")("9339");case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return o("MAWIsFbProfileDirectoryItemXmaEnabled").isFbProfileDirectoryItemXmaEnabled();default:return r("FBLogger")("maw_db").mustfix("MAWParseXMAFBConfig encountered an unknown unsupported XMA type: %s",String(t)),!1}}l.FB_FULLY_SUPPORTED_TARGET_TYPES=s,l.isFBSupportedTargetType=u}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).of_float(t*1e3)}function u(e){var t=Number(e);return t<=o("WATimeUtils").MAX_INT&&t!==-1e3&&t!==0}function c(t){return u(t)?(Number(t)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(t)),s(t)):(e||(e=o("I64"))).of_float(t)}function d(e,t){var n=Date.now(),r=n-t*24*60*60*1e3,a=o("WATimeUtils").castMilliSecondsToUnixTime(r);return e>=a}function m(e){if(e!=null)return u(e)?(Number(e)!==-1&&r("FBLogger")("messenger_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(e)),o("WATimeUtils").castToMillisTime(e*1e3)):e}var p=(e||(e=o("I64"))).of_string("9999999999999"),_=Number.MAX_VALUE;l.toTimestamp=s,l.millisTimeToTimestamp=c,l.isTimestampNewerThanXDays=d,l.ensureValidMillisTime=m,l.MAX_TIMESTAMP_MS=p,l.MAX_TIMESTAMP=_,l.MIN_TIMESTAMP_MS=e.zero}),98);
__d("MAWUICacheServicesBase",["FBLogger","MAWCacheServiceDB","MAWCacheServiceQPL","MAWMpsGating"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"];function s(e){return o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()?e+"_mps_reactive":e}var u=(function(){function t(e){this.$1=new Map,this.QPLMetadata=new Map,this.$2=e}var n=t.prototype;return n.resetInMemoryCache=function(t,n){var e=this.$1.get(t);e!=null&&(r("FBLogger")("MAWUICacheServices").info("Reset in memory cache. Namespace: %s",t),n.forEach(function(t){e.delete(t)}))},n.updateInMemoryCacheAndTriggerCallback=function(t,n,o,a,i){this.$3(t,n);var e=this.$2[t];e!=null&&(a!=null&&(r("MAWCacheServiceQPL").addPointQPL(a,"triggering_callback",o),(o==="cache-invalidation"||o==="realtime-update"||o==="from-scratch"&&this.QPLMetadata.get(a)==="all-from-scratch"||o==="in-memory"&&i===!0)&&(r("MAWCacheServiceQPL").endSuccessQPL(a),this.QPLMetadata.delete(a))),e.onCacheChange(n,o))},n.checkInMemoryCacheAndTriggerCallback=function(t,n,o){var e=this,a=[],i=[];n.forEach(function(n){var r=e.$4(t,n);r==null?a.push(n):i.push([n,r])});var l=a.length===0;return l&&o!=null&&r("MAWCacheServiceQPL").addPointQPL(o,"all_in_memory"),i.length>0&&this.updateInMemoryCacheAndTriggerCallback(t,i,"in-memory",o,l),a},n.checkPersistedCacheAndTriggerCallback=async function(n,a,i){var t=await o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),l=await t.runInTransaction([n],"readonly",function(e){return Promise.all(a.map(function(t){return e.stores[n].getByIndex("key",[s(t)])}))},"read_from_persisted_"+n),u=[],c=[];return l.forEach(function(t,n){if(t==null)u.push(a[n]);else{var r=t.id,o=babelHelpers.objectWithoutPropertiesLoose(t,e);c.push([a[n],o])}}),i!=null&&r("MAWCacheServiceQPL").addAnnotationsQPL(i,{int:{numPersistedHit:c.length,numPersistedMiss:u.length}}),u.length===0&&i!=null&&r("MAWCacheServiceQPL").addPointQPL(i,"all_in_persisted"),c.length>0&&this.updateInMemoryCacheAndTriggerCallback(n,c,"persisted",i),u},n.$3=function(t,n){var e,r=(e=this.$1.get(t))!=null?e:new Map;n.forEach(function(e){var t=e[0],n=e[1];r.set(t,n)}),this.$1.set(t,r)},n.$4=function(t,n){var e=this.$1.get(t);if(e==null)return null;var r;return(r=e.get(n))!=null?r:null},t})();l.adjustCacheKey=s,l.MAWUICacheServicesBase=u}),98);
__d("MAWWorkerPersistedDataService",["FBLogger","MAWBridge","MAWCacheServiceUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="maw_persisted_data_service_broadcast",s=function(){return o("MAWCacheServiceUtils").globalScope.BroadcastChannel?new(o("MAWCacheServiceUtils")).globalScope.BroadcastChannel(e):(r("FBLogger")("messenger_e2ee_web").warn("BroadcastChannel is not supported in this browser"),null)},u=(function(){function t(){this.$1=s()}var n=t.prototype;return n.emitBroadcastChannelMessageToUI=function(n,r,a,i){var t={cache:r,instanceKey:i,namespace:n,source:a};this.$1==null?o("MAWBridge").getBridge().fireAndForget("event","broadcastChannelFallback",{event:{data:t},namespace:e}):this.$1.postMessage(t)},t})(),c=null,d=function(){return c==null&&(c=new u),c};l.MAW_PERSISTED_DATA_SERVICE_BROADCAST_CHANNEL=e,l.getMAWPersistedDataServiceBroadcastChannel=s,l.getMAWWorkerPersistedDataService=d}),98);
__d("MAWXMALoggingUtils",["WAArmadilloXMA.pb","objectEntries"],(function(t,n,r,o,a,i,l){"use strict";var e=r("objectEntries")(o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function s(t){return t!=null?e.get(t):void 0}l.getXmaTargetTypeStringFromEnum=s}),98);
__d("MessagingAttachmentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});i.default=e}),66);
__d("MpsOverBridge",["MAWBridgeSendAndReceive"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){this.loadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessage",e)},this.loadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsLoadMessages",e)},this.batchLoadMessages=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessages",e)},this.batchLoadMessage=function(e){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsBatchLoadMessage",e)},this.debugDbDump=function(){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","mpsDebugDbDump")},this.copMps={loadBatchMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadBatchMsgsIntoMaw",t)},loadMoreMsgsIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMoreMsgsIntoMaw",t)},loadMsgIntoMaw:function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("mps","copLoadMsgIntoMaw",t)}}},s;function u(){return s==null&&(s=new e),s}l.mps=u}),98);
__d("WACommsConnectionState",["WAGenericStateManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,!1)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.isConnected=function(){return this.get()},n.waitForConnection=function(){return this.waitForValue(!0)},t})(o("WAGenericStateManager").WAGenericStateManager),s=new e;l.WACommsConnectionState=s}),98);
__d("WAGetPlatformFromStanzaId",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){try{var n=31,r=BigInt(n<<17),a=BigInt(0),i=BigInt(1<<17),l=BigInt(t)&r;return l===a?"web":l===i?"mobile":"unknown"}catch(n){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""])),t,n),"error"}}l.getPlatformFromStanzaId=s}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"}),l=1,s=e.LOW,u=10*1e3;i.JOB_PRIORITY=e,i.DEFAULT_CONCURRENCY=l,i.DEFAULT_JOB_PRIORITY=s,i.DEFAULT_JOB_TIMEOUT_MS=u}),66);
__d("WAMediaQplHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e<0||e>1e3*1024*1024?"invalid_size":e===0?"size equal to 0KB":e<=1*1024?"size lower than 1 KB":e<=50*1024?"size between 1 KB and 50 KB":e<=100*1024?"size between 50 KB and 100 KB":e<=500*1024?"size between 100 KB and 500 KB":e<=1*1024*1024?"size between 500 KB and 1 MB":e<=2*1024*1024?"size between 1 MB and 2 MB":e<=5*1024*1024?"size between 2 MB and 5 MB":e<=10*1024*1024?"size between 5 MB and 10 MB":e<=20*1024*1024?"size between 10 MB and 20 MB":e<=25*1024*1024?"size between 20 MB and 25 MB":e<=30*1024*1024?"size between 25 MB and 30 MB":e<=50*1024*1024?"size between 30 MB and 50 MB":e<=75*1024*1024?"size between 50 MB and 75 MB":e<=100*1024*1024?"size between 75 MB and 100 MB":"size above 100 MB"}i.convertIntegerSizeToStringBucket=e}),66);
__d("isMWBumpMessage",["EntMessageReplyType","I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return t!=null&&(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP))}l.default=u}),98);/*FB_PKG_DELIM*/
__d("ArmadilloSignatures",["WASignalKeys","WASignalOther","WASignalSignatures","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=(n=o("WASignalOther")).ensureSize(o("XPlatReactCrypto").getRandomValues(new Uint8Array(64)),64);return o("WASignalSignatures").makeSignature(o("WASignalKeys").makeKeyPairFromArrayBuffers(n.toBuffer(n.makeBytes(32)),n.toBuffer(e)),t,r)}function s(e,t,n){return o("WASignalSignatures").verifyMsgSignalVariant(o("WASignalSignatures").convertPublicKeyToSerializedPubKey(t),n,e)}l.armadilloSign=e,l.validateArmadilloSignature=s}),98);
__d("ArrayBuffer",["UInt8Array"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.map(function(e){return new Uint8Array(e)});return o("UInt8Array").concatBytes(t).buffer}l.mergeBuffers=e}),98);
__d("CreateEncryptionKeyPair",["CryptoLogger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("CreateEncryptionKeyPair");function u(){return s.load().then(function(t){var r=t.generateKeys(t.KeyPurpose.Encryption);return(e||(e=n("Promise"))).resolve([r.sk.buffer,r.pk.buffer])}).catch(function(e){var t=o("CryptoLogger").CryptoLogger("create_encryption_key_pair");throw o("CryptoLogger").captureError(t,e).mustfix("failed to generate an encryption key pair"),e})}l.default=u}),98);
__d("EBGetContactEpochHead",["EBMinosSecureMailboxKeysForContact","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.rawContactId;if(t==null)return Promise.reject(o("WAResultOrError").makeError("invalid-arguments"));var n=await o("EBMinosSecureMailboxKeysForContact").getSecureMailboxKeysForContact(t);return n==null?o("WAResultOrError").makeResult():o("WAResultOrError").makeResult({epochHead:n.epoch_head,epochHeadCreationTime:n.epoch_head_creation_time})}l.getContactEpochHead=e}),98);
__d("EBGetLatestChatJids",["I64","MAWBridgeSafeActionsWorkerAndUI","ReQL","WAResultOrError","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=1e3;async function u(e,t){t===void 0&&(t=s);try{var n=c(e,t);return o("WAResultOrError").makeResult(await n)}catch(e){return o("WAResultOrError").makeError(r("getErrorSafe")(e))}}async function c(t,n){n===void 0&&(n=s);var r=await Promise.all([o("MAWBridgeSafeActionsWorkerAndUI").sendAndReceiveBackendWorkerAndUIShared("getLatestChatJids",{count:n}),await t.runInTransaction(function(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table).map(function(t){var n=t.jid;return(e||(e=o("I64"))).to_string(n)}))},"readonly",void 0,void 0,i.id+":54")]),a=r[0],l=r[1],u=[];if(l.length>0){var c=new Set(l);a.forEach(function(e){var t=e.split("@")[0];c.has(t)&&u.push(e)})}return u}l.getLatestChatJids=u}),98);
__d("EBGetMessageKeys",["EBMinosDb","FBLogger","WAResultOrError","WebMps","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(t,n){var e=await o("EBMinosDb").getEBMinosDb(),r=await e.runInTransaction(["secure_minos_message_epoch_heads"],"readonly",function(e){return e.stores.secure_minos_message_epoch_heads.readIndex("[thread_id+message_id]",[t,n])},"LoadNewMinosMessageEpochHead");return r.length===0?null:{epochHead:r[0].epoch_head}};async function u(t){var n=t.messageId,a=t.threadId;try{if(n==null||a==null)return o("WAResultOrError").makeError("invalid-arguments");var i=await o("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!0,strategy:"local-only"},debug:{purpose:"get-message-keys"},messageId:n,threadId:a}),l=await s(a,n);if(l==null)return o("WAResultOrError").makeError("no-epoch-head-found");if(i.success===!1)return o("WAResultOrError").makeError(i.error);var u=i.value;if(u==null)return o("WAResultOrError").makeError("no-message");var c=new Map;await Promise.all(Array.from(u.supplementalProtobufs).map(async function(e){var t=e[0],n=e[1],r=await s(a,n.messageId);if(r==null)return o("WAResultOrError").makeError("no-epoch-head-found");c.set(t,babelHelpers.extends({},n,{senderEpochHead:r.epochHead}))}));var d=babelHelpers.extends({},u.toplevelProtobuf,{senderEpochHead:l.epochHead});return o("WAResultOrError").makeResult(babelHelpers.extends({},u,{supplementalProtobufs:c,toplevelProtobuf:d}))}catch(t){throw r("FBLogger")("wmi_minos").catching(r("getErrorSafe")(t)).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Runtime error in EBGetMessageKeys"]))),t}}l.getMessageKeys=u}),98);
__d("EBMainThreadEBDBApi",["$InternalEnum","EBDB","EBDBConsistencyApi","FBLogger","LSDatabaseSingleton","WAResolvable","WormDump","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;async function u(){var t=await(e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton;try{await o("EBDBConsistencyApi").startListeningDeviceRegistrations(t,o("EBDB").EBDBEnvironment.UI)}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("wmi_eb").catching(n).mustfix("Error on startListeningDeviceRegistrations in UI")}finally{s.resolve(t)}}async function c(e){await o("EBDBConsistencyApi").trackOverprompting(o("EBDB").EBDBEnvironment.UI,e)}async function d(e){var t=await s.promise;await o("EBDBConsistencyApi").addNewDevice(t,o("EBDB").EBDBEnvironment.UI,e)}async function m(){var e,t=await o("EBDB").getEBDB();return t.dump({auto_restore_opt_out:{customFields:{optOutKey:(e=o("WormDump")).wormNonSensitiveField,optOutValue:e.wormNonSensitiveField}},device_metadata:{customFields:{backupId:e.wormNonSensitiveField,deviceRegistrationId:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,taskId:e.wormNonSensitiveField}},device_state:{customFields:{deviceId:e.wormNonSensitiveField,env:e.wormNonSensitiveField}},encrypted_backups:{customFields:{authorityLevel:e.wormNonSensitiveField,backupId:e.wormNonSensitiveField,backupTenancy:e.wormNonSensitiveField,hasOtcEligibleDevices:e.wormNonSensitiveField,isUserOptedOut:e.wormNonSensitiveField,pk:e.wormNonSensitiveField}},encrypted_backups_virtual_devices:{customFields:{backupId:e.wormNonSensitiveField,creationTime:e.wormNonSensitiveField,deviceCreatedOn:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,removalStatus:e.wormNonSensitiveField,requiresHsmMigration:e.wormNonSensitiveField}},experiences_shared_state:{},secure_encrypted_backups_client_state:{customFields:{authorityLevel:e.wormNonSensitiveField,backupId:e.wormNonSensitiveField,backupTenancy:e.wormNonSensitiveField,deviceId:e.wormNonSensitiveField,encryptionVersion:e.wormNonSensitiveField}},secure_encrypted_backups_epochs:{customFields:{authorityLevel:e.wormNonSensitiveField,epochId:e.wormNonSensitiveField,epochStatus:e.wormNonSensitiveField}},secure_encrypted_backups_recovery_code_status:{customFields:{pk:e.wormNonSensitiveField,recoveryCodeStatus:e.wormNonSensitiveField}}})}var p=n("$InternalEnum")({Disabled:0,UIInconsistent:1,WorkerInconsistent:2,Consistent:3});async function _(e,t){var n=await s.promise;o("EBDBConsistencyApi").trackConsistency(n,o("EBDB").EBDBEnvironment.UI,e,function(){var e=p.Disabled,n=o("EBDBConsistencyApi").getDeviceId();return n!=null&&t!=null?e=p.Consistent:n!=null&&t==null?e=p.WorkerInconsistent:n==null&&t!=null&&(e=p.UIInconsistent),{int:{crossEnvConsistency:e}}})}l.startListeningDeviceRegistrations=u,l.trackOverprompting=c,l.addNewDevice=d,l.getEBDBDump=m,l.EBCrossEnvConsistencyResult=p,l.trackConsistency=_}),98);
__d("EBMinosWriteKeyChangeAdminMessage",["EBMinosTypes","FBLogger","MAWAdminWriteUserDeviceMsgTxn","MAWBridge","MAWDbAppMeta","MAWDbThreadTxns","MAWDexieTable","MAWExternalId","MAWIndexedDb","MAWTransactionMode","MpsTypes","WAArmadilloTransportEvent.pb","WABuildMpsPayload","WADbContact","WAGlobals","WAJids","WAStanzaUtils","WebMps","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert}).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlert)!=null?t:!1})}function u(e,t){var n=o("WAGlobals").getMyUserJid()===t;return!n&&e}async function c(e){var t=e.deviceChangeType,n=t===void 0?o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED:t,a=e.epochHeadCreationTime,i=e.userJid;try{var l=o("MAWExternalId").generateExternalId(),s=o("WABuildMpsPayload").buildMpsDeviceChangeAdminMessage(i,a,o("WAStanzaUtils").toStanzaId(l),n),u={directive:null,insertionSource:o("MpsTypes").InsertionSource.Receive,message:s};await o("WebMps").mps().saveNewMessages([u],{source:"eb-minos-device-change"}),r("FBLogger")("wmi_minos").info("Sent device change transport event for user %s with type %s",i,String(n))}catch(e){var c=r("getErrorSafe")(e);throw r("FBLogger")("wmi_minos").catching(c).mustfix("Failed to send device change transport event for user %s",i),c}}async function d(t){var n=t.contactId,a=t.epochHeadCreationTime,i=o("EBMinosTypes").userFbidToUserJid(n);if(i==null)return r("FBLogger")("wmi_minos").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Invalid userJid generated in writeKeyChangeAdminMessage"]))),Promise.resolve();var l=await o("MAWIndexedDb").makeMsgrTransactor({participants:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"writeKeyChangeAdminMessage",function(e){return function(){return o("MAWDbThreadTxns").getAllThreadsForUsers(e,[i])}})(),d=l.get(i),m=await o("MAWBridge").getBridge().sendAndReceive("event","getLSDBUsersRelationships",{users:[i]});if(d==null||(d==null?void 0:d.length)===0)return Promise.resolve();var p=d.filter(function(e){var t=o("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(){return"group"},user:function(){return"one_to_one"}});return t==="one_to_one"}),_=await Promise.all([c({deviceChangeType:o("WAArmadilloTransportEvent.pb").TransportEvent$Event$DeviceChange$Type.REPLACED,epochHeadCreationTime:a,userJid:i}),o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY,ftsBackloggedMessages:o("MAWTransactionMode").READWRITE,groupInfo:o("MAWTransactionMode").READONLY,messages:o("MAWTransactionMode").READWRITE,threads:o("MAWTransactionMode").READWRITE},"writeKeyChangeAdminMessage",function(e){return function(){return o("MAWDexieTable").dexieAll(p.map(function(t){return s(e).then(function(n){u(n,i)&&m.get(i)===o("WADbContact").TWO_WAY_CONTACT?o("MAWAdminWriteUserDeviceMsgTxn").writeUserDeviceAdminMsg(e,i,t,"update",a):o("MAWDexieTable").dexieResolve()})}))}})()]),f=_[1];return f}l.saveDeviceChangeTransportEvent=c,l.writeMinosKeyChangeAdminMessage=d}),98);
__d("EBMinosWriteSecureStorageAlert",["EBMinosTypes","FBLogger","MAWDbAddDeviceChangeAlertsTxn","MAWDbDeviceChangeAlerts","MAWIndexedDb","MAWTransactionMode","MAWUnsafeCoerce","Promise","WAJids","WASignalOther"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var a=t.contactId,i=t.epochHead,l=t.epochHeadCreationTime,u=o("WAJids").validateDeviceJid(o("EBMinosTypes").userFbidToUserJid(o("EBMinosTypes").unsafeCastToUserFbId(a)));return u==null?(r("FBLogger")("wmi_minos").MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Invalid deviceJid generated in writeMinosSecureStorageAlert"]))),(s||(s=n("Promise"))).resolve()):o("MAWIndexedDb").makeMsgrTransactor({deviceChangeAlerts:o("MAWTransactionMode").READWRITE},"writeMinosSecureStorageAlert",function(e){return function(){return o("MAWDbAddDeviceChangeAlertsTxn").addDeviceChangeAlertsTxn(e,{action:o("MAWDbDeviceChangeAlerts").KEY_CHANGE,deviceJid:u,epochHead:i,identity:o("MAWUnsafeCoerce").unsafeCoerce(o("WASignalOther").toBytes(i,32)),isArchived:!1,model:"secure_storage",platform:"Meta",ts:l})}})()}l.writeMinosSecureStorageAlert=u}),98);
__d("EBSMGating",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("24151")}l.isPersistedEBTableEnabled=e}),98);
__d("EBSMGatingUI",["EBSMGating","MAWWaitForBackendSetup"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("MAWWaitForBackendSetup").isBackendSetupSuccessful()||o("EBSMGating").isPersistedEBTableEnabled()}l.isBackendSetupSuccessfulForEBSM=e}),98);
__d("LSEncryptedBackupsClientRestoreState",[],(function(t,n,r,o,a,i){var e=Object.freeze({RESTORE_IN_PROGRESS:1,RESTORE_COMPLETE:2});i.default=e}),66);
__d("EBSetRestoreStatusForInitialRestore",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","ReQL","WAJids","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(t,n){var a=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.encrypted_backups_client_restore_status).map(function(e){var t=e.threadId;return t}));return n.runInTransaction(async function(n){var i=[],l=[];a.forEach(function(e){i.push(n.encrypted_backups_client_restore_status.delete(e))}),await Promise.all(i),t.forEach(function(t){l.push(n.encrypted_backups_client_restore_status.put({lastUpdated:(u||(u=o("I64"))).of_float((e||(e=r("performanceAbsoluteNow")))()),restoreStatus:(s||(s=o("LSIntEnum"))).ofNumber(r("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),threadId:o("WAJids").threadIdForChatJid(t)}))}),await Promise.all(l)},"readwrite",void 0,void 0,i.id+":37")}async function d(e){var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.encrypted_backups_client_restore_status).map(function(e){var t=e.threadId;return t}));return e.runInTransaction(async function(e){var n=[];t.forEach(function(t){n.push(e.encrypted_backups_client_restore_status.delete(t))}),await Promise.all(n)},"readwrite",void 0,void 0,i.id+":75")}l.setRestoreStatusForInitialRestore=c,l.resetClientRestoreStatus=d}),98);
__d("GaloisField32",["EBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=o("EBLogger").EBLogger(),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,5,7,1,3,13,15,9,11,21,23,17,19,29,31,25,27,0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,21,22,19,16,25,26,31,28,13,14,11,8,1,2,7,4,0,4,8,12,16,20,24,28,5,1,13,9,21,17,29,25,10,14,2,6,26,30,18,22,15,11,7,3,31,27,23,19,0,5,10,15,20,17,30,27,13,8,7,2,25,28,19,22,26,31,16,21,14,11,4,1,23,18,29,24,3,6,9,12,0,6,12,10,24,30,20,18,21,19,25,31,13,11,1,7,15,9,3,5,23,17,27,29,26,28,22,16,2,4,14,8,0,7,14,9,28,27,18,21,29,26,19,20,1,6,15,8,31,24,17,22,3,4,13,10,2,5,12,11,30,25,16,23,0,8,16,24,5,13,21,29,10,2,26,18,15,7,31,23,20,28,4,12,17,25,1,9,30,22,14,6,27,19,11,3,0,9,18,27,1,8,19,26,2,11,16,25,3,10,17,24,4,13,22,31,5,12,23,30,6,15,20,29,7,14,21,28,0,10,20,30,13,7,25,19,26,16,14,4,23,29,3,9,17,27,5,15,28,22,8,2,11,1,31,21,6,12,18,24,0,11,22,29,9,2,31,20,18,25,4,15,27,16,13,6,1,10,23,28,8,3,30,21,19,24,5,14,26,17,12,7,0,12,24,20,21,25,13,1,15,3,23,27,26,22,2,14,30,18,6,10,11,7,19,31,17,29,9,5,4,8,28,16,0,13,26,23,17,28,11,6,7,10,29,16,22,27,12,1,14,3,20,25,31,18,5,8,9,4,19,30,24,21,2,15,0,14,28,18,29,19,1,15,31,17,3,13,2,12,30,16,27,21,7,9,6,8,26,20,4,10,24,22,25,23,5,11,0,15,30,17,25,22,7,8,23,24,9,6,14,1,16,31,11,4,21,26,18,29,12,3,28,19,2,13,5,10,27,20,0,16,5,21,10,26,15,31,20,4,17,1,30,14,27,11,13,29,8,24,7,23,2,18,25,9,28,12,19,3,22,6,0,17,7,22,14,31,9,24,28,13,27,10,18,3,21,4,29,12,26,11,19,2,20,5,1,16,6,23,15,30,8,25,0,18,1,19,2,16,3,17,4,22,5,23,6,20,7,21,8,26,9,27,10,24,11,25,12,30,13,31,14,28,15,29,0,19,3,16,6,21,5,22,12,31,15,28,10,25,9,26,24,11,27,8,30,13,29,14,20,7,23,4,18,1,17,2,0,20,13,25,26,14,23,3,17,5,28,8,11,31,6,18,7,19,10,30,29,9,16,4,22,2,27,15,12,24,1,21,0,21,15,26,30,11,17,4,25,12,22,3,7,18,8,29,23,2,24,13,9,28,6,19,14,27,1,20,16,5,31,10,0,22,9,31,18,4,27,13,1,23,8,30,19,5,26,12,2,20,11,29,16,6,25,15,3,21,10,28,17,7,24,14,0,23,11,28,22,1,29,10,9,30,2,21,31,8,20,3,18,5,25,14,4,19,15,24,27,12,16,7,13,26,6,17,0,24,21,13,15,23,26,2,30,6,11,19,17,9,4,28,25,1,12,20,22,14,3,27,7,31,18,10,8,16,29,5,0,25,23,14,11,18,28,5,22,15,1,24,29,4,10,19,9,16,30,7,2,27,21,12,31,6,8,17,20,13,3,26,0,26,17,11,7,29,22,12,14,20,31,5,9,19,24,2,28,6,13,23,27,1,10,16,18,8,3,25,21,15,4,30,0,27,19,8,3,24,16,11,6,29,21,14,5,30,22,13,12,23,31,4,15,20,28,7,10,17,25,2,9,18,26,1,0,28,29,1,31,3,2,30,27,7,6,26,4,24,25,5,19,15,14,18,12,16,17,13,8,20,21,9,23,11,10,22,0,29,31,2,27,6,4,25,19,14,12,17,8,21,23,10,3,30,28,1,24,5,7,26,16,13,15,18,11,22,20,9,0,30,25,7,23,9,14,16,11,21,18,12,28,2,5,27,22,8,15,17,1,31,24,6,29,3,4,26,10,20,19,13,0,31,27,4,19,12,8,23,3,28,24,7,16,15,11,20,6,25,29,2,21,10,14,17,5,26,30,1,22,9,13,18],u=[0,1,18,28,9,23,14,12,22,4,25,16,7,15,6,13,11,24,2,29,30,26,8,5,17,10,21,31,3,19,20,27],c="ACDEFHJKLMNPQRSTUVWXYZ0123456789",d=(function(){for(var e={},t=0;t<c.length;t++){var n=f(t);n!=null&&(e[c[t]]=n)}return e})();function m(e,t){return s[e*32+t]}function p(t){for(var n=[],r=0;r<t.length;r++){if(!(t[r]in d))return e.mustfix("gf32: tried to convert invalid string to GF32 matrix: %s",t),null;n[r]=d[t[r]]}return n}function _(e){var t=[];for(var n of e)t.push(c[n]);return t.join("")}function f(e){return e===0||e===1||e===2||e===3||e===4||e===5||e===6||e===7||e===8||e===9||e===10||e===11||e===12||e===13||e===14||e===15||e===16||e===17||e===18||e===19||e===20||e===21||e===22||e===23||e===24||e===25||e===26||e===27||e===28||e===29||e===30||e===31?e:null}function g(t){for(var n=[],r=0;r<t.length;r++){var o=f(t[r]);if(o==null)throw e.mustfixThrow("gf32: tried to convert bad value to GF32 element: %s",t[r]);n.push(o)}return n}function h(t,n){var r=t^n,o=f(r);if(o==null)throw e.mustfixThrow("gf32: xor of gf32 elements returned a non-element (should be impossible): %s ^ %s = %s",t,n,r);return o}function y(e,t,n,r,o){for(var a=0;a<t;a++)e[n*t+a]=h(e[n*t+a],m(e[r*t+a],o))}function C(e,t,n,r){for(var o=0;o<t;o++){var a=e[n*t+o];e[n*t+o]=e[r*t+o],e[r*t+o]=a}}function b(e,t,n,r){for(var o=0;o<t;o++)e[n*t+o]=m(e[n*t+o],r)}function v(t,n){if(n===0)throw e.mustfixThrow("gf32: tried to divide by 0");return m(t,u[n])}function S(e){for(var t=Array(e*e).fill(0),n=0;n<e;n++)t[n*e+n]=1;return t}function R(e,t){for(var n=e.slice(),r=S(t),o=0;o<t;o++){var a=o;if(n[o*t+a]===0){for(var i=!1,l=o+1;l<t;l++)if(n[l*t+a]!==0){C(n,t,o,l),C(r,t,o,l),i=!0;break}if(!i)return null}for(var s=o+1;s<t;s++){var c=v(n[s*t+a],n[o*t+a]);y(n,t,s,o,c),y(r,t,s,o,c)}}for(var d=t-1;d>=0;d--)for(var m=d,p=d-1;p>=0;p--){var _=v(n[p*t+m],n[d*t+m]);y(n,t,p,d,_),y(r,t,p,d,_)}for(var f=0;f<t;f++){var g=n[f*t+f];if(g===0)return null;b(r,t,f,u[g])}return r}var L=0;l.zero=L,l.matrixToSymbols=_,l.symbolsToMatrix=p,l.invert=R,l.xor=h,l.multiply=m,l.asGf32MatExn=g}),98);
__d("GF32RecoveryCodes",["EBLogger","GaloisField32"],(function(t,n,r,o,a,i,l){"use strict";var e=o("EBLogger").EBLogger(),s=34,u=4,c=3,d=s+u,m=o("GaloisField32").asGf32MatExn([18,24,16,12,8,20,2,19,4,22,21,5,28,5,14,21,7,16,15,10,3,9,28,22,11,30,19,6,7,7,9,18,16,2,9,12,18,14,7,6,5,16,9,24,16,28,19,2,14,8,2,4,1,21,26,21,10,27,16,25,18,14,20,17,11,22,21,22,16,20,2,5,0,9,6,7,23,23,23,11,6,5,3,31,29,30,17,28,0,30,28,7,13,5,11,22,12,16,25,3,20,22,26,22,14,29,5,14,5,19,12,19,18,8,25,7,30,7,8,12,0,26,15,10,17,21,2,29,14,4,31,7,29,6,29,1,14,16,17,15,4,16,7,4,7,4,8,26,10,23,24,26]);function p(e,t,n){n===void 0&&(n=1);for(var r=[],o=e;o<t;o+=n)r.push(o);return r}var _={};function f(e,t){function n(e,t,r,o){if(t<=0)return[[]];if(o-r<=t)return[p(r,o)];var a=e|t<<8|r<<16|o<<24,i=_[a];if(i!=null)return i;var l=[];return n(e-1,t-1,r+1,o).forEach(function(e){var t=e.slice();t.splice(0,0,r),l.push(t)}),n(e-1,t,r+1,o).forEach(function(e){l.push(e.slice())}),_[a]=l,l}return n(e,t,0,e)}function g(e,t){for(var n=e.length,r=Array(n*n).fill(0),o=0,a=0;a<u;a++)if(a!==t){for(var i=0;i<n;i++){var l=e[i];r[o*n+i]=m[a*d+l]}o++}return r}function h(e,t){for(var n=0;n<u;n++){var r=g(e,n),a=o("GaloisField32").invert(r,t);if(a!=null)return{excludeRow:n,submatInv:a}}return null}function y(t){for(var n=Array(u).fill(0),r=0;r<u;r++)for(var a=0;a<s;a++)n[r]=o("GaloisField32").xor(n[r],o("GaloisField32").multiply(m[r*d+a],t[a]));for(var i=Array(u*u),l=0;l<u;l++)for(var c=0;c<u;c++)i[l*u+c]=m[l*d+s+c];var p=o("GaloisField32").invert(i,u);if(p==null)throw e.mustfixThrow("gf32: failed to invert error code submatrix (should be impossible): %s",JSON.stringify(i));for(var _=Array(u).fill(0),f=0;f<u;f++)for(var g=0;g<u;g++)_[f]=o("GaloisField32").xor(_[f],o("GaloisField32").multiply(p[f*u+g],n[g]));return _}function C(t){var n=new Set,r=o("GaloisField32").symbolsToMatrix(t);if(r==null)return e.warn("gf32: recovery code %s could not be converted to GF32 matrix",t),[t];for(var a=Array(u).fill(0),i=0;i<u;i++)for(var l=0;l<d;l++)a[i]=o("GaloisField32").xor(a[i],o("GaloisField32").multiply(m[i*d+l],r[l]));var s=f(d,c);for(var p of s){for(var _=a.slice(),g=0;g<u;g++)for(var y of p)_[g]=o("GaloisField32").xor(_[g],o("GaloisField32").multiply(m[g*d+y],r[y]));var C=h(p,c);if(C==null){e.warn("gf32: no submat inverse found for error locs %s",JSON.stringify(p));continue}var b=C.excludeRow,v=C.submatInv,S=Array(c).fill(0),R=_.slice();R.splice(b,1);for(var L=0;L<c;L++)for(var E=0;E<c;E++)S[L]=o("GaloisField32").xor(S[L],o("GaloisField32").multiply(v[L*c+E],R[E]));for(var k=o("GaloisField32").zero,I=0;I<c;I++)k=o("GaloisField32").xor(k,o("GaloisField32").multiply(m[b*d+p[I]],S[I]));if(k===_[b]){for(var T=r.slice(),D=0;D<p.length;D++)T[p[D]]=S[D];n.add(o("GaloisField32").matrixToSymbols(T))}}return Array.from(n)}l.getEccForCode=y,l.getCandidateCodes=C}),98);
__d("LSCreateAuthKeyPair.nop",["CryptoLogger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("LSCreateAuthKeyPair.nop"),u=function(r,a){return s.load().then(function(t){var r=t.generateKeys(t.KeyPurpose.Encryption),o=r.pk,a=r.sk;return(e||(e=n("Promise"))).resolve([a.buffer,o.buffer])}).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("create_auth_key_pair"),e).mustfix("failed to generate an auth key pair"),e})};u.__nop_name__="LSCreateAuthKeyPair",l.default=u}),98);
__d("LSCreateDebugToken.nop",["ArrayBuffer","Base64Utils","CryptoLogger","I64","LSCreateDerivedKeys.nop","LSCryptoUtils","LSVec","Promise","RetUtil","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("LSCryptoUtils").strToBuf("debug_token_type_"),c=o("LSCryptoUtils").strToBuf("debug_token_rkid"),d=o("LSCryptoUtils").strToBuf("debug_token_anon"),m=(s||(s=o("I64"))).of_string("32"),p=s.of_string("12");function _(e){return Array.from(e.keys()).reduce(function(t,n){var r=e.get(n);return r!=null&&(t[n]=r),t},{})}function f(e){return new Int32Array([new DataView(new Int32Array([e]).buffer).getInt32(0)]).buffer}function g(e,t){var n=t.length,r=o("ArrayBuffer").mergeBuffers([e,f(n)]);return o("ArrayBuffer").mergeBuffers([r,o("LSCryptoUtils").strToBuf(t)])}function h(e,t){var n=t.keys().sort();return n.reduce(function(e,n){var r=t.get(n);return r!=null?g(g(e,n),r):e},g(u,e))}function y(e,t,n,o,a){return r("LSCreateDerivedKeys.nop")(e,t,n,void 0,o,r("LSVec").ofArray([a])).then(function(e){var t=e[0];if(t!=null){var n=r("LSVec").toArray(t);return n.length===1?n[0]:void 0}})}function C(t,a,i,l,u){return(s||(s=o("I64"))).equal((s||(s=o("I64"))).zero,u)?y(t,a,d,l,m).then(function(e){return y(t,a,i,r("nullthrows")(e),(s||(s=o("I64"))).of_int32(i.byteLength))}):(e||(e=n("Promise"))).resolve(i)}function b(e,t,n,o,a,i,l){return y(e,t,n,o,a).then(function(n){return C(e,t,r("nullthrows")(n),i,l)})}var v=function(a,i,l,u,d,f,g){try{return(e||(e=n("Promise"))).all([y(a,i,h(u,g),l,m).then(function(e){return b(a,i,d,r("nullthrows")(e),p,l,f)}),b(a,i,c,l,p,l,f)]).then(function(e){var t=e[0],n=e[1];return o("RetUtil").getNullableRetResult(o("LSCryptoUtils").strToBuf(JSON.stringify({ctx:(s||(s=o("I64"))).equal((s||(s=o("I64"))).zero,f)?"anon":"auth",rkid:o("Base64Utils").fromArrayBuffer(r("nullthrows")(n)),scopes:_(g),type:u,val:o("Base64Utils").fromArrayBuffer(r("nullthrows")(t))})))})}catch(t){return o("CryptoLogger").CryptoLogger("create_debug_token").warn("getExn Error"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())}};v.__nop_name__="LSCreateDebugToken",l.default=v}),98);
__d("LSCreateEncryptionKeyPair.nop",["CreateEncryptionKeyPair"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){return r("CreateEncryptionKeyPair")()};e.__nop_name__="LSCreateEncryptionKeyPair",l.default=e}),98);
__d("LSCreateMinosEpochParams.nop",["EBMinosCheckWasmFeatureSupport","EBMinosQplFlow","FBLogger","MAWCurrentUser","WAResultOrError","cr:5968","cr:6443","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("cr:5968")||n("cr:6443"),u=async function(n,a,i,l,u,c,d){var t,m=await o("EBMinosCheckWasmFeatureSupport").checkWasmFeatureSupport();if(s==null)throw r("err")("createMinosEpochParamsType error: gk is off but still called");if(!m)throw r("err")("createMinosEpochParamsType error: wasm is not supported");var p=o("EBMinosQplFlow").startMinosCreateEpochParamsQpl(),_=await s.createMinosEpochParamsType({epochAnonId:l,epochRootKeyBlob:i,previousEpochAnonId:c,previousEpochHead:d,previousEpochRootKeyBlob:u,qplFlow:p,rawUserFbid:o("MAWCurrentUser").getID()}).catch(function(t){var n=r("FBLogger")("minos"),a=r("getErrorSafe")(t);return n.catching(a).MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["createMinosEpochParamsType runtime-error"]))),o("WAResultOrError").makeError({errorName:"runtime-error",failReason:a.message})});if(!_.success){var f;throw p.endFailWithError(_.error.errorName,_.error.failReason),r("err")("createMinosEpochParamsType error: "+_.error.errorName+" "+((f=_.error.failReason)!=null?f:""))}return p.endSuccess(),[_.value.mailboxEncryptionPk,_.value.mailboxSigningPk,_.value.mailboxAuthPk,_.value.epochHead,_.value.selfEpochSignature,(t=_.value.previousEpochSignature)!=null?t:void 0]};u.__nop_name__="LSCreateMinosEpochParamsType",l.default=u}),98);
__d("LSCreateRecoveryCode.nop",["CryptoLogger","GF32RecoveryCodes","GaloisField32","LSResult","Promise","UInt8Array"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){for(;;){var t=o("UInt8Array").getBufferWithRandomValuesFromLength(1),n=new Uint8Array(t)[0];if(n<256-256%e)return n%e}return 0}var u=function(a,i){var t=["2","0"].join("");try{for(var l=[],u=0;u<=33;++u)l.push(s(32));var c=o("GF32RecoveryCodes").getEccForCode(o("GaloisField32").asGf32MatExn(l)),d=l.concat(c),m=o("GaloisField32").matrixToSymbols(o("GaloisField32").asGf32MatExn(d)),p=t+m;return(e||(e=n("Promise"))).resolve(r("LSResult")(p))}catch(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("create_recovery_code"),e).mustfix("creating recovery code failed"),e}};u.__nop_name__="LSCreateRecoveryCode",l.default=u}),98);
__d("LSCreateSignatureKeyPair.nop",["CryptoLogger","Promise","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("LSCreateSignatureKeyPair.nop"),u=function(r,a){return s.load().then(function(t){var r=t.generateKeys(t.KeyPurpose.Signing);return(e||(e=n("Promise"))).resolve([r.sk.buffer,r.pk.buffer])}).catch(function(e){var t=o("CryptoLogger").CryptoLogger("create_signature_key_pair");throw o("CryptoLogger").captureError(t,e).mustfix("Failed to create signing key pair keys"),e})};u.__nop_name__="LSCreateSignatureKeyPair",l.default=u}),98);
__d("LSCreateSignatureWithArmadilloKey.nop",["ArmadilloSignatures","EBDeps","LSResult"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){return o("EBDeps").getDeps().getMAWIdentityKeys().then(function(e){var t=e.identityPrivateKey;return o("ArmadilloSignatures").armadilloSign(t,new Uint8Array(a))}).then(function(e){return r("LSResult")(e.buffer)})};e.__nop_name__="LSCreateSignatureWithArmadilloKey",l.default=e}),98);
__d("LSCreateSignature_v2.nop",["CryptoLogger","LSResult","Promise","UInt8Array","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("X25519").__setRef("LSCreateSignature_v2.nop");function u(e){return r("LSResult")(e)}function c(e,t){return o("UInt8Array").concatBytes([t,e].map(function(e){return new Uint8Array(e)}))}var d=function(r,a,i,l,d){var t=o("CryptoLogger").CryptoLogger("create_signature_v2");return l.byteLength!==1?(t.mustfix("Bad aad for signing, should be 1 byte"),(e||(e=n("Promise"))).resolve(u(void 0))):s.load().then(function(r){var o=r.secretKeyFromBytes(new Uint8Array(i),r.KeyPurpose.Signing);return o!=null?r.sign(o,c(d,l)).then(function(t){return(e||(e=n("Promise"))).resolve(u(t.buffer))}):(t.mustfix("No Signature Private key"),(e||(e=n("Promise"))).resolve(u(void 0)))})};d.__nop_name__="LSCreateSignature_v2",l.default=d}),98);
__d("LSCreateSymmetricEncryptionSecretKey.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){return(e||(e=n("Promise"))).resolve(r("LSResult")(o("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer)).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("create_symmetric_encryption_secret_key"),e).mustfix("Creation of symmetric encryption secret key failed"),e})};s.__nop_name__="LSCreateSymmetricEncryptionSecretKey",l.default=s}),98);
__d("LSJSONOp",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127}),l=e;i.default=l}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return u(e)}function s(e){return u(e)}function u(e){var t=null;return{load:function(){return t==null?e.load().then(function(e){return t=e,t}):o("LSSynchronousPromise").makeSynchronousPromise(t)}}}l.wrapReqDeferredMaybeSync=e,l.wrapJSResourceForInteractionMaybeSync=s}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ASC","DESC"]),l=e;i.default=l}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","getErrorSafe","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(r("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function d(e,t,n){if((u||(u=r("isPromise")))(e))return e.then(t,n);try{return t(e)}catch(e){var o=r("getErrorSafe")(e);if(n)return n(o);throw o}}var m=(function(){function t(e,t,n,o){var a=this;o===void 0&&(o=[]),this.$4={},this.$5=[],this.$6=null,this.$7=function(e){return d(a.$8(e),function(e){return e},function(t){throw r("FBLogger")("messenger_web").catching(t).mustfix("Error evaluating step op: %s",Array.isArray(e)?e[0]:"<primitive value>"),t})},this.$1=t,this.$2=e,this.$3=n;for(var i=0;i<o.length;i++)this.$4[i]=o[i]}var o=t.prototype;return o.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))},o.$8=function(o){var t=this,a,i,l,u,m,p,_,f,g,h,y,C;if(!Array.isArray(o))return o;var b=o[0],v=babelHelpers.arrayLikeToArray(o).slice(1),S=v;switch(b){case 8:return S.map(this.$7);case 2:return this.$4[S[0]];case 3:return d(this.$7(S[1]),function(e){return t.$4[S[0]]=e});case 4:return d(this.$7(S[2]),function(e){for(var n=S[0],r=S[1],o=0;o<r;o++,n++)t.$4[n]=e[o];return e});case 12:{for(var R=S[0],L=S[1],E=[],k=R;k<L;k++)E[k]=this.$4[k];return E}case 1:{for(var I,T=function(n){I=d(I,function(){return t.$7(S[n])})},D=0;D<S.length;D++)T(D);return I}case 5:return(a=this.$1).storedProcedure.apply(a,S.map(this.$7));case 6:return(i=this.$1).nativeTypeOperation.apply(i,S.map(this.$7));case 7:return(l=this.$1).nativeOperation.apply(l,S.map(this.$7));case 9:return;case 10:return 1/0;case 11:return NaN;case 13:return this.$7(S[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(S[0]));case 15:return this.$1.blobs.of_string(this.$7(S[0]));case 16:return this.$1.blob(this.$7(S[0]));case 17:return this.$1.i64.of_float(this.$7(S[0]));case 18:{var x=this.$7(S[0]);return x!=null?this.$1.i64.to_float(x):void 0}case 19:return this.$1.i64.from_string(this.$7(S[0]));case 70:return this.$1.i64.cast(this.$7(S[0]));case 20:return this.$1.i64.to_string(this.$7(S[0]));case 21:return(u=this.$3)==null||(u=u.gk)==null?void 0:u[S[0]];case 22:{var $,P=S[0],N=S[1],M=S[2],w=S[3],A=($=this.$3)==null||($=$.qe)==null||($=$[P])==null||($=$[N])==null?void 0:$[M];if(A==null)return A;switch(w){case"BOOL":case"STR":return A;case"I64":{if(typeof A!="object")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(A.toString())}}return}case 23:return this.$7(S[0])?this.$7(S[1]):S[2]!=null?this.$7(S[2]):void 0;case 24:return this.$7(S[0])||this.$7(S[1]);case 25:return this.$7(S[0])&&this.$7(S[1]);case 26:return!this.$7(S[0]);case 27:return this.$7(S[0])==null;case 28:return this.$1.notnull(this.$7(S[0]));case 29:return this.$7(S[0])===this.$7(S[1]);case 30:return this.$1.i64.eq(this.$7(S[0]),this.$7(S[1]));case 31:return this.$1.blobs.eq(this.$7(S[0]),this.$7(S[1]));case 32:return this.$7(S[0])!==this.$7(S[1]);case 33:return this.$1.i64.neq(this.$7(S[0]),this.$7(S[1]));case 34:return this.$1.blobs.neq(this.$7(S[0]),this.$7(S[1]));case 35:return this.$7(S[0])>this.$7(S[1]);case 36:return this.$1.i64.gt(this.$7(S[0]),this.$7(S[1]));case 37:return this.$1.blobs.gt(this.$7(S[0]),this.$7(S[1]));case 38:return this.$7(S[0])>=this.$7(S[1]);case 39:return this.$1.i64.ge(this.$7(S[0]),this.$7(S[1]));case 40:return this.$1.blobs.ge(this.$7(S[0]),this.$7(S[1]));case 41:return this.$7(S[0])<this.$7(S[1]);case 42:return this.$1.i64.lt(this.$7(S[0]),this.$7(S[1]));case 43:return this.$1.blobs.lt(this.$7(S[0]),this.$7(S[1]));case 44:return this.$7(S[0])<=this.$7(S[1]);case 45:return this.$1.i64.le(this.$7(S[0]),this.$7(S[1]));case 46:return this.$1.blobs.le(this.$7(S[0]),this.$7(S[1]));case 47:return this.$1.throw(S[0]);case 48:return this.$1.print(this.$7(S[0]));case 49:{var F=this.$7(S[0]),O=S[1],B=this.$1.logger(F);switch(O){case"mustfix":return B.mustfix(F);case"info":return B.info(F);case"warn":return B.warn(F);case"debug":return B.debug(F);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",O)}}case 50:return S.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(S[0]));case 51:{var W=this.$7(S[0]);return W.push(this.$7(S[1])),W}case 52:return this.$1.i64.of_int32(this.$7(S[0]).length);case 53:return new this.$1.Map;case 54:return this.$7(S[0]).get(this.$7(S[1]));case 55:return this.$7(S[0]).set(this.$7(S[1]),this.$7(S[2]));case 56:return this.$7(S[0]).keys();case 57:return this.$7(S[0]).delete(this.$7(S[1]));case 58:return this.$7(S[0]).has(this.$7(S[1]));case 59:return this.$7(S[0]).join(this.$7(S[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(S[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return c.load().then(function(e){var n=e.localizeV1Async;return n(t.$7(S[0]),t.$7(S[1]))});case 66:return c.load().then(function(e){var n=e.localizeV2Async;return n(t.$7(S[0]),t.$7(S[1]))});case 68:return this.$7(S[0])+this.$7(S[1]);case 69:return this.$1.i64.add(this.$7(S[0]),this.$7(S[1]));case 71:return(p=this.$3)==null||(p=p.justknob)==null?void 0:p[S[0]];case 72:return(_=this.$3)==null||(_=_.iggk)==null?void 0:_[S[0]];case 100:return this.$5[S[0]][S[1]];case 101:{if(this.$6==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[S[0]]}case 102:return this.$5[this.$7(S[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(S[0]).trim();case 75:return this.$7(S[0]).split(this.$7(S[1])).join(this.$7(S[2]));case 76:return S.map(this.$7).join("");case 77:return this.$1.like(this.$7(S[0]),this.$7(S[1]));case 78:return[0,this.$7(S[0]).length];case 79:{var q=S.map(this.$7),U=q[0],V=babelHelpers.arrayLikeToArray(q).slice(1);return V.includes(U)}case 80:return this.$7(S[1]).includes(this.$7(S[0]));case 81:return this.$7(S[0])-this.$7(S[1]);case 82:return this.$7(S[0])*this.$7(S[1]);case 83:return this.$7(S[0])/this.$7(S[1]);case 84:return this.$7(S[0])%this.$7(S[1]);case 91:return this.$1.i64.lsl_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 92:return this.$1.i64.lsr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 93:return this.$1.i64.asr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 94:return this.$1.i64.and_(this.$7(S[0]),this.$7(S[1]));case 95:return this.$1.i64.or_(this.$7(S[0]),this.$7(S[1]));case 96:return this.$1.i64.xor(this.$7(S[0]),this.$7(S[1]));case 85:return this.$1.i64.sub(this.$7(S[0]),this.$7(S[1]));case 86:return this.$1.i64.mul(this.$7(S[0]),this.$7(S[1]));case 87:return this.$1.i64.div(this.$7(S[0]),this.$7(S[1]));case 88:return this.$1.i64.mod_(this.$7(S[0]),this.$7(S[1]));case 89:{var H=S.map(this.$7),G=H[0],z=babelHelpers.arrayLikeToArray(H).slice(1);return z.some(function(e){return t.$1.i64.eq(G,e)})}case 90:{var j=this.$7(S[0]);return this.$7(S[1]).some(function(e){return t.$1.i64.eq(j,e)})}case 97:return this.$7(S[0])?this.$7(S[1]):this.$7(S[2]);case 98:{var K=this.$7(S[0]),Q=this.$7(S[1]);return(K||Q)&&!(K&&Q)}case 99:return(f=this.$7(S[0]))!=null?f:this.$7(S[1]);case 103:return;case 104:return n.call(null,S[0]);case 105:{for(var X=this.$7(S[0]),Y=S[1],J=r("LS").n,Z,ee=function(n){Z=d(Z,function(){return t.$4[Y]=n,t.$7(S[2])})},te=J(e||(e=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(te,X);te=this.$1.i64.add(te,J(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))ee(te);return Z}case 106:return this.$7(S[0]);case 107:throw r("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(S[0])};case 109:return{gte:this.$7(S[0])};case 110:return{lt:this.$7(S[0])};case 111:return{lte:this.$7(S[0])};case 112:return S.length===1?this.$7(S[0]):(g=this.$1).merge.apply(g,S.map(this.$7));case 113:{var ne=S[0],re=S[1],oe=babelHelpers.arrayLikeToArray(S).slice(2),ae=oe.map(this.$7);switch(re){case"ASC":return(h=this.$1.db.table(ne)).fetch.apply(h,ae);case"DESC":return(y=this.$1.db.table(ne)).fetchDesc.apply(y,ae)}return}case 114:return this.$1.filter(this.$7(S[0]),function(e){t.$6=e;var n=t.$7(S[1]);return t.$6=null,n});case 115:return(C=this.$1).sortBy.apply(C,S.map(this.$7));case 116:return this.$1.forEach(this.$7(S[0]),function(e){return e.delete()});case 117:return this.$1.islc(this.$7(S[0]),0,this.$7(S[1]));case 118:return this.$1.count(this.$7(S[0]));case 119:return this.$1.db.table(S[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item,r=e.update,o={};t.$6=n;for(var a=1;a<S.length;a+=2)o[S[a]]=t.$7(S[a+1]);return t.$6=null,r(o)});case 121:{for(var ie=S[0],le={},se=1;se<S.length;se+=2)le[S[se]]=this.$7(S[se+1]);return this.$1.db.table(ie).add(le)}case 122:{for(var ue=S[0],ce={},de=1;de<S.length;de+=2)ce[S[de]]=this.$7(S[de+1]);return this.$1.db.table(ue).put(ce)}case 123:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item;return t.$5[S[1]]=n,t.$7(S[2])});case 124:return this.$7(S[0]).next().then(function(e){var n=e.done,r=e.value;if(n)return t.$7(S[3]);var o=S[1];return o!=null?(t.$5[o]=r.item,t.$7(S[2])):0});case 125:return this.$7(S[0]).slice(0,this.$7(S[1]));case 126:return this.$1.groupBy(this.$7(S[0]),S[1]).forEach(function(e){return t.$5[S[2]]=e,t.$7(S[3])});case 127:return this.$7(S[0]).substr(this.$1.i64.to_int32(this.$7(S[1])),this.$1.i64.to_int32(this.$7(S[2])))}},t})();l.default=m}),98);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={createScript:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];n.forEach(function(e){if(typeof window!="undefined"&&typeof window.trustedTypes!="undefined"&&!window.trustedTypes.isScript(e))throw r("err")("Trusted Function requires TrustedScripts args only.")});var a=n.slice(0,-1).join(","),i=n.pop().toString();return"(function anonymous(\n     "+a+"\n     ) {\n     "+i+"\n     })"}},u=r("TrustedTypes").createPolicy("unsafe-function-do-not-use",s);function c(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r("TrustedTypes").isSupportedNatively()&&(e||(e=r("Env"))).useTrustedTypes){var i=u.createScript.apply(u,[""].concat(o));return t.eval(i)}else return babelHelpers.construct(Function,o)}l.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=u,l.createTrustedFunction=c}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","cr:8018","getErrorSafe","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=function(n){return function(t,r){var o;return e==null||(o=e.qe)==null||(o=o[t])==null||(o=o[n])==null?void 0:o[r]}},a=new Proxy({getBool:n("fb"),getNumber:n("fb"),getString:n("fb")},{get:function(t,r){return r in t?t[r]:{getBool:n(r),getNumber:n(r),getString:n(r)}}}),i=function(n){var t;return e==null||(t=e.gk)==null?void 0:t[n]};i.ig=function(t){var n;return e==null||(n=e.iggk)==null?void 0:n[t]};var l={getBool:function(n){var t;return e==null||(t=e.justknob)==null?void 0:t[n]}};return function(e){var n,s=o("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((n=r("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),n.createScript("qex"),n.createScript("justknobx"),n.createScript("return "+t));return s(i,a,l)(r("LSFactory")(e,{dynamic:!0}))}}var u=function(t){return r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',t!=null?t:-1)};function c(t,o){var a=JSON.parse(o),i=t!=null?t:{gk:{},iggk:{},justknob:{},qe:{}};return function(t){var o=n("cr:8018")!=null?new(n("cr:8018")):void 0,l=o==null?void 0:o.start({bool:{isInWorker:(e||(e=r("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}}),s=r("LSFactory")(t,{dynamic:!0,lsRuntimeLogger:o});return new(r("LSDatascriptJSONEval"))(a,s,i).eval().finally(function(){return l==null||l.end(),Promise.resolve()})}}function d(e,t,n){if(!r("justknobx")._("3078"))return m(e,t,n);if(n==null)throw u(n);switch(n){case 3:return c(e,t);default:throw u(n)}}function m(e,t,n){if(n==null)return r("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!"),s(e,t);switch(n){case 3:return c(e,t);case 2:return s(e,t);case 1:throw r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function p(e){return function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(n){var a=n.experiments,l=n.priority,s=n.syncScript,u=n.target,c=n.taskNames,m=a!=null?JSON.parse(a):null;try{var p=d(m,s,u);return t.runInTransaction(function(t){return e&&e(),p(t)},"readwrite",l,{taskNames:c,type:"sync_script"},i.id+":247")}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(_).mustfix("Error executing sync script"),e}}}}p.__debugModuleName="LSDatascriptEvaluator",l.default=p}),98);
__d("LSEncryptedBackupsOpStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:0,FAILURE:1,UNKNOWN:2});i.default=e}),66);
__d("LSFindBackup",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsFindBackupStoredProcedure] Beginning execution."),t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[1]=a[0],r[2]=a[1],r[3]=a[2],r[4]=a[3],r[5]=a[4],r[6]=a[5],r[7]=a[6],r[8]=a[7],r[9]=a[8],r[10]=a[9],r[11]=a[10],r[12]=a[11],r[13]=a[12],r[14]=a[13],r[15]=a[14],r[16]=a[15],r[17]=a[16],r[18]=a[17],a):(o=l.item,t.sequence([function(e){return r[32]=o.backupTenancy,r[31]=o.encryptionVersion,r[27]=void 0,t.i64.neq(r[27],void 0)?t.resolve(r[28]=r[27]):t.sequence([function(e){return r[33]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[34]=t[0],t})},function(e){return r[34]&&(r[43]=(r[33].push(t.i64.cast([0,0])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[35]=t[0],t})},function(e){return r[35]&&(r[43]=(r[33].push(t.i64.cast([0,2])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[36]=t[0],t})},function(e){return r[36]&&(r[43]=(r[33].push(t.i64.cast([0,3])),r[33])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[37]=t[0],t})},function(e){return r[37]&&(r[43]=(r[33].push(t.i64.cast([0,4])),r[33])),r[38]=t.createArray(),r[39]=t.i64.of_int32(r[33].length),t.i64.gt(r[39],t.i64.cast([0,0]))?t.loopAsync(r[39],function(e){return r[43]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[33],r[43]).then(function(e){var t;return t=e,r[44]=t[0],r[45]=t[1],t})},function(e){return r[46]=(r[38].push(r[44]),r[38])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[43]=t.createArray(),r[44]=t.i64.of_int32(r[38].length),t.i64.gt(r[44],t.i64.cast([0,0]))?t.loopAsync(r[44],function(e){return r[46]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[38],r[46]).then(function(e){var t;return t=e,r[47]=t[0],r[48]=t[1],t})},function(e){return r[49]=(r[43].push(t.i64.to_string(r[47])),r[43])}])}):t.resolve()},function(e){return r[45]=r[43].join(","),r[40]=r[45]}])},function(e){return r[38].some(function(e){return t.i64.eq(r[31],e)})?r[41]=r[31]:r[41]=void 0,t.i64.neq(r[41],void 0)?r[42]=r[41]:r[42]=void 0,r[28]=r[42]}])},function(e){var n;return t.i64.neq(r[28],void 0)?r[29]=r[28]:r[29]=t.i64.cast([0,0]),t.i64.neq(r[32],void 0)?r[30]=r[32]:r[30]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[29],r[30],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[1]=n[0],r[2]=n[1],r[3]=n[2],r[4]=n[3],r[5]=n[4],r[6]=n[5],r[7]=n[6],r[8]=n[7],r[9]=n[8],r[10]=n[9],r[11]=n[10],r[12]=n[11],r[13]=n[12],r[14]=n[13],r[15]=n[14],r[16]=n[15],r[17]=n[16],r[18]=n[17]}]))})},function(e){return t.i64.neq(r[1],void 0)?r[20]=t.i64.to_string(r[1]):r[20]=void 0,r[21]=t.i64.of_float(Date.now()),r[22]=t.i64.random(),r[24]="Finishing execution. Execution time: ",r[25]=t.i64.to_string(t.i64.sub(r[21],r[0])),r[26]=" ms",r[23]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsFindBackupStoredProcedure] ",r[23],r[24],r[23],r[25],r[23],r[26]].join("")),t.i64.eq(t.i64.mod_(r[22],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[27]=",",r[28]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFindBackupStoredProcedure",[r[24],r[27],r[25],r[27],r[26]].join(""),r[28],t.i64.cast([0,4]))):t.resolve()},function(e){return o[0]=r[20]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsFindBackupStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSGenerateLocalKeys",["LSArrayGetObjectAt","LSCreateAuthKeyPair.nop","LSCreateEncryptionKeyPair.nop","LSCreateSignatureKeyPair.nop","LSCreateSignature_v2.nop","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][generateLocalKeys] Beginning execution."),r[1]=t.i64.of_float(Date.now()),e[0]?t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))||!0}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[29]=new t.Map,r[29].set("error_msg","Expected a nonempty query result"),r[29].set("code",t.i64.cast([0,3])),r[29].set("src_line","MEBClientStateUtils.php:256 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),r[30]=t.createArray(),r[31]=(r[30].push(r[29]),r[30]),o=[void 0,r[30]],r[17]=o[0],r[18]=o[1]):(n=l.item,r[29]=new t.Map,r[29].set("backup_id",n.backupId),r[29].set("device_public_key_blob",n.devicePublicKeyBlob),r[29].set("device_private_key_blob",n.devicePrivateKeyBlob),r[29].set("epoch_storage_public_key_blob",n.epochStoragePublicKeyBlob),r[29].set("epoch_storage_private_key_blob",n.epochStoragePrivateKeyBlob),r[29].set("epoch_auth_public_key_blob",n.epochAuthPublicKeyBlob),r[29].set("epoch_auth_private_key_blob",n.epochAuthPrivateKeyBlob),r[29].set("mailbox_root_key_blob",n.mailboxRootKeyBlob),r[29].set("ocmf_client_state_blob",n.ocmfClientStateBlob),r[29].set("orf_client_state_v2_blob",void 0),r[29].set("orf_v2_authority_level",void 0),r[29].set("oblivious_validation_token_blob",n.obliviousValidationTokenBlob),r[29].set("device_id",n.deviceId),r[29].set("backup_tenancy",n.backupTenancy),r[29].set("encryption_version",n.encryptionVersion),r[29].set("revision_version",n.revisionVersion),r[29].set("initialize_restore_result",void 0),r[29].set("device_creation_timestamp_sec",void 0),r[29].set("authority_level",n.authorityLevel),a=[r[29],void 0],r[17]=a[0],r[18]=a[1])})},function(e){return r[20]=new t.Map,r[20].set("value",r[17]),r[20].set("errors",r[18]),r[21]=r[20].get("value"),r[21]!==void 0?t.sequence([function(e){return r[29]=r[21].get("backup_id"),r[30]=r[21].get("device_public_key_blob"),r[31]=r[21].get("device_private_key_blob"),r[32]=r[21].get("epoch_storage_public_key_blob"),r[33]=r[21].get("epoch_storage_private_key_blob"),r[34]=r[21].get("epoch_auth_public_key_blob"),r[35]=r[21].get("epoch_auth_private_key_blob"),r[36]=r[21].get("mailbox_root_key_blob"),r[37]=r[21].get("ocmf_client_state_blob"),r[38]=r[21].get("orf_client_state_v2_blob"),r[39]=r[21].get("orf_v2_authority_level"),r[40]=r[21].get("oblivious_validation_token_blob"),r[41]=r[21].get("device_id"),r[42]=r[21].get("backup_tenancy"),r[43]=r[21].get("encryption_version"),r[44]=r[21].get("revision_version"),r[45]=r[21].get("initialize_restore_result"),r[46]=r[21].get("device_creation_timestamp_sec"),r[47]=r[21].get("authority_level"),t.i64.neq(r[41],void 0)?t.sequence([function(e){return r[55]=void 0,t.i64.neq(r[55],void 0)?t.resolve(r[56]=r[55]):t.sequence([function(e){return r[59]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[60]=t[0],t})},function(e){return r[60]&&(r[69]=(r[59].push(t.i64.cast([0,0])),r[59])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[61]=t[0],t})},function(e){return r[61]&&(r[69]=(r[59].push(t.i64.cast([0,2])),r[59])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[62]=t[0],t})},function(e){return r[62]&&(r[69]=(r[59].push(t.i64.cast([0,3])),r[59])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[63]=t[0],t})},function(e){return r[63]&&(r[69]=(r[59].push(t.i64.cast([0,4])),r[59])),r[64]=t.createArray(),r[65]=t.i64.of_int32(r[59].length),t.i64.gt(r[65],t.i64.cast([0,0]))?t.loopAsync(r[65],function(e){return r[69]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[59],r[69]).then(function(e){var t;return t=e,r[70]=t[0],r[71]=t[1],t})},function(e){return r[72]=(r[64].push(r[70]),r[64])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[69]=t.createArray(),r[70]=t.i64.of_int32(r[64].length),t.i64.gt(r[70],t.i64.cast([0,0]))?t.loopAsync(r[70],function(e){return r[72]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[64],r[72]).then(function(e){var t;return t=e,r[73]=t[0],r[74]=t[1],t})},function(e){return r[75]=(r[69].push(t.i64.to_string(r[73])),r[69])}])}):t.resolve()},function(e){return r[71]=r[69].join(","),r[66]=r[71]}])},function(e){return r[64].some(function(e){return t.i64.eq(r[43],e)})?r[67]=r[43]:r[67]=void 0,t.i64.neq(r[67],void 0)?r[68]=r[67]:r[68]=void 0,r[56]=r[68]}])},function(e){var n;return t.i64.neq(r[56],void 0)?r[57]=r[56]:r[57]=t.i64.cast([0,0]),t.i64.neq(r[42],void 0)?r[58]=r[42]:r[58]=t.i64.cast([0,1]),n=[!0,r[30],r[31],r[32],r[33],r[34],r[35]],r[48]=n[0],r[49]=n[1],r[50]=n[2],r[51]=n[3],r[52]=n[4],r[53]=n[5],r[54]=n[6]}]):t.sequence([function(e){return(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] Fetching keys locally failed. Reason: 24"),r[56]="Fetching keys locally failed. Reason: 24",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] ","",r[56]].join("")),r[55]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateLocalKeysStoredProcedure",r[56],r[55],t.i64.cast([0,3]))},function(e){var n;return n=[!1,t.blob("ZGV2aWNlX3B1YmxpY19rZXk="),t.blob("ZGV2aWNlX3ByaXZhdGVfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wcml2YXRlX2tleQ=="),t.blob("ZXBvY2hfYXV0aF9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfYXV0aF9wcml2YXRlX2tleQ==")],r[48]=n[0],r[49]=n[1],r[50]=n[2],r[51]=n[3],r[52]=n[4],r[53]=n[5],r[54]=n[6],n}])},function(e){var t;return t=[r[48],r[49],r[50],r[51],r[52],r[53],r[54]],r[22]=t[0],r[23]=t[1],r[24]=t[2],r[25]=t[3],r[26]=t[4],r[27]=t[5],r[28]=t[6],t}]):t.sequence([function(e){return r[29]=r[20].get("errors"),r[30]=r[20].get("errors"),(function(e){t.logger(e).mustfix(e)})("[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] Fetching keys locally failed. Reason: 1"),r[32]="Fetching keys locally failed. Reason: 1",(function(e){t.logger(e).mustfix(e)})(["[EncryptedBackups][LSEncryptedBackupsGenerateLocalKeysStoredProcedure] ","",r[32]].join("")),r[31]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateLocalKeysStoredProcedure",r[32],r[31],t.i64.cast([0,3]))},function(e){var n;return n=[!1,t.blob("ZGV2aWNlX3B1YmxpY19rZXk="),t.blob("ZGV2aWNlX3ByaXZhdGVfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfc3RvcmFnZV9wcml2YXRlX2tleQ=="),t.blob("ZXBvY2hfYXV0aF9wdWJsaWNfa2V5"),t.blob("ZXBvY2hfYXV0aF9wcml2YXRlX2tleQ==")],r[22]=n[0],r[23]=n[1],r[24]=n[2],r[25]=n[3],r[26]=n[4],r[27]=n[5],r[28]=n[6],n}])},function(e){var t;return t=[r[22],r[23],r[24],r[25],r[26],r[27],r[28]],r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],r[6]=t[4],r[7]=t[5],r[8]=t[6],t}]):t.sequence([function(e){return t.nativeOperation(n("LSCreateSignatureKeyPair.nop")).then(function(e){var t;return t=e,r[17]=t[0],r[18]=t[1],t})},function(e){return t.nativeOperation(n("LSCreateEncryptionKeyPair.nop")).then(function(e){var t;return t=e,r[19]=t[0],r[20]=t[1],t})},function(e){return t.nativeOperation(n("LSCreateAuthKeyPair.nop")).then(function(e){var t;return t=e,r[21]=t[0],r[22]=t[1],t})},function(e){var t;return t=[!0,r[18],r[17],r[20],r[19],r[22],r[21]],r[2]=t[0],r[3]=t[1],r[4]=t[2],r[5]=t[3],r[6]=t[4],r[7]=t[5],r[8]=t[6],t}])},function(e){var o;return r[2]?t.sequence([function(e){return t.nativeOperation(n("LSCreateSignature_v2.nop"),r[4],t.blob("MA=="),r[5]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(e){return t.nativeOperation(n("LSCreateSignature_v2.nop"),r[4],t.blob("MQ=="),r[7]).then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){var n;return r[19]=new t.Map,r[19].set("device_private_key",r[4]),r[19].set("device_public_key",r[3]),r[20]=new t.Map,r[20].set("epoch_storage_private_key",r[6]),r[20].set("epoch_storage_public_key",r[5]),r[21]=new t.Map,r[21].set("epoch_auth_private_key",r[8]),r[21].set("epoch_auth_public_key",r[7]),r[22]=new t.Map,r[22].set("device_key",r[19]),r[22].set("epoch_storage_key",r[20]),r[22].set("epoch_storage_public_key_sig",r[17]==null?t.blob("bnVsbA=="):r[17]),r[22].set("epoch_auth_key",r[21]),r[22].set("epoch_auth_public_key_sig",r[18]==null?t.blob("bnVsbA=="):r[18]),n=[r[22],void 0],r[9]=n[0],r[10]=n[1]}]):t.resolve((r[17]=new t.Map,r[17].set("error_code",t.i64.cast([0,9])),r[17].set("stored_procedure","LSEncryptedBackupsGenerateLocalKeysStoredProcedure"),r[17].set("error_message",""),o=[void 0,r[17]],r[9]=o[0],r[10]=o[1]))},function(e){return r[11]=t.i64.of_float(Date.now()),r[12]=t.i64.random(),r[14]="Finishing execution. Execution time: ",r[15]=t.i64.to_string(t.i64.sub(r[11],r[0])),r[16]=" ms",r[13]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][generateLocalKeys] ",r[13],r[14],r[13],r[15],r[13],r[16]].join("")),t.i64.eq(t.i64.mod_(r[12],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[17]=",",r[18]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"generateLocalKeys",[r[14],r[17],r[15],r[17],r[16]].join(""),r[18],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[9],r[10]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGenerateLocalKeysStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("checkLSRecoveryCodeMatch",["LSBinaryToHex.nop","LSShape","LSVec","Promise","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a,i,l,s){var u=r("LSVec").toArray(s).map(function(e){return o("LSShape").toRecord(e)}),c=r("LSBinaryToHex.nop")(t,a,r("nullthrows")(i)),d=function(s,u){return s.then(function(o){if(o[0]!=null)return(e||(e=n("Promise"))).resolve(o);var s=r("LSBinaryToHex.nop")(t,a,u.virtual_device_id);return(e||(e=n("Promise"))).all([c,s]).then(function(t){var r=t[0],o=t[1],a=r.length===o.length&&r.every(function(e,t){return e===o[t]});return a?(e||(e=n("Promise"))).resolve([i,l]):(e||(e=n("Promise"))).resolve([void 0,void 0])})})};return u.reduce(d,(e||(e=n("Promise"))).resolve([void 0,void 0]))}l.default=s}),98);
__d("deriveLSKey",["I64","LSCreateDerivedKeys.nop","LSCryptoUtils","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i,l){var s=l==="1"?(e||(e=o("I64"))).of_string("8"):(e||(e=o("I64"))).of_string("16"),u=r("LSVec").ofArray([s,(e||(e=o("I64"))).of_string("32")]);return r("LSCreateDerivedKeys.nop")(t,n,o("LSCryptoUtils").strToBuf(i),void 0,o("LSCryptoUtils").strToBuf(a),u).then(function(e){var t=e[0];if(t==null)return[void 0,void 0];var n=r("LSVec").toArray(t);return n.length===2?[n[0],n[1]]:[void 0,void 0]})}l.default=s}),98);
__d("parseLSRecoveryCode",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e.substring(0,1);if(!(e.length!==40||n!=="1"&&n!=="2")){var r=n==="1"?35:34,o=e.substring(1,2),a=e.substring(2,r+2),i="BackupRecoveryCode_v"+n+"_"+o+"_"+t;return[a,i,n]}}i.default=e}),66);
__d("LSParseRecoveryCode_v2.nop",["CryptoLogger","GF32RecoveryCodes","Promise","checkLSRecoveryCodeMatch","deriveLSKey","parseLSRecoveryCode"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a,i,l,s){var u=o("CryptoLogger").CryptoLogger("parse_recovery_code_v2"),c=r("parseLSRecoveryCode")(i,l);return c!=null?r("deriveLSKey")(t,a,c[0],c[1],c[2]):(s&&u.mustfix("could not parse recovery code with uid"),(e||(e=n("Promise"))).resolve([void 0,void 0]))}var u=new Map([["B","8"],["G","C"],["I","1"],["O","0"]]),c=new RegExp("["+Array.from(u.keys()).join("")+"]","g");function d(e){return e.replace(c,function(e){return u.get(e)||e})}var m=function(a,i,l,u,c){if(l.length!==40)return(e||(e=n("Promise"))).resolve([void 0,void 0]);var t=l.substring(0,2),m=d(l.substring(2,40)),p=o("GF32RecoveryCodes").getCandidateCodes(m),_=function(l,d){return l.then(function(o){return o[0]!=null?(e||(e=n("Promise"))).resolve(o):s(a,i,t+d,u,!1).then(function(t){var o=t[0];return o==null?(e||(e=n("Promise"))).resolve([void 0,void 0]):r("checkLSRecoveryCodeMatch")(a,i,o,t[1],c)}).then(function(e){return e[0]==null?[void 0,void 0]:e})})};return p.reduce(_,(e||(e=n("Promise"))).resolve([void 0,void 0])).then(function(r){return r[0]==null?s(a,i,t+m,u,!0):(e||(e=n("Promise"))).resolve(r)})};m.__nop_name__="LSParseRecoveryCode_v2",l.default=m}),98);
__d("LSGenerateRecoveryCode",["LSCreateRecoveryCode.nop","LSGetViewerFBID","LSLogMebClientEvent.nop","LSParseRecoveryCode_v2.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] Beginning execution."),t.forEach(t.filter(t.db.table(174).fetch(),function(e){return e.recoveryCode==="1SHADOWTESTINGRECOVERYCODE00000000000000"}),function(e){return e.delete()})},function(e){return t.db.table(174).fetch([[[t.i64.cast([0,1])]]]).next().then(function(e,o){var a=e.done,i=e.value;return a?t.sequence([function(e){return t.nativeOperation(n("LSCreateRecoveryCode.nop")).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.db.table(174).add({pk:t.i64.cast([0,1]),recoveryCode:r[15]})},function(e){return r[1]=r[15]}]):(o=i.item,r[1]=o.recoveryCode)})},function(n){return t.forEach(t.db.table(174).fetch([[[t.i64.cast([0,1])]]]),function(t){var n=t.update,r=t.item;return n({virtualDeviceType:e[0],cloudServiceAccount:void 0,hsmPinNormalizationStatus:void 0})})},function(e){return r[3]=t.createArray(),t.db.table(172).fetch().next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=void 0:(n=a.item,r[16]=n.encryptionManagementDelegatorId,t.i64.neq(r[16],void 0)?(t.i64.neq(r[16],t.i64.cast([0,0]))?r[17]=t.i64.to_string(r[16]):r[17]=void 0,r[15]=r[17]):r[15]=void 0,r[4]=r[15])})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return t.nativeOperation(n("LSParseRecoveryCode_v2.nop"),r[1],r[4]==null?t.i64.to_string(r[6]):r[4],r[3]).then(function(e){var t;return t=e,r[7]=t[0],r[8]=t[1],t})},function(e){return r[9]=t.i64.of_float(Date.now()),r[10]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[9],r[0])),r[14]=" ms",r[11]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] ",r[11],r[12],r[11],r[13],r[11],r[14]].join("")),t.i64.eq(t.i64.mod_(r[10],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var n;return n=[r[1],t.i64.cast([0,0]),r[7]],o[0]=n[0],o[1]=n[1],o[2]=n[2],n}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure",e.__tables__=["secure_encrypted_backups_generated_recovery_code","encrypted_backups"],a.exports=e}),null);
__d("LSGenerateRecoveryCodeStoredProcedure",["LSGenerateRecoveryCode","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSGenerateRecoveryCode"),a.virtualDeviceType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSGetArmadilloPublicKey.nop",["CryptoLogger","EBDeps","Promise","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a){return o("EBDeps").getDeps().getMAWIdentityKeys().then(function(t){return(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(t.identityPublicKey.buffer))}).catch(function(t){var r=o("CryptoLogger").CryptoLogger("get_armadillo_keys");return r.catching(t).mustfix("Failed to get identity keys."),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};s.__nop_name__="LSGetArmadilloPublicKey",l.default=s}),98);
__d("LSGetNextEpochAnonId.nop",["CryptoLogger","LSCryptoUtils","LSResult","Promise","XPlatReactTextDecoder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l){var t=o("LSCryptoUtils").strToBuf("0"),s;if(l!=null){var u=l;if(u.byteLength===0)s=t;else{var c=new(o("XPlatReactTextDecoder")).TextDecoder,d=c.decode(u),m=Number.parseInt(d,10),p=m+1;s=o("LSCryptoUtils").strToBuf(String(p))}}else s=t;return(e||(e=n("Promise"))).resolve(r("LSResult")(s)).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("get_next_epoch_anonid"),e).mustfix("Getting next epoch anon id failed"),e})};s.__nop_name__="LSGetNextEpochAnonId",l.default=s}),98);
__d("ObliviousConsistentMappingFunction",["FBLogger","UInt8Array","nullthrows","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("ristretto255").__setRef("ObliviousConsistentMappingFunction");function s(e){return e.some(function(e){return e!==0})}function u(e){for(;;){var t=e.getRandom();if(s(t))return t}return new Uint8Array(0)}var c=r("nullthrows")(o("UInt8Array").fromHexString("edd3f55c1a631258d69cf7a2def9de1400000000000000000000000000000010"));function d(e){return"ClientState has length "+String(e)+", expected "+String(32)}function m(e){return"ClientState is greater or equal to max: "+e.toString()}var p="ClientState is zero.";function _(e){var t=e.length;if(t!==32)throw r("FBLogger")("wmi_eb").mustfixThrow(d(t));var n=e.reduce(function(e,t){return e?!0:t>0},!1);if(!n)throw r("FBLogger")("wmi_eb").mustfixThrow(p);for(var o=!1,a=31;a>=0;--a)if(!o){var i=e[a],l=c[a];if(i>l)throw r("FBLogger")("wmi_eb").mustfixThrow("ClientState is greater or equal to max: "+e.toString());i<l&&(o=!0)}if(!o)throw r("FBLogger")("wmi_eb").mustfixThrow("ClientState is greater or equal to max: "+e.toString())}function f(t){return _(t),e.load().then(function(e){var n=u(e.scalar),r=e.scalar.mul(t,n),o=e.scalar.invert(n);return{evolveToken:o,newClientState:r}})}l.checkNonZero=s,l.maxState=c,l.buildInputLengthErrorMsg=d,l.buildInputValueErrorMsg=m,l.getInputZeroErrorMsg=p,l.clientEvolve=f}),98);
__d("LSOcmfClientEvolve_v2.nop",["CryptoLogger","ObliviousConsistentMappingFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r){return o("ObliviousConsistentMappingFunction").clientEvolve(new Uint8Array(r)).then(function(e){return[e.newClientState.buffer,e.evolveToken.buffer]}).catch(function(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("ocmf_client_evolve_v2"),e).mustfix("Failed to evolve client."),e})};e.__nop_name__="LSOcmfClientEvolve_v2",l.default=e}),98);
__d("LSPublicEncryptionCreateDecryptedData.nop",["PublicEncryptionCreateDecryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a,i,l,s,u){return r("PublicEncryptionCreateDecryptedData")(o,a,i,l,s,u)};e.__nop_name__="LSPublicEncryptionCreateDecryptedData",l.default=e}),98);
__d("MWPakeQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(231349365,"1751");l.pakeInitiatorQplEvent=e}),98);
__d("PAKEMessageQplLoggingAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADD_MARKER:0,END_SUCCESS:1,END_FAILURE:2,ADD_ERROR_ANNOTATION:3});i.default=e}),66);
__d("LSQplInteractionHelper.nop",["FBLogger","I64","MWPakeQPLEvents","PAKEMessageQplLoggingAction","Promise","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(a,i,l,u,c){var t=(s||(s=o("I64"))).to_int32(u);switch(t){case r("PAKEMessageQplLoggingAction").ADD_MARKER:l==null?r("FBLogger")("wmi_eb").mustfix("PAKE: markerName is null when adding DS PAKE marker."):r("QPLUserFlow").addPoint(o("MWPakeQPLEvents").pakeInitiatorQplEvent,l);break;case r("PAKEMessageQplLoggingAction").END_FAILURE:l==null?r("FBLogger")("wmi_eb").mustfix("PAKE: markerName is null when adding failure DS PAKE marker."):r("QPLUserFlow").endFailure(o("MWPakeQPLEvents").pakeInitiatorQplEvent,l);break;case r("PAKEMessageQplLoggingAction").END_SUCCESS:r("QPLUserFlow").endSuccess(o("MWPakeQPLEvents").pakeInitiatorQplEvent);break;case r("PAKEMessageQplLoggingAction").ADD_ERROR_ANNOTATION:c==null?r("FBLogger")("wmi_eb").mustfix("PAKE: pakeMessageType is null when annotating PAKE error."):r("QPLUserFlow").addAnnotations(o("MWPakeQPLEvents").pakeInitiatorQplEvent,{int:{errorCode:(s||(s=o("I64"))).to_int32(c)}});break}return(e||(e=n("Promise"))).resolve()};u.__nop_name__="LSQplInteractionHelper",l.default=u}),98);
__d("LSStoreEpoch",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return n[1]="Storing newly derived epoch ",n[2]=t.blobs.to_string(e[2]),n[3]=" authority_level:",n[4]=t.i64.to_string(e[5]),n[5]=" status:",n[6]=t.i64.to_string(e[4]),n[0]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] ",n[0],n[1],n[0],n[2],n[0],n[3],n[0],n[4],n[0],n[5],n[0],n[6]].join("")),t.resolve()},function(n){return(function(e){t.logger(e).info(e)})("[EncryptedBackups][LSEncryptedBackupsStoreEpochStoredProcedure] Storing epoch in epochs table (regular execution)"),t.filter(t.db.table(169).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.epochId,e[0])&&t.i64.gt(n.authorityLevel,e[5])}).next().then(function(n){var r=n.done,o=n.value;return r?t.db.table(169).put({epochId:e[0],backupId:e[1],epochAnonIdBlob:e[2],epochRootKeyBlob:e[3],epochStatus:e[4],epochHead:e[7],authorityLevel:e[5]}):0})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSEncryptedBackupsStoreEpochStoredProcedure",e.__tables__=["secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LogWebQplNOP",["I64","LSIntEnum","Promise","QPLUserFlow","WAHashStringToNumber","WALogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e){var t=e==null?null:(c||(c=o("I64"))).to_int32(e);switch(t){case 521476165:return r("qpl")._(521476165,"2432");case 521481602:return r("qpl")._(521481602,"829");default:return null}}function m(t,a,i,l,m,p){return new(s||(s=n("Promise")))(function(n,s){try{var _=m?(u||(u=o("LSIntEnum"))).unwrapIntEnum(m):null,f=d(a);if(f!=null&&i!=null){var g,h={int:{num_messages:(c||(c=o("I64"))).to_int32(l)},string:{message_count:String(l),taskSource:(g=_==null?void 0:_.toString())!=null?g:"unknown"}};p===!0?r("QPLUserFlow").endSuccess(f,{annotations:h,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}):p===!1?r("QPLUserFlow").endFailure(f,i,{annotations:h,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}):(r("QPLUserFlow").addAnnotations(f,h,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}),r("QPLUserFlow").addPoint(f,i,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)}))}n()}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["LSLogWebQpl error: ",""])),t),n()}})}l.call=m}),98);
__d("MAWEBFrontendQPLLogger",["EBEnableUnifiedAttachment","EBUnifyLegacyMediaUpload","ExecutionEnvironment","FBLogger","MAWBridgeSafeActionsWorkerAndUI","MAWEBUploadTrackingUtils","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){e!=null&&((s||(s=r("ExecutionEnvironment"))).isInWorker?(y("point",t),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("point",e,t,n)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:n,pointName:t,qplInstanceKey:e,qplType:"point"}))}function c(e,t){(s||(s=r("ExecutionEnvironment"))).isInWorker?(y("success","upload_tracking_completed"),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("success",e,"upload_tracking_completed",t)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:t,pointName:"upload_tracking_completed",qplInstanceKey:e,qplType:"success"})}function d(e,t,n){(s||(s=r("ExecutionEnvironment"))).isInWorker?(y("fail",t),o("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("fail",e,t,n)):o("MAWBridgeSafeActionsWorkerAndUI").fireAndForgetBackendWorkerAndUIShared("addEbUploadTrackingWorkerQPL",{annotations:n,pointName:t,qplInstanceKey:e,qplType:"fail"})}function m(e){var t=e.deliveryObjectId,n=e.flow,a=e.mediaType,i=e.messageId,l=e.threadId,s=e.traceId;if(_(n)){var u=o("WAHashStringToNumber").hashStringToNumber(s),c={bool:{is_legacy_hardening:o("EBUnifyLegacyMediaUpload").getEnableUnifyLegacyMediaUpload(),is_unified_attachment:o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()},string:{deliveryObjectId:t,flow:n,mediaType:a,messageId:i,threadId:l,traceId:s}};r("QPLUserFlow").start(r("qpl")._(521480391,"1167"),{annotations:c,instanceKey:u})}}function p(e,t,n,a){if(e!=null&&_(n)){var i=o("WAHashStringToNumber").hashStringToNumber(e);if(t){r("QPLUserFlow").endSuccess(r("qpl")._(521480391,"1167"),{instanceKey:i});return}r("QPLUserFlow").endFailure(r("qpl")._(521480391,"1167"),"upload_attachment_backup_failed",{annotations:{string:{error:a!=null?a:"upload_attachment_backup_failed"}},instanceKey:i})}}function _(e){return e==="unified"&&o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()||e==="old"&&!o("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()}function f(e,t){e.forEach(function(e){if(e.uploadTrackingInstanceKey!=null){var n={string:{traceId:e.traceId}};u(e.uploadTrackingInstanceKey,t,n)}})}function g(e){return{addAnnotations:function(n){h(e,n)},addPoint:function(n,r){u(e,n,r)},endCancel:function(n,r){d(e,""+(n!=null?n:""),r)},endFail:function(n,r){d(e,n,r)},endSuccess:function(n){c(e,n)},getQPLAttrs:function(){return{instanceKey:e}},isActive:function(){return!0},start:function(){}}}function h(e,t){r("FBLogger")("EBFrontendQPLLogger").warn("addAnnotations not implemented for EB Frontend QPL")}function y(t,n){(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_FRONTEND_QPL_IN_WORKER,t+"."+n)}l.addPointEBUploadTracking=u,l.endEBUploadTracking=c,l.failEBUploadTracking=d,l.startFlowUploadAttachmentBackup=m,l.endFlowUploadAttachmentBackup=p,l.addPointForUploadMessageArray=f,l.makeEBFrontendQplFlowFromInstanceKey=g}),98);
__d("MWEncryptedBackupsInitializeRestore",["EBGetLatestChatJids","EBSetRestoreStatusForInitialRestore","ExecutionEnvironment","FBLogger","LSRequestId","MAWBridge","MAWBridgeSendAndReceive","MAWEBRestoreTrackingUtils","MAWMpsGating","MAWUICacheServices","MpsOverBridge","MpsTypes","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=20;function c(e){var t=r("LSRequestId").generate();return o("MAWMpsGating").isFullMpsEnabled()?d(e,t,m,"FULL_MPS"):d(e,t,p,"MPS")}async function d(t,n,a,i){r("FBLogger")("messenger_web").INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Initializing restore with ",""])),i),_(i);try{o("MAWEBRestoreTrackingUtils").markEBRestoreInitial({querySource:"GQL_MAIN_THREAD",traceId:n});var l=await o("EBGetLatestChatJids").getLatestChatJids(t,50);if(l.success===!1){o("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,(s||(s=r("ExecutionEnvironment"))).isInWorker,"latestChatJidsResultOrError: "+r("getErrorSafe")(l.error).message);return}if(await o("EBSetRestoreStatusForInitialRestore").setRestoreStatusForInitialRestore(l.value,t),o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()||r("gkx")("2792")){var u=o("MAWUICacheServices").getMAWUICacheServices();r("promiseDone")(u.getFromScratchSkippingCacheAndNotifyListenersFor("snippets",l.value.map(o("MpsTypes").toThreadId)))}await a(l.value),o("MAWEBRestoreTrackingUtils").markEBRestoreSuccess(n)}catch(e){throw o("MAWEBRestoreTrackingUtils").markEBRestoreFail(n,(s||(s=r("ExecutionEnvironment"))).isInWorker,"initialize_restore_failed: "+r("getErrorSafe")(e).message),e}finally{await o("EBSetRestoreStatusForInitialRestore").resetClientRestoreStatus(t)}}function m(e){return Promise.all(e.map(function(e){return o("MpsOverBridge").mps().loadMessages({debug:{purpose:"InitializeRestore"},direction:"desc",from:[o("MpsTypes").toTimestamp(Number.MAX_SAFE_INTEGER),void 0],numMessages:u,threadId:o("MpsTypes").toThreadId(e)})})).then(function(){})}function p(e){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs_by_chat_jids_into_maw",{actionType:"pre-load",config:e.map(function(e){return{chatJid:e,direction:"before",includeLowerBoundMsg:!0,lowerBoundSortOrderMs:Date.now(),numMsgs:u}})})}function _(e){o("MAWBridge").getBridge().fireAndForget("backend","logInitRestoreMethodForDebugging",{method:e})}l.initializeRestore=c}),98);
__d("X25519",["$InternalEnum","Promise","WACryptoCurve25519Dependencies","WASignalKeys","WASignalOther","WASignalSignatures"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum").Mirrored(["Encryption","Signing"]),u=n("$InternalEnum")({PublicKey:0,PrivateKey:1,Signature:2});function c(e,t){if(t===s.Encryption)return[];var n=1;switch(e){case u.PublicKey:n=1;break;case u.PrivateKey:n=2;break;case u.Signature:n=3;break}return[255,n]}function d(e,t,n){var r=c(t,n),o=r.length;if(o<=0)return e;var a=new Uint8Array(o+e.byteLength);return a.set(Array.from(r)),a.set(e,o),a}function m(e,t,n){var r=c(t,n).length;return e.slice(r)}function p(e,t){return{privateKey:d(e.privateKey,u.PrivateKey,t),publicKey:d(e.publicKey,u.PublicKey,t)}}function _(e){var t=p(o("WASignalKeys").makeKeyPair(),e);return{pk:t.publicKey,sk:t.privateKey}}function f(e,t){if(t===s.Encryption)return 32;switch(e){case u.PublicKey:case u.PrivateKey:return 32;case u.Signature:return 64}}function g(e,t,n){var r=c(t,n),o=r.length,a=f(t,n),i=a!=null?o+a:0;if(e.length!==i)return!1;var l=e.subarray(0,o),s=new Uint8Array(r);return s.length===l.length&&s.every(function(e,t){return e===l[t]})}function h(e,t){if(g(e,u.PublicKey,t))return e}function y(e,t){if(g(e,u.PrivateKey,t))return e}function C(e,t){var n=h(e.pkBytes,t),r=y(e.skBytes,t);if(n!=null&&r!=null)return{pk:n,sk:r}}function b(t,r){var a=m(t,u.PrivateKey,s.Signing);return o("WASignalSignatures").signMsg(o("WASignalKeys").makeKeyPairFrom(o("WASignalOther").ensureSize(a,32)),r).then(function(t){var r=d(t,u.Signature,s.Signing);return(e||(e=n("Promise"))).resolve(r)})}function v(e){if(g(e,u.Signature,s.Signing))return e}function S(e,t,n){var r=m(t,u.PublicKey,s.Signing);return o("WASignalSignatures").verifyMsgSignalVariant(o("WASignalKeys").serializeIdentity(r),n,o("WASignalOther").ensureSize(m(e,u.Signature,s.Signing),64))}function R(t,r){var a=r,i=t;return!g(i,u.PublicKey,s.Encryption)||!g(a,u.PrivateKey,s.Encryption)?(e||(e=n("Promise"))).resolve():o("WACryptoCurve25519Dependencies").calculateAgreement(i,a).then(function(t){return(e||(e=n("Promise"))).resolve(new Uint8Array(t))})}l.KeyPurpose=s,l.generateKeys=_,l.publicKeyFromBytes=h,l.secretKeyFromBytes=y,l.keysFromBytes=C,l.sign=b,l.signatureFromBytes=v,l.verify=S,l.exchangeKeys=R}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(t,n,r,o,a,i,l){var e=r("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(t,n){return new Uint8Array(Array.prototype.slice.call(this,t,n))}});var s={},u=e.lowlevel,c=u.gf([1]);function d(){return[u.gf(),u.gf(),u.gf(),u.gf()]}var m=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),p=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function _(e,t,n){for(var r=new Float64Array(64),o=0;o<32;o++)for(var a=0;a<32;a++)r[o+a]+=t[o]*n[a];u.modL(e,r)}function f(e,t){_(e,t,t)}function g(e,t){for(var n=0;n<32;n++)e[n]=t[n];for(var r=251;r>=0;r--)f(e,e),(p[r>>3]>>(r&7)&1)!==0&&_(e,e,t)}var h=u.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),y=u.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),C=u.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),b=u.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),v=u.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function S(e){var t=new Uint8Array(32);u.pack25519(t,e);for(var n=1,r=0;r<32;r++)n&=t[r]===0;return n}function R(e,t,n){for(var r,o=-n,a=0;a<16;a++)r=e[a]^t[a],r&=o,e[a]^=r}function L(e){var t=new Uint8Array(32);return u.pack25519(t,e),t[0]&1}function E(e,t){u.Z(e,u.gf(),t)}function k(e,t,n){var r=u.gf();E(r,t),u.set25519(e,t),R(e,r,n)}function I(e,t){k(e,t,L(t))}function T(e,t,n){var r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf();u.S(r,n),u.M(r,r,n),u.S(e,r),u.M(e,e,n),u.M(e,e,t),u.pow2523(e,e),u.M(e,e,r),u.M(e,e,t),u.S(o,e),u.M(o,o,n),u.Z(a,o,t),u.A(i,o,t),u.M(l,t,h),u.A(l,o,l);var c=S(a),d=S(i),m=S(l);return u.M(s,e,h),R(e,s,d|m),I(e,e),c|d}function D(e){var t=u.gf(),n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf(),_=u.gf(),f=u.gf(),g=u.gf(),y=u.gf(),b=u.gf(),v=u.gf(),S=0,E=new Uint8Array(32);return u.A(m,e[2],e[1]),u.Z(v,e[2],e[1]),u.M(m,m,v),u.M(p,e[0],e[1]),u.S(_,p),u.M(_,m,_),T(a,c,_),u.M(t,a,m),u.M(n,a,p),u.M(b,t,n),u.M(b,b,e[3]),u.M(i,e[0],h),u.M(l,e[1],h),u.M(o,t,C),u.M(d,e[3],b),S=L(d),f=u.gf(e[0]),g=u.gf(e[1]),r=u.gf(n),R(f,l,S),R(g,i,S),R(r,o,S),u.M(y,f,b),k(g,g,L(y)),u.Z(s,e[2],g),u.M(s,r,s),I(s,s),u.pack25519(E,s),E}function x(e){for(var t=e[31]&127^127,n=30;n>0;n--)t|=e[n]^255;t=(t|0)-1>>8;var r=236-(e[0]|0)>>8;return 1-((t&r|e[0])&1|(e[31]&255)>>7)}function $(e,t){var n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf();if(x(t)===0)return-1;u.unpack25519(o,t),u.S(a,o),u.set25519(i,c),u.Z(i,i,a),u.S(s,i),u.set25519(l,c),u.A(l,l,a),u.S(d,l),u.M(m,u.D,s),E(m,m),u.Z(m,m,d),u.M(p,m,d),u.set25519(r,c);var _=T(n,r,p);return u.M(e[0],n,l),u.M(e[1],n,e[0]),u.M(e[1],e[1],m),u.M(e[0],e[0],o),u.A(e[0],e[0],e[0]),I(e[0],e[0]),u.M(e[1],i,e[1]),u.set25519(e[2],c),u.M(e[3],e[0],e[1]),-(1-_|L(e[3])|S(e[1]))}function P(e,t){var n=u.gf(),r=u.gf(),o=u.gf(),a=u.gf(),i=u.gf(),l=u.gf(),s=u.gf(),d=u.gf(),m=u.gf(),p=u.gf(),_=u.gf(),f=u.gf(),g=u.gf(),C=u.gf();u.set25519(o,c),u.S(a,t),u.M(a,h,a),u.A(m,a,o),u.M(m,m,b),u.set25519(n,c),E(n,n),u.A(i,a,u.D),u.M(p,a,u.D),u.Z(p,n,p),u.M(p,p,i);var S=1-T(l,m,p);u.M(s,l,t),I(s,s),E(s,s),R(l,s,S),R(n,a,S),u.Z(r,a,o),u.M(r,r,n),u.M(r,r,v),u.Z(r,r,p),u.A(_,l,l),u.M(_,_,p),u.M(f,r,y),u.S(d,l),u.Z(g,o,d),u.A(C,o,d),u.M(e[0],_,C),u.M(e[1],g,f),u.M(e[2],f,C),u.M(e[3],_,g)}function N(e){var t=u.gf(),n=u.gf(),r=d(),o=d();return u.unpack25519(t,e.slice(0,32)),u.unpack25519(n,e.slice(32,64)),P(r,t),P(o,n),u.add(r,o),r}function M(e){var t=d();return u.scalarbase(t,e),D(t)}function w(e,t){var n=d(),r=d();if($(n,t)!==0)throw new Error("Invalid argument");return u.scalarmult(r,n,e),D(r)}function A(e){var t=d();return $(t,e)!==-1}function F(e,t){var n=d(),r=d();if($(n,e)===-1)throw new Error("Invalid argument");if($(r,t)===-1)throw new Error("Invalid argument");return[n,r]}function O(e,t){var n=F(e,t),r=n[0],o=n[1];return u.add(r,o),D(r)}function B(e,t){var n=u.gf();E(n,t[3]);var r=u.gf();E(r,t[0]);var o=[r,t[1],t[2],n];u.add(e,o)}function W(e,t){var n=F(e,t),r=n[0],o=n[1];return B(r,o),D(r)}function q(){var t=e.randomBytes(64);return N(t)}function U(e){return D(N(e))}function V(){return D(q())}function H(){var t=new Uint8Array(32),n=0;do{t=e.randomBytes(32),t[31]&=31;var r=32,o=1;do r--,n|=t[r]-u.L[r]>>8&o,o&=(t[r]^u.L[r])-1>>8;while(r!==0)}while(n===0);return t}function G(e){var t=new Uint8Array(32);return g(t,e),t}function z(e){for(var t=new Float64Array(64),n=0;n<32;n++)t[n]=-e[n];var r=new Uint8Array(32);return u.modL(r,t),r}function j(e,t){for(var n=new Float64Array(64),r=0;r<32;r++)n[r]=e[r]+t[r];var o=new Uint8Array(32);return u.modL(o,n),o}function K(e,t){return j(e,z(t))}function Q(e,t){var n=new Uint8Array(32);return _(n,e,t),n}s.scalarMultBase=M,s.scalarMult=w,s.isValid=A,s.add=O,s.sub=W,s.fromHash=U,s.getRandom=V,s.basePoint=m,s.scalar={},s.scalar.getRandom=H,s.scalar.invert=G,s.scalar.negate=z,s.scalar.add=j,s.scalar.sub=K,s.scalar.mul=Q,s.unsafe={},s.unsafe.point={},s.unsafe.point.toBytes=D,s.unsafe.point.fromBytes=$,s.unsafe.point.fromHash=N,s.unsafe.point.sub=B,s.unsafe.point.add=u.add,s.unsafe.point.scalarMultBase=u.scalarbase,s.unsafe.point.scalarMult=u.scalarmult,s.unsafe.point.getRandom=q,s.unsafe.point.alloc=d,s.unsafe.constants={},s.unsafe.constants.LSub2=p,s.unsafe.constants.sqrtm1=h,s.unsafe.constants.sqrtadm1=y,s.unsafe.constants.invsqrtamd=C,s.unsafe.constants.onemsqd=b,s.unsafe.constants.sqdmone=v,i.exports=s}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(t,n,r,o,a,i){a.exports=n("ristretto255-0.1.1")}),null);/*FB_PKG_DELIM*/
__d("ReStorePersistence",["FBLogger","JSONStringifyBigIntSafe","ReStoreCommonUtils","ReStoreKeyComparer","ReStorePersistenceIds","ReStoreUtils","gkx","isPromise","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=["dir"],s,u,c=d();function d(){return r("gkx")("17880")?"__ReStore_DELETED__":{}}var m={gt:[!1,0],gte:[!0,0],lt:[!0,1],lte:[!1,1]},p=new Set(["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state"]),_=16,f=64,g=64,h=Math.floor(_/2),y=Math.floor(f/2),C=Math.floor(g/2);function b(e){if(e==null)return e;var t=Object.getOwnPropertyNames(e),n={},r,o;for(r=0;r<t.length;r++)o=e[t[r]],n[t[r]]=o;return n}function v(e,t){return t===void 0&&(t=c),e===t}function S(e,t,n){for(var r=0,a=e.length-1;r<=a;){var i=r+a>>1;(n[0]?(u||(u=o("ReStoreKeyComparer"))).compareKey(e[i],t)<0:(u||(u=o("ReStoreKeyComparer"))).compareKey(e[i],t)<=0)?r=i+1:a=i-1}var l=[r,a][n[1]];return l===e.length?-1:l}var R=(function(){function t(e,t,n,r,o,a){this.$2=t,this.$3=n,this.$1=e,this.$4=r,this.$5=o,this.$6=a}var n=t.prototype;return n.$7=function(t){return t==null?"root":"index("+t+")"},n.$8=function(t,n){return o("ReStoreUtils").getOrCreate(this.$1,n,function(){return{children:[].concat(t.children),isLeaf:!0,keys:[].concat(t.keys),nextId:t.nextId,prevId:t.prevId}})},n.$9=function(t,n){return o("ReStoreUtils").getOrCreate(this.$1,n,function(){return{children:[].concat(t.children),isLeaf:!1,keys:[].concat(t.keys)}})},n.$10=function(t,n){return o("ReStoreUtils").getOrCreate(this.$1,n,function(){return{headId:t.headId,rootId:t.rootId,tailId:t.tailId}})},n.$11=function(t,n){if(!t.length)return[0,0];var e=S(t,n,m.gte);return e===-1?[t.length,0]:(u||(u=o("ReStoreKeyComparer"))).compareKey(t[e],n)===0?[e,1]:[e,0]},n.$12=function*(t,n,o,a){for(var e=yield*this.$13(t,n),i=e,l=n,s=-1;!i.isLeaf;){if(a==null||a.push([i,l,s]),i.keys==null){if(p.has(this.$2)){var u,c;(u=(c=this.$4).logError)==null||u.call(c,this.$2,this.$5,"dbCorruption",{})}throw r("FBLogger")("messenger_web").mustfixThrow("Encountered not leaf node without keys")}s=S(i.keys,o,m.gt),s===-1&&(s=i.keys.length),l=i.children[s],i=yield*this.$13(t,l)}return[i,l,s]},n.$14=function*(t,n){this.$3();var e=this.$1.get(n);if(!v(e)){if(e!==void 0)return e;var o=this.$4.get(t,this.$2,n,this.$5);return(s||(s=r("isPromise")))(o)?yield o:o}},n.$13=function*(t,n){var e=yield*this.$14(t,n);if(e===void 0){var o,a,i=this.$1.get(n);throw(o=(a=this.$4).logError)==null||o.call(a,this.$2,this.$5,"dbCorruption",{deletedInThisTxn:v(i)?"true":"false",id:r("JSONStringifyBigIntSafe")(n)||""}),r("FBLogger")("messenger_web").mustfixThrow("value not found")}return e},n.$15=function*(t,n){var e,r=(e=yield*this.$14(t,o("ReStorePersistenceIds").idForNextId))!=null?e:0;return this.$1.set("nextId",r+1),this.$1.set(r,n),r},n.$16=function(t,n){this.$3(),this.$1.set(t,n)},n.incrementSeed=function*(t,n){var e,r=(e=yield*this.$14(t,"seed"))!=null?e:0;return n===void 0?(this.$1.set("seed",r+1),r):(n>=r&&this.$1.set("seed",n+1),n)},n.readData=function*(t,n){return yield*this.$14(t,n)},n.$17=function*(t,n,r){var e=yield*this.$14(t,this.$7(n));if(e!=null){var a=yield*this.$12(t,e.rootId,r),i=a[0],l=S(i.keys,r,m.gte);if(!(l===-1||(u||(u=o("ReStoreKeyComparer"))).compareKey(i.keys[l],r)!==0))return i.children[l]}},n.tableGet=function*(t,n){var e=yield*this.$17(t,void 0,n);if(e!==void 0)return yield*this.$18(t,e)},n.$18=function*(t,n){return Array.isArray(n)?n[0]:yield*this.$13(t,n)},n.$19=function*(t,n,o,a){if(Array.isArray(n)){var e=yield*this.$17(t,void 0,n);if(e==null)throw r("gkx")("3570")&&this.$6(o,a,this.$2),r("FBLogger")("messenger_web").mustfixThrow("Encountered value in index %s but not found in table %s",o,this.$2);return yield*this.$18(t,e)}return yield*this.$13(t,n)},n.indexGet=function*(t,n,r){var e=yield*this.$17(t,n,r);if(e!=null)return yield*this.$19(t,e,n,r)},n.getId=function*(t,n){var e=yield*this.$17(t,void 0,n);return Array.isArray(e)?n:e},n.tableSet=function*(t,n,r){var e,o=this.$4.shouldInline(this.$2,r),a=this.$7(),i=yield*this.$14(t,a);if(i==null){o||(e=yield*this.$15(t,r));var l={children:[e!=null?e:[r]],isLeaf:!0,keys:[n]},s=yield*this.$15(t,l);return this.$16(a,{headId:s,rootId:s,tailId:s}),[e!=null?e:n,!1]}var u=[],d=yield*this.$12(t,i.rootId,n,u),m=d[0],p=d[1],_=this.$11(m.keys,n),f=_[0],g=_[1],h=!1;if(g===1){var y=m.children[f];if(!Array.isArray(y))if(h=!0,o)this.$1.set(y,c);else return this.$16(y,r),[y,!1]}var C=this.$8(m,p);return o||(e=yield*this.$15(t,r)),g===0&&C.keys.splice(f,0,n),C.children.splice(f,g,e!=null?e:[r]),yield*this.$20(t,C,p,u,i,a,!0),[e!=null?e:n,g===1&&!(o&&!h)]},n.indexSet=function*(t,n,r,o){var e=this.$7(n),a=yield*this.$14(t,e);if(a==null){var i={children:[o],isLeaf:!0,keys:[r]},l=yield*this.$15(t,i);this.$16(e,{headId:l,rootId:l,tailId:l});return}var s=[],u=yield*this.$12(t,a.rootId,r,s),c=u[0],d=u[1],m=this.$11(c.keys,r),p=m[0],_=m[1];if(!(_===1&&c.children[p]===o)){var f=this.$8(c,d);f.keys.splice(p,_,r),f.children.splice(p,_,o),yield*this.$20(t,f,d,s,a,e,!1)}},n.$20=function*(t,n,r,o,a,i,l){for(var e=n,s,u,c,d=r;e.keys.length>=(e.isLeaf?l?_:f:g);e=s,d=c){var m,p=(m=o.pop())!=null?m:[];u=p[0],c=p[1],c!=null?s=this.$9(u,c):(s={children:[d],isLeaf:!1,keys:[]},this.$10(a,i).rootId=yield*this.$15(t,s));var h=Math.floor(e.keys.length/2),y=void 0;if(e.isLeaf){var C={children:e.children.slice(h),isLeaf:!0,keys:e.keys.slice(h),nextId:e.nextId,prevId:d},b=y=e.nextId=yield*this.$15(t,C),v=C.nextId;v?this.$8(yield*this.$13(t,v),v).prevId=b:this.$10(a,i).tailId=y}else y=yield*this.$15(t,{children:e.children.slice(h+1),isLeaf:!1,keys:e.keys.slice(h+1)});var S=this.$11(s.keys,e.keys[h]),R=S[0],L=S[1];s.keys.splice(R,L,e.keys[h]),s.children.splice(R+1,0,y),e.keys.length=h,e.children.length=h+(e.isLeaf?0:1)}},n.tableDelete=function*(t,n){var e=yield*this.$21(t,void 0,n);return e==null?!1:(Array.isArray(e)||(this.$3(),this.$1.set(e,c)),!0)},n.indexDelete=function*(t,n,r){return(yield*this.$21(t,n,r))!=null},n.$21=function*(t,n,a){var e=this.$7(n),i=yield*this.$14(t,e);if(i!=null){var l=[],s=yield*this.$12(t,i.rootId,a,l),d=s[0],_=s[1],f=s[2],g=this.$8(d,_),b=S(d.keys,a,m.gte);if(!(b===-1||(u||(u=o("ReStoreKeyComparer"))).compareKey(d.keys[b],a)!==0)){var v=g.children[b];g.keys.splice(b,1),g.children.splice(b,1);for(var R=g,L=_,E=f,k,I,T,D;R.keys.length<(R.isLeaf?n==null?h:y:C)&&l.length;x=[k,T,D],R=x[0],L=x[1],E=x[2],x){var x,$=l.pop();I=$[0],T=$[1],D=$[2],k=this.$9(I,T);var P=[[{nodeId:k.children[E-1]},{node:R,nodeId:L},E-1],[{node:R,nodeId:L},{nodeId:k.children[E+1]},E]].filter(function(e){var t=e[0],n=e[1];return t.nodeId!==void 0&&n.nodeId!==void 0});for(var N of P){var M=N[0],w=N[1],A=N[2],F=M.node=M.node||(yield*this.$13(t,M.nodeId)),O=w.node=w.node||(yield*this.$13(t,w.nodeId)),B=R.isLeaf?n==null?h:y:C;if(F.keys.length+w.node.keys.length>=B*2){if(R.isLeaf){var W=this.$8(F,M.nodeId),q=this.$8(O,w.nodeId),U=[].concat(W.children,q.children),V=[].concat(F.keys,O.keys);W.children=(q.children=U).splice(0,B),W.keys=(q.keys=V).splice(0,B),k.keys[A]=V[0]}else{var H=this.$9(F,M.nodeId),G=this.$9(O,w.nodeId),z=[].concat(H.children,G.children),j=[].concat(H.keys,[k.keys[A]],G.keys);H.children=(G.children=z).splice(0,B+1),k.keys[A]=j.splice(B,1)[0],H.keys=(G.keys=j).splice(0,B)}return v}}for(var K of P){var Q=K[0],X=K[1],Y=K[2];if(R.isLeaf){var J=this.$8(Q.node,Q.nodeId),Z=this.$8(X.node,X.nodeId);J.children=[].concat(J.children,Z.children),J.keys=[].concat(J.keys,Z.keys),Z.keys.length=0;var ee=Z.nextId;if(ee){var te=this.$8(yield*this.$13(t,ee),ee);te.prevId=Q.nodeId}else this.$10(i,e).tailId=Q.nodeId;J.nextId=Z.nextId}else{var ne=this.$9(Q.node,Q.nodeId),re=this.$9(X.node,X.nodeId);ne.children=[].concat(ne.children,re.children),ne.keys=[].concat(ne.keys,[k.keys[Y]],re.keys)}k.keys.splice(Y,1),k.children.splice(Y+1,1),this.$1.set(X.nodeId,c);break}}var oe=yield*this.$13(t,i.rootId);if(!oe.keys.length&&oe.children.length){if(oe.isLeaf){if(p.has(this.$2)){var ae,ie;(ae=(ie=this.$4).logError)==null||ae.call(ie,this.$2,this.$5,"dbCorruption",{})}throw r("FBLogger")("messenger_web").mustfixThrow("cannot be leaf")}this.$1.set(i.rootId,c),this.$10(i,e).rootId=oe.children[0]}return v}}},n.btreeIterator=function(n,a,i){var t=i===void 0?{}:i,l=t.dir,s=l===void 0?"asc":l,c=babelHelpers.objectWithoutPropertiesLoose(t,e);function d(){if(s==="asc"){if(Object.prototype.hasOwnProperty.call(c,"gt"))return c.gt;if(Object.prototype.hasOwnProperty.call(c,"gte"))return c.gte}else{if(Object.prototype.hasOwnProperty.call(c,"lt"))return c.lt;if(Object.prototype.hasOwnProperty.call(c,"lte"))return c.lte}}function p(e){return s==="asc"?Object.prototype.hasOwnProperty.call(c,"gt")?S(e.keys,c.gt,m.gt):Object.prototype.hasOwnProperty.call(c,"gte")?S(e.keys,c.gte,m.gte):0:Object.prototype.hasOwnProperty.call(c,"lt")?S(e.keys,c.lt,m.lt):Object.prototype.hasOwnProperty.call(c,"lte")?S(e.keys,c.lte,m.lte):e.keys.length-1}if(Object.prototype.hasOwnProperty.call(c,"gt")&&Object.prototype.hasOwnProperty.call(c,"gte"))throw r("FBLogger")("messenger_web").mustfixThrow("cannot specify both greater than and greater than or equal");if(Object.prototype.hasOwnProperty.call(c,"lt")&&Object.prototype.hasOwnProperty.call(c,"lte"))throw r("FBLogger")("messenger_web").mustfixThrow("cannot specify both less than and less than or equal");var _,f=this;return{next:function*(t){var e,i,l,g;if(_==null){var h=yield*f.$14(n,f.$7(a));if(h==null)return{done:!0};var y=d();if(y!==void 0){var C=yield*f.$12(n,h.rootId,y);i=C[0],l=C[1]}else if(s==="asc"){var b=[yield*f.$13(n,h.headId),h.headId];i=b[0],l=b[1]}else{var v=[yield*f.$13(n,h.tailId),h.tailId];i=v[0],l=v[1]}e=p(i)}else{var R=_;if(e=R.i,g=R.key,l=R.nodeId,i=yield*f.$14(n,l),t!=null){if((u||(u=o("ReStoreKeyComparer"))).compareKey(t,g)===(s==="asc"?-1:1))throw r("FBLogger")("messenger_web").mustfixThrow("key must be ahead of current key");if(i==null||(u||(u=o("ReStoreKeyComparer"))).compareKey(t,i.keys[0])<0||(u||(u=o("ReStoreKeyComparer"))).compareKey(t,i.keys[i.keys.length-1])>0){var L=yield*f.$14(n,f.$7(a));if(L==null)return{done:!0};var E=yield*f.$12(n,L.rootId,t);i=E[0],l=E[1]}e=S(i.keys,t,m[s==="asc"?"gte":"lte"])}else{if(i==null||e<0||e>=i.keys.length||(u||(u=o("ReStoreKeyComparer"))).compareKey(i.keys[e],g)!==0){if(i==null||!i.keys.length||(u||(u=o("ReStoreKeyComparer"))).compareKey(g,i.keys[0])<0||(u||(u=o("ReStoreKeyComparer"))).compareKey(g,i.keys[i.keys.length-1])>0){var k=yield*f.$14(n,f.$7(a));if(k==null)return{done:!0};var I=yield*f.$12(n,k.rootId,g);i=I[0],l=I[1]}e=S(i.keys,g,m[s==="asc"?"lte":"gte"])}e+=s==="asc"?1:-1}}if(e<0||e>=i.keys.length)if(s==="asc"){if(i.nextId===void 0)return{done:!0};l=i.nextId,i=yield*f.$13(n,l),e=0}else{if(i.prevId===void 0)return{done:!0};l=i.prevId,i=yield*f.$13(n,l),e=i.keys.length-1}if(g=i.keys[e],_={i:e,key:g,node:i,nodeId:l},e<0||e>=i.keys.length)return{done:!0};var T=s==="asc"?Object.prototype.hasOwnProperty.call(c,"lt")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.lt)>=0||Object.prototype.hasOwnProperty.call(c,"lte")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.lte)>0:Object.prototype.hasOwnProperty.call(c,"gt")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.gt)<=0||Object.prototype.hasOwnProperty.call(c,"gte")&&(u||(u=o("ReStoreKeyComparer"))).compareKey(g,c.gte)<0;return T?{done:!0}:{done:!1,value:[i.keys[e],i.children[e]]}}}},n.tableEntries=function(t,n){n===void 0&&(n={});var e=this.btreeIterator(t,void 0,n),r=this;return{next:function*(o){var n=yield*e.next(o);if(n.done)return n;var a=n.value,i=a[0],l=a[1],s=yield*r.$18(t,l);return{done:!1,value:[i,s]}}}},n.indexEntries=function(t,n,r){r===void 0&&(r={});var e=this.btreeIterator(t,n,r),o=this;return{next:function*(a){var r=yield*e.next(a);if(r.done)return r;var i=r.value,l=i[0],s=i[1],u=yield*o.$19(t,s,n,l);return{done:!1,value:[l,u]}}}},n.keys=function(t,n,r){r===void 0&&(r={});var e=this.btreeIterator(t,n,r);return{next:function*(n){var t=yield*e.next(n);if(t.done)return t;var r=t.value,o=r[0];return{done:!1,value:o}}}},n.clearIds=function*(t,n){this.$3();var e=this.$7(n),r=yield*this.$14(t,e);if(this.$3(),r!=null){for(var o=yield*this.$13(t,r.rootId),a=[{id:r.rootId,node:o}];a.length>0;){var i=a.shift(),l=i.id,s=i.node;if(!s.isLeaf)for(var u of s.children){var d=yield*this.$14(t,u);d!=null&&a.push({id:u,node:d})}this.$1.set(l,c)}this.$1.set(e,c)}},n.readSeed=function*(t){var e;return(e=yield*this.$14(t,o("ReStorePersistenceIds").idForSeed))!=null?e:0},n.remove=function(t,n){this.$3(),this.$1.set(n,c)},n.writeData=function(t,n,r){this.$16(n,b(r))},n.writeNewData=function*(t,n){return yield*this.$15(t,b(n))},t})(),L=(function(){function e(e,t,n,a,i){var l=this;this.$2=new Map,this.$6=!1,this.$3=function(){if(l.$6)throw a==null||a.mark("transaction_closed"),r("FBLogger")("messenger_web").mustfixThrow("Transaction has closed");n()},this.$4=t,this.$1=e,this.$5={get:function(n,r,a){var e=o("ReStoreUtils").getOrCreate(l.$1,r,function(){return new Map}),i=e.get(a);if(!v(i))return i!==void 0?i:t.get(n,r,a,"readwrite")},logError:t.logError,shouldInline:t.shouldInline},this.$7=i}var t=e.prototype;return t.flush=function(){for(var e of this.$2){var t=e[0],n=e[1],r=o("ReStoreUtils").getOrCreate(this.$1,t,function(){return new Map});for(var a of n){var i=a[0],l=a[1];r.set(i,l)}}this.$6=!0},t.table=function(t){return new R(o("ReStoreUtils").getOrCreate(this.$2,t,function(){return new Map}),t,this.$3,this.$5,"readwrite",this.$7)},e})(),E=(function(){function e(e,t,n,o){var a=this;this.$1=new Map,this.$2=!1,this.$7=function(){if(a.$2)throw r("FBLogger")("messenger_web").mustfixThrow("Transaction has closed: %s",a.$5)},this.$3=e,this.$4=t,this.types=e.types,this.$5=n,this.$6=o}var t=e.prototype;return t.close=function(){this.$2=!0},t.flush=async function(t){t===void 0&&(t={upgrade:!1}),await this.$3.flush(this.$1,t),this.$2=!0},t.tablePermitsSynchronousIO=function(t){var e,n,r;return(e=(n=(r=this.$3).permitsSynchronousIO)==null?void 0:n.call(r,t))!=null?e:!1},t.table=function(t){return new R(o("ReStoreUtils").getOrCreate(this.$1,t,function(){return new Map}),t,this.$7,this.$3,this.$4,this.$6)},t.createNested=function(t){return new L(this.$1,this.$3,this.$7,t,this.$6)},e})();function k(e){function t(t,n,a){r("promiseDone")((async function(){await e.runExclusively(function(){return Promise.resolve([async function(){var r=new E(e,"readwrite",void 0,function(){});await o("ReStoreCommonUtils").gen(r.table(a).indexDelete(new WeakMap,t,n)),await r.flush()},"readwrite"])},"fixBrokenIndex")})())}return{clearCache:e.clearCache,close:e.close,createTransaction:function(r,o){return new E(e,r,o,t)},isClosed:e.isClosed||function(){return!1},isPersistenceSupported:e.isPersistenceSupported,logError:e.logError,runExclusively:e.runExclusively}}l.sentinelDeleted=c,l.isDeletedValue=v,l.ReStoreDbStoreTable=R,l.ReStoreDbStoreTransaction=E,l.createDbStore=k}),98);
__d("EBDBEbsmApi",["$InternalEnum","EBDB","FBLogger","I64","QPLUserFlow","ReStorePersistence","getErrorSafe","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],u=n("$InternalEnum").Mirrored(["Success","EmptyDb"]);function c(t){var n={};for(var r of Object.keys(t)){var a=t[r];typeof a=="bigint"?n[r]=(e||(e=o("I64"))).of_string(String(a)):n[r]=a}return n}async function d(t){var n=await o("EBDB").getEBDB(),r=Array.from(t.keys());await n.runInTransaction(r,"readwrite",async function(n){var r=[],a=async function(){var t=l[0];i=l[1];var a=i.toAdd,s=i.toDelete,u=o("EBDB").schema==null?void 0:o("EBDB").schema[t];r.push(n.stores[t].bulkDelete(s.map(function(t){var n=typeof t=="object"?t==null?void 0:t[u.primaryKey]:null;if(n!=null)return(e||(e=o("I64"))).isI64(n)?BigInt((e||(e=o("I64"))).to_string(n)):n}).filter(function(e){return!!e})),n.stores[t].bulkPut(a.filter(function(e){return typeof e=="object"&&(e==null?void 0:e[u.primaryKey])!=null}).map(function(t){var n={};for(var r of Object.keys(t)){var a=t[r];(e||(e=o("I64"))).isI64(a)?n[r]=BigInt((e||(e=o("I64"))).to_string(a)):n[r]=a}return n})))},i;for(var l of t)await a();await Promise.all(r)},"EBDB - flush EBSM state",i.id+":79")}async function m(e){for(var t=await e.next();t.done===!1;)t=await e.next();return t.value}async function p(e,t,n){var r=e(t),a=new(o("ReStorePersistence")).ReStoreDbStoreTable(r,t,function(){},{get:function(){},logError:function(){},shouldInline:function(){return!1}},"readwrite",function(){});for(var i of n){var l=c(i),s=l[o("EBDB").schema[t].primaryKey];await m(a.tableSet(new WeakMap,[s],l))}}async function _(e){r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_LOAD_DATA_FROM_EBDB");var t=await o("EBDB").getEBDB(),n=!0,a=new Map;if(await t.runInTransaction(s,"readonly",function(e){return Promise.all(s.map(async function(t){var r=await e.stores[t].readAll();n=n&&r.length===0,a.set(t,r)}))},"EBDB - fetch for rehydration EBSM",i.id+":186"),r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_LOAD_DATA_FROM_EBDB_DONE"),n)return u.EmptyDb;var l;try{await Promise.all(Array.from(a).map(async function(t){var n=t[0],o=t[1];try{await p(e,n,o),r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_DONE_ON_"+n.toUpperCase())}catch(e){throw l=n,r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED_ON_"+n.toUpperCase()),e}}))}catch(t){var c=r("getErrorSafe")(t);r("FBLogger")("wmi_eb").catching(c).mustfix("rehydrateEBSMFromEBDB: Invalid data to build BTree: %s",l),o("EBDB").clearEbStores();for(var d of s){var m=e(d);m.clear()}return u.EmptyDb}return u.Success}function f(e){return function(t,n){return e.runInTransaction(async function(e){var n=[];for(var r of t){var a=r[0],i=r[1],l=i.toAdd,s=i.toDelete,u=o("EBDB").schema==null?void 0:o("EBDB").schema[a];for(var c of s){var d=typeof c=="object"?c==null?void 0:c[u.primaryKey]:null;d!=null&&n.push(e[a].delete(d))}for(var m of l)typeof m=="object"&&(m==null?void 0:m[u.primaryKey])!=null&&n.push(e[a].put(m))}await Promise.all(n)},"readwrite",void 0,{source:n,type:"user_initiated"},i.id+":254")}}l.EB_STORES=s,l.RehydrationResult=u,l.flushEBSMtoEBDB=d,l.rehydrateEBSMFromEBDB=_,l.updateEBSM=f}),98);
__d("EBDBMetricsConsistencyOperationEnum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Upload:0});i.EBConsistencyOperation=e}),66);
__d("EBMinosCheckWasmFeatureSupport",["qex","wasm-feature-detect"],(function(t,n,r,o,a,i,l){"use strict";async function e(){var e=await o("wasm-feature-detect").bulkMemory(),t=await o("wasm-feature-detect").bigInt(),n=await o("wasm-feature-detect").referenceTypes();return e&&t&&n}async function s(){var t=await e();if(!t)return!1;var n=r("qex")._("208")===!0;return n}l.checkWasmFeatureSupport=e,l.checkWasFeatureSupportAndQE=s}),98);
__d("EBReadyNotifier",["WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAResolvable")).Resolvable;function s(){e.resolve()}function u(){e.resolveWasCalled()&&(e=new(o("WAResolvable")).Resolvable)}function c(){return e.promise}l.markEBReady=s,l.resetEBReady=u,l.waitForEBReady=c}),98);
__d("EBReenrollmentTriggerHandler",["EBLogger","LSIntEnum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("EBLogger").EBLogger().tags(["DefaultEBReenrollmentTriggerHandler"]),u=(function(){function t(){}var n=t.prototype;return n.handle=function(n){s.debug("Running default reenrollment trigger handler for reason: "+(e||(e=o("LSIntEnum"))).toNumber(n.deviceReenrollmentReason));for(var t of r("MWEncryptedBackupsLocalStorageEntryEnum").members())s.debug("Clearing local storage key: "+t),t!==r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE&&o("MWEBUseLocalStorage").mwEBDeleteLocalStorageEntry(t)},t})();l.DefaultEBReenrollmentTriggerHandler=u}),98);
__d("EBReenrollmentTriggerListener",["EBReenrollmentTriggerHandler","LSIntEnum","MWEBODSCategory","MWEBODSEntityName.enum","ODS","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){this.$1=new Map,this.$4=new(o("EBReenrollmentTriggerHandler")).DefaultEBReenrollmentTriggerHandler,this.$2=e,this.$5()}var n=t.prototype;return n.$5=function(){var t=this;return this.$3==null&&(this.$3=o("ReQL").fromTableAscending(this.$2.tables.encrypted_backups_reenrollment_trigger).take(1).subscribe(function(n,a){if(a.operation==="add"||a.operation==="put"){(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_COUNTERS,"reenrollment_trigger");var l=t.getDefaultHandler();if(a.value.deviceReenrollmentReason!=null){var u;l=(u=t.$1.get((s||(s=o("LSIntEnum"))).unwrapIntEnum(a.value.deviceReenrollmentReason)))!=null?u:l}l.handle(a.value),r("promiseDone")(t.$2.runInTransaction(function(e){return e.encrypted_backups_reenrollment_trigger.delete(a.value.pk)},"readwrite",void 0,void 0,i.id+":77"))}})),this.$3},n.attachHandler=function(t,n){this.$1.set(t,n)},n.getDefaultHandler=function(){return this.$4},t})(),c;function d(e){return c!=null||(c=new u(e)),c}function m(e){return c==null&&d(e),c}l.initEBReenrollmentTriggerListener=d,l.getEBReenrollmentTriggerListener_TESTING_ONLY=m}),98);
__d("Hmac_v2",["CryptoLogger","LSResult","PakeCpaceUtils","Promise","WACryptoSha256HmacBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){try{var t=new(o("WACryptoSha256HmacBuilder")).Sha256HMacBuilder(new Uint8Array(a)).update(new Uint8Array(i)).finish();return(e||(e=n("Promise"))).resolve(r("LSResult")(o("PakeCpaceUtils").typedArrayToBuffer(t)))}catch(e){throw o("CryptoLogger").captureError(o("CryptoLogger").CryptoLogger("hmac_v2"),e).mustfix("Crypto signing failed: data length: %s, was_timeout: %s",i==null?void 0:i.byteLength,!1),e}};l.default=s}),98);
__d("IntervalList",["FBLogger","JSONStringifyBigIntSafe","ReQLBounds","ReStoreKeyComparer"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("must not be null");return e}function c(t,n){var a=new Map,i=new Map,l=new Map;function c(e,n){return n==null?!0:(n.gt!==void 0?t(e,n.gt)>0:n.gte!==void 0?t(e,n.gte)>=0:!0)&&(n.lt!==void 0?t(e,n.lt)<0:n.lte!==void 0?t(e,n.lte)<=0:!0)}function*d(t){for(var l=0;l<t.length&&i.size;){l++;var s=t.slice(0,l);l<n&&s.push((e||(e=o("ReStoreKeyComparer"))).MAX_KEY);var u=i.get(r("JSONStringifyBigIntSafe")(s));if(u!=null)for(var d of u)yield d}for(var m of a.entries()){var p=m[0],_=m[1];a.has(p)&&c(t,_)&&(yield p)}}function m(e){var t=l.get(e);if(t!=null){l.delete(e);var n=u(i.get(t));n.delete(e),n.size===0&&i.delete(t)}else a.delete(e)}function p(e,t){var u;if(e&&e.gte!=null&&e.lte!=null&&(u=r("JSONStringifyBigIntSafe")((s||(s=o("ReQLBounds"))).nextKey(e.gte,n)))===r("JSONStringifyBigIntSafe")(e.lte)){var c=i.get(u);c==null&&(c=new Set,i.set(u,c)),c.add(t),l.set(t,u)}else a.set(t,e)}return{delete:m,findIntersecting:d,set:p}}l.default=c}),98);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","getErrorSafe","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=n("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),d=o("MessengerLogHistory").getInstance("client_init"),m=r("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",p={c:{},d:r("MqttWebDeviceID").clientID,s:c.NOT_SYNCING,u:r("pageID")};function _(e){function t(e){o("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(e),window.location.hostname)}var n=r("Cookie").get(m);if(n==null){var a;t((a={},a[o("CurrentMessengerUser").getIDorEIMU()]=e,a));return}var i=JSON.parse(n);if(i.u==null){var l;t(babelHelpers.extends({},i,(l={},l[o("CurrentMessengerUser").getIDorEIMU()]=e,l)))}else{var s;t((s={},s[o("CurrentMessengerUser").getIDorEIMU()]=e,s))}}function f(){r("Cookie").clear(m)}function g(e){if(typeof e!="object"||e==null)return null;var t=e.c,n=e.d,r=e.s,o=e.u,a=typeof r=="string"?c.cast(r):null,i=typeof t=="object"&&t!=null?Object.entries(t).reduce(function(e,t){var n=t[0],r=t[1];return e==null||typeof r!="string"?null:(e[n]=r,e)},{}):null;return typeof n!="string"||a==null||i==null||typeof o!="string"?null:{c:i,d:n,s:a,u:o}}function h(){var e,t=r("Cookie").get(m);if(r("isStringNullOrEmpty")(t))return p;var n=JSON.parse(t),a=o("CurrentMessengerUser").getIDorEIMU(),i=g(n),l=typeof n=="object"&&n!=null?g(n[a]):null;return(e=l!=null?l:i)!=null?e:p}function y(e){var t=h();if(t.u===r("pageID")){var n={};e.forEach(function(e){var t=e[0],r=e[1],a=r.currentCursor,i=r.groupId;a!=null&&(n[(s||(s=o("I64"))).to_string(i)]=a)}),d.debug("Updated sync cookie to set syncing=false, saving latest cursors"),_(babelHelpers.extends({},t,{c:n,s:c.NOT_SYNCING}))}}var C=[1,2,o("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function b(t){var n=o("SortedAsyncIterable").toArray(o("ReQL").union.apply(void 0,C.map(function(e){return e==null?o("ReQL").empty():o("ReQL").fromTableAscending(t.tables.sync_groups).getKeyRange((u||(u=o("LSIntEnum"))).ofNumber(e))})));if((e||(e=r("isPromise")))(n)){r("promiseDone")(n.then(function(e){y(e)}));return}y(n)}function v(){try{var e=h();d.debug("Updated sync cookie to set syncing=true"),_(babelHelpers.extends({},e,{s:c.SYNCING,u:r("pageID")}))}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("[LS] Failed to sync cookie")}}l.Status=c,l.DEFAULT_COOKIE=p,l.clear=f,l.get=h,l.syncBeforeUnload=b,l.setSyncing=v}),98);
__d("LSDatabase",[],(function(t,n,r,o,a,i){}),null);
__d("LSDatabaseProviderType",[],(function(t,n,r,o,a,i){"use strict";function e(e){return l(e.persistenceTypes)}function l(e){return e.includes("indexeddb")}i.isProviderPersisted=e,i.hasPersistentType=l}),66);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6542"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:6542")}),98);
__d("LSEagerlyLoadOnMessenger",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.eagerlyLoadOnMessenger=e}),66);
__d("LSDatascriptEvaluatorMaybeEagerly",["LSEagerlyLoadOnMessenger","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorMaybeEagerly");function s(){return o("LSEagerlyLoadOnMessenger").eagerlyLoadOnMessenger(e).load()}l.default=s}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:1232")!=null&&n("cr:1232").shutdownAndClear()}function s(e,t,o,a,i,l){return function(s){return n("cr:1232")!=null?n("cr:1232").getInstance(s,e,t,o,a,i,l):r("FBMqttChannel")}}l.shutdownAndClear=e,l.getInstance=s}),98);
__d("LSSyncGroupsUtils",["CurrentLocale","LSIntEnum","LSMailboxInitialSyncCursor"],(function(t,n,r,o,a,i,l){"use strict";var e,s={locale:r("CurrentLocale").get()},u={canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:(e||(e=o("LSIntEnum"))).ofNumber(0),initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:e.ofNumber(0),minTimeToSyncTimestampMs:e.ofNumber(-1),priority:e.ofNumber(0),regionHint:void 0,sendSyncParams:!0,syncChannel:o("LSMailboxInitialSyncCursor").syncChannel,syncParams:JSON.stringify(s),syncStatus:e.ofNumber(0)},c={epochId:void 0,failureCount:e.ofNumber(0),lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:e.ofNumber(0),lastSyncRequestTimestampMs:e.ofNumber(0),networkTaskIdentifier:void 0,syncDatabaseId:e.ofNumber(0),taskQueueName:""},d=e.ofNumber(9999999999999);l.defaultSyncParams=s,l.defaultSyncGroup=u,l.defaultNetworkRequest=c,l.neverSyncTimestamp=d}),98);
__d("LSVoprfWasmPrewarmDeferred",["WAWasmModuleCache","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LSVoprfWasm").__setRef("LSVoprfWasmPrewarmDeferred");async function s(){var t=await e.load(),n=t.locateFile;await o("WAWasmModuleCache").loadWasmModule(n())}l.prewarmAcsVoprfWasmModule=s}),98);
__d("seedUserInfo",["CurrentMessengerUser","I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t){var n=o("CurrentMessengerUser").getPageMessagingMailboxId(),r=n==="0"?o("CurrentMessengerUser").getIDorEIMU():n;await t._user_info.put({facebookUserId:(e||(e=o("I64"))).of_string(r),id:(s||(s=o("LSIntEnum"))).ofNumber(1)})}l.default=u}),98);
__d("LSDefaultSyncGroups",["CurrentEnvironment","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","LSMailboxInitialSyncCursor","LSPlatformLsInitLog","LSSyncGroupsUtils","LSVoprfWasmPrewarmDeferred","MNetRankType","ReQL","gkx","promiseDone","seedUserInfo"],(function(t,n,r,o,a,i,l){"use strict";var e=["groupId"],s,u,c=new Set;o("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()&&c.add(95);var d=o("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroup(),m=[{groupId:1,lastSyncRequestTimestampMs:o("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:o("LSMailboxInitialSyncCursor").syncChannel,syncParams:o("LSMailboxInitialSyncCursor").syncParams},{groupId:2,lastSyncRequestTimestampMs:o("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:o("LSMailboxInitialSyncCursor").syncChannel},{groupId:16,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},r("gkx")("4246")?null:{groupId:28,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel,syncParams:JSON.stringify(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultSyncParams,{size_type:"wide"}))},{groupId:118,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:198},{groupId:89},{groupId:197}],p=[].concat(m,[{groupId:7,syncParams:JSON.stringify({mnet_rank_types:[r("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE]})},o("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroupForIGDSyncGroup()]),_=[].concat(m,[{groupId:7,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncParams:JSON.stringify({mnet_rank_types:[r("MNetRankType").MESSENGER_USER_SEARCH,r("gkx")("17703")?r("MNetRankType").MESSENGER_SEARCH_NULL_STATE_UNBLENDED:r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE,r("MNetRankType").INBOX_ACTIVE_NOW,r("MNetRankType").MESSENGER_OMNIPICKER_NULLSTATE,r("MNetRankType").MESSENGER_BROADCAST_FLOW_TOP_THREADS,r("MNetRankType").BROADCAST_FLOW_TOP_CONTACTS]})},{groupId:15,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:12,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:26},{groupId:196},d,r("gkx")("24113")?{groupId:120,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel}:null,r("gkx")("26390")?{groupId:6,minTimeToSyncTimestampMs:o("LSSyncGroupsUtils").neverSyncTimestamp}:null,{groupId:145,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},r("gkx")("5985")?{groupId:202}:null]).concat(r("gkx")("22843")?[{groupId:104,syncChannel:o("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:143},{groupId:140},{groupId:141}]:[]);async function f(e,t){var n=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.network_requests).getKeyRange("")),r=n.map(function(e){var t=e.syncDatabaseId;return(s||(s=o("LSIntEnum"))).toNumber(t)});return Promise.all(t.map(async function(t){t!=null&&(!r.includes(t.groupId)||c.has(t.groupId))&&await e.network_requests.put(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultNetworkRequest,{syncDatabaseId:(s||(s=o("LSIntEnum"))).ofNumber(t.groupId)}))}))}async function g(e){var t=await o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.sync_groups));return new Map(t.map(function(e){return[(s||(s=o("LSIntEnum"))).toNumber(e.groupId),e]}))}async function h(t,n){var r=await g(t);async function a(n){var a=n.groupId,i=babelHelpers.objectWithoutPropertiesLoose(n,e),l=r.get(a);l==null||c.has(a)?await t.sync_groups.put(babelHelpers.extends({},o("LSSyncGroupsUtils").defaultSyncGroup,i,{groupId:(s||(s=o("LSIntEnum"))).ofNumber(a)})):l!=null&&(l.syncParams!==i.syncParams||i.syncChannel!=null&&!(u||(u=o("I64"))).equal(l.syncChannel,i.syncChannel))&&await t.sync_groups.put(babelHelpers.extends({},l,{syncChannel:i.syncChannel!=null?i.syncChannel:l.syncChannel,syncParams:i.syncParams}))}await Promise.all(n.map(function(e){return e&&a(e)}))}function y(e){return e!=null?e:r("CurrentEnvironment").instagramdotcom?p:_}async function C(e,t){var n=y(t);o("LSPlatformLsInitLog").addPoint("db_seed_start"),await r("seedUserInfo")(e),await f(e,n),await h(e,n),r("promiseDone")(o("LSVoprfWasmPrewarmDeferred").prewarmAcsVoprfWasmModule()),o("LSPlatformLsInitLog").addPoint("db_seed_end")}l.e2eeMetadataSyncGroup=d,l.igdSyncGroups=p,l.defaultSyncGroups=_,l.seedDb=C}),98);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),r[1]=t.i64.of_float(Date.now()),r[2]="",r[3]=void 0,r[4]=void 0,r[5]=void 0,e[0]?t.resolve(0):(r[15]=void 0,t.i64.neq(r[15],void 0)?t.sequence([function(e){return t.count(t.db.table(169).fetch([[[r[15]]]])).then(function(e){return r[16]=e})},function(e){return t.i64.le(r[16],t.i64.cast([0,1]))?t.sequence([function(e){return t.db.table(169).fetch([[[r[15]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[26]=new t.Map,r[26].set("error_msg","Expected a nonempty query result"),r[26].set("code",t.i64.cast([0,3])),r[26].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[27]=t.createArray(),r[28]=(r[27].push(r[26]),r[27]),o=[void 0,r[27]],r[22]=o[0],r[23]=o[1]):(n=l.item,r[26]=new t.Map,r[26].set("epoch_id",n.epochId),r[26].set("backup_id",n.backupId),r[26].set("epoch_anon_id_blob",n.epochAnonIdBlob),r[26].set("epoch_root_key_blob",n.epochRootKeyBlob),r[26].set("epoch_status",n.epochStatus),r[26].set("epoch_head",n.epochHead),r[26].set("authority_level",n.authorityLevel),a=[r[26],void 0],r[22]=a[0],r[23]=a[1])})},function(e){return r[25]=new t.Map,r[25].set("value",r[22]),r[25].set("errors",r[23]),r[17]=r[25]}]):t.resolve((r[22]=new t.Map,r[22].set("error_msg","Expected at most one result"),r[22].set("code",t.i64.cast([0,4])),r[22].set("src_line","MEBEpochClientUtils.php:313 MEBEpochClientUtils::requireEpochReturnShapeFromPersistentEpochsTableDirectly()"),r[23]=t.createArray(),r[25]=(r[23].push(r[22]),r[23]),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[23]),r[17]=r[24]))},function(e){return r[18]=r[17].get("value"),r[18]!==void 0?(r[22]=r[18].get("epoch_id"),r[23]=r[18].get("backup_id"),r[24]=r[18].get("epoch_anon_id_blob"),r[25]=r[18].get("epoch_root_key_blob"),r[26]=r[18].get("epoch_status"),r[27]=r[18].get("epoch_head"),r[28]=r[18].get("authority_level"),r[29]=r[17],r[19]=r[29]):(r[22]=r[17].get("errors"),r[23]=r[17].get("errors"),r[24]=new t.Map,r[24].set("value",void 0),r[24].set("errors",r[22]),r[19]=r[24]),r[20]=r[19].get("value"),r[20]!==void 0?(r[22]=r[20].get("epoch_id"),r[23]=r[20].get("backup_id"),r[24]=r[20].get("epoch_anon_id_blob"),r[25]=r[20].get("epoch_root_key_blob"),r[26]=r[20].get("epoch_status"),r[27]=r[20].get("epoch_head"),r[28]=r[20].get("authority_level"),r[2]=t.blobs.to_string(r[24]),r[3]=r[22],r[4]=r[25],t.blobs.neq(r[27],void 0)&&(r[5]=r[27]),r[21]=!0):(r[22]=r[19].get("errors"),r[23]=r[19].get("errors"),r[21]=!1)}]):t.resolve())},function(n){return t.i64.neq(r[3],void 0)?t.resolve(0):t.sequence([function(n){return r[15]=void 0,r[16]="",r[17]=void 0,r[18]=void 0,t.forEach(t.filter(t.db.table(169).fetch(),function(n){return e[0]||t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}),function(e){var n=e.item;return r[20]=t.blobs.to_string(n.epochAnonIdBlob),t.i64.eq([0,r[20].length],[0,r[16].length])?r[19]=r[20]>r[16]:r[19]=t.i64.gt([0,r[20].length],[0,r[16].length]),r[19]?(r[15]=n.epochId,r[16]=r[20],r[17]=n.epochRootKeyBlob,r[18]=n.epochHead):0})},function(e){return t.i64.neq(r[15],void 0)&&(r[2]=r[16],r[3]=r[15],r[4]=r[17],t.blobs.neq(r[18],void 0)&&(r[5]=r[18]),r[19]=t.i64.of_float(Date.now())),0}])},function(e){var o,a,i,l,s,u;return r[11]=t.blobs.of_string(r[2]),t.i64.neq(r[3],void 0)?(t.blobs.neq(r[11],void 0)?(t.blobs.neq(r[4],void 0)?(r[19]=new t.Map,r[19].set("epoch_id",r[3]),r[19].set("epoch_root_key",r[4]),r[19].set("epoch_anon_id",r[11]),r[19].set("epoch_head",r[5]),r[20]=new t.Map,r[20].set("epoch_keys",r[19]),o=[r[20],void 0],r[17]=o[0],r[18]=o[1]):(r[19]=new t.Map,r[19].set("error_code",t.i64.cast([0,402])),r[19].set("error_message","failed to query latest epoch"),r[19].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,r[19]],r[17]=a[0],r[18]=a[1]),i=[r[17],r[18]],r[15]=i[0],r[16]=i[1]):(r[17]=new t.Map,r[17].set("error_code",t.i64.cast([0,403])),r[17].set("error_message","failed to query latest epoch"),r[17].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),l=[void 0,r[17]],r[15]=l[0],r[16]=l[1]),s=[r[15],r[16]],r[6]=s[0],r[7]=s[1]):(r[15]=new t.Map,r[15].set("error_code",t.i64.cast([0,400])),r[15].set("error_message","failed to query latest epoch"),r[15].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),u=[void 0,r[15]],r[6]=u[0],r[7]=u[1]),r[8]=t.i64.of_float(Date.now()),r[9]=t.i64.random(),r[12]="Finishing execution. Execution time: ",r[13]=t.i64.to_string(t.i64.sub(r[8],r[0])),r[14]=" ms",r[10]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][getLatestEpochKeys] ",r[10],r[12],r[10],r[13],r[10],r[14]].join("")),t.i64.eq(t.i64.mod_(r[9],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[15]=",",r[16]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[r[12],r[15],r[13],r[15],r[14]].join(""),r[16],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[6],r[7]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsGetLatestEpochKeysStoredProcedure",e.__tables__=["secure_encrypted_backups_epochs"],a.exports=e}),null);
__d("LSHmac_v2.nop",["Hmac_v2"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a){return r("Hmac_v2")(o,a)};e.__nop_name__="LSHmac_v2",l.default=e}),98);
__d("LSTransactionLogger",["cr:8879"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8879")}),98);
__d("LSReStoreQplLogger",["LSTransactionLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{startTracking:function(n,o){var t=r("LSTransactionLogger")==null?void 0:r("LSTransactionLogger").startTracking(n,e,o);return{addAnnotations:function(o){r("LSTransactionLogger")==null||r("LSTransactionLogger").addAnnotations(e,t,o)},end:function(){r("LSTransactionLogger")==null||r("LSTransactionLogger").end(e,t)},fail:function(o){r("LSTransactionLogger")==null||r("LSTransactionLogger").fail(e,t,o)},mark:function(o){r("LSTransactionLogger")==null||r("LSTransactionLogger").mark(e,t,o)},recordLogicalWrite:function(){r("LSTransactionLogger")==null||r("LSTransactionLogger").recordLogicalWrite(t)}}}}}l.createQplLogger=e}),98);
__d("createReStoreEphemeralPersistence",["FBLogger","ReStorePersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function s(t,n){var a=Promise.resolve(),i=new Map;function l(t){return e(i,t,function(){return new Map})}return{flush:function(t){return t.forEach(function(e,t){var n=l(t);e.forEach(function(e,t){o("ReStorePersistence").isDeletedValue(e)?n.delete(t):n.set(t,e)})}),Promise.resolve()},get:function(t,n,r){var e=l(n);return e.get(r)},logError:function(t,n,o,a){if(o==="dbCorruption"){var e,i;throw r("FBLogger")("messenger_web").mustfixThrow("Got unexpected undefined in edb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",n,t,(e=a==null?void 0:a.id)!=null?e:"",(i=a==null?void 0:a.deletedInThisTxn)!=null?i:"")}},permitsSynchronousIO:function(t){return!0},queueCommitWork:void 0,runExclusively:function(t){var e=n==null?void 0:n.startTracking(!1);return e==null||e.addAnnotations({string:{source:"createReStoreEphemeralPersistence",type:"runExclusivelyPromiseChain"}}),new Promise(function(n,r){a=a.then(async function(){var o=await t(),a=o[0],i=o[1];try{n(await a()),e==null||e.end()}catch(t){r(t),e==null||e.fail()}}).catch(function(e){r(e)})})},shouldApplySync:function(){return!1},shouldInline:function(t,n){return!0},shouldSync:function(){return!1},types:["ephemeral"],uniqueId:t}}l.default=s}),98);
__d("createLSReStoreEphemeralPersistence",["LSReStoreQplLogger","MAWCurrentUser","createReStoreEphemeralPersistence","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return r("createReStoreEphemeralPersistence")("LSEphemeral "+e,o("LSReStoreQplLogger").createQplLogger(r("qpl")._(25303045,"817")))}l.createLSReStoreEphemeralPersistence=e}),98);
__d("QPLMemoryUtils",["MemoryUtils","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeStart:n}})}function s(e){var t=o("MemoryUtils").getCurrentMemory(),n=t.usedJSHeapSize;r("QPLUserFlow").addAnnotations(e,{int:{usedJSHeapSizeEnd:n}})}l.logMemoryForQPLStart=e,l.logMemoryForQPLEnd=s}),98);
__d("createReStoreEBSMTablesPersistence",["CurrentMessengerUser","EBLogger","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","QPLMemoryUtils","QPLUserFlow","Random","ReStorePersistence","ReStoreTabNotifier","WebSession","getErrorSafe","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("CurrentMessengerUser").getIDorEIMU(),d=r("ReStoreTabNotifier")==null?void 0:r("ReStoreTabNotifier")("mwChat-"+c),m=null,p=!1,_=!1,f=o("EBLogger").EBLogger().tags(["EBSM","Pesistence","MainThread"]);function g(e,t,n){return(e.has(t)?e:e.set(t,n())).get(t)}function h(t){var n=Promise.resolve(),a="flushChangesV2",i=new Map;function l(e){return g(i,e,function(){return new Map})}var c=o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();r("QPLUserFlow").start(r("qpl")._(521481876,"1407"),{annotations:{string:{ebSessionIdentifier:c,sessionTabId:o("WebSession").getId()}}}),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").START),o("QPLMemoryUtils").logMemoryForQPLStart(r("qpl")._(521481876,"1407"));async function h(){try{await t.rehydrateEBSMFromEBDB(l),o("QPLMemoryUtils").logMemoryForQPLEnd(r("qpl")._(521481876,"1407")),r("QPLUserFlow").endSuccess(r("qpl")._(521481876,"1407")),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").SUCCESS)}catch(t){r("QPLUserFlow").addPoint(r("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED");var n=r("getErrorSafe")(t);f.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["An error occured in EBSM hydration when loading EB data: ",""])),n.message),r("QPLUserFlow").endFailure(r("qpl")._(521481876,"1407"),"Hydration failed."),(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,r("MWEBODSEntityKey.enum").FAIL)}}return m=h(),d==null||d.onEventReceive("flushChangesV2",function(e){var n=e.changeSet,i=new Map;if(n.forEach(function(e,t){i.set(t,{toAdd:[],toDelete:[]});var n=l(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=i.get(t))==null||a.toDelete.push(n.get(r))}else{var l;(l=i.get(t))==null||l.toAdd.push(e)}})}),t.updateEBSM==null){f.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ebdbEbsmApi.updateEBSM is not defined"])));return}r("promiseDone")(t.updateEBSM(i,a))}),{flush:async function(n,i){var e,s;if(n.size!==0&&(n.size>0&&n.forEach(function(e,t){e.size===0&&n.delete(t)}),n.size!==0)){var u=((e=i.actionSource)==null?void 0:e.type)==="user_initiated"&&((s=i.actionSource)==null?void 0:s.source)===a;if(u){n.forEach(function(e,t){var n=l(t);e.forEach(function(e,t){o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)?n.delete(t):n.set(t,e)})});return}var c=new Map;n.forEach(function(e,t){c.set(t,{toAdd:[],toDelete:[]});var n=l(t);e.forEach(function(e,r){if(o("ReStorePersistence").isDeletedValue(e,o("ReStorePersistence").sentinelDeleted)){var a;(a=c.get(t))==null||a.toDelete.push(n.get(r)),n.delete(r)}else{var i;(i=c.get(t))==null||i.toAdd.push(e),n.set(r,e)}})}),d==null||d.postMessage("flushChangesV2",{changeSet:n,fromVersion:"",sentinelDeleted:o("ReStorePersistence").sentinelDeleted,version:""});var p=o("Random").uint32(),_=Array.from(n.keys());r("QPLUserFlow").start(r("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0},string_array:{tables:_}},instanceKey:p}),await m,await t.flushEBSMtoEBDB(c).catch(function(){})}},get:function(t,n,r){var e=l(n);return p?e.get(r):m==null?Promise.reject("rehydration is not complete"):m.then(function(){return p=!0,e.get(r)})},logError:function(n,a,i,l){if((u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR,n),i==="dbCorruption"){var e,s;(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,n);var c="Got unexpected undefined in ebsm, mode: "+a+", table: "+n+", id: "+((e=l==null?void 0:l.id)!=null?e:"")+", deletedInThisTxn: "+((s=l==null?void 0:l.deletedInThisTxn)!=null?s:"")+". Deleting EBSM db";f.mustfix(c);var d=o("Random").uint32();o("MAWUnrecoverableDbErrors").setError(new(o("MAWUnrecoverableDbErrors")).EbsmHydrationError(c,!0,d,n),function(){r("promiseDone")(t.clearEbStores(),function(){(u||(u=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),r("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,"db_deleted.main_thread")})}),_||(_=!0,o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,"full"))}},queueCommitWork:void 0,runExclusively:function(t){return new Promise(function(e,r){n=n.then(async function(){var n=await t(),o=n[0],a=n[1];try{e(await o())}catch(e){r(e)}})})},shouldApplySync:function(){return!1},shouldInline:function(t,n){return!1},shouldSync:function(t,n){return t!=="notifyInMemoryTable"},tabTablesNotifier:function(){return d},types:["ephemeral"],uniqueId:""}}l.default=h}),98);
__d("createReStoreTableNameAllowListPersistence",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r;return{clearCache:function(){e.clearCache==null||e.clearCache(),t.clearCache==null||t.clearCache()},close:function(){e.close==null||e.close(),t.close==null||t.close()},flush:async function(o,a){var r=new Map,i=new Map;o.forEach(function(e,t){n.has(t)?i.set(t,e):r.set(t,e)}),await Promise.all([e.flush(r,a),t.flush(i,a)])},get:function(o,a,i,l){return n.has(a)?t.get(o,a,i,l):e.get(o,a,i,l)},isClosed:function(){return(e.isClosed==null?void 0:e.isClosed())||!1},isPersistenceSupported:e.isPersistenceSupported,logError:function(o,a,i,l){n.has(o)?t.logError==null||t.logError(o,a,i,l):e.logError==null||e.logError(o,a,i,l)},permitsSynchronousIO:function(o){if(n.has(o)){var r;return(r=t.permitsSynchronousIO==null?void 0:t.permitsSynchronousIO(o))!=null?r:!1}else{var a;return(a=e.permitsSynchronousIO==null?void 0:e.permitsSynchronousIO(o))!=null?a:!1}},runExclusively:function(r,o){return e.runExclusively(function(){return new Promise(function(e,n){var a=t.runExclusively(async function(){var t=await r(),n=t[0],o=t[1],i=new Promise(function(t){e([function(){return t(),a},o])});return[async function(){return await i,n()},o]},o);a.catch(n)})},o)},shouldApplySync:function(o,a){return n.has(a)?t.shouldApplySync(o,a):e.shouldApplySync(o,a)},shouldInline:function(o,a){return n.has(o)?t.shouldInline(o,a):e.shouldInline(o,a)},shouldSync:function(o,a){return n.has(a)?t.shouldSync(o,a):e.shouldSync(o,a)},tabTablesNotifier:(r=e.tabTablesNotifier)!=null?r:t.tabTablesNotifier,types:[].concat(e.types,t.types),uniqueId:t.uniqueId+e.uniqueId}}i.default=e}),66);
__d("LSJSEBInMemoryStorage",["EBSMProperties","createLSReStoreEphemeralPersistence","createReStoreEBSMTablesPersistence","createReStoreTableNameAllowListPersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("createReStoreTableNameAllowListPersistence")(o("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),r("createReStoreEBSMTablesPersistence")(e),r("EBSMProperties").persistedTables);return t}l.makeReStorePersistence=e}),98);
__d("ReStoreCustomMigration",["ReStoreMigrateUtil","ReStorePersistedMetadata"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n,r=t.storeTx,a=t.transaction;if(e==null)return o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED;var i=new(o("ReStorePersistedMetadata")).ReStorePersistedCustomMigrationVersion,l=(n=await i.read(r))==null?void 0:n.customMigrationVersion;return e.targetVersion===l?o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED:(await e.migration(l!=null?l:0,a),i.write(r,{customMigrationVersion:e.targetVersion}),o("ReStoreMigrateUtil").ReStoreMigrateResult.UPGRADE_COMPLETE)}l.runCustomMigration=e}),98);
__d("ReStoreHooks",["PromiseOrValue"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return{afterAdd:t.reduce(function(t,n){var r=n.onAfterAdd;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),afterEntriesNext:t.reduce(function(e,t){var n=t.onAfterEntriesNext;return n?function(t){return n({tableName:t.tableName,value:e(t)})}:e},function(e){var t=e.value;return t}),afterGet:t.reduce(function(e,t){var n=t.onAfterGet;return n?function(t){return n({tableName:t.tableName,value:e(t)})}:e},function(e){var t=e.value;return t}),afterPut:t.reduce(function(t,n){var r=n.onAfterPut;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),beforeAdd:t.reduce(function(t,n){var r=n.onBeforeAdd;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),beforeDelete:t.reduce(function(t,n){var r=n.onBeforeDelete;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.key;return t}),beforeNotify:t.reduce(function(e,t){var n=t.onBeforeNotify;return n?function(t){var r=e(t),o=r.newValue,a=r.prevValue;return n({newValue:o,prevValue:a,tableName:t.tableName})}:e},function(e){var t=e.newValue,n=e.prevValue;return{newValue:t,prevValue:n}}),beforePut:t.reduce(function(t,n){var r=n.onBeforePut;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t}),beforeUpsert:t.reduce(function(t,n){var r=n.onBeforeUpsert;return r?function(n){return(e||(e=o("PromiseOrValue"))).map(t(n),function(e){return r(babelHelpers.extends({},n,{value:e}))})}:t},function(e){var t=e.value;return t})}}l.createHookManager=s}),98);
__d("ReStoreIndexeddbPersistenceInitFailure",[],(function(t,n,r,o,a,i){"use strict";var e="ReStoreIndexeddbPersistenceInitFailure",l=(function(t){function n(n){var r;return r=t.call(this,n)||this,r.message=n,r.name=e,r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error));i.ERROR_NAME=e,i.ReStoreIndexeddbPersistenceInitFailure=l}),66);
__d("ReStoreTransactionDelay",["setTimeout"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e==="background"?new Promise(function(e){return r("setTimeout")(e,0)}):Promise.resolve();await t}l.default=e}),98);
__d("createReStoreSubscriptionManager",["ExecutionEnvironment","FBLogger","IntervalList","PromiseOrValue","ReStoreKeyComparer","ReStoreUtils","getErrorSafe","isPromise","nullthrows","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(t,n,a){var i=new Map,l=new Map;function d(e,t){return(c||(c=o("ReStoreKeyComparer"))).compareValue(e,t)===0}function m(e,t,n,r){for(var o,a=(o=R.get(e))!=null?o:[],i=[],l=0;l<t.length;l++)for(var s=t[l],u=0;u<32&&s!==0;u++){if(s&1){var c=a[(l<<5)+u];if(!d(n[c],r[c])){var m;i[l]=((m=i[l])!=null?m:0)|1<<u%32}}s=s>>>1}return i}function p(e,t){for(var n=0;n<Math.max(e.length,t.length);n++)if((e[n]&t[n])!==0)return!0;return!1}function _(t,n,o,a){try{var i=t(n,o,a);return(e||(e=r("isPromise")))(i)?i.catch(function(e){r("FBLogger")("messenger_web").catching(e).mustfix("error in ReStore subscription async handler")}):i}catch(e){var l=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(l).mustfix("error in ReStore subscription handlers")}}function f(e,t,n,r,a){var i=Array.from(t(r));if(a.operation==="put"&&a.prevValue!=null){var l=a.prevValue,s=[];for(var c of i){var d=c[0],f=c[1];f!=null&&f.forEach(function(e,t){var n;s[t]=((n=s[t])!=null?n:0)|e})}var g=m(e,s,l,a.value);return(u||(u=o("PromiseOrValue"))).all(i.map(function(e){var t=e[0],o=e[1];if(o==null||p(g,o))return _(t,r,a,n)}))}return Promise.all(i.map(function(e){var t=e[0],o=e[1];return _(t,r,a,n)}))}function g(e){return r("nullthrows")((i.has(e)?i:i.set(e,[r("IntervalList")((c||(c=o("ReStoreKeyComparer"))).compareKey,t.tableNames[e].primaryKeyIds.length),new Map])).get(e))}function h(e,n){var a=g(e),i=a[0],l=a[1];return r("nullthrows")((l.has(n)?l:l.set(n,r("IntervalList")((c||(c=o("ReStoreKeyComparer"))).compareKey,t.tableNames[e].indexes[n].length))).get(n))}function y(e,n,a,i,l,s){var d=function(r,o){return f(n,e.findIntersecting,s,r,o)},m=a==null?void 0:o("ReStoreUtils").searchKey(t.tableNames[n],a,l),p=i==null?void 0:o("ReStoreUtils").searchKey(t.tableNames[n],i,l);if(p==null&&m!=null)return d(m,{operation:"delete",prevValue:r("nullthrows")(a)});if(m==null&&p!=null)return d(p,{operation:"add",value:r("nullthrows")(i)});if(m!=null&&p!=null)return(c||(c=o("ReStoreKeyComparer"))).compareKey(m,p)===0?d(m,{operation:"put",prevValue:r("nullthrows")(a),value:r("nullthrows")(i)}):(u||(u=o("PromiseOrValue"))).map(d(m,{operation:"delete",prevValue:r("nullthrows")(a)}),function(){return d(p,{operation:"add",value:r("nullthrows")(i)})})}function C(e,t,n,r){var a=g(e),i=a[0],l=a[1];return(u||(u=o("PromiseOrValue"))).map(y(i,e,t,n,null,r),function(){return(u||(u=o("PromiseOrValue"))).all(Array.from(l.entries()).map(function(o){var a=o[0],i=o[1];return y(i,e,t,n,a,r)}).filter(function(e){return e!=null}))})}function b(){l.forEach(function(e){return e()})}function v(e,t){function o(){var o=new Map;try{for(var a of e){var i=a[0],l=a[1];n(t,i)&&o.set(i,l)}}catch(e){var s=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(s).mustfix("Couldnot format changes to broadcast")}return Array.from(o)}if((s||(s=r("ExecutionEnvironment"))).isInBrowser&&a!=null){var i=o();if(i.length===0)return;a.postMessage(t,i)}}(s||(s=r("ExecutionEnvironment"))).isInBrowser&&a!=null&&a.onEventReceive("notifyTableV2",function(e){r("promiseDone")((async function(){var t=new WeakMap,n=e.values();await(u||(u=o("PromiseOrValue"))).loop(function(e){if(e.done)return{action:"break",value:void 0};var r=e.value,a=r[0],i=r[1],l=i.values();return(u||(u=o("PromiseOrValue"))).map(u.loop(function(e){if(e.done)return{action:"break",value:void 0};var n=e.value,r=n[0],i=n[1];return(u||(u=o("PromiseOrValue"))).map(C(a,r,i,t),function(){return{action:"continue",value:l.next()}})},l.next()),function(){return{action:"continue",value:n.next()}})},n.next()),b()})())});var S=new Map,R=new Map;function L(e,t){if(t==null)return null;var n=S.get(e);n==null&&(n=new Map,S.set(e,n));var r=[];for(var o of t){var a,i=n.get(o);if(i==null){i=n.size,n.set(o,i);var l=R.get(e);l==null&&(l=[],R.set(e,l)),l.push(o)}var s=i>>5,u=i&31;r[s]=((a=r[s])!=null?a:0)|1<<u}return r}return{dispose:function(){i.clear(),l.clear()},notifyCommit:b,notifyTableAndIndexSubscribers:C,notifyTableV2:v,subscribeIndex:function(t,n,r,o,a){var e=h(t,n),i=!1,l=function(t,n,o){return i?Promise.resolve():_(r,t,n,o)},s=[l,L(t,a)];return e.set(o,s),function(){i=!0,e.delete(s)}},subscribeTable:function(t,n,r,o){var e=g(t),a=e[0],i=!1,l=function(t,r,o){return i?Promise.resolve():_(n,t,r,o)},s=[l,L(t,o)];return a.set(r,s),function(){i=!0,a.delete(s)}},subscribeToCommit:function(t){return l.set(t,t),function(){l.delete(t)}}}}l.default=d}),98);
__d("ReStore",["ExecutionEnvironment","FBLogger","JSONStringifyBigIntSafe","ODS","PromiseOrValue","ReStoreCustomMigration","ReStoreHooks","ReStoreIndexeddbPersistenceInitFailure","ReStoreMigrateUtil","ReStoreOperationLock","ReStorePersistedMetadata","ReStorePersistence","ReStoreTable","ReStoreTransactionDelay","ReStoreUtils","clearTimeout","cr:1088","cr:6665","createReStoreSubscriptionManager","getErrorSafe","promiseDone","setImmediate","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(function(e){function t(){return e.call(this,"ReStore transaction timed out")||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),d={enableRejectingTransaction:!1,enableTransactionTimeout:!1,fbLoggerProject:"maw_db",odsCategoryID:600},m=12e4;function p(t){var a=t.persistence,i=t.hooks,l=i===void 0?[]:i,p=t.customMigration,_=t.loggers,f=_===void 0?{logHistory:void 0,transactionQplLogger:void 0,userFlow:void 0}:_,g=t.config,h=g===void 0?d:g,y=t.schema,C=f.logHistory,b=f.transactionQplLogger,v=f.userFlow,S=o("ReStorePersistence").createDbStore(a),R=a.tabTablesNotifier==null?void 0:a.tabTablesNotifier(),L=y.defaults,E=r("createReStoreSubscriptionManager")(y,a.shouldSync,R),k=o("ReStoreHooks").createHookManager(l),I=S.createTransaction("readonly"),T=a.types.includes("indexeddb"),D={background:{first:null,last:null},sync_script:{first:null,last:null},ui:{first:null,last:null}},x="<first_txn>";v==null||v.addPoint("migration_start"),C==null||C.debug("restore migration start");var $=new(o("ReStoreOperationLock")).WaitForPromiseLock(a.types.includes("devtool")?Promise.resolve():S.runExclusively(function(){return Promise.resolve([async function(){v==null||v.addPoint("migration_execute_start");var e=new Map,t=S.createTransaction("readwrite"),n=M(t,e);C==null||C.debug("migration transaction created");var r={changedKeys:e,clearCache:N,hooksManager:k,loggers:f,storeTx:t,transaction:n};try{var a=await y.migrate(r);v==null||v.addPoint("migration_custom_start");var i=await o("ReStoreCustomMigration").runCustomMigration(p,r);if(C==null||C.debug("migration custom end"),v==null||v.addPoint("migration_custom_end"),i===o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED&&a===o("ReStoreMigrateUtil").ReStoreMigrateResult.NO_UPGRADE_NEEDED){t.close(),C==null||C.debug("restore migration skipped"),v==null||v.addPoint("migration_skipped");return}var l=a!==o("ReStoreMigrateUtil").ReStoreMigrateResult.UPDATE_METADATA&&e.size!==0;await t.flush({upgrade:l}),v==null||v.addPoint("migration_execute_end"),C==null||C.debug("restore migration complete")}catch(e){throw t.close(),e}v==null||v.addPoint("migration_end"),C==null||C.debug("restore migration end")},"readwrite"])},"migration").catch(function(e){var t=r("getErrorSafe")(e);throw v==null||v.addAnnotations({string:{migration_error:t.message}}),e instanceof o("ReStoreIndexeddbPersistenceInitFailure").ReStoreIndexeddbPersistenceInitFailure||v==null||v.endFail("migration_error"),C==null||C.debug("restore migration error"),r("FBLogger")("restore_init").catching(t).mustfix("migration failed"),e}));async function P(e,t){var n=new WeakMap;await S.runExclusively(function(){return Promise.resolve([async function(){var r=new Map,a=S.createTransaction("readwrite"),i=M(a,r),l=t.values();await(u||(u=o("PromiseOrValue"))).loop(function(t){if(t.done)return{action:"break",value:void 0};var r=t.value,a=r[0],s=r[1];return(u||(u=o("PromiseOrValue"))).map(u.map(s==null?i.table(e).delete(o("ReStoreUtils").searchKey(y.tableNames[e],a)):i.table(e).put(s),function(){return E.notifyTableAndIndexSubscribers(e,a,s,n)}),function(){return{action:"continue",value:l.next()}})},l.next());try{await a.flush({upgrade:!0})}catch(e){throw a.close(),e}},"readwrite"])},"applyChangesToTable")}function N(){S.clearCache==null||S.clearCache()}function M(e,t,n){return o("ReStoreUtils").createReStoreTransaction(y,L,k,E,e,t,n)}var w;function A(e,t,n,r){return new Promise(function(o,a){h.enableRejectingTransaction&&(w=a);var i=function(){return x=r,e().then(o,a).finally(function(){return x=void 0})};D[t].last==null?D[t].first=D[t].last={value:{code:i,writemode:n}}:D[t].last=D[t].last.next={value:{code:i,writemode:n}}})}function F(e){return S.runExclusively(function(){var e=D.ui.first!=null?D.ui:D.sync_script.first!=null?D.sync_script:D.background;if(e.first==null)return r("FBLogger")(h.fbLoggerProject).mustfix("Expected work is missing"),Promise.resolve([function(){return Promise.resolve({})},"readonly"]);var t=e.first;return e.first===e.last&&(e.last=null),e.first=e.first.next,Promise.resolve([t.value.code,t.value.writemode])},e)}async function O(e,t,n,o){var a;n===void 0&&(n="background"),o===void 0&&(o={source:"unknown",type:"user_initiated"});var i,l=(a=arguments[4])!=null?a:"<unknown callsite>";l==="<unknown callsite>"&&o.type!=="test_env"&&r("FBLogger")(h.fbLoggerProject).info("Unknown callsite for runInTransaction, action source %s",o.source),o.type==="maw_ui_bridge"&&(l=l+":"+o.events.map(function(e){var t=e.tag;return t}).join(","));try{i=await B(e,t,n,o,l)}catch(e){throw e instanceof c?r("FBLogger")(h.fbLoggerProject).blameToPreviousFrame().mustfixThrow("ReStore transaction took too long to execute: %s",l):e}return i}async function B(t,a,i,l,s){var c;i===void 0&&(i="background");var d,p,_,f,g,y=b==null?void 0:b.startTracking(T,i);n("cr:1088")&&(d=Date.now()),y==null||y.addAnnotations({string:{currentlyExecutingModuleAndLineNo:x,moduleAndLineNo:s}});async function C(){y==null||y.mark("execute_start"),n("cr:1088")&&(p=Date.now());var a={ref:void 0},i=new Map,c=S.createTransaction("readwrite",s),m;n("cr:1088")==null||n("cr:1088").trackingStoredProceduresForNewTransaction(l),n("cr:1088")==null||n("cr:1088").recordModuleName(s);try{var C=M(c,i,{qplFlow:y});(e||(e=r("ExecutionEnvironment"))).isInBrowser?m=await Promise.race([t(C),q(a,y,s)]):m=await t(C),a.ref!=null&&r("clearTimeout")(a.ref),y==null||y.mark("execute_end"),y==null||y.mark("flush_start"),await c.flush({actionSource:l,qplFlow:y}),y==null||y.mark("flush_end"),n("cr:1088")&&(_=Date.now())}catch(e){a.ref!=null&&r("clearTimeout")(a.ref);var b=r("getErrorSafe")(e);throw c.close(),y==null||y.fail(b),r("FBLogger")(h.fbLoggerProject).catching(b).mustfix("Transaction failed: %s",s),n("cr:1088")==null||n("cr:1088").recordRestoreTransaction({broadcast:f,complete:_,flush:g,queue:d,start:p},{changedKeys:i}),e}finally{n("cr:1088")==null||n("cr:1088").stopTrackingStoredProcedures()}n("cr:1088")&&(g=Date.now()),y==null||y.mark("broadcast_start");var v=new WeakMap,R=new Map;for(var L of i){var I=L[0],T=L[1],D=JSON.parse(I),x=D[0],$=D[1],P=R.get(x);P==null&&(P=[],R.set(x,P));var N=T[0],w=T[1],A=k.beforeNotify({newValue:w,prevValue:N,tableName:x}),F=A.newValue,O=A.prevValue;P.push([O,F])}var B=R.entries();if(await(u||(u=o("PromiseOrValue"))).loop(function(e){if(e.done)return{action:"break",value:void 0};var t=e.value,n=t[0],r=t[1],a=r.values();return(u||(u=o("PromiseOrValue"))).map(u.loop(function(e){if(e.done)return{action:"break",value:void 0};var t=e.value,r=t[0],i=t[1];return(u||(u=o("PromiseOrValue"))).map(E.notifyTableAndIndexSubscribers(n,r,i,v),function(){return{action:"continue",value:a.next()}})},a.next()),function(){return{action:"continue",value:B.next()}})},B.next()),E.notifyTableV2(R,"notifyTableV2"),E.notifyTableV2(R,"notifyInMemoryTable"),E.notifyCommit(),n("cr:1088")){f=Date.now();var W={broadcast:f,complete:_,flush:g,queue:d,start:p};n("cr:1088").recordRestoreTransaction(W,{changedKeys:i})}return y==null||y.mark("broadcast_end"),y==null||y.mark("post_commit_start"),r("setImmediate")(function(){y==null||y.mark("post_commit_end"),y==null||y.end()}),m}await r("ReStoreTransactionDelay")(i);var v=A(C,i,a,s);if(y==null||y.mark("enqueued"),y==null||y.addAnnotations({string:{actionSourceSource:l.source,actionSourceType:l.type},string_array:{actionSourceEvents:(c=l.events)==null?void 0:c.map(function(e){return e.tag}),actionSourceTaskNames:l.taskNames}}),r("promiseDone")(F(s),function(){},function(e){w==null||w(e)}),!(e||(e=r("ExecutionEnvironment"))).isInBrowser)return v;var R=r("setTimeout")(function(){var t,o,a;r("FBLogger")("messenger_web").mustfix("Transaction not resolved after %s ms. Source: %s; currently processing: %s. Native ops: %s. Executed SP: %s, isInWorker: %s",m,s,x,(t=r("JSONStringifyBigIntSafe")(n("cr:6665")==null?void 0:n("cr:6665").getCurrentlyExecutingNativeOps()))!=null?t:"<devtools not running>",(o=n("cr:1088")==null||(a=n("cr:1088").getStoredProcedureCallLog())==null?void 0:a.sp.map(function(e){return e.spName}).join(","))!=null?o:"<devtools not running>",(e||(e=r("ExecutionEnvironment"))).isInWorker)},m);return v.finally(function(){return r("clearTimeout")(R)})}(e||(e=r("ExecutionEnvironment"))).isInBrowser&&R!=null&&R.onEventReceive("notifyInMemoryTable",function(e){r("promiseDone")((async function(){for(var t of e){var n=t[0],r=t[1];a.shouldApplySync("notifyInMemoryTable",n)&&await P(n,r)}E.notifyCommit()})())});var W=Object.keys(y.tableNames).reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t]=new(o("ReStoreTable")).ReStoreTable(y.tableNames[t],k,$,I,E),n))},{});return{clearCacheIfSupported:N,closeDb:function(){var e=S;e instanceof Object&&e.close!==void 0&&e.close()},getCustomMigrationVersion:async function(){var e=await new(o("ReStorePersistedMetadata")).ReStorePersistedCustomMigrationVersion().read(S.createTransaction("readonly"));return e==null?void 0:e.customMigrationVersion},getTableData:function(){return y},isClosed:function(){return S.isClosed()},isPersistenceSupported:function(){var e=S;return e instanceof Object&&e.isPersistenceSupported!==void 0&&e.isPersistenceSupported instanceof Function?e.isPersistenceSupported():Promise.resolve(!0)},persistence:a,persistenceTypes:a.types,runInTransaction:O,subscribeToCommit:function(t){return E.subscribeToCommit(t)},subscriptionManager:E,table:function(t){return W[t]},tables:W,uniqueId:a.uniqueId};function q(t,a,i){return h.enableTransactionTimeout?new Promise(function(e,n){var o=5e3;t.ref=r("setTimeout")(function(){a==null||a.mark("slow_transaction"),n(new c)},o)}):new Promise(function(){var a=3e4;t.ref=r("setTimeout")(function(){var t;r("FBLogger")(h.fbLoggerProject).mustfix("ReStore transaction took longer than 30000ms to execute, check it: %s. Executed SP: %s. isInWorker: %s.",i,n("cr:1088")==null||(t=n("cr:1088").getStoredProcedureCallLog())==null?void 0:t.sp.map(function(e){return e.spName}).join(","),(e||(e=r("ExecutionEnvironment"))).isInWorker),(s||(s=o("ODS"))).bumpEntityKey(h.odsCategoryID,"messenger.restore.transaction","timeout_"+(i||"").replace(/:/g,"_"),1)},a)})}}l.default=p}),98);
__d("LSReStoreWrapper",["LSReStoreQplLogger","MessengerLogHistory","ReStore","ReStoreInstrumentation","gkx","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a,i){n===void 0&&(n=[]);var l=o("ReStoreInstrumentation").instrument(r("ReStore")({config:{enableRejectingTransaction:r("gkx")("8566"),enableTransactionTimeout:r("gkx")("2947"),fbLoggerProject:"maw_db",odsCategoryID:3185},customMigration:a,hooks:n,loggers:{logHistory:o("MessengerLogHistory").getInstance("db_init"),transactionQplLogger:o("LSReStoreQplLogger").createQplLogger(r("qpl")._(25306500,"1488")),userFlow:i},persistence:e,schema:t}));return l}l.createLSReStore=e}),98);
__d("MAWLSVaultingHooks",["ReStoreVaulting"],(function(t,n,r,o,a,i,l){"use strict";var e={onAfterEntriesNext:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeVaultDbRow(n,e)},onAfterGet:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeVaultDbRow(n,e)},onBeforeAdd:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeUnvaultDbRow(n,e)},onBeforeNotify:function(t){var e=t.newValue,n=t.prevValue,r=t.tableName;return{newValue:o("ReStoreVaulting").maybeVaultDbRow(e,r),prevValue:o("ReStoreVaulting").maybeVaultDbRow(n,r)}},onBeforePut:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeUnvaultDbRow(n,e)},onBeforeUpsert:function(t){var e=t.tableName,n=t.value;return o("ReStoreVaulting").maybeUnvaultDbRow(n,e)}};l.default=e}),98);
__d("LSJSInMemoryStorage",["LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","createLSReStoreEphemeralPersistence"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("LSReStoreWrapper").createLSReStore(o("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),e,[r("MAWLSVaultingHooks")],void 0,o("LSPlatformLsInitLog").lsInitLogger)}l.default=e}),98);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return r("emptyFunction")}function u(){return(e||(e=n("Promise"))).resolve()}var c={cleanup:r("emptyFunction"),logEvent:function(t){},onConnectionStatusChange:s,onReconnect:s,publish:u,subscribe:s};l.default=c}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("21118")?r("MqttWebDeviceID").clientID:r("ChannelClientID").getID()}var s=e();function u(t){return t==null&&r("FBLogger")("messenger_web").info("Missed provider type for deviceId"),t==="persisted"?o("LSCookie").get().d:e()}l.deviceId=s,l.getDeviceIdForProviderType=u}),98);
__d("MessengerPWAVersionForUserAgent",["isMessengerPWA"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=r("isMessengerPWA")();if(t){var n=(e=new URL(window.location.href).searchParams.get("__pwa"))!=null?e:"1.0.0";return n}}l.default=e}),98);
__d("LSPlatformRealtimeTransport",["I64","LSDynamicDependencies","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSShape","LSStreamGroupRef","MessengerPWAVersionForUserAgent","NetworkStatus","Promise","QuickPerformanceLogger","Random","clearTimeout","promiseDone","qpl","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("qpl")._(701246226,"1285"),m="LSPlatformRealtimeTransport.NotConnected",p="LSPlatformRealtimeTransport.Timeout";function _(e){var t=new Map;return{getAll:function(){return Array.from(t.values())},getOrStart:function(r){var n=r.toString(),o=t.get(n);return o==null&&(o=e(r),t.set(n,o)),o}}}function f(e){}function g(t,a,i){var l=new Map,m={contents:f},g=new Set,h=new Map,y=[],C=_(function(e){var n=t(e,i);return y.push(n.subscribe(function(e){var t=JSON.parse(e),n=o("LSDynamicDependencies").downloadBootloaderDependencies(t.sp,t.nop,t.ntop),a=t.request_id,i;if(a!=null){var s=l.get(a);if(s==null)i=!1;else{r("clearTimeout")(s.timeoutId),s.resolve({downloadTask:n,payload:t,type:"taskresponse"}),l.delete(a);var u=s.instanceKey;(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:u}),c.markerEnd(d,2,u),i=!0}}else i=!1;if(!i){Array.from(h.entries()).forEach(function(e){return e[1](n,t)});return}})),y.push(n.onReconnect(function(e){return m.contents(e)})),y.push(n.onConnectionStatusChange(function(e){g.forEach(function(t){return t(e)})})),n});return C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(o("LSMailboxInitialSyncCursor").syncChannel)),{cleanup:function(){y.forEach(function(e){return e()}),C.getAll().forEach(function(e){return e.cleanup()})},logEvent:function(t){C.getAll().forEach(function(e){return e.logEvent(t)})},onConnectionStatusChange:function(t){return g.add(t),function(){g.delete(t)}},onReconnect:function(t){return m.contents=t,function(){m.contents=f}},publish:function(i){var t=i.databaseType,m=i.payload,_=i.queueName,f=i.requestId,g=i.syncChannel,h=i.type_;return new(e||(e=n("Promise")))(function(e,n){var i=C.getOrStart((u||(u=o("LSIntEnum"))).unwrapIntEnum(g)),y=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);if((s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3))){var b=r("setTimeout")(function(){i.logEvent("Timeout");var e=l.get(f);return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"timeout",{instanceKey:y}),c.markerEnd(d,3,y),e!=null&&(l.delete(f),e.reject({RE_EXN_ID:p})),n({RE_EXN_ID:p})},3e4);l.set(f,{instanceKey:y,queueName:_,reject:n,resolve:e,timeoutId:b,timestamp:Date.now()})}(c||(c=r("QuickPerformanceLogger"))).markerStart(d,y),c.markerPoint(d,"publish",{instanceKey:y}),c.markerAnnotate(d,{string:{networkStatus:String(r("NetworkStatus").isOnline()),streamGroupId:o("LSStreamGroupRef").getTransportId(),streamGroupStatus:o("LSStreamGroupRef").getTransportStatus()}},{instanceKey:y}),c.markerAnnotate(d,{int:{databaseType:t,requestType:u.toNumber(h)}},{instanceKey:y});var v=r("MessengerPWAVersionForUserAgent")();r("promiseDone")(i.publish(o("LSJson").stringify(o("LSShape").ofRecord(babelHelpers.extends({app_id:a,payload:m},v!=null?{pwa_version:v}:{},{request_id:f,type:h}))),h,t),function(){if(!(s||(s=o("I64"))).equal(h,(u||(u=o("LSIntEnum"))).ofNumber(3)))return(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"response",{instanceKey:y}),c.markerEnd(d,2,y),e({type:"noresponseexpected"})},function(e){(c||(c=r("QuickPerformanceLogger"))).markerPoint(d,"fail",{instanceKey:y}),c.markerEnd(d,3,y),n(e)})})},subscribeToNonTaskResponses:function(t){var e={};return h.set(e,t),function(){h.delete(e)}}}}l.NotConnected=m,l.Timeout=p,l.LSPlatformRealtimeTransport=g}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return!(e||(e=r("ExecutionEnvironment"))).canUseDOM&&!(e||(e=r("ExecutionEnvironment"))).isInWorker}l.default=s}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:e}),qos:1,topic:"/ls_app_settings"}]}function d(t){var a={contents:t.getConnectionState()},i={contents:function(){}},l={contents:new(u||(u=n("Promise")))(function(e,t){i.contents=e})},c={onMQTTStateChanged:function(t){t==="Connected"?i.contents():t==="Disconnected"&&a.contents==="Connected"&&(l.contents=new(u||(u=n("Promise")))(function(e,t){i.contents=e})),a.contents=t}};return a.contents==="Connected"&&i.contents(),t.subscribeChannelEvents(c),[function(){t.unsubscribeChannelEvents(c)},function(a,i,c){return l.contents.then(function(){return new(u||(u=n("Promise")))(function(n,l){r("promiseDone")(t.publish("/ls_req",a,{listener:{onEvent:function(t){if(t==="NOT_CONNECTED")return l({RE_EXN_ID:o("LSPlatformRealtimeTransport").NotConnected})}},qos:(e||(e=o("I64"))).equal(i,(s||(s=o("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return n()},function(e){return e.message==="Publish Timed Out"?l({RE_EXN_ID:o("LSPlatformRealtimeTransport").Timeout}):l(e)})})})}]}var m={contents:void 0};function p(e,t,n){if(r("shouldStubUnderlyingTransport")())return r("LSPlatformDefaultUnderlyingApi");var o=n.getInstance(t),a={getPublishMessages:function(){return c(e)}};o.registerExtraConnectPayloadProvider(a);var i={onMQTTStateChanged:function(t){var e=m.contents;if(e!=null)return e(t)}};o.subscribeChannelEvents(i);var l=o.subscribe("/ls_foreground_state",function(){}),s=d(o),u=s[0],p=s[1];return{cleanup:function(){o.unregisterExtraConnectPayloadProvider(a),n.shutdownAndClear(),o.unsubscribeChannelEvents(i),l(),u()},logEvent:function(t){},onConnectionStatusChange:function(t){return m.contents=t,function(){m.contents=void 0}},onReconnect:function(t){var e={contents:o.getConnectionState()},n={contents:e.contents==="Connected"},r={onMQTTStateChanged:function(o){o==="Connected"&&(n.contents&&e.contents!=="Connected"&&t(1),n.contents=!0),e.contents=o}};return o.subscribeChannelEvents(r),function(){o.unsubscribeChannelEvents(r)}},publish:p,subscribe:function(t){return o.subscribe("/ls_resp",function(e){return t(e)})}}}l.default=p}),98);
__d("LSPlatformRequestId",[],(function(t,n,r,o,a,i){"use strict";var e=4;function l(){var t=e;return e+=1,t}var s={generate:l};i.default=s}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","justknobx","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Math.pow(2,31)-1,s=(function(){function t(){this.requests=new Map}var n=t.prototype;return n.schedule=function(n,o,a){var t=this.requests.get(o);t!=null&&r("clearTimeout")(t);var i=r("justknobx")._("4435")?Math.min(a,e):a;this.requests.set(o,r("setTimeout")(n,i))},n.cleanup=function(){this.requests.forEach(function(e){return r("clearTimeout")(e)})},t})();l.default=s}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","clearTimeout","nullthrows","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e="executeFirstBlockForSyncTransaction",s=(function(){function t(e){this.eval=e,this.currentlyRunning=new Map}var n=t.prototype;return n.evalWhenReady=async function(t,n){var e;try{await t,e=r("setTimeout")(function(){r("FBLogger")("messenger_web").mustfix("waited longer than 30 seconds to eval sync script")},3e4),await this.eval(n)}finally{r("clearTimeout")(e)}},n.$1=function(t){var e=this.currentlyRunning.get(t);return e==null&&(e=Promise.resolve(),this.currentlyRunning.set(t,e)),e},t.getSyncScriptType=function(n){var t;if(!((t=n.sp)!=null&&t.includes(e)))return{status:"non-transactional"};var o=(function(){try{var e;return(e=JSON.parse(n.syncScript))==null?void 0:e.step}catch(e){return null}})();if(!Array.isArray(o))return r("FBLogger")("messenger_web").warn("Sync payload appears invalid."),{status:"non-transactional"};for(var a=[o];a.length;){var i=r("nullthrows")(a.shift());for(var l of i)if(Array.isArray(l)){if(l[0]===5&&l[1]===e&&Array.isArray(l[2]))return{status:"transactional",syncGroup:parseInt(l[2][1],10)};a.push(l)}}return{status:"err"}},n.maybeEvalInOrderReceived=function(n,o){var e,a=this,i=t.getSyncScriptType(o),l=0;switch(i.status){case"err":r("FBLogger")("messenger_web").warn("Sync script sync group parsing failed: employed sprocs were %s",JSON.stringify((e=o.sp)!=null?e:void 0));break;case"non-transactional":return this.evalWhenReady(n,o);case"transactional":l=i.syncGroup;break}var s=this.$1(l),u=s.then(function(){return a.evalWhenReady(n,babelHelpers.extends({},o,{priority:"sync_script"}))}).catch(function(e){throw a.currentlyRunning.delete(l),e});return this.currentlyRunning.set(l,u),u},t})();l.default=s}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({DASM:1,JS:2,JSON:3}),l=e;i.default=l}),66);
__d("LSQplAnnotateBool.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u,c){try{var t,d=r("nullthrows")(o("EBMarkerIdToQPLEvent").markerIdToQPLEvent(l)),m=o("WAHashStringToNumber").hashStringToNumber(s);return r("QPLUserFlow").addAnnotations(d,{bool:(t={},t[u]=c,t)},{instanceKey:m}),(e||(e=n("Promise"))).resolve()}catch(t){return(e||(e=n("Promise"))).resolve()}};s.__nop_name__="LSQplAnnotateBool",l.default=s}),98);
__d("SymmetricEncryptionCreateEncryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a,i){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),l=o("SymmetricEncryptionPaddingUtils").padData(i),s=o("XPlatReactCrypto").getRandomValues(new Uint8Array(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes)),u=new(o("HChaCha20")).HChaCha20,c=u.hChaCha20Bytes(s.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",c,"AES-GCM",!1,["encrypt"]).then(function(e){return o("XPlatReactCrypto").subtleEncrypt({additionalData:a,iv:new Uint8Array(s.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,l)}).then(function(t){var r=s.byteLength+t.byteLength,a=new Uint8Array(r);return a.set(s),a.set(new Uint8Array(t),o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(a.buffer))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric data encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=s}),98);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["SymmetricEncryptionCreateEncryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,o,a,i){return r("SymmetricEncryptionCreateEncryptedData")(o,a,i)};e.__nop_name__="LSSymmetricEncryptionCreateEncryptedData",l.default=e}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i,l,s,u){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return r("LSSymmetricEncryptionCreateEncryptedData.nop")(a,i,l,s,o("LSCryptoUtils").strToBuf(u)).then(function(e){return e[0]}).then(function(t){return(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(t?o("Base64Utils").fromArrayBuffer(t):void 0))}).catch(function(r){return o("CryptoLogger").captureError(t,r).mustfix("symmetric string encryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};s.__nop_name__="LSSymmetricEncryptionCreateEncryptedString",l.default=s}),98);
__d("LSVersion",[],(function(t,n,r,o,a,i){a.exports="32381005491547324"}),null);
__d("MAWBridgeDropAllSecureThreadsHandler",["I64","LSIntEnum","LSMessagingThreadTypeUtil","Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var r=o("ReQL").fromTableAscending(t.threads_ranges_v2__generated).filter(function(e){return(s||(s=o("I64"))).equal(e.parentThreadKey,(u||(u=o("LSIntEnum"))).ofNumber(-1))||(s||(s=o("I64"))).equal(e.parentThreadKey,(u||(u=o("LSIntEnum"))).ofNumber(-10))});return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.threads_ranges_v2__generated.delete(n.parentThreadKey,n.minThreadKey,n.minLastActivityTimestampMs)})},(e||(e=n("Promise"))).resolve())})}function d(t){var r=o("ReQL").fromTableAscending(t.threads).filter(function(e){return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)});return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.threads.delete(n.threadKey)})},(e||(e=n("Promise"))).resolve())})}function m(t){return(e||(e=n("Promise"))).all([c(t),d(t)]).then(function(){return(e||(e=n("Promise"))).resolve()})}l.call=m}),98);
__d("MWPMiniSearch",["minisearch"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e={fuzzy:0,prefix:!0};return{fields:["content"],searchOptions:e}}function s(t){t===void 0&&(t=function(){return{}});var n;function o(){n=new(r("minisearch"))(babelHelpers.extends({},e(),t()))}return{getInstance:function(){return n==null&&o(),n}}}l.createMiniSearchSingleton=s}),98);
__d("WAAbPropsTypes",[],(function(t,n,r,o,a,i){"use strict";var e={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};i.ABPropConfigs=e}),66);
__d("WAAbPropsToUI",["WAAbPropsTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=["client_group_participants_limit","client_group_name_length_limit"];function s(t){var n=t!=null?t:{},r={};return e.forEach(function(e){n[e]!=null?r[e]=n[e]:r[e]=o("WAAbPropsTypes").ABPropConfigs[e][2]}),r}l.prepareAbPropsForUI=s}),98);
__d("WAOfflineUtils",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]),l=n("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});i.ServerRPCMode=e,i.WAClientInfraOfflineProgress=l}),66);
__d("getMWLSRegion",["MessengerWebRegion"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("MessengerWebRegion").regionNullable;return e==null?"":e}l.default=e}),98);
__d("isGroupInvitesEnabled",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("125")===!0}l.default=e}),98);/*FB_PKG_DELIM*/
__d("EBFormatUtils",["I64","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){if(t!=null)return(e||(e=o("I64"))).min(t,e.of_float(o("WATimeUtils").millisTime()));switch(n){case"before":return(e||(e=o("I64"))).of_float(o("WATimeUtils").millisTime());case"after":return(e||(e=o("I64"))).zero;default:return(e||(e=o("I64"))).max_int}}function u(e,t){switch(t){case"before":return[e,0];case"after":return[0,e];default:return[Math.ceil(e/2),Math.ceil(e/2)]}}l.adjustTs=s,l.adjustCount=u}),98);
__d("LSCheckAuthoritativeMessageExists",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.filter(t.db.table(12).fetch([[[e[1]]],"optimistic"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.offlineThreadingId===e[1]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=!1:(t=o.item,n[0]=!0)})},function(e){return r[0]=n[0]}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxCheckAuthoritativeMessageExistsStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("getChatJidForLSDBJid",["I64","LSMessagingThreadTypeUtil","ReQL","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,r){var a=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.threads).getKeyRange(n));if(a!=null){var i=(e||(e=o("I64"))).to_string(r);return o("LSMessagingThreadTypeUtil").isGroup(a.threadType)?o("WAJids").toGroupJid(i):o("WAJids").toMsgrUserJid(i)}}l.getMaybeChatJidForLSDBJid=s}),98);
__d("LSShimCompleteThreadCutover.nop",["I64","MAWBridgeFireAndForget","ReQL","getChatJidForLSDBJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n,r,a,i,l){var t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.cutover_threads).getKeyRange(i));if(t!=null){var s=t.showOpenMessageHistory===!1;if(s)return[(e||(e=o("I64"))).one];var u=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.mi_act_mapping_table.index("jid")).getKeyRange(t.armadilloThreadId));if(u!=null){var c=await o("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(n,u.serverThreadKey,u.jid);return c==null?[(e||(e=o("I64"))).one]:(o("MAWBridgeFireAndForget").fireAndForget("backend","insertAdminMessageInCutoverThreads",{openThreadId:(e||(e=o("I64"))).to_string(i),threadJid:c,traceId:l}),[e.zero])}return[(e||(e=o("I64"))).one]}return[(e||(e=o("I64"))).one]};s.__nop_name__="LSShimCompleteThreadCutover",l.default=s}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.nativeOperation(n("LSShimCompleteThreadCutover.nop"),e[0],e[1],e[2]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteAllCommunityChannelCategories",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(182).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,20])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityChannelCategoriesStoredProcedure",e.__tables__=["cm_category_list","threads"],a.exports=e}),null);
__d("LSDeleteAllCommunityFolders",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(162).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(9).fetch([[[t.i64.cast([0,17])]],"threadTypeLastActivityTimestampMs"]),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteAllCommunityFoldersStoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSDeleteBanner",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[1],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.bannerId,e[0])}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSInThreadBannerDeleteBannerStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteBannersByIds",["LSArrayGetObjectAt"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.sequence([function(o){return r[1]=t.createArray(),r[2]=t.i64.of_int32(e[1].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.loopAsync(r[2],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(e){return r[7]=(r[1].push(t.i64.to_string(r[5])),r[1])}])}):t.resolve()},function(e){return r[3]=r[1].join(","),r[0]=r[3]}])},function(n){return t.forEach(t.filter(t.db.table(118).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&e[1].some(function(e){return t.i64.eq(n.bannerId,e)})}),function(e){return e.delete()})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSInThreadBannerDeleteBannersByIdsStoredProcedure",e.__tables__=["in_thread_banner"],a.exports=e}),null);
__d("LSDeleteRowRichStatusCustomAudience",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSOmnistoreSettingsDeleteRowRichStatusCustomAudienceStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertAvatarFeatureConfig",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSContactDeleteThenInsertAvatarFeatureConfigStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(299).put({botId:e[0],isCreatedByViewer:e[1],description:e[4],tintColor:e[2],shortDescription:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure",e.__tables__=["bot_profile_info_v2"],a.exports=e}),null);
__d("LSDeleteThenInsertCmChannelList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(167).put({communityId:e[0],threadId:e[1],categoryId:e[2],channelPrivacy:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmChannelListStoredProcedure",e.__tables__=["cm_channel_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCmCommunityList",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(166).put({communityId:e[0]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertCmCommunityListStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityFolder",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(162).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.folderId,e[0])&&t.i64.gt(t.i64.cast([0,80]),e[54])}).next().then(function(n){var r=n.done,o=n.value;return r?t.db.table(162).put({folderId:e[0],fbGroupId:e[1],name:e[2],memberCount:e[4],description:e[3],pictureUrl:e[5],pictureUrlFallback:e[6],pictureUrlExpirationTimestampMs:e[7],joiningChannelTaskId:e[8],afterJoiningOpenChannelId:e[10],capabilities:e[11],capabilities2:e[12],capabilities3:e[13],notificationSetting:e[14],notificationMutedUntil:e[15],sendsBlockedUntil:e[17],isHidden:e[18],hasSeenDisablingAlert:e[19],inviteLink:e[21],communityType:e[22],directInviteLink:e[23],enableState:e[24],takedownState:e[25],fbGroupType:e[28],threadCount:e[29],disableTimestamp:e[32],readTimestampMs:e[33],inviteStatus:e[37],blockedFromCommunityMemberCount:e[40],categoryCount:e[41],snippetText:e[42],coverPicUrl:e[43],coverPicUrlFallback:e[44],coverPicUrlExpirationTimestampMs:e[45],invitedThreadId:e[47],fbGroupUserParticipationApprovalStatus:e[48],ccAdminAssistRegistrationStatus:e[49],pauseStatus:e[50],isMember:e[51],latestThreadId:e[52],latestThreadActivityTimestampMs:e[53]}):0})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityFolderStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[1]=e[12]==null?t.i64.cast([0,19]):e[12],n[2]="community",n[3]=t.i64.cast([0,0])==null?t.i64.cast([0,0]):t.i64.cast([0,0]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26]}):(o=s.item,n[4]=o.lastActivityTimestampMs,n[6]=o.parentThreadKey,n[5]=o.disappearingThreadKey,n[7]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[4],e[7])&&t.i64.neq(n[5],void 0)?(t.i64.eq(e[1],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[6],t.i64.cast([0,0]))?(a=[n[6],o.folderName],n[8]=a[0],n[9]=a[1]):(i=[e[1],n[2]],n[8]=i[0],n[9]=i[1]),t.db.table(9).put({threadKey:e[0],parentThreadKey:n[8],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[9],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:n[4],lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]})):t.db.table(9).put({threadKey:e[0],parentThreadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:n[1],threadName:e[2],folderName:n[2],threadPictureUrl:e[3],threadPictureUrlFallback:e[4],threadPictureUrlExpirationTimestampMs:e[5],authorityLevel:e[6],lastActivityTimestampMs:e[7],lastReadWatermarkTimestampMs:e[8],muteExpireTimeMs:n[3],removeWatermarkTimestampMs:t.i64.cast([-1,4294967295]),ongoingCallState:t.i64.cast([0,0]),threadDescription:e[9],snippet:e[10],hasPendingInvitation:e[13],eventStartTimestampMs:e[14],eventEndTimestampMs:e[15],takedownState:e[16],cannotReplyReason:e[17],themeFbid:e[18],threadStatus:e[19],needsAdminApprovalForNewParticipant:e[20],joinRequestApprovalSetting:e[21],snippetText:e[24],hasPendingJoinRequest:e[25],capabilities:t.i64.cast([0,0]),capabilities2:t.i64.cast([0,0]),capabilities3:t.i64.cast([0,0]),capabilities4:t.i64.cast([0,0]),syncSource:e[26],disappearingThreadKey:n[5],isDisappearingMode:n[7]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteThenInsertCommunityUnjoinedThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSMinosVerifySingleEpoch.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WAGetSafeQPLError","gkx","qex","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("EBMinosVerifySingleEpoch").__setRef("LSMinosVerifySingleEpoch.nop"),c=function(a,i,l,c,d,m,p,_,f){if(!(r("qex")._("208")===!0||r("gkx")("17219")))return(s||(s=n("Promise"))).resolve([!1]);var t=o("EBMinosQplFlow").startMinosVerifySingleEpochQpl({entryPoint:"verify-single-epoch-native-op"});try{var g,h=(g=o("EBMinosInterfaceTypes")).unsafeCastToBase64StringIntToEpochNumber(l),y=g.unsafeCastToMailboxAuthPK(p),C=g.unsafeCastToMailboxEncryptionPK(m),b=g.unsafeCastToMailboxSigningPK(d),v=g.unsafeCastToUserFbId((e||(e=o("I64"))).to_string(c)),S=o("EBMinosInterfaceTypes").unsafeCastToEpochSelfSig(f),R=_!=null?o("EBMinosInterfaceTypes").unsafeCastToEpochHead(_):void 0;return u.load().then(function(e){return e.minosVerifySingleEpoch(h,v,b,C,y,R,S,t)})}catch(e){return t.endFailWithError("runtime-error",o("WAGetSafeQPLError").getSafeQPLErrorMessage(e)),(s||(s=n("Promise"))).resolve([!1])}};c.__nop_name__="LSMinosVerifySingleEpoch",l.default=c}),98);
__d("LSSetThreadImageURL",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1]===""?void 0:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],isCustomThreadPicture:e[4],shouldRoundThreadPicture:e[5]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetThreadImageURLStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSWriteMinosPublicKey.nop",["EBMinosInterfaceTypes","EBMinosQplFlow","I64","Promise","WALongInt","WATimeUtils","cr:12274","gkx","promiseDone","qex","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("EBWriteMinosMailboxKeysToCache").__setRef("LSWriteMinosPublicKey.nop"),c=function(a,i,l,c,d,m,p,_,f,g,h,y){if(!(r("qex")._("208")||r("gkx")("17219"))||p==null)return(s||(s=n("Promise"))).resolve();var t=o("EBMinosQplFlow").startMinosWritePublicKeysQpl();return n("cr:12274")!=null&&t.addAnnotations({bool:{isBackendSetupInProgress:n("cr:12274").isBackendSetupInProgress(),isBackendSetupSuccessful:n("cr:12274").isBackendSetupSuccessful()}}),c==null||d==null||m==null||_==null?(t.endFailWithError("missing_required_values"),(s||(s=n("Promise"))).resolve()):(t.addPoint("mailbox_to_cache_deferred_load_start"),r("promiseDone")(u.load().then(function(n){var r;return t.addPoint("mailbox_to_cache_deferred_load_end"),n.writeMinosMailboxKeysToCache({contactId:(r=o("EBMinosInterfaceTypes")).unsafeCastToUserFbId((e||(e=o("I64"))).to_string(l)),encryptionPublicKey:o("EBMinosInterfaceTypes").unsafeCastToMailboxEncryptionPK(m),epochAnonId:o("EBMinosInterfaceTypes").unsafeCastToBase64StringIntToEpochNumber(c),epochHead:o("EBMinosInterfaceTypes").unsafeCastToEpochHead(p),epochHeadCreationTime:o("EBMinosInterfaceTypes").unsafeCastToEpochCreationTime(o("WATimeUtils").castLongIntToUnixTime(o("WALongInt").decimalStringToLongInt(e.to_string(d)))),publicKeyFbid:o("EBMinosInterfaceTypes").unsafeCastToMailboxFbId(o("WALongInt").decimalStringToLongInt(e.to_string(_))),qplFlow:t})})),(s||(s=n("Promise"))).resolve())};c.__nop_name__="LSWriteMinosPublicKey",l.default=c}),98);
__d("LSDeleteThenInsertContact",["LSBase64Decode.nop","LSMinosVerifySingleEpoch.nop","LSQplAnnotateString.nop","LSQplMarkEnd.nop","LSQplMarkPoint.nop","LSQplStartTrace.nop","LSSetThreadImageURL","LSWriteMinosPublicKey.nop","gkx","qex"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(a){return t.sequence([function(r){return e[50]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[50]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[0]=o[25]}]):t.resolve(o[0]=void 0)},function(r){return e[52]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[52]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[1]=o[25]}]):t.resolve(o[1]=void 0)},function(r){return e[53]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[53]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[2]=o[25]}]):t.resolve(o[2]=void 0)},function(r){return e[55]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[55]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[3]=o[25]}]):t.resolve(o[3]=void 0)},function(r){return e[56]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[56]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[4]=o[25]}]):t.resolve(o[4]=void 0)},function(r){return e[57]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[57]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[5]=o[25]}]):t.resolve(o[5]=void 0)},function(r){return e[58]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSBase64Decode.nop"),e[58]).then(function(e){var t;return t=e,o[25]=t[0],t})},function(e){return o[6]=o[25]}]):t.resolve(o[6]=void 0)},function(e){return o[21]="LSContactDeleteThenInsertContactStoredProcedure",o[7]=t.i64.random(),o[8]=t.i64.to_string(o[7]),o[8]!==void 0?t.nativeOperation(n("LSQplStartTrace.nop"),t.i64.cast([0,1021650676]),o[8],!0,void 0):t.resolve()},function(e){return o[8]!==void 0&&o[21]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"MinosPublicKeyClientUtils",o[21]):t.resolve()},function(a){var i,l,s;return o[22]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[22]!==void 0?o[9]=o[22]:o[9]=!1,o[9]&&r("gkx")("16269")?t.sequence([function(r){return t.blobs.eq(o[2],void 0)&&t.blobs.eq(o[1],void 0)&&t.i64.eq(e[51],void 0)&&t.i64.eq(e[54],void 0)&&t.blobs.eq(o[3],void 0)&&t.blobs.eq(o[4],void 0)&&t.blobs.eq(o[5],void 0)&&t.blobs.eq(o[0],void 0)?t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_minos_keys_null"):t.resolve()},function(t){var n;return n=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[25]=n[0],o[26]=n[1],o[27]=n[2],o[28]=n[3],o[29]=n[4],o[30]=n[5],o[31]=n[6],o[32]=n[7],o[33]=n[8],n}]):t.sequence([function(r){return t.blobs.neq(o[2],void 0)?t.sequence([function(r){return t.blobs.neq(o[4],void 0)?t.sequence([function(r){return t.blobs.neq(o[3],void 0)?t.sequence([function(r){return t.blobs.neq(o[0],void 0)?t.sequence([function(r){return t.blobs.neq(o[5],void 0)?t.sequence([function(r){return t.nativeOperation(n("LSMinosVerifySingleEpoch.nop"),o[2],e[0],o[3],o[0],o[4],o[6],o[5]).then(function(e){var t;return t=e,o[48]=t[0],t})},function(r){return o[48]?o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_native_op_success"):t.resolve():t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_native_op_failure"):t.resolve()},function(r){return o[49]=["MinosPublicKeyClientUtils",".",["Key verification failed for contact id: ","",t.i64.to_string(e[0])].join("")].join(""),o[8]!==void 0&&o[49]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"error",o[49]):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[8],!1):t.resolve()}])},function(e){return o[47]=o[48]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Epoch Signature Self"):t.resolve()},function(e){return o[47]=!1}])},function(e){return o[46]=o[47]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Encryption Public Key"):t.resolve()},function(e){return o[46]=!1}])},function(e){return o[45]=o[46]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Signing Public Key"):t.resolve()},function(e){return o[45]=!1}])},function(e){return o[44]=o[45]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Auth Public Key"):t.resolve()},function(e){return o[44]=!1}])},function(e){return o[34]=o[44]}]):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: Missing or Null Minos Epoch Anon ID"):t.resolve()},function(e){return o[34]=!1}])},function(r){var a;return o[34]?t.resolve((a=[o[0],o[2],o[1],e[51],e[54],o[3],o[4],o[5],o[6]],o[35]=a[0],o[36]=a[1],o[37]=a[2],o[38]=a[3],o[39]=a[4],o[40]=a[5],o[41]=a[6],o[42]=a[7],o[43]=a[8],a)):t.sequence([function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkPoint.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_minos_epoch_verify_epoch_verify_return_existing_contact_minos_keys_due_to_failure"):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplAnnotateString.nop"),t.i64.cast([0,1021650676]),o[8],"dasm_error","MinosPublicKeyClientUtils: verification failed"):t.resolve()},function(n){var r,a,i;return o[44]=t.createArray(),o[57]=(o[44].push(e[0]),o[44]),o[45]=new t.Map,o[46]=o[45].get(e[0]),o[46]?o[47]=!1:o[47]=!0,o[47]?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[48]=a[0],o[49]=a[1],o[50]=a[2],o[51]=a[3],o[52]=a[4],o[53]=a[5],o[54]=a[6],o[55]=a[7],o[56]=a[8]):(o[57]=o[46].get("mailbox_encryption_public_key"),o[58]=o[46].get("epoch_anon_id"),o[59]=o[46].get("epoch_head"),o[60]=o[46].get("epoch_head_creation_time"),o[61]=o[46].get("minos_mailbox_public_keys_fbid"),r=[o[57],o[58],o[59],o[60],o[61],void 0,void 0,void 0,void 0],o[48]=r[0],o[49]=r[1],o[50]=r[2],o[51]=r[3],o[52]=r[4],o[53]=r[5],o[54]=r[6],o[55]=r[7],o[56]=r[8]),i=[o[48],o[49],o[50],o[51],o[52],o[53],o[54],o[55],o[56]],o[35]=i[0],o[36]=i[1],o[37]=i[2],o[38]=i[3],o[39]=i[4],o[40]=i[5],o[41]=i[6],o[42]=i[7],o[43]=i[8]}])},function(e){var t;return t=[o[35],o[36],o[37],o[38],o[39],o[40],o[41],o[42],o[43]],o[25]=t[0],o[26]=t[1],o[27]=t[2],o[28]=t[3],o[29]=t[4],o[30]=t[5],o[31]=t[6],o[32]=t[7],o[33]=t[8],t}])},function(e){var t;return t=[o[25],o[26],o[27],o[28],o[29],o[30],o[31],o[32],o[33]],o[10]=t[0],o[11]=t[1],o[12]=t[2],o[13]=t[3],o[14]=t[4],o[15]=t[5],o[16]=t[6],o[17]=t[7],o[18]=t[8],t}]):t.resolve((o[25]=t.createArray(),o[38]=(o[25].push(e[0]),o[25]),o[26]=new t.Map,o[27]=o[26].get(e[0]),o[27]?o[28]=!1:o[28]=!0,o[28]?(l=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],o[29]=l[0],o[30]=l[1],o[31]=l[2],o[32]=l[3],o[33]=l[4],o[34]=l[5],o[35]=l[6],o[36]=l[7],o[37]=l[8]):(o[38]=o[27].get("mailbox_encryption_public_key"),o[39]=o[27].get("epoch_anon_id"),o[40]=o[27].get("epoch_head"),o[41]=o[27].get("epoch_head_creation_time"),o[42]=o[27].get("minos_mailbox_public_keys_fbid"),i=[o[38],o[39],o[40],o[41],o[42],void 0,void 0,void 0,void 0],o[29]=i[0],o[30]=i[1],o[31]=i[2],o[32]=i[3],o[33]=i[4],o[34]=i[5],o[35]=i[6],o[36]=i[7],o[37]=i[8]),s=[o[29],o[30],o[31],o[32],o[33],o[34],o[35],o[36],o[37]],o[10]=s[0],o[11]=s[1],o[12]=s[2],o[13]=s[3],o[14]=s[4],o[15]=s[5],o[16]=s[6],o[17]=s[7],o[18]=s[8]))},function(a){return o[23]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[23]!==void 0?o[19]=o[23]:o[19]=!1,o[19]&&r("gkx")("16269"),o[24]=(function(e){return e==null?void 0:e})(r("qex")._("201")),o[24]!==void 0?o[20]=o[24]:o[20]=!1,o[20]&&r("gkx")("16269")?t.nativeOperation(n("LSWriteMinosPublicKey.nop"),e[0],o[11],o[13],o[10],o[12],o[14],o[17],o[16],o[15],o[18]):t.resolve()},function(e){return o[8]!==void 0?t.nativeOperation(n("LSQplMarkEnd.nop"),t.i64.cast([0,1021650676]),o[8],!0):t.resolve()},function(n){return t.i64.eq(e[23],t.i64.cast([0,39423]))?o[25]=t.i64.cast([0,1]):(t.i64.eq(e[23],t.i64.cast([0,14342874]))?o[26]=t.i64.cast([0,2]):o[26]=void 0,o[25]=o[26]),t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))&&t.i64.gt(n.authorityLevel,e[21])}).next().then(function(n){var r=n.done,a=n.value;return r?t.db.table(7).put({id:e[0],profilePictureUrl:e[2],profilePictureFallbackUrl:e[3],profilePictureUrlExpirationTimestampMs:e[4],profilePictureLargeUrl:e[5],profilePictureLargeFallbackUrl:e[6],profilePictureLargeUrlExpirationTimestampMs:e[7],name:e[9],secondaryName:e[41],normalizedNameForSearch:e[10],normalizedSearchTerms:e[33],isMessengerUser:e[11],isMemorialized:e[12],isManagedByViewer:e[35],blockedByViewerStatus:e[14],rank:e[17],firstName:e[18],contactType:e[19],contactTypeExact:e[20],authorityLevel:e[21],messengerCallLogThirdPartyId:e[22],profileRingColor:e[23],requiresMultiway:e[24],blockedSinceTimestampMs:e[25],fbUnblockedSinceTimestampMs:e[48],canViewerMessage:e[26],profileRingColorExpirationTimestampMs:e[27],phoneNumber:e[28],emailAddress:e[29],workCompanyId:e[30],workCompanyName:e[31],workJobTitle:e[32],deviceContactId:e[34],workForeignEntityType:e[36],capabilities:e[37],capabilities2:e[38],profileRingState:o[25],contactViewerRelationship:e[39],gender:e[40],username:e[43],contactReachabilityStatusType:e[44],friendshipStatus:e[45],restrictionType:e[46],waConnectStatus:e[47],isEmployee:!1,pageType:e[49]}):0})},function(r){return t.storedProcedure(n("LSSetThreadImageURL"),e[0],e[2],e[3],e[4],!1,!0)}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSContactDeleteThenInsertContactStoredProcedure",e.__tables__=["contacts"];var s=e;l.default=s}),98);
__d("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(175).put({id:e[0],globalMuteUntil:e[1],showMessagePreview:e[4],isSoundOn:e[7],groupNotificationSetting:e[8],oneToOneNotificationSetting:e[9],replyReminderSetting:e[10],messageReminderDisabled:e[12],messageSound:e[13],ringtoneSound:e[14],newFriendBumpDisabledSetting:e[15],globalMuteMessageUntil:e[2],globalMuteCallUntil:e[3],includeInSwitchAccountBadges:e[11],dismissNfbThreadsCount:e[16],mutePageAccountMessageReminder:e[17]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertNotificationsSettingsGraphQLSnapshotStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("MAWDeanonDataCheck",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=t;return n||(r=t+1),e.length>=r}i.hasEnoughDeanonData=e}),66);
__d("MAWFetchEBDeanonMessagesMetadata",["DateConsts","EBFormatUtils","FBLogger","I64","MAWEBDeanonFetch","MAWMessagesDirection","MAWMessagesPaginationUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s=100,u="timeout",c=10*o("DateConsts").MS_PER_SEC;async function d(t){var n=t.chatJid,a=t.direction,i=t.includeReferenceTimestamp,l=t.logger,d=t.range,m=t.sortFn;r("FBLogger")("messenger_web").info("EBMessageRangeDataSource: Issuing fetch request to EB Deanon API"),l==null||l.markQPLPoint("eb_fetch_deanon_start");var p=o("MAWMessagesDirection").translateMwpDirectionToMawDirection(a),_=(e||(e=o("I64"))).to_float(o("EBFormatUtils").adjustTs(o("MAWMessagesDirection").getI64RangeTimestampForDirection(a,d),p)),f=await o("MAWMessagesPaginationUtils").getRangeExternalIdForDirection(a,d);return Promise.race([o("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:n,count:s,direction:p,includeReferenceTimestamp:i,referenceExternalId:f,referenceTimestampMs:_,sortFn:m}),new Promise(function(e){return window.setTimeout(function(){return e(o("WAResultOrError").makeError(u))},c)})]).then(function(e){return l==null||l.markQPLPoint("eb_fetch_deanon_end"),e})}l.fetchEBDeanonMessagesMetadata=d}),98);
__d("MAWFetchDeanonMetadataUsingCache",["I64","MAWDeanonDataCheck","MAWFetchEBDeanonMessagesMetadata","MAWMessagesCompare","MAWMessagesDirection","MAWSubscribeToLSTruncateMetadataThreads","WAJids","WAResultOrError","WATagsLogger","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("WATagsLogger").TAGS(["MAWFetchDeanonMetadataUsingCache"]),d=new Map,m=r("justknobx")._("3763"),p=new Map,_=null;async function f(t){var n=t.chatJid,r=t.db,a=t.direction,i=t.isFirstPage,l=t.logger,s=t.pageSize,u=t.range,d=t.sortFn;h(r);var m=g(n,a,l,u);if(m!=null&&(l==null||l.addQPLAnnotations({bool:{is_first_page:i},int:{deanon_cached_data_size:m==null?void 0:m.length}}),o("MAWDeanonDataCheck").hasEnoughDeanonData(m,s,i)))return c.LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Using cached Deanon messages metadata for comparison to local data"]))),l==null||l.addQPLAnnotations({bool:{is_deanon_cached_data_used:!0}}),o("WAResultOrError").makeResult(m);var p=await o("MAWFetchEBDeanonMessagesMetadata").fetchEBDeanonMessagesMetadata({chatJid:n,direction:a,includeReferenceTimestamp:!i,logger:l,range:u,sortFn:d});return p.success===!0&&(l==null||l.addQPLAnnotations({bool:{is_deanon_data_fetched:!0}}),C(n,a,l,p.value,u)),p}function g(e,t,n,r){var a;n==null||n.markQPLPoint("deanon_cache_fetch_start"),v(e,t);var i=(a=d.get(o("WAJids").threadIdForChatJid(e)))==null?void 0:a.get(t);if(i==null)return null;var l=o("MAWMessagesDirection").getI64RangeTimestampForDirection(t,r),s=(u||(u=o("I64"))).ge(l,i.minTimestampMs)&&(u||(u=o("I64"))).le(l,i.maxTimestampMs);if(!s)return null;var c=o("MAWMessagesDirection").switchOnMWPMessagesDirection(t,{asc:i.msgsMetadata.findIndex(function(e){return(u||(u=o("I64"))).ge(u.of_float(e.sortOrderMs),l)}),desc:i.msgsMetadata.findIndex(function(e){return(u||(u=o("I64"))).le(u.of_float(e.sortOrderMs),l)})}),m=i.msgsMetadata.slice(c);return n==null||n.markQPLPoint("deanon_cache_fetch_end"),m}function h(e){_==null&&(_=o("MAWSubscribeToLSTruncateMetadataThreads").subscribeToLSTruncateMetadataThreads(e,function(e,t){var n=(u||(u=o("I64"))).to_string(e);d.delete(n),p.delete(n)}))}function y(e,t,n,r){var a,i=o("WAJids").threadIdForChatJid(e),l=(a=d.get(i))!=null?a:new Map;l.set(t,{maxTimestampMs:r.max,minTimestampMs:r.min,msgsMetadata:n}),d.set(i,l)}function C(e,t,n,r,a){if(r.length!==0){n==null||n.markQPLPoint("deanon_cache_replace_start");var i=(u||(u=o("I64"))).of_float(r[r.length-1].sortOrderMs),l=o("MAWMessagesDirection").switchOnMWPMessagesDirection(t,{asc:{max:i,min:a.maxTimestampMs},desc:{max:a.minTimestampMs,min:i}});y(e,t,r,l),n==null||n.markQPLPoint("deanon_cache_replace_end")}}function b(e,t){if(t.length!==0){for(var n=[].concat(t).sort(o("MAWMessagesCompare").getSortComparisonFunctionForDirection("desc")),r=0,a=n.length-1;r<a&&n[r].sortOrderMs===n[r+1].sortOrderMs;)r++;if(r!==a){var i=(u||(u=o("I64"))).of_float(n[a].sortOrderMs);p.set(u.to_string(e),{insertTime:Date.now(),minTimestampMs:i,msgsMetadata:n.slice(r)})}}}function v(e,t){var n=S(e,t);n!=null&&(c.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Using init-sync deanon data for ",""])),e),y(e,t,n.msgsMetadata,{max:(u||(u=o("I64"))).max_int,min:n.minTimestampMs}),p.delete(o("WAJids").threadIdForChatJid(e)))}function S(e,t){if(t==="desc"){var n=Date.now(),r=p.get(o("WAJids").threadIdForChatJid(e));if(!(r!=null&&n-r.insertTime>m))return r}}l.MAWFetchDeanonMetadataUsingCache=f,l.fetchDeanonDataFromCache=g,l.initDeanonCacheDescForThread=b}),98);
__d("LSFillDeanonCacheForE2EEThread.nop",["I64","LSShape","LSSynchronousPromise","LSVec","MAWFetchDeanonMetadataUsingCache","PromiseOrValue","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(n,a,i,l){if(!r("gkx")("15959"))return o("LSSynchronousPromise").makeSynchronousPromise();var t=r("LSVec").toArray(l).map(function(t){var n=o("LSShape").toRecord(t),r=n.offline_threading_id,a=n.sort_order_ms;return{externalId:r,msgType:"unknown-deanon",sortOrderMs:(e||(e=o("I64"))).to_float(a)}}),u=o("ReQL").fromTableAscending(n.mi_act_mapping_table).getKeyRange(i).iterator(new WeakMap);return o("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise((s||(s=o("PromiseOrValue"))).map(u.next(),function(e){var n;((n=e.value)==null?void 0:n[1].jid)!=null&&o("MAWFetchDeanonMetadataUsingCache").initDeanonCacheDescForThread(e.value[1].jid,t)}))};u.__nop_name__="LSFillDeanonCacheForE2EEThread",l.default=u}),98);
__d("LSFillDeanonCacheForE2EEThread",["LSFillDeanonCacheForE2EEThread.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSFillDeanonCacheForE2EEThread.nop"),e[0],e[1])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxFillDeanonCacheForE2EEThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSShimHybridThreadDeleteByThreadKey.nop",[],(function(t,n,r,o,a,i){"use strict";var e=async function(t,n,r){};e.__nop_name__="LSShimHybridThreadDeleteByThreadKey",i.default=e}),66);
__d("LSHybridThreadDelete",["LSShimHybridThreadDeleteByThreadKey.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.nativeOperation(n("LSShimHybridThreadDeleteByThreadKey.nop"),e[0])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxHybridThreadDeleteStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSInsertAttachmentCta",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(19).add({ctaId:e[0],attachmentFbid:e[1],attachmentIndex:e[2],threadKey:e[3],messageId:e[5],title:e[6],type_:e[7],platformToken:e[8],actionUrl:e[9],nativeUrl:e[10],urlWebviewType:e[11],actionContentBlob:e[12],enableExtensions:e[13],extensionHeightType:e[14],targetId:e[15]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertAttachmentCtaStoredProcedure",e.__tables__=["attachment_ctas"],a.exports=e}),null);
__d("LSIssueFetchThreadCapabilitiesTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSMailboxIssueFetchThreadCapabilitiesTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueInsertPersistentMenuItemsForThreadTask",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"insert_persistent_menu_items",t.i64.cast([0,117]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSOmnistoreSettingsIssueInsertPersistentMenuItemsForThreadTaskStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSMarkThreadReadV2",["LSGetViewerFBID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,0]):(n=a.item,r[0]=n.lastActivityTimestampMs)})},function(o){return t.i64.gt(r[0],e[1])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.count(t.filter(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.senderId,r[2])&&t.i64.gt(n.timestampMs,e[1])})).then(function(e){return r[3]=e})},function(n){return t.count(t.db.table(12).fetch([[[e[0],{gt:e[1]}]]])).then(function(e){return r[4]=e})},function(n){return t.i64.eq(r[3],r[4])&&t.i64.gt(r[4],t.i64.cast([0,0]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var t=e.update,n=e.item;return t({lastReadWatermarkTimestampMs:n.lastActivityTimestampMs})}):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}]):t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.gt(e[1],n.lastReadWatermarkTimestampMs)}),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkThreadReadV2StoredProcedure",e.__tables__=["threads","messages"],a.exports=e}),null);
__d("LSReplaceOptimisticReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(8).fetch([[[e[0],e[2],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[2]&&t.i64.eq(n.actorId,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var n=e.update,r=e.item;return n({authorityLevel:t.i64.cast([0,60])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxReplaceOptimisticReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSGroupRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.neq(e.groupRoomType,void 0)&&t.i64.neq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesGroupRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSUpdateOrInsertThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(9).fetch([[[e[7]]]]).next().then(function(r,o){var a,i,l=r.done,s=r.value;return l?t.db.table(9).add({threadKey:e[7],lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:e[59],isDisappearingMode:e[60],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111]}):(o=s.item,n[1]=o.lastActivityTimestampMs,n[3]=o.parentThreadKey,n[2]=o.disappearingThreadKey,n[4]=o.isDisappearingMode,t.i64.le(o.authorityLevel,e[6])?t.i64.gt(n[1],e[0])&&t.i64.neq(n[2],void 0)?(t.i64.eq(e[38],t.i64.cast([-1,4294967286]))&&t.i64.eq(n[3],t.i64.cast([0,0]))?(a=[n[3],o.folderName],n[5]=a[0],n[6]=a[1]):(i=[e[38],e[10]],n[5]=i[0],n[6]=i[1]),t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,a=t.item;return r({lastReadWatermarkTimestampMs:o.lastReadWatermarkTimestampMs,authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:n[6],ongoingCallState:e[32],parentThreadKey:n[5],lastActivityTimestampMs:n[1],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})})):t.forEach(t.db.table(9).fetch([[[e[7]]]]),function(t){var r=t.update,o=t.item;return r({lastReadWatermarkTimestampMs:e[1],authorityLevel:e[6],mailboxType:e[8],threadType:e[9],folderName:e[10],ongoingCallState:e[32],parentThreadKey:e[38],lastActivityTimestampMs:e[0],snippet:e[2],threadName:e[3],threadPictureUrl:e[4],needsAdminApprovalForNewParticipant:e[5],threadPictureUrlFallback:e[11],threadPictureUrlExpirationTimestampMs:e[12],removeWatermarkTimestampMs:e[13],muteExpireTimeMs:e[14],muteMentionExpireTimeMs:e[15],muteCallsExpireTimeMs:e[16],groupNotificationSettings:e[19],isAdminSnippet:e[20],snippetSenderContactId:e[21],snippetText:e[23],snippetStringHash:e[24],snippetStringArgument1:e[25],snippetAttribution:e[26],snippetAttributionStringHash:e[27],disappearingSettingTtl:e[28],disappearingSettingUpdatedTs:e[29],disappearingSettingUpdatedBy:e[30],cannotReplyReason:e[33],customEmoji:e[34],customEmojiImageUrl:e[35],outgoingBubbleColor:e[36],themeFbid:e[37],nullstateDescriptionText1:e[39],nullstateDescriptionType1:e[40],nullstateDescriptionText2:e[41],nullstateDescriptionType2:e[42],nullstateDescriptionText3:e[43],nullstateDescriptionType3:e[44],snippetHasEmoji:e[45],hasPersistentMenu:e[46],disableComposerInput:e[47],cannotUnsendReason:e[48],viewedPluginKey:e[49],viewedPluginContext:e[50],clientThreadKey:e[51],capabilities:e[52],shouldRoundThreadPicture:e[53],proactiveWarningDismissTime:e[54],isCustomThreadPicture:e[55],otidOfFirstMessage:e[56],normalizedSearchTerms:e[57],additionalThreadContext:e[58],disappearingThreadKey:n[2],isDisappearingMode:n[4],disappearingModeInitiator:e[61],unreadDisappearingMessageCount:e[62],lastMessageCtaId:e[64],lastMessageCtaType:e[65],lastMessageCtaTimestampMs:e[66],consistentThreadFbid:e[67],threadDescription:e[69],unsendLimitMs:e[70],capabilities2:e[78],capabilities3:e[79],syncGroup:e[82],threadInvitesEnabled:e[83],threadInviteLink:e[84],isAllUnreadMessageMissedCallXma:e[85],numUnreadSubthreads:e[86],subthreadCount:e[87],lastNonMissedCallXmaMessageTimestampMs:e[88],isHidden:e[89],threadInvitesEnabledV2:e[90],joinRequestApprovalSetting:e[93],hasPendingInvitation:e[94],eventStartTimestampMs:e[95],eventEndTimestampMs:e[96],takedownState:e[97],secondaryParentThreadKey:e[98],igFolder:e[99],inviterId:e[100],threadTags:e[101],isReadReceiptsDisabled:e[102],readReceiptsDisabledV2:e[103],threadStatus:e[104],threadSubtype:e[105],pauseThreadTimestamp:e[106],metadata:e[107],capabilities4:e[108],syncSource:e[109],capabilities5:e[110],ongoingCallTimestampMs:e[111],avatarStickerInstructionKeyId:void 0,avatarStickerId:void 0,avatarStickerThumbnailImageUrl:void 0,avatarStickerThumbnailImageMimeType:void 0,avatarStickerOriginalImageUrl:void 0,avatarStickerOriginalImageMimeType:void 0,draftMessage:void 0,hasPendingJoinRequest:void 0,pendingJoinRequestsCount:void 0,memberCount:void 0,admodCount:void 0,ctmAdId:void 0,ctmAdgroupId:void 0,ctmAdCampaignId:void 0,ctmAdCampaignGroupId:void 0,ctmAdAccountId:void 0,typingIndicatorDisabled:void 0})}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSPopulateCommunityFolderData",["LSDeleteThenInsertCommunityFolder","LSUpdateOrInsertThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(r){return t.storedProcedure(n("LSDeleteThenInsertCommunityFolder"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],void 0,void 0,void 0,e[11],e[12],e[13],e[14],e[15],void 0,e[16],e[17],e[18],void 0,e[19],e[20],e[21],e[22],e[23],void 0,void 0,e[24],e[26],void 0,void 0,e[25],e[37],void 0,void 0,t.i64.cast([0,0]),e[29],void 0,t.i64.cast([0,1]),e[28],e[27],e[30],e[31],e[32],e[33],void 0,e[34],e[35],e[36],e[38],e[39],void 0,void 0,t.i64.cast([0,80]))},function(r){return t.storedProcedure(n("LSUpdateOrInsertThread"),e[8],e[9],e[10],e[2],e[5],void 0,t.i64.cast([0,80]),e[0],t.i64.cast([0,0]),t.i64.cast([0,17]),"community",e[6],e[7],t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([-1,4294967282]),void 0,void 0,void 0,void 0,void 0,void 0,!1,!1,!1,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,!1,void 0,void 0,void 0,void 0,!1,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,void 0,t.i64.cast([0,0]),void 0,!1,void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,e[40],void 0,void 0,void 0,!1,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0)}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxPopulateCommunityFolderDataStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSRoomTruncate",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.filter(t.db.table(63).fetch(),function(e){return t.i64.eq(e.groupRoomType,void 0)||t.i64.eq(e.groupRoomType,t.i64.cast([0,5]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSStoriesRoomTruncateStoredProcedure",e.__tables__=["rooms"],a.exports=e}),null);
__d("LSTruncateCommunityListTable",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(166).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateCommunityListTableStoredProcedure",e.__tables__=["cm_community_list"],a.exports=e}),null);
__d("LSTruncateNotificationSettings",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.forEach(t.db.table(175).fetch(),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSOmnistoreSettingsTruncateNotificationSettingsStoredProcedure",e.__tables__=["notification_settings"],a.exports=e}),null);
__d("LSUpdateLastSyncCompletedTimestampMsToNow",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(1).fetch([[[e[0]]]]),function(e){var t=e.update,r=e.item;return t({lastSyncCompletedTimestampMs:n[0]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateLastSyncCompletedTimestampMsToNowStoredProcedure",e.__tables__=["sync_groups"],a.exports=e}),null);
__d("LSUpsertGradientColor",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(117).put({themeFbid:e[0],gradientIndex:e[1],color:e[2],type_:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertGradientColorStoredProcedure",e.__tables__=["gradient_colors"],a.exports=e}),null);
__d("LSUpsertTheme",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.neq(e[12],void 0)?n[0]=e[12]:n[0]=e[0],t.db.table(116).put({fbid:e[0],themeIdx:e[1],fallbackColor:e[2],reverseGradiantsForRadial:e[3],accessibilityLabel:e[4],iconUrl:e[5],iconUrlFallback:e[6],backgroundUrl:e[8],description:e[9],isDeprecated:e[11],normalThemeId:n[0],appColorMode:e[13],titlebarBackgroundColor:e[14],titlebarButtonTintColor:e[15],titlebarTextColor:e[16],titlebarAttributionTextColor:e[17],composerTintColor:e[18],composerUnselectedTintColor:e[19],composerInputTextPlaceholderColor:e[20],composerInputBackgroundColor:e[21],composerInputBorderColor:e[22],composerInputBorderWidth:e[23],composerBackgroundColor:e[24],messageTextColor:e[25],messageBorderColor:e[26],messageBorderWidth:e[27],incomingMessageTextColor:e[28],incomingMessageBorderColor:e[29],incomingMessageBorderWidth:e[30],deliveryReceiptColor:e[31],tertiaryTextColor:e[32],primaryButtonBackgroundColor:e[33],hotLikeColor:e[34],reactionPillBackgroundColor:e[35],secondaryTextColor:e[36],quotedIncomingMessageBubbleColor:e[37],cornerRadius:e[38],blurredComposerBackgroundColor:e[39],composerSecondaryButtonColor:e[40],composerPlaceholderTextColor:e[41]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSThreadThemeUpsertThemeStoredProcedure",e.__tables__=["thread_themes"],a.exports=e}),null);
__d("LSStaticDependencies",["LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertThread","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSPopulateCommunityFolderData","LSRemoveTask","LSReplaceOptimisticReaction","LSRoomTruncate","LSSetRegionHint","LSTaskExists","LSTruncateCommunityListTable","LSTruncateNotificationSettings","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyContactRowExists"],(function(t,n,r,o,a,i,l){"use strict";var e={deleteAllCommunityChannelCategories:r("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:r("LSDeleteAllCommunityFolders"),deleteThenInsertCmCommunityList:r("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:r("LSDeleteThenInsertContact"),deleteThenInsertMessageRequest:r("LSDeleteThenInsertMessageRequest"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:r("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertThread:r("LSDeleteThenInsertThread"),executeFinallyBlockForSyncTransaction:r("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:r("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:r("LSGroupRoomTruncate"),populateCommunityFolderData:r("LSPopulateCommunityFolderData"),removeTask:r("LSRemoveTask"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),roomTruncate:r("LSRoomTruncate"),setRegionHint:r("LSSetRegionHint"),taskExists:r("LSTaskExists"),truncateCommunityListTable:r("LSTruncateCommunityListTable"),truncateNotificationSettings:r("LSTruncateNotificationSettings"),updateLastSyncCompletedTimestampMsToNow:r("LSUpdateLastSyncCompletedTimestampMsToNow"),upsertGradientColor:r("LSUpsertGradientColor"),upsertSequenceId:r("LSUpsertSequenceId"),upsertTheme:r("LSUpsertTheme"),verifyContactRowExists:r("LSVerifyContactRowExists")},s=e;l.default=s}),98);
__d("LSStoreProjectConfiguration",["LSBase64Decode.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSBase64Decode.nop"),e[4]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.blobs.neq(r[0],void 0)?t.db.table(307).put({configId:e[1],projectName:e[0],cipherSuite:e[5],publicKey:r[0],maxEvals:e[2],redemptionLimit:e[3],expirationTimestampMs:e[6],tokenPollFrequencyMs:e[7],maxClientTokenPoolSize:e[8]}):((function(e){t.logger(e).info(e)})("issuing retry for project configurations task since public key was null"),r[1]=new t.Map,r[1].set("project_name",e[0]),r[2]=r[1].get("project_name"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTask"),["acs_credentials","_",r[2]].join(""),t.i64.cast([0,351]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsStoreProjectConfigurationStoredProcedure",e.__tables__=["secure_acs_configurations"],a.exports=e}),null);
__d("LSSyncBumpThreadDataToClient",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.ge(e[1],n.lastActivityTimestampMs)}).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(o){return t.i64.eq(a.parentThreadKey,t.i64.cast([-1,4294967286]))&&t.i64.eq(e[2],t.i64.cast([0,2]))?(r[0]=new t.Map,r[0].set("thread_fbid",e[0]),r[0].set("force_upsert",!1),r[0].set("use_open_messenger_transport",!1),r[0].set("sync_group",t.i64.cast([0,95])),r[0].set("metadata_only",!1),r[0].set("preview_only",!1),r[1]=r[0].get("thread_fbid"),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[1]),t.i64.cast([0,209]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))):t.resolve()},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1]})})},function(n){return t.i64.eq(e[2],t.i64.cast([0,1]))?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.i64.eq(e[2],t.i64.cast([0,2]))?t.resolve(0):t.i64.eq(e[2],t.i64.cast([0,3]))?t.i64.ge(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastReadWatermarkTimestampMs:e[1]})}):t.resolve():t.resolve(0)}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxSyncBumpThreadDataToClientStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSTransportHybridParticipantUpdateReceipts",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTransportHybridParticipantUpdateReceiptsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSTriggerReenrollementFromOptOutDelta",["LSArrayGetObjectAt","LSDeleteAndReenrollDeviceState","LSIsEncryptionVersionSecure"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.islc(t.filter(t.db.table(168).fetch(),function(e){return t.i64.eq(e.authorityLevel,t.i64.cast([0,80]))}),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,o){var a,i=e.done,l=e.value;return i?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,20]),void 0,void 0],r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r[16]=a[16],r[17]=a[17],a):(o=l.item,t.sequence([function(e){return r[26]=o.backupTenancy,r[25]=o.encryptionVersion,r[21]=void 0,t.i64.neq(r[21],void 0)?t.resolve(r[22]=r[21]):t.sequence([function(e){return r[27]=t.createArray(),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,0])).then(function(e){var t;return t=e,r[28]=t[0],t})},function(e){return r[28]&&(r[37]=(r[27].push(t.i64.cast([0,0])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,2])).then(function(e){var t;return t=e,r[29]=t[0],t})},function(e){return r[29]&&(r[37]=(r[27].push(t.i64.cast([0,2])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,3])).then(function(e){var t;return t=e,r[30]=t[0],t})},function(e){return r[30]&&(r[37]=(r[27].push(t.i64.cast([0,3])),r[27])),t.storedProcedure(n("LSIsEncryptionVersionSecure"),t.i64.cast([0,4])).then(function(e){var t;return t=e,r[31]=t[0],t})},function(e){return r[31]&&(r[37]=(r[27].push(t.i64.cast([0,4])),r[27])),r[32]=t.createArray(),r[33]=t.i64.of_int32(r[27].length),t.i64.gt(r[33],t.i64.cast([0,0]))?t.loopAsync(r[33],function(e){return r[37]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[27],r[37]).then(function(e){var t;return t=e,r[38]=t[0],r[39]=t[1],t})},function(e){return r[40]=(r[32].push(r[38]),r[32])}])}):t.resolve()},function(e){return t.sequence([function(e){return r[37]=t.createArray(),r[38]=t.i64.of_int32(r[32].length),t.i64.gt(r[38],t.i64.cast([0,0]))?t.loopAsync(r[38],function(e){return r[40]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[32],r[40]).then(function(e){var t;return t=e,r[41]=t[0],r[42]=t[1],t})},function(e){return r[43]=(r[37].push(t.i64.to_string(r[41])),r[37])}])}):t.resolve()},function(e){return r[39]=r[37].join(","),r[34]=r[39]}])},function(e){return r[32].some(function(e){return t.i64.eq(r[25],e)})?r[35]=r[25]:r[35]=void 0,t.i64.neq(r[35],void 0)?r[36]=r[35]:r[36]=void 0,r[22]=r[36]}])},function(e){var n;return t.i64.neq(r[22],void 0)?r[23]=r[22]:r[23]=t.i64.cast([0,0]),t.i64.neq(r[26],void 0)?r[24]=r[26]:r[24]=t.i64.cast([0,1]),n=[o.backupId,o.deviceId,o.mailboxRootKeyBlob,o.ocmfClientStateBlob,void 0,void 0,r[23],r[24],o.epochAuthPublicKeyBlob,o.epochAuthPrivateKeyBlob,o.devicePublicKeyBlob,o.devicePrivateKeyBlob,o.epochStoragePublicKeyBlob,o.epochStoragePrivateKeyBlob,o.obliviousValidationTokenBlob,o.authorityLevel,void 0,void 0],r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r[16]=n[16],r[17]=n[17]}]))})},function(o){return r[19]=!1,r[20]=t.i64.of_int32(e[1].length),t.i64.gt(r[20],t.i64.cast([0,0]))?t.loopAsync(r[20],function(o){return r[21]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[21]).then(function(e){var t;return t=e,r[22]=t[0],r[23]=t[1],t})},function(e){return r[19]=r[19]||t.i64.eq(r[22],r[1])}])}):t.resolve()},function(o){return r[19]&&t.i64.eq(e[0],r[0])&&t.i64.neq(r[1],void 0)?t.storedProcedure(n("LSDeleteAndReenrollDeviceState"),r[1],t.i64.cast([0,6])):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsTriggerReenrollementFromOptOutDeltaStoredProcedure",e.__tables__=["secure_encrypted_backups_client_state"],a.exports=e}),null);
__d("LSTruncateMetadataThreads.nop",["I64","LSIntEnum","ReQL","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=async function(n,a){if(r("gkx")("9855")){for(var t=n.mi_act_mapping_table.keys(new WeakMap);;){var i,l=await t.next();if(l.done)break;await(i=n.mi_act_mapping_table).delete.apply(i,l.value)}for(var u=o("ReQL").fromTableAscending(n.threads).filter(function(t){return t.syncGroup!=null&&(e||(e=o("I64"))).equal(t.syncGroup,(s||(s=o("LSIntEnum"))).ofNumber(95))}).iterator(new WeakMap);;){var c,d=await u.next();if(d.done)break;await(c=n.threads).delete.apply(c,d.value[0])}}return Promise.resolve()};u.__nop_name__="LSTruncateMetadataThreads",l.default=u}),98);
__d("LSTruncateMetadataThreads",["LSTruncateMetadataThreads.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(e){return t.nativeOperation(n("LSTruncateMetadataThreads.nop"))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxTruncateMetadataThreadsStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSUpdateAttachmentItemCtaAtIndex",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.i64.eq(e[5],t.i64.cast([0,0]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({defaultCtaId:e[2],defaultCtaTitle:e[3],defaultCtaType:e[4]})}):t.i64.eq(e[5],t.i64.cast([0,1]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta1Id:e[2],cta1Title:e[3],cta1Type:e[4],cta1IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,2]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta2Id:e[2],cta2Title:e[3],cta2Type:e[4],cta2IconType:void 0})}):t.i64.eq(e[5],t.i64.cast([0,3]))?t.forEach(t.db.table(18).fetch([[[e[0],e[1]]]]),function(t){var n=t.update,r=t.item;return n({attachmentCta3Id:e[2],cta3Title:e[3],cta3Type:e[4],cta3IconType:void 0})}):t.resolve((function(e){t.logger(e).warn(e)})("Unexpected CTA index"))},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateAttachmentItemCtaAtIndexStoredProcedure",e.__tables__=["attachment_items"],a.exports=e}),null);
__d("LSUpdateCommunityThreadStaleState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&([t.i64.cast([0,23]),t.i64.cast([0,21]),t.i64.cast([0,18]),t.i64.cast([0,26]),t.i64.cast([0,27])].some(function(e){return t.i64.eq(n.threadType,e)})||t.i64.eq(n.threadType,t.i64.cast([0,152])))}).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.db.table(294).fetch([[[e[0]]]]).next().then(function(n,r){var o=n.done,a=n.value;return o?t.db.table(294).add({threadKey:e[0],threadQueueSequenceId:t.i64.cast([0,0]),isStale:e[1]}):(r=a.item,t.forEach(t.db.table(294).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({isStale:e[1]})}))}))})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateCommunityThreadStaleStateStoredProcedure",e.__tables__=["threads","community_thread_sync_info"],a.exports=e}),null);
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(253).put({surfaceType:e[0],communityKey:e[1],isLoadingAfter:!1,hasMoreAfter:e[2],nextPageCursor:e[4]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure",e.__tables__=["community_surface_ranges"],a.exports=e}),null);
__d("LSUpdateReadReceipt",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[2])&&t.i64.lt(n.readWatermarkTimestampMs,e[0])}),function(n){var r=n.update,o=n.item;return r({readWatermarkTimestampMs:e[0],readActionTimestampMs:t.i64.gt(e[3],t.i64.cast([0,0]))?e[3]:o.readActionTimestampMs})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateReadReceiptStoredProcedure",e.__tables__=["participants"],a.exports=e}),null);
__d("LSUpdateThreadActivityStatus",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(o){return r[2]=new t.Map,r[2].set("thread_fbid",e[0]),r[2].set("force_upsert",!1),r[2].set("use_open_messenger_transport",!1),r[2].set("sync_group",t.i64.cast([0,104])),r[2].set("metadata_only",!1),r[2].set("preview_only",!1),r[3]=r[2].get("thread_fbid"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,209]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(o){return r[5]=t.createArray(),r[8]=(r[5].push(e[0]),r[5]),r[6]=new t.Map,r[6].set("number_of_threads",t.i64.cast([0,1])),r[6].set("event_type","issue_tpq_for_verify_threads_activity_status"),r[6].set("thread_ids",r[5]),r[7]=t.toJSON(r[6]),t.storedProcedure(n("LSIssueNewTask"),"log_community_resnapshot_event",t.i64.cast([0,576]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[0]=t.i64.cast([0,2])}]):(a=l.item,t.sequence([function(n){return t.i64.lt(a.lastActivityTimestampMs,e[1])?t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({lastActivityTimestampMs:e[1],snippet:e[2]})})},function(e){return r[2]=t.i64.cast([0,1])}]):t.resolve(r[2]=t.i64.cast([0,0]))},function(e){return r[0]=r[2]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadActivityStatusStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSShimGetServerThreadKeyFromJIDV2.nop",["ReQL","RetUtil"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table.index("jid")).getKeyRange(r));return o("RetUtil").getNullableRetResult(e==null?void 0:e.serverThreadKey)};e.__nop_name__="LSShimGetServerThreadKeyFromJIDV2",l.default=e}),98);
__d("LSReplaceOptimisticThread",["gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],n=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.le(n.authorityLevel,t.i64.cast([0,20]))}),function(n){var r=n.update,o=n.item;return r({threadKey:e[1],authorityLevel:t.i64.cast([0,40])})}):(a=l.item,t.i64.le(a.authorityLevel,t.i64.cast([0,40]))?(r("gkx")("14697")?n[2]=!1:n[2]=!0,n[1]=n[2]):n[1]=!0,n[1]?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){return e.delete()}):t.resolve())})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReplaceOptimisticThreadStoredProcedure",e.__tables__=["threads"];var s=e;l.default=s}),98);
__d("LSUpdateOptimisticContextThreadKeys",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(32).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})},function(n){return t.forEach(t.filter(t.db.table(31).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])}),function(t){var n=t.update,r=t.item;return n({threadKey:e[1]})})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateOptimisticContextThreadKeysStoredProcedure",e.__tables__=["threads_optimistic_context","messages_optimistic_context"],a.exports=e}),null);
__d("LSUpdateTaskQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({queueName:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateTaskValue",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(t){var n=t.update,r=t.item;return n({taskValue:r.taskValue.split(e[1]).join(e[2])})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreUpdateTaskValueStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMapping",["LSHybridThreadDelete","LSIssueNewTask","LSReplaceOptimisticThread","LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateOptimisticContextThreadKeys","LSUpdateTaskQueueName","LSUpdateTaskValue"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[1]=!1:(t=o.item,r[1]=!0)})},function(n){return t.filter(t.db.table(9).fetch(),function(n){return t.i64.eq(n.threadKey,e[2])}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!1:(t=o.item,r[3]=!0)})},function(o){return r[5]=t.i64.neq(r[0],void 0),r[7]=t.i64.eq(r[0],e[2])&&r[5],!r[7]&&!(t.i64.eq(r[0],e[1])&&r[5])&&r[5]&&(function(e){t.logger(e).mustfix(e)})("The mi_act_mapping row did not correspond to either the authoritative or optimistic thread key."),t.i64.neq(e[2],void 0)?r[6]=e[2]:r[6]=t.i64.cast([0,0]),r[5]?r[7]?t.sequence([function(o){return r[1]?t.sequence([function(n){return t.db.table(173).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[8]=void 0:(t=o.item,r[8]=t.jid)})},function(o){return r[10]=new t.Map,r[10].set("authoritative_thread_key",e[1]),r[10].set("jid_authoritative_mapped",r[8]),r[10].set("jid_optimistic_mapped",e[0]),r[10].set("optimistic_thread_key",e[2]),r[11]=t.toJSON(r[10]),t.storedProcedure(n("LSIssueNewTask"),"e2ee_log_incorrect_occam_mapping",t.i64.cast([0,160033]),r[11],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(r){return t.storedProcedure(n("LSHybridThreadDelete"),e[1])}]):t.resolve()},function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):r[3]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.resolve():r[3]?r[1]?t.storedProcedure(n("LSHybridThreadDelete"),r[6]):t.sequence([function(e){return t.i64.neq(r[6],void 0)?t.forEach(t.db.table(9).fetch([[[r[6]]]]),function(e){var t=e.update,n=e.item;return t({clientThreadKey:r[6]})}):t.resolve()},function(o){return t.storedProcedure(n("LSReplaceOptimisticThread"),r[6],e[1])},function(o){return t.storedProcedure(n("LSUpdateOptimisticContextThreadKeys"),r[6],e[1])}]):t.resolve()},function(o){return r[3]?t.sequence([function(o){return r[9]=t.i64.to_string(r[6]),r[8]=t.i64.to_string(e[1]),t.storedProcedure(n("LSUpdateTaskQueueName"),r[9],r[8])},function(e){return t.storedProcedure(n("LSUpdateTaskValue"),r[8],r[9],r[8])}]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingStoredProcedure",e.__tables__=["threads","mi_act_mapping_table"],a.exports=e}),null);
__d("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID",["LSShimGetServerThreadKeyFromJIDV2.nop","LSUpdateThreadAuthorityAndMapping"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.nativeOperation(n("LSShimGetServerThreadKeyFromJIDV2.nop"),e[0]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(o){return t.i64.neq(r[0],e[1])?r[1]=r[0]:r[1]=void 0,t.storedProcedure(n("LSUpdateThreadAuthorityAndMapping"),e[0],e[1],r[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateThreadAuthorityAndMappingWithOTIDFromJIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSOnSendMessageFailure.nop",["MWChatInteraction","Promise","err","justknobx","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("sendToSentQPLLogger").__setRef("LSOnSendMessageFailure.nop");function u(t,o,a,i){if(!r("justknobx")._("1414")||a==null)return(e||(e=n("Promise"))).resolve();var l=c(a);return l==null||r("promiseDone")(s.load().then(function(e){return e.markSendToSentFail(l,"send_message_server_error",r("err")("send_message_server_error: %s",i))})),(e||(e=n("Promise"))).resolve()}function c(e){var t=o("MWChatInteraction").get(o("MWChatInteraction").s2sKey(e));return t==null?null:Number(t)}u.__nop_name__="LSOnSendMessageFailure",l.default=u}),98);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return e[2]===!0?r[0]=t.i64.cast([0,5]):r[0]=t.i64.cast([0,4]),e[2]===!0?r[1]=t.i64.cast([0,5]):r[1]=t.i64.cast([0,4]),e[2]===!0?r[2]=t.i64.cast([0,5]):r[2]=t.i64.cast([0,4]),t.nativeOperation(n("LSOnSendMessageFailure.nop"),e[0],e[1])},function(n){return t.forEach(t.filter(t.db.table(12).fetch([[[e[0]]],"optimistic"]),function(n){return n.offlineThreadingId===e[0]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var t=e.update,n=e.item;return t({sendStatus:r[0],sendStatusV2:r[1]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMarkOptimisticMessageFailedStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSMarkOptimisticMessageFailed"),a.optimisticMid,a.errorMessage,a.isRetryable);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWMarkMessageSendAsFailedLSDB",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,o,a){var l;return(l=o==null?void 0:o.runInTransaction(async function(t){await r("LSMarkOptimisticMessageFailedStoredProcedure")(r("LSFactory")(t),{errorMessage:n,isRetryable:a,optimisticMid:e})},"readwrite",void 0,void 0,i.id+":29"))!=null?l:Promise.resolve()}l.markMessageSendAsFailed=e}),98);
__d("MAWCommonSetupBridge",["BroadcastChannelFallback","BrowserLockManager","CurrentAppID","CurrentUser","FBLogger","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWBridge","MAWChatJid","MAWCrossWorkerPortal","MAWCurrentUser","MAWDbMedia","MAWInit","MAWJobActionsV2","MAWMIC","MAWReportSendMessageSuccessResult","MAWThreadCutover","MAWThreadUtils","MWLogSend","ODS","Promise","QPLEvent","QPLUserFlow","WACrossWorkerPortal","WADevToolMessageChannel","WADevToolsBridge","WAExceededStorageQuota","WAJids","cr:2691","gkx","justknobx","pageID","performanceAbsoluteNow","promiseDone","requireDeferred","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=r("requireDeferred")("MAWMainThreadLogger").__setRef("MAWCommonSetupBridge"),g=new Set([25312111,25311870]),h=new Map,y=new Map([[(_=o("MAWDbMedia")).MEDIA_TYPE.IMAGE,8],[_.MEDIA_TYPE.VIDEO,10],[_.MEDIA_TYPE.GIF,6],[_.MEDIA_TYPE.STICKER,4],[_.MEDIA_TYPE.PTT,11],[_.MEDIA_TYPE.DOCUMENT_FILE,9]]),C=new Set([25312150,25313100,1056840931,25299294]),b=function(){return(p||(p=r("performanceAbsoluteNow")))()-Date.now()},v=b();function S(e,t,n){return(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return o("MAWThreadCutover").isCutoverSecureThreadFromChatJid(a,e).then(function(e){r("QPLUserFlow").addAnnotations(t,{bool:{is_cutover:e}},{instanceKey:n})})})}var R=/[^a-zA-Z0-9._-]/g,L=/[.]+/g,E=/[\s_.-]+/g;function k(e){return e.replace(E,".").replace(R,"").replace(L,".")}var I={broadcastChannelFallback:function(t){var e=t.event,n=t.namespace;o("BroadcastChannelFallback").handleBroadcastChannelFallbackMessage(n,e)},handleMessageSendResult:function(t){t.success&&o("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResult(t.report)},log:function(t){var e=t.logLevel,n=t.logString,r=t.tags,a=r.length>0,i=""+(o("CurrentAppID").getAppID()||"unknown");switch(e){case"count":(u||(u=o("ODS"))).bumpEntityKey(3185,k("e2ee."+(a?r.join("."):n)),k("count."+(a?n+"."+i:i)),1),f.onReadyImmediately(function(e){var t=e.count;return t(n,r)});return;case"log":f.onReadyImmediately(function(e){var t=e.info;return t(n,r)});return;case"warn":f.onReadyImmediately(function(e){var t=e.warn;return t(n,r)});return;case"logRestricted":f.onReadyImmediately(function(e){var t=e.logRestricted;return t(n,r)});return;case"debug":break;case"error":break;default:break}},logError:function(t){var e=t.entriesToReport,n=t.framesToPop,r=t.logString,o=t.message,a=t.stack,i=t.tags;f.onReadyImmediately(function(t){var l=t.logError;return l(r,i,o,a,n,e)})},odsBumpEntityKey:function(t){var e=t.amount,n=t.entity,r=t.key;(u||(u=o("ODS"))).bumpEntityKey(3185,n,r+"."+(o("CurrentAppID").getAppID()||"unknown"),e)},onJobFinished:function(t){switch(t.type==="createGroup"&&t.originalArgs.key!=null&&o("MAWJobActionsV2").recentFinishedJobsCache.set(t.originalArgs.key,t.result),t.type){case"sendAppData":{var e,n=t.originalArgs,a=t.result;(e=n.args.contents.actions)==null||e.forEach(function(e){var t=e.messageAction;t==null||t.type!=="delete_for_me"||a.type!=="not_sent"||h.set(a.appDataExternalId,{chatJid:t.protocolMsgId.chat,externalId:t.protocolMsgId.externalId,type:"deleteMsgForMe"})});break}}if(t.type==="sendWrittenAppData"){var i=t.originalArgs.appDataExternalId,l=h.get(i);if(h.delete(i),l!=null&&l.type==="deleteMsgForMe"&&t.result.type==="success"){var u=l.chatJid,m=l.externalId,p=o("MAWThreadUtils").getLSThreadTypeFromJid(u);r("promiseDone")((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){r("promiseDone")(o("MAWChatJid").toThreadKey(e.tables,u,"MAWCommonSetupBridge::sendWrittenAppData").then(function(t){o("MWLogSend").log(e,{actor:(c||(c=o("I64"))).of_string(o("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:25,backend:1,hasReply:!1,messagingThreadId:c.to_string(t),offlineThreadingId:m,sendType:3,source:(d||(d=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN),threadKey:t,threadType:p})}))}))}}},qplEvent:function(a){var t,i=a.action,l=a.annotations,s=a.debugInfo,u=a.error,c=a.event,d=a.instanceKey,p=a.performanceAndDateSkew,_=a.timeoutInMs,f=a.timestamp;if(!(!r("CurrentUser").isEmployee()&&g.has((m||(m=o("QPLEvent"))).getMarkerId(c)))){var h=d||0,y=l==null||(t=l.string)==null?void 0:t.jid,R=y!=null?o("WAJids").validateChatJid(y):void 0,L=C.has((m||(m=o("QPLEvent"))).getMarkerId(c))&&R!=null?S(R,c,h):(e||(e=n("Promise"))).resolve(),E=f!=null&&p!=null&&r("gkx")("8334")?f+p-v+b():f;switch(i.type){case"start":r("QPLUserFlow").start(c,{annotations:babelHelpers.extends({},l||{},{bool:babelHelpers.extends({},(l==null?void 0:l.bool)||{},{isArmadilloPublicLaunchUser:r("gkx")("23405"),isDev:0,isGifSearchEnbled:!0,isLockApiSupported:r("BrowserLockManager")!=null,isRestoreDBEnabled:r("gkx")("23906"),isTlcPublicUser:o("MAWCurrentUser").isTlcPublicUser(),s_pdb:r("gkx")("8483"),useSharedWorker:o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()})}),instanceKey:h,timeoutInMs:_,timestamp:E});break;case"success":{r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endSuccess(c,{annotations:l,instanceKey:h,timestamp:E})});break}case"cancel":{r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endCancel(c,{annotations:l,cancelReason:i.cancelReason,instanceKey:h,timestamp:E})});break}case"point":l&&r("QPLUserFlow").addAnnotations(c,l,{instanceKey:h}),(m||(m=o("QPLEvent"))).getMarkerId(c)===1056839232?o("MAWMIC").addPoint(i.name,E):r("QPLUserFlow").addPoint(c,i.name,{instanceKey:h,timestamp:E});break;case"annotations":r("QPLUserFlow").addAnnotations(c,l!=null?l:{},{instanceKey:h});break;case"failure":r("QPLUserFlow").addAnnotations(c,{bool:{exceededStorageQuota:o("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0},string:{failureReason:i.name}},{instanceKey:h}),L.finally(function(){r("QPLUserFlow").endFailure(c,i.name,{annotations:l,instanceKey:h,timestamp:E})});break;case"error":r("QPLUserFlow").markError(c,i.name,{debugInfo:s,error:u,instanceKey:h});break;default:throw r("FBLogger")("messenger_web").mustfixThrow("Bridge sends unreachable qplEvent action type")}}}},T=function(t,n){return t.push(n),t},D=function(t){var e=t.customizeEventHandlers,a=t.worker;o("MAWInit").MAWInit.logPoint("bridge_setup_start");var i=o("MAWBridge").getBridge();i.setHandlers("event",babelHelpers.extends({},I,e));var l=o("MAWCrossWorkerPortal").getOrCreateCrossWorkerPortal(i,["backend","kt","mps","waapi","ebsmapi"],T,{bridgeBatcherMaxTokens:Number.MAX_SAFE_INTEGER,portalCacheSize:r("justknobx")._("3092")});if(l.setPort(a),r("gkx")("3282")){var s=o("WADevToolsBridge").getDevToolBridge(),u=new MessageChannel,c=o("WACrossWorkerPortal").attachPortal(s,["backend"],T,r("pageID")),d=o("WACrossWorkerPortal").attachPortal(s,["devtool","mawDbDevTool"],T,r("pageID"));o("WADevToolMessageChannel").onCreateNewChannel(function(e){c.setPort(e.port1)}),d.setPort(u.port1),n("cr:2691")==null||n("cr:2691").connectAddonPort(u.port2),l.addListener(function(e,t){return s.fireAndForget("devtool","bridgeMessage",{direction:t==="outgoing"?"toWorker":"toMain",msg:e,ts:Date.now()},!0)})}return o("MAWMIC").addPoint("bridge_setup_done"),o("MAWInit").MAWInit.logPoint("bridge_setup_end"),i};l.MEDIA_TYPE_TO_ATTACHMENT_TYPE=y,l.initBridge=D}),98);
__d("MAWGetAttachmentTypeForSendWrittenMsg",["MAWCommonSetupBridge"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l,s){if(a)return 43;if(e==="revokeMsg")return 26;if(i!=null)return i;if(n)return 3;if(r&&l===!1||s===!0)return 13;var u=t!=null?o("MAWCommonSetupBridge").MEDIA_TYPE_TO_ATTACHMENT_TYPE.get(t):null;return u!=null?u:0}l.getAttachmentTypeForSendWrittenMsg=e}),98);
__d("MAWReportSendMessageSuccessResult",["BrowserLockManager","I64","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadAttributionType","MAWChatJid","MAWCurrentUser","MAWFrontendMediaUtils","MAWGetAttachmentTypeForSendWrittenMsg","MAWThreadUtils","MAWVault","MAWXMAUtils","MWLogSend","MultipleTabsLogger","URLMatcher","getErrorSafe","justknobx","promiseDone","shouldUseMAWSharedWorker"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;async function c(e,t){try{var n=await o("MAWChatJid").toThreadKey(e.tables,t,"MAWCommonSetupBridge::sendWrittenMsg");return n}catch(e){throw r("getErrorSafe")(e)}}function d(t,n){var a,i=t.externalId,l=null,d=!1,m=!1;switch(t.messageType){case"editMsg":d=!0;break;case"revokeMsg":i=t.referencedExternalId;break;case"sendMsg":m=t.specialTextSize!=null;break;case"reactionMsg":l=t.reaction!=null?20:27;break;case"bumpMsg":break;case"noteReplyMsg":break;case"sendPoll":break;case"fixMe":return;default:t.messageType}var p=null;t.fileType!=null&&(p=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(t.fileType).mediaType);var _=t.xmaMessageType!=null,f=t.quote!=null||o("MAWXMAUtils").isXMAStoryReply(t.xmaMessageType),g=r("URLMatcher").match(o("MAWVault").unvault((a=t.content)!=null?a:"")),h=g!=null&&g.length>0,y=o("MAWGetAttachmentTypeForSendWrittenMsg").getAttachmentTypeForSendWrittenMsg(t.messageType,p,m,_,d,l,f,h),C=o("MAWThreadUtils").getLSThreadTypeFromJid(t.chatJid);r("promiseDone")((e||(e=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(async function(e){var a,l=(t==null?void 0:t.source)!=null?t.source:(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN),d=await c(e,t.chatJid);o("MWLogSend").log(e,{actor:(u||(u=o("I64"))).of_string(o("MAWCurrentUser").getID()),attachmentFbids:[],attachmentType:y,backend:1,hasReply:f,initatingSource:t==null?void 0:t.initiatingSource,messageSendDataclass:n,messagingThreadId:u.to_string(d),msgTtl:(a=t.ephemeralSetting)==null?void 0:a.ephemeralExpirationInSec,offlineThreadingId:i,sendType:1,source:l,threadKey:d,threadType:C,waGroupJid:void 0})}))}function m(e){r("justknobx")._("154")&&o("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()&&r("BrowserLockManager")!=null&&!o("MultipleTabsLogger").hasUniqueLock()||d(e)}l.reportSendMessageSuccessResultFn=d,l.reportSendMessageSuccessResult=m}),98);
__d("MAWMessageSendReporter",["FBLogger","MAWMarkMessageSendAsFailedLSDB","MAWReportSendMessageSuccessResult","MAWSetupWorkerAuxStateForLogging","MWLogSendToSentFailedError","QPLUserFlow","WAGetSafeQPLError","getErrorSafe","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,a,i){var l=n.qplEventType,u=n.qplInstanceKey;try{var c=await t;if(c==null)return;if(c.success)c.value!=null?o("MAWReportSendMessageSuccessResult").reportSendMessageSuccessResultFn(c.value,i):r("QPLUserFlow").addPoint(l,"no-op",{instanceKey:u}),r("QPLUserFlow").endSuccess(l,{instanceKey:u});else{var d,m,p,_=c.error.isRetriable===!0;r("MWLogSendToSentFailedError")({qplEventType:l,qplInstanceKey:u},c.error.type,void 0,c.error.errorCode,c.error.applicationErrorCode),r("QPLUserFlow").endFailure(l,c.error.type,{annotations:{bool:{isRetriable:(d=c.error.isRetriable)!=null?d:!1,workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},int:{errorCode:(m=c.error.errorCode)!=null?m:0},string:{details:(p=c.error.details)!=null?p:""},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:u}),s(e,_,a)}}catch(t){var f=r("getErrorSafe")(t);if(r("MWLogSendToSentFailedError")({qplEventType:l,qplInstanceKey:u},"runtime-failure",f),r("QPLUserFlow").endFailure(l,"runtime-failure",{annotations:{bool:{workerTerminatedPermanently:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:o("WAGetSafeQPLError").getSafeQPLErrorMessage(f)},string_array:{worker_restart_msgs:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:o("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:u}),s(e,!1,a,f),r("FBLogger")("messenger_web").catching(f).mustfix("MAWMessageSendReporter"),r("justknobx")._("4010")&&typeof f=="object"){var g=String(f==null?void 0:f.message),h=String(f==null?void 0:f.messageParams),y=String(f==null?void 0:f.stack);r("FBLogger")("messenger_web").mustfix("Failed to send, e: %s. error params: %s. call stack: %s",g,h,y)}}}function s(e,t,n,a){if(e!=null){var i=e.chatJid,l=e.externalId;r("promiseDone")(o("MAWMarkMessageSendAsFailedLSDB").markMessageSendAsFailed(l,i,o("WAGetSafeQPLError").getSafeQPLErrorMessage(a),n,t))}}l.MAWMessageSendReporter=e}),98);
__d("LSUpdateDisappearingSettingInClientThreadsTable.nop",["I64","LSMessagingThreadAttributionType","MAWBridgeFireAndForget","MAWBridgeSendAndReceive","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","MAWJids","MAWMessageSendReporter","MAWMiActOnActThreadReady","ReQL","WATimeUtils","promiseDone","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=async function(n,a,i){var t=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.threads).getKeyRange(i));if(t!=null)return o("MAWMiActOnActThreadReady").onActThreadReady(n,i,"LSUpdateDisappearingSettingInClientThreadsTable.nop",function(n,a){var i,l,s={ephemeralExpirationInSec:(e||(e=o("I64"))).to_int32((i=t.disappearingSettingTtl)!=null?i:(e||(e=o("I64"))).zero),ephemeralLastUpdatedOrSetTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(e.to_float((l=t.disappearingSettingUpdatedTs)!=null?l:(e||(e=o("I64"))).zero))};if(o("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingCache",{jid:a,settings:s}),t.disappearingSettingUpdatedBy!=null){var u=(e||(e=o("I64"))).to_string(t.disappearingSettingUpdatedBy),c=u===r("MAWEphemeralMsgAutoResetSystemId");if(u===o("MAWCurrentUser").getID()||c){var d=function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","setEphemeralSettingsFromFrontend",{chatJid:a,ephemeralExpirationInSec:s.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:s.ephemeralLastUpdatedOrSetTimestamp,isEphemeralSettingReset:c,s2sInstanceKey:t})},m=o("sendToSentQPLLogger").markSendToSentStartWithAnnotation(t,{isEphemeralSetting:!0},r("LSMessagingThreadAttributionType").UNKNOWN);r("promiseDone")(o("MAWMessageSendReporter").MAWMessageSendReporter(null,d(m),{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:m}))}else o("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingsFromMI",{author:o("MAWJids").toUserJid(u),chatJid:a,ephemeralExpirationInSec:s.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:s.ephemeralLastUpdatedOrSetTimestamp,fromWAI:!1,isEphemeralSettingReset:!1,serverTs:s.ephemeralLastUpdatedOrSetTimestamp})}return Promise.resolve()})};s.__nop_name__="LSInsertAdminMessageInClientMessages",l.default=s}),98);
__d("LSUpdateThreadDisappearingSetting",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSUpdateDisappearingSettingInClientThreadsTable.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("ephemerality_type",void 0),t.i64.neq(e[1],void 0)?r[1]=t.i64.to_string(e[1]):r[1]=void 0,r[0].set("ephemeral_options_duration_in_sec",r[1]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,o){var a=e.done,i=e.value;return a?r[2]=void 0:(o=i.item,t.sequence([function(e){return r[8]=o.metadata,r[8]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[8]).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return r[10]=new t.Map,r[11]=r[9].keys(),r[12]=t.i64.of_int32(r[11].length),t.i64.gt(r[12],t.i64.cast([0,0]))?t.loopAsync(r[12],function(e){return r[13]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[11],r[13]).then(function(e){var t;return t=e,r[14]=t[0],r[15]=t[1],t})},function(e){return r[16]=r[9].get(r[14]),r[10].set(r[14],r[16])}])}):t.resolve()},function(e){return r[7]=r[10]}]):t.resolve((r[9]=new t.Map,r[7]=r[9]))},function(e){return r[2]=r[7]}]))})},function(n){return r[2]?r[4]=!1:r[4]=!0,r[4]||r[2].set("message_ephemerality_setting",r[0]),r[2]?r[5]=!1:r[5]=!0,r[5]?r[6]=void 0:(r[7]=t.toJSON(r[2]),r[6]=r[7]),t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.syncGroup,t.i64.cast([0,95]))}),function(t){var n=t.update,o=t.item;return n({disappearingSettingTtl:e[1],disappearingSettingUpdatedTs:e[2],disappearingSettingUpdatedBy:e[3],metadata:r[6]})})},function(r){return t.nativeOperation(n("LSUpdateDisappearingSettingInClientThreadsTable.nop"),e[0])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadDisappearingSettingStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadNullState",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({threadPictureUrl:e[1],threadPictureUrlFallback:e[2],threadPictureUrlExpirationTimestampMs:e[3],nullstateDescriptionText1:e[5],nullstateDescriptionType1:e[10],nullstateDescriptionText2:e[6],nullstateDescriptionType2:e[11],nullstateDescriptionText3:e[7],nullstateDescriptionType3:e[12],capabilities:e[15],threadName:e[16],threadSubtype:e[4]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadNullStateStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpsertContextualProfileV1",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.i64.eq(e[5],t.i64.cast([0,0]))?n[0]=void 0:n[0]=e[5],t.db.table(216).put({ownerId:e[0],associatedEntityId:e[1],profilePictureUrl:e[2],profilePictureFallbackUrl:e[4],profilePictureUrlExpirationTimestampMs:n[0],profileName:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSContactUpsertContextualProfileV1StoredProcedure",e.__tables__=["contextual_profile_v1"],a.exports=e}),null);
__d("LSVoprfComputeSharedSecret.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),i=e.voprfInstance,l=i.voprfInfo,s=i.voprfWasm;try{var u=s.clientFinalize(l,new Uint8Array(r),new Uint8Array(a));return Promise.resolve([u.finalEvaluation.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(i)}};e.__nop_name__="LSVoprfComputeSharedSecret",l.default=e}),98);
__d("LSVoprfUnblind.nop",["XPlatReactVoprf"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,r,a,i,l,s,u){var e=await o("XPlatReactVoprf").loadXPlatReactVoprf(),c=e.voprfInstance,d=c.voprfInfo,m=c.voprfWasm;try{var p=m.verifiableUnblind(d,new Uint8Array(s),new Uint8Array(u),new Uint8Array(a),new Uint8Array(l),new Uint8Array(i),new Uint8Array(r),!0);return Promise.resolve([p.unblindedElement.buffer])}catch(e){throw e}finally{o("XPlatReactVoprf").freeVoprfInstance(c)}};e.__nop_name__="LSVoprfUnblind",l.default=e}),98);
__d("LSVerifyAndSaveNewCredentials",["LSArrayGetObjectAt","LSBase64Decode.nop","LSRemoveBlindedTokens","LSVoprfComputeSharedSecret.nop","LSVoprfUnblind.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(307).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?(r[1]=t.createArray(),r[2]=(r[1].push("No valid config found when saving signed credentials for project: "),r[1]),r[3]=(r[1].push("unknown"),r[1]),r[4]=t.toJSON(r[1]),(function(e){t.logger(e).mustfix(e)})(r[4])):(a=l.item,t.sequence([function(o){return r[1]=t.i64.of_int32(e[1].length),t.i64.gt(r[1],t.i64.cast([0,0]))?t.loopAsync(r[1],function(o){return r[2]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[2]).then(function(e){var t;return t=e,r[3]=t[0],r[4]=t[1],t})},function(e){return r[5]=r[3].get("token_id"),t.db.table(308).fetch([[[r[5]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(o=[t.blob(""),t.blob(""),t.blob("")],r[6]=o[0],r[7]=o[1],r[8]=o[2],o):(n=l.item,a=[n.nonce,n.blindedNonce,n.blindingFactor],r[6]=a[0],r[7]=a[1],r[8]=a[2])})},function(e){return t.forEach(t.db.table(308).fetch([[[r[5]]]]),function(e){return e.delete()})},function(e){return r[10]=r[3].get("signed_nonce"),t.nativeOperation(n("LSBase64Decode.nop"),r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return r[12]=r[3].get("proof_c"),t.nativeOperation(n("LSBase64Decode.nop"),r[12]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(e){return r[14]=r[3].get("proof_s"),t.nativeOperation(n("LSBase64Decode.nop"),r[14]).then(function(e){var t;return t=e,r[15]=t[0],t})},function(e){return t.nativeOperation(n("LSVoprfUnblind.nop"),a.publicKey,r[8],r[7],r[11]==null?t.blob(""):r[11],r[13]==null?t.blob(""):r[13],r[15]==null?t.blob(""):r[15]).then(function(e){var t;return t=e,r[16]=t[0],t})},function(o){return t.blobs.neq(r[16],void 0)?t.sequence([function(e){return t.nativeOperation(n("LSVoprfComputeSharedSecret.nop"),r[6],r[16]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(n){return t.blobs.neq(r[17],void 0)?t.db.table(309).add({tokenId:r[5],configId:e[0],nonce:r[6],redeemLimit:a.redemptionLimit,sharedSecret:r[17]}):t.resolve()}]):t.resolve()}])}):t.resolve()},function(r){return t.storedProcedure(n("LSRemoveBlindedTokens"),e[0])}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSAnonymousCredentialsVerifyAndSaveNewCredentialsStoredProcedure",e.__tables__=["secure_acs_configurations","secure_acs_blinded_tokens","secure_acs_tokens"],a.exports=e}),null);
__d("LSVerifyCommunityFolderExistsV2",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return e[1]?t.resolve(r[0]=e[1]):t.sequence([function(n){return t.db.table(162).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=!0:(n=a.item,t.sequence([function(e){return t.db.table(9).fetch([[[n.folderId]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=!0:(t=o.item,r[3]=!1)})},function(e){return r[1]=r[3]}]))})},function(e){return r[0]=r[1]}])},function(o){return r[0]?(r[1]=new t.Map,r[1].set("folder_id",e[0]),r[2]=r[1].get("folder_id"),r[3]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),t.i64.to_string(r[2]),t.i64.cast([0,813]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyCommunityFolderExistsV2StoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSExpandedStaticDependencies",["LSAddParticipantIdToGroupThread","LSCheckAuthoritativeMessageExists","LSClearPinnedMessages","LSCompleteThreadCutover","LSDeleteBanner","LSDeleteBannersByIds","LSDeleteExistingMessageRanges","LSDeleteRowRichStatusCustomAudience","LSDeleteThenInsertAvatarFeatureConfig","LSDeleteThenInsertBotProfileInfoV2","LSDeleteThenInsertCmChannelList","LSDeleteThenInsertCommunityUnjoinedThread","LSDeleteThenInsertRankingRequest","LSDeleteThenInsertRankingScore","LSFillDeanonCacheForE2EEThread","LSGetFirstAvailableAttachmentCTAID","LSHybridThreadDelete","LSInsertAttachmentCta","LSInsertAttachmentItem","LSInsertBlobAttachment","LSInsertNewMessageRange","LSIssueFetchThreadCapabilitiesTask","LSIssueInsertPersistentMenuItemsForThreadTask","LSIssueNextSync","LSMailboxTaskCompletionApiOnTaskCompletion","LSMarkThreadReadV2","LSReplaceOptimisticReaction","LSSetForwardScore","LSSetMessageDisplayedContentTypes","LSStaticDependencies","LSStoreProjectConfiguration","LSSyncBumpThreadDataToClient","LSTransportHybridParticipantUpdateReceipts","LSTriggerReenrollementFromOptOutDelta","LSTruncateMetadataThreads","LSTruncateTablesForSyncGroup","LSUpdateAttachmentItemCtaAtIndex","LSUpdateCommunityThreadStaleState","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertOhaiGatewayKeyConfigs","LSUpdateOrInsertThread","LSUpdateReadReceipt","LSUpdateThreadActivityStatus","LSUpdateThreadAuthorityAndMappingWithOTIDFromJID","LSUpdateThreadDisappearingSetting","LSUpdateThreadNullState","LSUpdateThreadsRangesV2","LSUpsertContextualProfileV1","LSUpsertFolderSeenTimestamp","LSUpsertInboxThreadsRange","LSUpsertMessage","LSUpsertReaction","LSUpsertSyncGroupThreadsRange","LSVerifyAndSaveNewCredentials","LSVerifyCommunityFolderExistsV2","LSVerifyE2EEMetadataThreadExistsV2","LSWriteThreadCapabilities"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("LSStaticDependencies"),{LSVerifyCommunityFolderExistsV2:r("LSVerifyCommunityFolderExistsV2"),addParticipantIdToGroupThread:r("LSAddParticipantIdToGroupThread"),checkAuthoritativeMessageExists:r("LSCheckAuthoritativeMessageExists"),clearPinnedMessages:r("LSClearPinnedMessages"),completeThreadCutover:r("LSCompleteThreadCutover"),deleteBanner:r("LSDeleteBanner"),deleteBannersByIds:r("LSDeleteBannersByIds"),deleteExistingMessageRanges:r("LSDeleteExistingMessageRanges"),deleteRowRichStatusCustomAudience:r("LSDeleteRowRichStatusCustomAudience"),deleteThenInsertAvatarFeatureConfig:r("LSDeleteThenInsertAvatarFeatureConfig"),deleteThenInsertBotProfileInfoV2:r("LSDeleteThenInsertBotProfileInfoV2"),deleteThenInsertCmChannelList:r("LSDeleteThenInsertCmChannelList"),deleteThenInsertCommunityUnjoinedThread:r("LSDeleteThenInsertCommunityUnjoinedThread"),deleteThenInsertRankingRequest:r("LSDeleteThenInsertRankingRequest"),deleteThenInsertRankingScore:r("LSDeleteThenInsertRankingScore"),fillDeanonCacheForE2EEThread:r("LSFillDeanonCacheForE2EEThread"),getFirstAvailableAttachmentCTAID:r("LSGetFirstAvailableAttachmentCTAID"),hybridThreadDelete:r("LSHybridThreadDelete"),insertAttachmentCta:r("LSInsertAttachmentCta"),insertAttachmentItem:r("LSInsertAttachmentItem"),insertBlobAttachment:r("LSInsertBlobAttachment"),insertNewMessageRange:r("LSInsertNewMessageRange"),issueFetchThreadCapabilitiesTask:r("LSIssueFetchThreadCapabilitiesTask"),issueInsertPersistentMenuItemsForThreadTask:r("LSIssueInsertPersistentMenuItemsForThreadTask"),issueNextSync:r("LSIssueNextSync"),mailboxTaskCompletionApiOnTaskCompletion:r("LSMailboxTaskCompletionApiOnTaskCompletion"),markThreadReadV2:r("LSMarkThreadReadV2"),replaceOptimisticReaction:r("LSReplaceOptimisticReaction"),setForwardScore:r("LSSetForwardScore"),setMessageDisplayedContentTypes:r("LSSetMessageDisplayedContentTypes"),storeProjectConfiguration:r("LSStoreProjectConfiguration"),syncBumpThreadDataToClient:r("LSSyncBumpThreadDataToClient"),transportHybridParticipantUpdateReceipts:r("LSTransportHybridParticipantUpdateReceipts"),triggerReenrollementFromOptOutDelta:r("LSTriggerReenrollementFromOptOutDelta"),truncateMetadataThreads:r("LSTruncateMetadataThreads"),truncateTablesForSyncGroup:r("LSTruncateTablesForSyncGroup"),updateAttachmentItemCtaAtIndex:r("LSUpdateAttachmentItemCtaAtIndex"),updateCommunityThreadStaleState:r("LSUpdateCommunityThreadStaleState"),updateOrInsertCommunitySurfaceRange:r("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertOhaiGatewayKeyConfigs:r("LSUpdateOrInsertOhaiGatewayKeyConfigs"),updateOrInsertThread:r("LSUpdateOrInsertThread"),updateReadReceipt:r("LSUpdateReadReceipt"),updateThreadActivityStatus:r("LSUpdateThreadActivityStatus"),updateThreadAuthorityAndMappingWithOTIDFromJID:r("LSUpdateThreadAuthorityAndMappingWithOTIDFromJID"),updateThreadDisappearingSetting:r("LSUpdateThreadDisappearingSetting"),updateThreadNullState:r("LSUpdateThreadNullState"),updateThreadsRangesV2:r("LSUpdateThreadsRangesV2"),upsertContextualProfileV1:r("LSUpsertContextualProfileV1"),upsertFolderSeenTimestamp:r("LSUpsertFolderSeenTimestamp"),upsertInboxThreadsRange:r("LSUpsertInboxThreadsRange"),upsertMessage:r("LSUpsertMessage"),upsertReaction:r("LSUpsertReaction"),upsertSyncGroupThreadsRange:r("LSUpsertSyncGroupThreadsRange"),verifyAndSaveNewCredentials:r("LSVerifyAndSaveNewCredentials"),verifyE2EEMetadataThreadExistsV2:r("LSVerifyE2EEMetadataThreadExistsV2"),writeThreadCapabilities:r("LSWriteThreadCapabilities")}),s=e;l.default=s}),98);/*FB_PKG_DELIM*/
__d("LSMessagingThreadAttributionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET:65550,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET_QP:65551,MESSENGER_INBOX_META_AI_FAB:65552,MESSENGER_INBOX_META_AI_LONG_PRESS_MENU:65553,MESSENGER_INBOX_PINNED_THREAD:65554,MESSENGER_INBOX_PEOPLE_YOU_MAY_MESSAGE:65555,MESSENGER_INBOX_META_AI_INVOCATION:65556,MESSENGER_INBOX_FOLLOWUP_SENDER:65557,MESSENGER_INBOX_FOLLOWUP_RECEIVER:65558,MESSENGER_INBOX_DRAFT_MESSAGE:65559,MESSENGER_INBOX_META_AI_DIGEST:65560,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_DONUT:131082,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_AIRPLANE_SEND:131083,MESSENGER_UNIVERSAL_SEARCH_META_AI_SEARCH_RESULT:131084,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_SNIPPET:131085,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND_SNIPPET:131086,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET:131087,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET_PILL:131088,MESSENGER_UNIVERSAL_SEARCH_AI_DISCOVERY_MODULE:131089,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED_WITH_SNIPPET:131090,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_META_AI_FAB:262150,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,MESSENGER_NOTIFICATION_JEWEL_NOTIF_PUSH_UPSELL:524292,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_OPTIMISTIC_LTV:589829,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_LEAD_GEN:589830,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PAGE_PAGES_HOME_FRIENDS_DIALOG:786440,FB_PAGE_PAGES_PRIVATE_REPLY:786441,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_PROFILE_MUTUAL_FRIENDS_DIALOG:851974,FB_PROFILE_DIRECTORY_MESSENGER_MESSAGE_BLOKS_URL:851975,FB_PROFILE_PROFILE_DIRECTORY_MESSAGE_BUTTON:851976,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,FB_SEARCH_SERP_PROMPT_SUGGESTIONS:917519,FB_SEARCH_AI_DISCOVERY_MODULE:917520,FB_SEARCH_TYPEAHEAD_AI_SHORTCUT:917521,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_GENERIC:1245191,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_WITH_PROMPT:1245192,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_GENERIC:1245193,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_WITH_PROMPT:1245194,MARKETPLACE_META_AI_FAB:1245195,MARKETPLACE_ASSISTANT:1245196,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,FB_STORY_NOTES:1310732,FB_STORY_TRY_META_AI_STICKER:1310733,FB_STORY_CHALLENGES_NOMINATION:1310734,FB_STORY_NOTES_STORY_VIEWER:1310735,FB_STORY_STORIES_PAGE_STORY_ADMIN_CONVERSATIONS:1310736,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_FEED_META_AI_FAB:1572885,FB_FEED_META_AI_ADS_CAMPAIGN:1572886,FB_FEED_META_AI_ANSWERSHEET:1572887,FB_FEED_META_AI_BOOKMARK:1572888,FB_FEED_META_AI_FAB_COMMENTS_SUMMARY:1572889,FB_FEED_META_AI_FAB_CONTEXTUAL:1572890,FB_FEED_FEED_POLL:1572891,FB_FEED_BIZ_VOICE_AGENT:1572892,FB_FEED_MESSAGE_CREATOR_OF_POST:1572893,FB_FEED_HORIZON_WORLD_INVITE_FRIENDS:1572894,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_CHAT_NOTE_POPOVER:1966084,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,JEWEL_META_AI_FAB:2097157,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,MESSENGER_COMMUNITY_MESSAGING_CHANNEL_CREATION_NOTIFICATION:2293763,MESSENGER_COMMUNITY_MESSAGING_FRIEND_JOINED_COMMUNITY_CHAT_NOTIFICATION:2293764,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG:2293765,MESSENGER_COMMUNITY_MESSAGING_META_AI_FAB:2293766,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MESSAGING_INBOX_IN_BLUE_PREVIEW_SHEET:2490389,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,SHARESHEET_BROADCAST_CHANNEL:2883587,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,FB_GROUPS_NOTIFICATION_MESSAGING_IN_BLUE_DIRECT_MESSAGE:3211275,FB_GROUPS_UGC:3211276,FB_GROUPS_UGC_POST:3211277,FB_GROUPS_UGC_MALL_PLINK:3211278,FB_GROUPS_UGC_MALL_NUX:3211279,FB_GROUPS_UGC_ADMIN_TESTING:3211280,FB_GROUPS_UGC_INTRO_POST:3211281,FB_GROUPS_UGC_QP:3211282,FB_GROUPS_UGC_DEEP_DIVE_GET_ANSWER_PILL:3211283,FB_GROUPS_UGC_DEEP_DIVE_PILL:3211284,FB_GROUPS_UGC_FAB:3211285,FB_GROUPS_UGC_REMINDER_NOTIF:3211286,FB_GROUPS_UGC_COMMENT_RESPONSE_UPSELL:3211287,FB_GROUPS_UGC_CONTEXTUAL_PROFILE:3211288,FB_GROUPS_UGC_DEEP_DIVE_ASK_SOMETHING_ELSE:3211289,FB_GROUPS_UGC_CONTEXTUAL_CARD_ASK_SOMETHING_ELSE:3211290,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,READ_ONLY_CUTOVER_THREAD_THREAD_DETAIL:3473410,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,FB_SHORTS_REACTIONS_OVERLAY:3604483,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,MESSENGER_GROWTH_MESSAGE_REQUEST_JEWEL:3866626,MESSENGER_GROWTH_FRIENDLY_FEED_ACTIVE_NOW:3866627,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,HIGHLIGHTS_TAB_META_AI_BIRTHDAY:4587539,HIGHLIGHTS_TAB_QUICK_REACT_CONNECTED_CHAT:4587540,HIGHLIGHTS_TAB_QUICK_REACT_LOCAL_EVENT:4587541,HIGHLIGHTS_TAB_QUICK_REACT_FRIENDS_UPDATE:4587542,HIGHLIGHTS_TAB_QUICK_REACT_BIRTHDAY:4587543,HIGHLIGHTS_TAB_QUICK_REACT_STORIES:4587544,HIGHLIGHTS_TAB_QUICK_REACT_NOTE:4587545,HIGHLIGHTS_TAB_QUICK_REACT_LIFE_EVENT:4587546,HIGHLIGHTS_TAB_META_AI_FAB:4587547,HIGHLIGHTS_TAB_FEED_INLINE_CHAT_WITH_FRIENDS:4587548,HIGHLIGHTS_TAB_THREAD_VIEW_CHAT_WITH_FRIENDS:4587549,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_LOCAL_EVENT:4587550,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FRIENDS_UPDATE:4587551,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_NOTE:4587552,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_CHAT_WITH_FRIENDS:4587553,HIGHLIGHTS_TAB_FB_POST_MEMORIES_SHARE_SHEET:4587554,HIGHLIGHTS_TAB_FEED_INLINE_FB_POST_MEMORIES:4587555,HIGHLIGHTS_TAB_THREAD_VIEW_FB_POST_MEMORIES:4587556,HIGHLIGHTS_TAB_QUICK_REACT_FB_POST_MEMORIES:4587557,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FB_POST_MEMORIES:4587558,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_QP:5177359,FBLITE_MESSAGING_META_AI_PROFILE_SHARE:5177360,FBLITE_MESSAGING_IMAGE_VIEWER_REPLY_COMPOSER:5177361,FBLITE_MESSAGING_META_AI_BOOKMARK:5177362,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_MESSAGING_NOTIFICATION_REPLY_REMINDER_NOTIFICATION:5242883,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,FBLITE_INBOX_INBOX_FOLLOWUP:5308421,FBLITE_INBOX_THREAD_WITH_DRAFT_MESSAGE:5308422,FBLITE_INBOX_META_AI_FAB:5308423,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744,MARKETPLACE_PDP:6881280,QR_CODE:6946816,WRITE_WITH_AI:7012352,AI_HOME_CHAT_WITH_AI:7077888,AI_HOME_INBOX_QP:7143424,AI_AGENT_MESSAGE_SHARE:7208960,AI_HOME_FROM_THREAD:7274496,AI_HOME_FROM_THREAD_DETAIL:7274497,AI_HOME_FROM_THREAD_HEADER:7274498,AI_HOME_FROM_THREAD_META_AI_THREAD_DETAIL:7274499,AI_HOME_FROM_THREAD_META_AI_THREAD_HEADER:7274500,AI_HOME_FROM_FOLDER_LIST:7340032,AI_HOME_FROM_FB_BOOKMARK:7405568,FB_FANDOM:7471104,AI_HOME_INBOX_RETENTION_QP:7536640,MEMORIES_INBOX_TRAY:7602176,MESSENGER_VOICEMAIL:7667712,AI_UGC_FB_FEED_QP:7733248,MESSENGER_INBOX_IP_QP:7798784,COMMUNITY_GROUP_CHAT_UPGRADES_INVITE:7864320,MESSENGER_SECRET_CONVERSATIONS:7929856,MESSENGER_SECRET_CONVERSATIONS_SECRET_CONVERSATIONS_FOLDER:7929857,CROSS_CUSTOMER_SUPPORT:7995392,CROSS_CUSTOMER_SUPPORT_FB_HELP_CENTER_META_AI_CARD:7995393,AI_LOOKUP:8060928,PINNED_MESSAGES_THREAD_DETAILS:8126464,CM_MEMBER_REPORTS_BLOKS:8192e3,MEMORIES_TEMPLATE:8257536,FB_TREP_UGC_CREATION:8323072,MESSENGER_STORIES_TAB:8388608,MESSENGER_STORIES_TAB_META_AI_FAB:8388609,META_AI_ENTITY_DETECTION:8454144,AI_HOME_FROM_AI_STUDIO_TAB:8519680,QR_CODE_LINK:8585216,META_AI_PROMPT_SHEET:8650752,UGC_BOT_IMMERSIVE_THREAD:8716288,UGC_BOT_IMMERSIVE_THREAD_AI_STUDIO_TAB:8716289,UGC_BOT_IMMERSIVE_THREAD_INBOX:8716290,UGC_BOT_IMMERSIVE_THREAD_AI_HOME:8716291,IGD_WEB_CHAT_TAB:8781824,IGD_WEB_CHAT_TAB_IN_THREAD:8781825,IGD_WEB_CHAT_TAB_NOTIFICATION:8781826,FB_PYMK_FEED_MESSAGE_BUTTON:8847360,MSGR_UGC_IMMERSIVE_THREAD:8912896,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB:8912897,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB:8912898,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB:8912899,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB_AI_HOME:8912900,MSGR_UGC_IMMERSIVE_THREAD_COMPOSER_AI_HOME:8912901,MSGR_UGC_IMMERSIVE_THREAD_INBOX:8912902,MSGR_UGC_IMMERSIVE_THREAD_ACTIVE_NOW:8912903,MSGR_UGC_IMMERSIVE_THREAD_META_AI_HEADER_AI_HOME:8912904,MSGR_UGC_IMMERSIVE_THREAD_UGC_HEADER_AI_HOME:8912905,MSGR_UGC_IMMERSIVE_THREAD_THREAD_DETAIL_AI_HOME:8912906,MSGR_UGC_IMMERSIVE_THREAD_META_AI_THREAD_DETAIL_AI_HOME:8912907,MSGR_UGC_IMMERSIVE_THREAD_DEEPLINK:8912908,MSGR_UGC_IMMERSIVE_THREAD_NOTIFICATION:8912909,MSGR_UGC_IMMERSIVE_THREAD_AI_CREATION:8912910,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB_AI_HOME:8912911,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB_AI_HOME:8912912,AI_THREAD_FROM_FF_THREAD:8978432,AI_THREAD_FROM_FF_THREAD_FF_THREAD_VIEW_META_AI_TASK:8978433,AI_THREAD_FROM_FF_THREAD_META_AI_SIDECHAT:8978434,AI_THREAD_FROM_FF_THREAD_SIDECHAT_RIGHT_SWIPE:8978435,AI_THREAD_FROM_FF_THREAD_SIDECHAT_RIGHT_SWIPE_SUMMARY:8978436,PHONE_NUMBER_MESSAGES:9043968,FUNDRAISER_SUPPORTERS_LIST:9109504,META_AI_SUMMARY:9175040,META_AI_SUMMARY_IN_THREAD:9175041,MESSENGER_NOTES:9240576,MESSENGER_NOTES_SELF_CONSUMPTION_DETAILS_LIST:9240577,MESSENGER_NOTES_NOTE_PROMPT_CONSUMPTION:9240578,MESSENGER_NOTES_NOTE_PROMPT_RESPONSE_CONSUMPTION:9240579,POKES_PLUS:9306112,POKES_PLUS_POKE_PLUS_DASHBOARD:9306113,STORIES_ATTRIBUTION:9371648,STORIES_ATTRIBUTION_STACKED_STORIES:9371649,ARMADILLO_CUTOVER_THREAD_BANNER:9437184,DMA_MSPLIT_FALLBACK_THREAD_NAVIGATION:9502720,MESSENGER_MENU:9568256,MESSENGER_MENU_META_AI_FAB:9568257,MESSENGER_MESSAGE_REQUEST:9633792,MESSENGER_MESSAGE_REQUEST_META_AI_FAB:9633793,MESSENGER_ARCHIVED:9699328,MESSENGER_ARCHIVED_META_AI_FAB:9699329,MESSENGER_FB_GROUPS:9764864,MESSENGER_FB_GROUPS_META_AI_FAB:9764865,MESSENGER_PEOPLE_TAB:9830400,MESSENGER_PEOPLE_TAB_ACTIVE_NOW:9830401,MESSENGER_PEOPLE_TAB_CONTACT_LIST:9830402,MESSENGER_PEOPLE_TAB_CURRENT_CITY:9830403,MESSENGER_PEOPLE_TAB_EDUCATION:9830404,MESSENGER_PEOPLE_TAB_HOMETOWN:9830405,MESSENGER_PEOPLE_TAB_WORK:9830406,MARKETPLACE_TAB_ASSISTANT_BOT:9895936,UGC_PROFILE:9961472,UGC_PROFILE_FB_FEED_BOTTOM_ATTACHMENT:9961473,FB_TOP_OF_FRIENDLY_FEED:10027008,FB_TOP_OF_FRIENDLY_FEED_CONVERSATION_SPARK_REPLY:10027009,FB_TOP_OF_FRIENDLY_FEED_STORIES_VIEWER_CONSUMER_REPLY:10027010,MESSENGER_FB_QUICKSNAP:10092544,MSGR_META_AI_DEP_IN_THREAD:10158080,FB_GAMING_TAB:10223616,FB_GAMING_TAB_INVITE_FRIENDS_WORLD_GAME_LIST_SHARE_BUTTON:10223617,FB_GAMING_TAB_HORIZON_WORLD_INVITE_FRIENDS:10223618,FB_GAMING_TAB_HORIZON_WORLD_INVITE_FRIENDS_WITH_REWARDS:10223619,VOICEMAIL_MESSAGE:10289152,GEMSTONE:10354688,GEMSTONE_MESSAGE_INBOX:10354689,GEMSTONE_MESSAGE_NOTIFICATION:10354690,GLIMPSE_PROFILE_PREVIEW:10420224,CRISIS_RESPONSE:10485760});i.default=e}),66);
__d("MAWThreadLoadingState",["I64","LSAuthorityLevel","LSIntEnum","MAWJids","MAWMiActMappingTableAPI","MAWThreadMappingQPL","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={MISSING:"MISSING",OPTIMISTIC:"OPTIMISTIC",PARTIAL:"PARTIAL",READY:"READY"},c={IN_PROGRESS:"IN_PROGRESS",MISSING:"MISSING",READY:"READY"};async function d(e,t){var n=await o("MAWMiActMappingTableAPI").getMappingRowForChatJid(e,t);if(n==null)return{mappingState:{actState:c.MISSING,miState:u.MISSING},threadKey:null};var r=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(n.serverThreadKey));return{mappingState:_(r,n),threadKey:n.serverThreadKey}}async function m(e,t){var n=await d(e,t),r=n.mappingState;return r}async function p(e,t){var n=await Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t)),o("MAWMiActMappingTableAPI").getMappingRowForThreadKey(e,t)]),r=n[0],a=n[1];return _(r,a)}function _(e,t){return{actState:C(t),miState:b(e)}}function f(e){return h(e)&&y(e)}function g(e){return e.miState===u.OPTIMISTIC}function h(e){return e.miState===u.READY}function y(e){return e.actState===c.READY}function C(e){return e==null?c.MISSING:S(e.clientThreadPk)?c.IN_PROGRESS:c.READY}function b(t){if(t==null)return u.MISSING;var n=(e||(e=o("LSIntEnum"))).toNumber(t.authorityLevel);return n===r("LSAuthorityLevel").AUTHORITATIVE?u.READY:n===r("LSAuthorityLevel").OPTIMISTIC?u.OPTIMISTIC:u.PARTIAL}async function v(e,t,n){await e.mi_act_mapping_table.put({clientThreadPk:(s||(s=o("I64"))).neg(t),jid:n,serverThreadKey:t})}function S(e){return(s||(s=o("I64"))).lt(e,s.zero)}async function R(e,t,n){var r=t.jid,a=t.threadKey;n===void 0&&(n=null),await L(e,{intJid:o("MAWJids").convertChatJidToIntJid(r),threadKey:a},n)}async function L(e,t,n){var r=t.intJid,a=t.threadKey;n===void 0&&(n=null),n!=null&&o("MAWThreadMappingQPL").addPoint("insert_mapping_row",n),await e.mi_act_mapping_table.put({clientThreadPk:r,jid:r,serverThreadKey:a})}function E(e,t){return d(e,t).then(function(e){var t=e.mappingState,n=e.threadKey;return t.miState===u.MISSING?null:n})}l.MiState=u,l.ActState=c,l.genThreadLoadingStateAndThreadKeyFromJid=d,l.genLoadingStateFromJid=m,l.genThreadLoadingState=p,l.getThreadLoadingStateForDbRows=_,l.isReady=f,l.isMiOptimistic=g,l.isMiReady=h,l.isActReady=y,l.getActState=C,l.getMiState=b,l.markActThreadLoadingAsInProgress=v,l.markActThreadLoadingAsCompletedForJid=R,l.markActThreadLoadingAsCompleted=L,l.getThreadKeyIfMiThreadNotMissing=E}),98);
__d("URLMatcherConfig",[],(function(t,n,r,o,a,i){a.exports={tlds:"(?:\\.(com|\uD55C\uAD6D|\uC0BC\uC131|\uB2F7\uCEF4|\uB2F7\uB137|\u9999\u6E2F|\u9999\u683C\u91CC\u62C9|\u9910\u5385|\u98DF\u54C1|\u98DE\u5229\u6D66|\u96FB\u8A0A\u76C8\u79D1|\u96C6\u56E2|\u901A\u8CA9|\u8D2D\u7269|\u8C37\u6B4C|\u8BFA\u57FA\u4E9A|\u8054\u901A|\u7F51\u7EDC|\u7F51\u7AD9|\u7F51\u5E97|\u7F51\u5740|\u7EC4\u7EC7\u673A\u6784|\u79FB\u52A8|\u73E0\u5B9D|\u70B9\u770B|\u6FB3\u9580|\u6E38\u620F|\u6DE1\u9A6C\u9521|\u673A\u6784|\u66F8\u7C4D|\u65F6\u5C1A|\u65B0\u95FB|\u65B0\u52A0\u5761|\u653F\u5E9C|\u653F\u52A1|\u624B\u8868|\u624B\u673A|\u6211\u7231\u4F60|\u6148\u5584|\u5FAE\u535A|\u5E7F\u4E1C|\u5DE5\u884C|\u5BB6\u96FB|\u5A31\u4E50|\u5929\u4E3B\u6559|\u5927\u62FF|\u5927\u4F17\u6C7D\u8F66|\u5728\u7EBF|\u5609\u91CC\u5927\u9152\u5E97|\u5609\u91CC|\u5546\u6807|\u5546\u5E97|\u5546\u57CE|\u53F0\u7063|\u53F0\u6E7E|\u516C\u76CA|\u516C\u53F8|\u516B\u5366|\u5065\u5EB7|\u4FE1\u606F|\u4F5B\u5C71|\u4F01\u4E1A|\u4E2D\u6587\u7F51|\u4E2D\u570B|\u4E2D\u56FD|\u4E2D\u4FE1|\u4E16\u754C|\u30DD\u30A4\u30F3\u30C8|\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3|\u30BB\u30FC\u30EB|\u30B9\u30C8\u30A2|\u30B3\u30E0|\u30B0\u30FC\u30B0\u30EB|\u30AF\u30E9\u30A6\u30C9|\u307F\u3093\u306A|\u10D2\u10D4|\u0E44\u0E17\u0E22|\u0E04\u0E2D\u0E21|\u0DBD\u0D82\u0D9A\u0DCF|\u0D2D\u0D3E\u0D30\u0D24\u0D02|\u0CAD\u0CBE\u0CB0\u0CA4|\u0C2D\u0C3E\u0C30\u0C24\u0C4D|\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD|\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8|\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE|\u0B2D\u0B3E\u0B30\u0B24|\u0AAD\u0ABE\u0AB0\u0AA4|\u0A2D\u0A3E\u0A30\u0A24|\u09AD\u09BE\u09F0\u09A4|\u09AD\u09BE\u09B0\u09A4|\u09AC\u09BE\u0982\u09B2\u09BE|\u0938\u0902\u0917\u0920\u0928|\u092D\u093E\u0930\u094B\u0924|\u092D\u093E\u0930\u0924\u092E\u094D|\u092D\u093E\u0930\u0924|\u0928\u0947\u091F|\u0915\u0949\u092E|\u0680\u0627\u0631\u062A|\u067E\u0627\u06A9\u0633\u062A\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064A\u0644\u064A|\u0645\u0644\u064A\u0633\u064A\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062B\u0648\u0644\u064A\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064A\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064A\u0629|\u0633\u0648\u062F\u0627\u0646|\u062A\u0648\u0646\u0633|\u0628\u06BE\u0627\u0631\u062A|\u0628\u064A\u062A\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062A|\u0627\u06CC\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062A|\u0627\u0644\u0645\u063A\u0631\u0628|\u0627\u0644\u0639\u0644\u064A\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629|\u0627\u0644\u062C\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062F\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062A\u0635\u0627\u0644\u0627\u062A|\u0627\u0628\u0648\u0638\u0628\u064A|\u05E7\u05D5\u05DD|\u0570\u0561\u0575|\u049B\u0430\u0437|\u0443\u043A\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043E\u0440\u0433|\u043E\u043D\u043B\u0430\u0439\u043D|\u043C\u043E\u0441\u043A\u0432\u0430|\u043C\u043E\u043D|\u043C\u043A\u0434|\u043A\u043E\u043C|\u043A\u0430\u0442\u043E\u043B\u0438\u043A|\u0435\u044E|\u0434\u0435\u0442\u0438|\u0431\u0435\u043B|\u0431\u0433|\u03B5\u03BB|zw|zuerich|zone|zm|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qxa6a|xn--qcka1pmc|xn--q9jyb4c|xn--q7ce6a|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--otu796d|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbcpq6gpa1a|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbah1a3hjkrd|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq480n2rg|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cckwcxetd|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--4dbrk0ce|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|walmart|wales|vu|voyage|voto|voting|vote|volvo|vodka|vn|vlaanderen|vivo|viva|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statefarm|statebank|star|staples|stada|st|ss|srl|sr|spot|sport|space|spa|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|show|shouji|shopping|shop|shoes|shiksha|shia|shell|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|secure|seat|search|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sc|sbs|sbi|sb|saxo|save|sas|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|ro|rip|rio|ril|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|radio|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|party|parts|partners|pars|paris|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|online|onl|ong|one|omega|om|ollo|olayangroup|olayan|okinawa|office|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|name|nagoya|nab|na|mz|my|mx|mw|mv|music|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movie|mov|motorcycles|moto|moscow|mortgage|mormon|monster|money|monash|mom|moi|moe|moda|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|merckmsd|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|locus|locker|loans|loan|llp|llc|lk|living|live|lipsy|link|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kim|kids|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jio|jewelry|jetzt|jeep|je|jcb|java|jaguar|itv|itau|it|istanbul|ist|ismaili|is|irish|ir|iq|ipiranga|io|investments|intuit|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hot|hosting|host|hospital|horse|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujitsu|ftr|frontier|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|events|eus|eurovision|eu|et|estate|esq|es|erni|ericsson|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|dunlop|dubai|dtv|drive|download|dot|domains|dog|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrome|christmas|chintai|cheap|chat|chase|charity|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbre|cbn|cba|catholic|catering|cat|casino|cash|case|casa|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|amazon|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|airbus|aig|ai|agency|agakhan|ag|africa|afl|af|aetna|aero|aeg|ae|adult|ads|ad|actor|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|aarp|aaa))"}}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(t,n,r,o,a,i){var e="!\"#%&'()*,-./:;<>?@[\\]^_`{|}",l="\u2000-\u206F\xAB\xBB\uFF08\uFF09",s="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",u="(?:https?)://",c="(?:(^|\\s)(?:"+s+"[.]){3}"+s+")",d=c,m="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",p="(?:\\b)www\\d{0,3}[.]",_="[^\\s"+e+l+"]",f="(?:(?:(?:[.:\\-_%@]|"+_+")*"+_+")|"+m+")",g="(?::\\d+){0,1}",h="(?=[/?#])",y=n("URLMatcherConfig").tlds,C="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+h+"))",b="(?:(?:"+u+f+g+")|(?:"+d+g+")|(?:"+m+g+")|(?:"+p+f+y+g+")|(?:"+f+y+g+"))",v="[/#?]",S="\\([^\\s()<>]+\\)",R="[^\\s()<>?#]+",L=new RegExp(C,"im"),E="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",k=new RegExp(E,"im"),I="(?:(?:"+v+")(?:(?:"+S+"|"+R+")*)*)*",T=new RegExp("((?:"+b+")(?:"+I+"))","im");function D(){T.compile()}var x=new RegExp("((?:"+u+f+g+")|(?:"+p+f+y+g+"))"),$=/[\s\'\";]/,P=new RegExp(v,"im"),N=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xAB\xBB\u2000-\u206F\uFF08\uFF09]","im"),M=new RegExp("[\\s()<>?#]","im"),w=new RegExp("\\s()<>"),A=function(t){return t!=null&&t.indexOf("@")!==-1?x.exec(t)?t:null:t},F=function(t){return new RegExp("((?:"+C+")(?:"+I+"))",t)};function O(){return T.source}var B=function(t){return U(t,F("im"))},W=function(t){return V(t,F("igm"))},q=function(t){return U(t,T)},U=function(t,n){var e=n.exec(t);return e==null||e.length===0?null:A(e[1]||null)},V=function(t,n){var e=t.match(n);return e==null?[]:e.filter(Boolean)||[]},H=function(t){return L.exec(t)},G=function(t){return!$.test(t.charAt(t.length-1))},z=function(t){var e=t,n=!1;do{var r,o=L.exec(e);if(!o)return null;if(((r=o[1])==null?void 0:r.trim())===""&&(o[0]=o[0].trim(),o.index+=o[1].length),n=!1,o[0][0]==="["&&o.index>0&&e[o.index-1]==="@"){var a=k.exec(o[0]);a&&(n=!0,e=e.substr(o.index+a[0].length))}}while(n);if(!o)return null;var i=e.substr(o.index+o[0].length);if(i.length===0||!P.test(i[0]))return A(o[0]);for(var l=0,s=0,u=1,c=["(","["],d=[")","]"],m=0,p=s,_=1;_<i.length;_++){var f=i[_];if(p===s){if(c.includes(f))m+=1,p=u;else if(P.test(f)||!N.test(f))l=_;else if(M.test(f))break}else if(c.includes(f))m+=1;else if(d.includes(f))m-=1,m===0&&(p=s,l=_);else if(w.test(f))break}return A(o[0]+i.substring(0,l+1))},j={compilePermissiveHostPathMatcher:D,permissiveHostPathMatch:q,permissiveMatch:B,permissiveMultiMatch:W,matchToPattern:U,multiMatchToPattern:V,matchHost:H,trigger:G,match:z,getPermissiveHostPathMatcherSource:O};a.exports=j}),null);
__d("MWPreloadableQueries",["I64","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){return o("ReQL").fromTableAscending(t.tables.thread_nullstate).getKeyRange(n)},u=function(t,n){return o("ReQL").fromTableAscending(t.tables.thread_nullstate_ctas.index("threadKeyCtaId")).getKeyRange(n)},c=function(t,n){return o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange(n)},d=function(t,n){return o("ReQL").fromTableAscending(t.tables.community_folders).getKeyRange(n)},m=function(t,n){return o("ReQL").fromTableAscending(t.tables.thread_proactive_warning_settings).getKeyRange(n)},p=function(t,n){return o("ReQL").fromTableAscending(t.tables.in_thread_banner).getKeyRange(n)};function _(t,n){return o("ReQL").fromTableAscending(t.tables.media_staging).filter(function(t){return!t.isSent&&(e||(e=o("I64"))).equal(t.threadKey,n)})}l.threadNullStateQuery=s,l.threadNullStateCtaQuery=u,l.getCutoverThreadByThreadKey=c,l.getCommunityFolderQuery=d,l.getProactiveWarningsForThreadQuery=m,l.getThreadBannerQuery=p,l.getMediaStagingQuery=_}),98);
__d("MAWThreadMappingQPL",["I64","JSResourceForInteraction","LSIntEnum","MAWLoggerUtils","MAWMiActMappingTableAPI","MAWQplProxy","MAWThreadLoadingState","QPLUserFlow","Random","ReQL","WAJids","promiseDone","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=["instanceKey","s2sInstanceKey"],s=["instanceKey","s2sInstanceKey"],u,c,d=new Map,m=new Set;function p(e){m.add(e)}function _(e,t){return m.has(t)?o("MAWThreadLoadingState").isActReady(e)&&o("MAWThreadLoadingState").isMiOptimistic(e):!1}var f=r("JSResourceForInteraction")("MAWWaitForBackendSetup").__setRef("MAWThreadMappingQPL"),g=r("qpl")._(1056836502,"2778"),h=r("qpl")._(25313175,"1551"),y=null;function C(e){return o("MAWLoggerUtils").getInstanceKeyFromId(e)}function b(e){return o("MAWLoggerUtils").getInstanceKeyFromId((u||(u=o("I64"))).to_string(e)+o("Random").random().toString())}function v(e,t,n){var r,a=d.get((u||(u=o("I64"))).to_string(e.jid));if(a!=null)return L("continue_thread_mapping_after_tpq",a),n!=null&&k({bool:babelHelpers.extends({},n)},a),d.delete((u||(u=o("I64"))).to_string(e.jid)),a;var i=(r=e.instanceKey)!=null?r:b(e.fbid),l=n!=null?n:{},s=l.hasMappingRowAlready,c=l.hasPlaceholderRowInserted,m=l.isExistingRowPlaceholder,p=l.isExpectedThreadMissingInLsdb,_=e.jid;return S({hasMappingRowAlready:s,hasPlaceholderRowInserted:c,instanceKey:i,isExistingRowPlaceholder:m,isExpectedThreadMissingInLsdb:p,jid:e.isGroupThread?o("WAJids").toGroupJid((u||(u=o("I64"))).to_string(_)):o("WAJids").toMsgrUserJid((u||(u=o("I64"))).to_string(_)),threadKey:e.fbid,trigger:t}),i}function S(t){var n=t.instanceKey,a=t.s2sInstanceKey,i=babelHelpers.objectWithoutPropertiesLoose(t,e);y=a,o("sendToSentQPLLogger").markSendToSentPoint(a,"thread_mapping_start",void 0,{string:{thread_state:t.threadState}}),r("QPLUserFlow").start(g,{annotations:A(i),instanceKey:n}),r("promiseDone")(f.load(),function(e){var t=e.runAfterBackendSetup;t(function(){return L("maw_backend_available",n)},"bulkMaybeCreateOrUpdateThread")})}function R(e){var t=e.instanceKey,n=e.s2sInstanceKey,r=babelHelpers.objectWithoutPropertiesLoose(e,s);o("MAWQplProxy").startQplUserFlow(g,A(r),{providedInstanceKey:t})}function L(e,t){r("QPLUserFlow").addPoint(g,e,{instanceKey:t}),y!=null&&r("QPLUserFlow").addPoint(h,"thread_mapping_"+e,{instanceKey:y})}function E(e,t){L("handle_existing_thread_fail",e);var n=t==null?"no_thread":"not_authoritative",r=t==null?void 0:(c||(c=o("LSIntEnum"))).toNumber(t.authorityLevel);k({int:{insufficientAuthorityLevel:r},string:{handleExistingThreadFailReason:n}},e)}function k(e,t){r("QPLUserFlow").addAnnotations(g,e,{instanceKey:t})}var I=async function(t,n,o){var e=t+"_start",a=t+"_end";r("QPLUserFlow").addPoint(g,e,{instanceKey:n});var i=await o();return r("QPLUserFlow").addPoint(g,a,{instanceKey:n}),i},T=function(t,n,r){return n==null?r():I(t,n,r)};function D(e,t){k({bool:{isResultVerified:!0},string:{finalActState:t.actState.toString(),finalMiState:t.miState.toString()}},e),o("sendToSentQPLLogger").markSendToSentPoint(y,"thread_mapping_end"),o("MAWThreadLoadingState").isReady(t)||_(t,e)?r("QPLUserFlow").endSuccess(g,{instanceKey:e}):$("thread_state_not_ready",e)}async function x(e){var t,n=e.instanceKey,r=e.intJid,a=e.tables,i=e.threadKey;if(i==null&&r==null){$("no_thread_key_nor_jid",n);return}var l=await F(a,{intJid:r,threadKey:i}),s=(t=l==null?void 0:l.serverThreadKey)!=null?t:i,u=s==null?null:await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.threads).getKeyRange(s));D(n,await o("MAWThreadLoadingState").getThreadLoadingStateForDbRows(u,l))}function $(e,t){o("sendToSentQPLLogger").markSendToSentPoint(y,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:e}}),r("QPLUserFlow").endFailure(g,e,{instanceKey:t})}function P(e,t){o("sendToSentQPLLogger").markSendToSentPoint(y,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:e.message}}),r("QPLUserFlow").endFailure(g,"error_thrown",{annotations:{string:{errorMessage:e.message}},instanceKey:t})}function N(e,t,n){o("MAWQplProxy").sendQPLFailThroughBridge(g,e,n,t)}function M(e,t){L(e,t),r("QPLUserFlow").endCancel(g,{instanceKey:t})}function w(e,t){o("MAWQplProxy").sendQPLCancelThroughBridge(g,void 0,{string:{cancelInWorkerReason:e}},t)}function A(e){var t=e.hasMappingRowAlready,n=e.hasPlaceholderRowInserted,r=e.isExistingRowPlaceholder,a=e.isExpectedThreadMissingInLsdb,i=e.jid,l=e.threadKey,s=e.threadState,c=e.trigger;return{bool:{hasMappingRowAlready:t,hasPlaceholderRowInserted:n,isExistingRowPlaceholder:r,isExpectedThreadMissingInLsdb:a},string:{initJid:i,initThreadKey:l==null?null:(u||(u=o("I64"))).to_string(l),initThreadState:s==null?void 0:s.toString(),trigger:c}}}async function F(e,t){var n=t.intJid,r=t.threadKey,a=await o("MAWMiActMappingTableAPI").getMappingRowForThreadKey(e,r);return a!=null?a:o("MAWMiActMappingTableAPI").getMappingRowForIntJid(e,n)}l.pendingThreadCreationOnServer=d,l.allowToSkipUpgradingOptimisticThreadInMI=p,l.getInstanceKeyForJidInWorker=C,l.getInstanceKeyForThreadKey=b,l.startOrContinueForMiActMappingParams=v,l.start=S,l.startInWorker=R,l.addPoint=L,l.handleExistingThreadFail=E,l.addAnnotations=k,l.measurePerformance=I,l.measurePerformanceForNullableInstanceKey=T,l.endForThreadState=D,l.end=x,l.endFailure=$,l.endFailureError=P,l.endFailureInWorker=N,l.endCancel=M,l.endCancelInWorker=w}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("qpl"))._(521476140,"378"),u=e._(521472542,"295"),c=e._(521484256,"3212"),d=e._(521473384,"31"),m=e._(521482085,"409"),p=e._(521485406,"272"),_=e._(521482763,"296"),f=e._(521484295,"1460"),g=e._(521482969,"1519"),h=e._(521479124,"1939"),y=e._(521474385,"263"),C=e._(521476098,"504"),b=e._(521482858,"1290"),v=e._(521473194,"1331"),S=e._(521471024,"2275");l.pinCodeChangeQplEvent=s,l.optOutQplEvent=u,l.resetBackupQplEvent=c,l.ebResetObserverQplEvent=d,l.backupSetupQplEvent=m,l.mobileOnboardingQplEvent=p,l.restoreQplEvent=_,l.restoreDeviceAuthQplEvent=f,l.messageRestoreQplEvent=g,l.restoreWithAutoRestoreConsentQplEvent=h,l.hsmFleetMigrationQplEvent=y,l.virtualDeviceRevocationQplEvent=C,l.onboardingAuthQplEvent=b,l.processBackupIdsQPLEvent=v,l.fetchBackupIdsQPLEvent=S}),98);
__d("MWEncryptedBackupsDeviceRegistrationId",["FBLogger","MessengerWebInitData"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("MessengerWebInitData").sessionId;return e==null?(r("FBLogger")("wmi_eb").mustfix("PAKE: Failed to get registration id from MessengerWebInitData"),""):e}l.getDeviceRegistrationId=e}),98);
__d("MWEncryptedBackupsSharedState",["FBLogger","ReQL","ReQLSuspense","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(e){var t=e.db,n=e.stateKey,r=e.stateValue,o=r===void 0?"true":r;return t.runInTransaction(function(e){return e.experiences_shared_state.upsert([n],{stateKey:n,stateValue:o})},"readwrite","background",void 0,i.id+":38")}function m(t){var n,a=t.db,i=t.stateKey;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l=(n=(e||(e=r("WebStorage"))).getLocalStorageForRead())==null?void 0:n.getItem(i);if(l!=null){var s;(s=(e||(e=r("WebStorage"))).getLocalStorage())==null||s.removeItem(i),r("promiseDone")(d({db:a,stateKey:i,stateValue:l}))}return l}}function p(e){var t=e.db,n=e.sharedStateTable,r=e.stateKey,o=n.filter(function(e){return e.stateKey===r});if(o.length===0){var a=m({db:t,stateKey:r});return a!=null}return!0}function _(e){var t=e.db,n=e.sharedStateTable,r=e.stateKey,o=n.filter(function(e){return e.stateKey===r}),a=o[0];return(a==null?void 0:a.stateValue)!=null?a.stateValue:m({db:t,stateKey:r})}function f(e){var t=e.db,n=e.sharedStateRow,r=e.stateKey;return n==null?m({db:t,stateKey:r}):n.stateValue}function g(e){var t=e.db,n=e.stateKey;return t.runInTransaction(function(e){return e.experiences_shared_state.delete(n)},"readwrite","background",void 0,i.id+":132")}function h(e){var t,n=o("react-compiler-runtime").c(6),a=(s||(s=r("useReStore")))(),l=(t=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(a.tables.experiences_shared_state).getKeyRange(e)},[a.tables.experiences_shared_state,e],i.id+":143"))==null?void 0:t.stateValue,u;n[0]!==a||n[1]!==e?(u=function(n){return d({db:a,stateKey:e,stateValue:n})},n[0]=a,n[1]=e,n[2]=u):u=n[2];var c=u,m;return n[3]!==c||n[4]!==l?(m=[l,c],n[3]=c,n[4]=l,n[5]=m):m=n[5],m}function y(e){var t=o("react-compiler-runtime").c(5),n=h(e),r=n[0],a=n[1],i;t[0]!==a?(i=function(){a("true")},t[0]=a,t[1]=i):i=t[1];var l=i,s=r==="true",u;return t[2]!==l||t[3]!==s?(u=[s,l],t[2]=l,t[3]=s,t[4]=u):u=t[4],u}function C(e,t){var n,a=o("react-compiler-runtime").c(10),i=(n=t==null?void 0:t.timestampFormat)!=null?n:"seconds",l=h(e),s=l[0],u=l[1],c=s!=null?parseInt(s,10):void 0,d;a[0]!==c||a[1]!==i?(d=c!=null?i==="seconds"?new Date(c*1e3):i==="milliseconds"?new Date(c):(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i)})():void 0,a[0]=c,a[1]=i,a[2]=d):d=a[2];var m=d,p;a[3]!==u||a[4]!==e||a[5]!==i?(p=function(n){var t=i==="seconds"?Math.round(n.getTime()/1e3):i==="milliseconds"?n.getTime():(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i)})();return u(t.toString()).catch(function(t){r("FBLogger")("messenger_web_trust").catching(t).warn("Failed to set timestamp in shared state for key %s",e)})},a[3]=u,a[4]=e,a[5]=i,a[6]=p):p=a[6];var _=p,f;return a[7]!==m||a[8]!==_?(f=[m,_],a[7]=m,a[8]=_,a[9]=f):f=a[9],f}l.upsertEBSharedStateEntry=d,l.getEntryPresentInLocalStorage=m,l.getIsEntryPresentInSharedState=p,l.getEntryValueFromSharedState=_,l.getEntryValue=f,l.deleteEntry=g,l.useEBSharedStateEntry=h,l.useEBSharedStateEntryBoolean=y,l.useEBSharedStateEntryTimestamp=C}),98);/*FB_PKG_DELIM*/
__d("CIXWarningScreenActions",[],(function(t,n,r,o,a,i){var e=Object.freeze({CLICK_FOLLOW_UP_SCREEN_CTA:"CLICK_FOLLOW_UP_SCREEN_CTA",CLOSE_LEARN_MORE_BOTTOM_SHEET:"CLOSE_LEARN_MORE_BOTTOMSHEET",COLLAPSE_LEARN_MORE_BOTTOMSHEET:"COLLAPSE_LEARN_MORE_BOTTOMSHEET",DELETE_CONTENT:"DELETE_CONTENT",EXPAND_LEARN_MORE_BOTTOMSHEET:"EXPAND_LEARN_MORE_BOTTOMSHEET",GO_TO_FEED:"GO_TO_FEED",HELP_CENTER_REDIRECT:"HELP_CENTER_REDIRECT",HIDE_CONTENT:"HIDE_CONTENT",INFORM_TREATMENT_CNS_ENGAGEMENT_UNIT_RATE_CLICK:"inform_treatment_cns_engagement_unit_rate_click",INFORM_TREATMENT_CNS_ENGAGEMENT_UNIT_RATE_IMPRESSION:"inform_treatment_cns_engagement_unit_rate_impression",INFORM_TREATMENT_CNS_ENGAGEMENT_UNIT_WRITE_CLICK:"inform_treatment_cns_engagement_unit_write_click",INFORM_TREATMENT_CNS_ENGAGEMENT_UNIT_WRITE_IMPRESSION:"inform_treatment_cns_engagement_unit_write_impression",INFORM_TREATMENT_CNS_INLINE_RATING_LEARN_MORE_CLICK:"inline_rating_learn_more_click",INFORM_TREATMENT_CNS_INLINE_RATING_MORE_INFO_BOTTOMSHEET_CLICK:"inline_rating_more_info_bottomsheet_click",INFORM_TREATMENT_CNS_INLINE_RATING_SIGNUP_CLICK:"inline_rating_signup_click",INFORM_TREATMENT_CNS_INLINE_RATING_SOURCE_BOTTOMSHEET_CLICK:"inline_rating_source_bottomsheet_click",INFORM_TREATMENT_CNS_INLINE_RATING_SOURCE_CLICK:"inline_rating_source_click",INFORM_TREATMENT_CNS_INLINE_RATING_THUMBS_DOWN_CLICK:"inline_rating_thumbs_down_click",INFORM_TREATMENT_CNS_INLINE_RATING_THUMBS_UP_CLICK:"inline_rating_thumbs_up_click",INFORM_TREATMENT_COMMUNITY_NOTE_OPEN_BOTTOM_SHEET:"community_note_open_bottom_sheet",INFORM_TREATMENT_COMMUNITY_NOTE_OPEN_INLINE_EXPANSION:"community_note_open_inline_expansion",INFORM_TREATMENT_COMMUNITY_NOTE_OPEN_LEARN_MORE:"community_note_open_learn_more",INFORM_TREATMENT_COMMUNITY_NOTE_OPEN_SOURCE_URL:"community_note_open_source_url",OPEN_CENSUS_LINK:"OPEN_CENSUS_LINK",OPEN_COMMUNITY_STANDARDS:"OPEN_COMMUNITY_STANDARDS",OPEN_EXTERNAL_LINK:"OPEN_EXTERNAL_LINK",OPEN_FACT_CHECK_ITEM:"OPEN_FACT_CHECK_ITEM",OPEN_LINK:"OPEN_LINK",OPEN_MISINFO_SEE_WHY_DIALOG:"OPEN_MISINFO_SEE_WHY_DIALOG",SEE_WHY:"SEE_WHY",SEE_WHY_LIGHTWEIGHT_NEGATIVE_FEEDBACK:"SEE_WHY_LIGHTWEIGHT_NEGATIVE_FEEDBACK",SEE_WHY_LIGHTWEIGHT_POSITIVE_FEEDBACK:"SEE_WHY_LIGHTWEIGHT_POSITIVE_FEEDBACK",SHOW_CONTENT:"SHOW_CONTENT"});i.default=e}),66);
__d("CometAlbumEditItemTagFriendsDialogQuery$Parameters",["CometAlbumEditItemTagFriendsDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("CometAlbumEditItemTagFriendsDialogQuery_facebookRelayOperation"),metadata:{},name:"CometAlbumEditItemTagFriendsDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("CometAlbumEditItemTagFriendsDialog.entrypoint",["CometAlbumEditItemTagFriendsDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.mediaID,n=t.paginationLimit;return{queries:{cometAlbumEditItemTagFriendsDialogQueryReference:{parameters:r("CometAlbumEditItemTagFriendsDialogQuery$Parameters"),variables:{count:n,mediaID:e,scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("CometAlbumEditItemTagFriendsDialog.react").__setRef("CometAlbumEditItemTagFriendsDialog.entrypoint")};l.default=e}),98);
__d("CometContentNotAvailable.react",["fbt","CometContentArea.react","FDSButton.react","FDSNullState.react","NullStateGeneral","XCometHomeControllerRouteBuilder","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(7),n=e.enableBackToFeed,a=n===void 0?!1:n,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=r("XCometHomeControllerRouteBuilder").buildURL({}),t[0]=i):i=t[0];var l=i,c;t[1]===Symbol.for("react.memo_cache_sentinel")?(c={className:"x6s0dn4 x78zum5 xtp0wl1 xl56j7k xh8yej3"},t[1]=c):c=t[1];var d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("FDSNullState.react"),{headline:s._(/*BTDS*/"Sorry, this content isn't available right now"),icon:r("NullStateGeneral")}),t[2]=d):d=t[2];var m;t[3]!==a?(m=a&&r("gkx")("8062")&&u.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf",children:u.jsx(r("FDSButton.react"),{label:s._(/*BTDS*/"Go to News Feed"),linkProps:{url:l},padding:"wide",size:"large"})}),t[3]=a,t[4]=m):m=t[4];var p;return t[5]!==m?(p=u.jsx("div",babelHelpers.extends({},c,{children:u.jsxs(r("CometContentArea.react"),{verticalAlign:"middle",children:[d,m]})})),t[5]=m,t[6]=p):p=t[6],p}l.default=c}),226);
__d("CometStoryAggregatedUsersSuffixDialogQuery$Parameters",["CometStoryAggregatedUsersSuffixDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("CometStoryAggregatedUsersSuffixDialogQuery_facebookRelayOperation"),metadata:{},name:"CometStoryAggregatedUsersSuffixDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("CometStoryAggregatedUsersSuffixDialog.entrypoint",["CometStoryAggregatedUsersSuffixDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.storyID,r=t.storyRenderLocation;return{queries:{queryReference:{parameters:n("CometStoryAggregatedUsersSuffixDialogQuery$Parameters"),variables:{id:e,renderLocation:r,scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("CometStoryAggregatedUsersSuffixDialog.react").__setRef("CometStoryAggregatedUsersSuffixDialog.entrypoint")};l.default=e}),98);
__d("CometFeedStorySuffixAggregatedUsersRenderer",["CometEntryPointDialogTrigger.react","CometStoryAggregatedUsersSuffixDialog.entrypoint","FBLogger","FDSLink.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=function(t,n){return function(e){return t==null||n==null?(r("FBLogger")("comet_ui").mustfix("story ID or render location were null when rendering aggregated users link in story title"),e):s.jsx(r("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:r("CometStoryAggregatedUsersSuffixDialog.entrypoint"),otherProps:{},preloadParams:{storyID:t,storyRenderLocation:n},children:function(n){return s.jsx(r("FDSLink.react"),{onClick:n,children:e})}})}};l.default=u}),98);
__d("CometInformContentCover_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformContentCover_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null},{alias:null,args:null,concreteType:"InformTreatmentButton",kind:"LinkedField",name:"button_list",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InformTreatmentLearnMoreViewModel",kind:"LinkedField",name:"learn_more",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"fact_check_badge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],storageKey:null}],type:"InformTreatmentViewModel",abstractKey:null};a.exports=e}),null);
__d("FDSDocumentMagnifyingGlassOutline20Icon",["cr:21374"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21374")}),98);
__d("CometInformContentCover.react",["CometColumnItem.react","CometInformContentCover_data.graphql","CometRelay","CometRow.react","CometRowItem.react","FBLogger","FDSButton.react","FDSDocumentMagnifyingGlassOutline20Icon","FDSEyeCrossFilled20Icon","FDSIcon.react","FDSText.react","FDSTextPairing.react","gkx","justknobx","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d={cardContainer:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",marginBottom:"xod5an3",marginInlineStart:"x1diwwjn",marginInlineEnd:"xbmvrgn",$$css:!0},cardPadding:{paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},contentContainer:{maxWidth:"x1lr1uin",width:"xh8yej3",$$css:!0},icon:{top:"x1fo6t33",$$css:!0},overlayContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",zIndex:"x1rozsjd",$$css:!0},overlayPositioning:{bottom:"x1ey2m1c",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0},overlayPositioningCodeless:{bottom:"x3ynm5n",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"xhchfpf",$$css:!0}};function m(t){var a,i=o("react-compiler-runtime").c(35),l=t.containerRefs,u=t.showDialogAction,m=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformContentCover_data.graphql"),t.data),_=m==null?void 0:m.heading,f=m==null?void 0:m.body_text,g;i[0]!==(m==null?void 0:m.button_list)?(g=m==null?void 0:m.button_list.find(p),i[0]=m==null?void 0:m.button_list,i[1]=g):g=i[1];var h=g,y=h==null?void 0:h.label;if(y==null){r("FBLogger")("comet_warning_screens").mustfix("Empty learnMoreLabel passed");var C;return i[2]===Symbol.for("react.memo_cache_sentinel")?(C=c.jsx(c.Fragment,{}),i[2]=C):C=i[2],C}var b=m.render_type==="WARNING_SCREENS",v=b?"primaryOnMedia":"primary",S=b?"secondaryOnMedia":"secondary",R=b?"white":"primary",L=b?"fdsOverride_black":"secondary",E=!r("gkx")("20935"),k=E?d.overlayPositioningCodeless:d.overlayPositioning,I=(m==null||(a=m.learn_more)==null||(a=a.fact_check_badge)==null?void 0:a.text)!=null,T;i[3]!==R||i[4]!==I?(T=I&&r("justknobx")._("2450")?c.jsx(r("FDSIcon.react"),{color:R,icon:r("FDSDocumentMagnifyingGlassOutline20Icon")}):c.jsx(r("FDSIcon.react"),{color:R,icon:r("FDSEyeCrossFilled20Icon")}),i[3]=R,i[4]=I,i[5]=T):T=i[5];var D=T,x;i[6]!==b?(x=(s||(s=r("stylex"))).props(b?d.overlayContainer:d.cardContainer,b&&k),i[6]=b,i[7]=x):x=i[7];var $=l==null?void 0:l.overlayContainerRef,P=l==null?void 0:l.contentContainerRef,N=b?d.contentContainer:d.cardPadding,M;i[8]!==D?(M=c.jsx(r("CometRowItem.react"),{xstyle:d.icon,children:D}),i[8]=D,i[9]=M):M=i[9];var w;i[10]!==_||i[11]!==v?(w=_!=null&&c.jsxs(r("FDSText.react"),{color:v,type:"bodyLink3",children:[_," "]}),i[10]=_,i[11]=v,i[12]=w):w=i[12];var A;i[13]!==f||i[14]!==S?(A=f!=null&&c.jsx(r("FDSText.react"),{color:S,type:"body3",children:f}),i[13]=f,i[14]=S,i[15]=A):A=i[15];var F;i[16]!==w||i[17]!==A?(F=c.jsx(r("FDSTextPairing.react"),{body:c.jsxs(c.Fragment,{children:[w,A]}),level:4}),i[16]=w,i[17]=A,i[18]=F):F=i[18];var O;i[19]!==L||i[20]!==y||i[21]!==u?(O=c.jsx(r("CometColumnItem.react"),{paddingTop:12,children:c.jsx(r("FDSButton.react"),{label:y,onPress:u,size:"medium",testid:void 0,type:L})}),i[19]=L,i[20]=y,i[21]=u,i[22]=O):O=i[22];var B;i[23]!==O||i[24]!==F?(B=c.jsxs(r("CometRowItem.react"),{expanding:!0,verticalAlign:"center",children:[F,O]}),i[23]=O,i[24]=F,i[25]=B):B=i[25];var W;i[26]!==B||i[27]!==P||i[28]!==N||i[29]!==M?(W=c.jsxs(r("CometRow.react"),{ref:P,spacingVertical:0,xstyle:N,children:[M,B]}),i[26]=B,i[27]=P,i[28]=N,i[29]=M,i[30]=W):W=i[30];var q;return i[31]!==W||i[32]!==x||i[33]!==$?(q=c.jsx("div",babelHelpers.extends({},x,{ref:$,children:W})),i[31]=W,i[32]=x,i[33]=$,i[34]=q):q=i[34],q}function p(e){var t=e.action_type;return t==="SEE_WHY"||t==="OPEN_MISINFO_SEE_WHY_DIALOG"}l.default=m}),98);
__d("CometInformIcon_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformIcon_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],type:"Image",abstractKey:null};a.exports=e}),null);
__d("CometInformIcon.react",["CometInformIcon_data.graphql","CometRelay","FBLogger","FDSIcon.react","TintableIconSource","coerceRelayImage","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(5),i=t.color,l=t.data,s=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformIcon_data.graphql"),l);if(s==null)throw r("FBLogger")("comet_frx").mustfixThrow("Icon missing for Warning Screen");var c;a[0]!==s?(c=new(r("TintableIconSource"))("FB",r("coerceRelayImage")(s),24),a[0]=s,a[1]=c):c=a[1];var d=c,m;return a[2]!==i||a[3]!==d?(m=u.jsx(r("FDSIcon.react"),{color:i,icon:d,size:24}),a[2]=i,a[3]=d,a[4]=m):m=a[4],m}l.default=c}),98);
__d("CometInformLabelActions_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformLabelActions_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"content_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"validator",storageKey:null}],type:"InformTreatmentLoggingInfo",abstractKey:null};a.exports=e}),null);
__d("CometInformLabelActions_hideNITMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="8359610914163872"}),null);
__d("CometInformLabelActions_hideNITMutation.graphql",["CometInformLabelActions_hideNITMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"HideNitResponsePayload",kind:"LinkedField",name:"hide_nit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"error",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometInformLabelActions_hideNITMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometInformLabelActions_hideNITMutation",selections:t},params:{id:n("CometInformLabelActions_hideNITMutation_facebookRelayOperation"),metadata:{},name:"CometInformLabelActions_hideNITMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("XFBInformTreatmentButtonType.facebook",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["CARD","CROSS","PERMANENTLY_CROSS","SECONDARY"]),l=e;i.default=l}),66);
__d("useInformTreatmentFollowupExperience",["react","react-compiler-runtime","useIXTContentTriggerDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useRef;function u(e){var t=o("react-compiler-runtime").c(9),n=e.contentID,a=e.entryPoint,i=e.ixtTriggerEvent,l=e.location,u;t[0]!==n?(u=n.split(":").filter(c).pop(),t[0]=n,t[1]=u):u=t[1];var d=u,m=s(null),p=a!=null?a:"UNKNOWN",_=l!=null?l:"UNKNOWN",f=i!=null?i:"INFORM_TREATMENT_SEE_WHY",g;t[2]!==d||t[3]!==p||t[4]!==_||t[5]!==f?(g={content_id:d,entry_point:p,location:_,trigger_event_type:f},t[2]=d,t[3]=p,t[4]=_,t[5]=f,t[6]=g):g=t[6];var h=r("useIXTContentTriggerDialog")(g),y=h[0],C;return t[7]!==y?(C=[function(){return y({})},m],t[7]=y,t[8]=C):C=t[8],C}function c(e){return e!==""}l.default=u}),98);
__d("CometInformLabelActions.react",["CometInformLabelActions_data.graphql","CometInformLabelActions_hideNITMutation.graphql","CometRelay","CometStoryRenderLocationContext.react","CometWarningScreenContext","FBLogger","react","react-compiler-runtime","requireDeferred","useInformTreatmentFollowupExperience","useMinifiedProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useCallback,m=c.useContext,p=r("requireDeferred")("CometWarningScreenClientLogger").__setRef("CometInformLabelActions.react");function _(t){var a=o("react-compiler-runtime").c(25),i=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformLabelActions_data.graphql"),t.informTreatmentLogging),l=i==null?void 0:i.validator;if(l===null)throw r("FBLogger")("comet_cix").mustfixThrow("logging validator in logging info cannot be nullish in CometInformLabelActions");var u=i==null?void 0:i.story_id,c=i==null?void 0:i.session_id,d=(i==null?void 0:i.content_id)||"",_=t.renderingType,f=r("useMinifiedProductAttribution")(),g=m(r("CometStoryRenderLocationContext.react")),h;a[0]!==d||a[1]!==f||a[2]!==t.action||a[3]!==_||a[4]!==c||a[5]!==u||a[6]!==g||a[7]!==l?(h=function(){p.onReady(function(e){e.logInformTreatmentEvent({action:t.action,attribution_id_v2:f,contentIDRaw:d,event:"action",objectionableCategory:l,renderingType:_,session_id:c,storyID:u,storyRenderLocation:g})})},a[0]=d,a[1]=f,a[2]=t.action,a[3]=_,a[4]=c,a[5]=u,a[6]=g,a[7]=l,a[8]=h):h=a[8];var y=h,C=o("CometWarningScreenContext").useShowOverlay(),b=o("CometRelay").useRelayEnvironment(),v=o("CometWarningScreenContext").useSetAdditionalRequiredHeight(),S;a[9]!==d||a[10]!==b||a[11]!==y||a[12]!==t.buttonType||a[13]!==t.setHidden||a[14]!==v||a[15]!==C?(S=function(){y(),v(0),C(!1);var e=t.setHidden;e!=null&&e(!0),t.buttonType==="PERMANENTLY_CROSS"&&o("CometRelay").commitMutation(b,{mutation:s!==void 0?s:s=n("CometInformLabelActions_hideNITMutation.graphql"),variables:{input:{content_id:d}}})},a[9]=d,a[10]=b,a[11]=y,a[12]=t.buttonType,a[13]=t.setHidden,a[14]=v,a[15]=C,a[16]=S):S=a[16];var R=S,L;a[17]!==d||a[18]!==t.ixtTrigger?(L={contentID:d,ixtTriggerEvent:t.ixtTrigger},a[17]=d,a[18]=t.ixtTrigger,a[19]=L):L=a[19];var E=r("useInformTreatmentFollowupExperience")(L),k=E[0],I;a[20]!==y||a[21]!==t.action||a[22]!==t.ixtTrigger||a[23]!==k?(I=function(){y(),t.ixtTrigger!=null&&t.action!=null&&k({})},a[20]=y,a[21]=t.action,a[22]=t.ixtTrigger,a[23]=k,a[24]=I):I=a[24];var T=I;return t.buttonType==="CROSS"||t.buttonType==="PERMANENTLY_CROSS"?R:T}l.useCometInformLabelActions=_}),98);
__d("CometInformLabelRedesigned_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformLabelRedesigned_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"metadata",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InformTreatmentButton",kind:"LinkedField",name:"button_list",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ixt_action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"InformTreatmentLoggingInfo",kind:"LinkedField",name:"logging_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"content_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"story_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"validator",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometInformLabelActions_data"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null},{alias:null,args:null,concreteType:"InformTreatmentLearnMoreViewModel",kind:"LinkedField",name:"learn_more",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"community_note_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"community_note_truncated_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"published_time_detailed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"community_note_uri_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"community_note_is_contributor",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometInformLearnMoreModal_data"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"show_chevron",storageKey:null}],type:"InformTreatmentViewModel",abstractKey:null};a.exports=e}),null);
__d("CometInformLabelRedesigned.react",["fbt","CIXWarningScreenActions","CometInformLabelActions.react","CometInformLabelCommunityNote.react","CometInformLabelRedesigned_data.graphql","CometPressable.react","CometRelay","CometRow.react","CometRowItem.react","CometStoryRenderLocationContext.react","CometStyleXSheet","FBLogger","FDSAppFacebookCircleFilled20Icon","FDSChevronLeftFilled12Icon","FDSChevronRightFilled12Icon","FDSCircleButton.react","FDSCrossFilled16Icon","FDSIcon.react","FDSText.react","FDSTextPairing.react","InformTreatmentRenderingType","JSResourceForInteraction","Locale","TintableIconSource","coerceRelayImage","emptyFunction","getJSEnumSafe","nullthrows","react","react-compiler-runtime","requireDeferred","useCometLazyDialog","useCurrentDisplayMode","useMinifiedProductAttribution"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c,p=m.useContext,_=m.useState,f=r("requireDeferred")("CometWarningScreenClientLogger").__setRef("CometInformLabelRedesigned.react"),g=(u=o("CometStyleXSheet").CometStyleXSheet==null?void 0:o("CometStyleXSheet").CometStyleXSheet.DARK_MODE_CLASS_NAME)!=null?u:"",h={backgroundNonMedia:{backgroundColor:"xlhe6ec",$$css:!0},backgroundOnMedia:{backgroundColor:"xjb1437",$$css:!0},iconPadding:{paddingTop:"x123j3cw",$$css:!0},iconPaddingXButton:{paddingTop:"x1y1aw1k",$$css:!0},metadataLinkSpacing:{marginTop:"x1anpbxc",$$css:!0},pressable:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",display:"x1lliihq",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",width:"xh8yej3",":active_transform":"xk4oym4",$$css:!0},xButton:{marginTop:"x1kgmq87",$$css:!0}},y=r("JSResourceForInteraction")("CometInformLearnMoreModal.react").__setRef("CometInformLabelRedesigned.react");function C(t){"use no forget";var a,i=t.informTreatmentViewModel,l=t.shouldForceDarkMode,u=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformLabelRedesigned_data.graphql"),i),c=u.render_type==="MEDIA_LABEL",m=u.learn_more,C=r("useCometLazyDialog")(y),R=C[0],L=r("getJSEnumSafe")(r("InformTreatmentRenderingType"),u.render_type),E=r("useMinifiedProductAttribution")(),k=p(r("CometStoryRenderLocationContext.react")),I=_(!1),T=I[0],D=I[1];if(((a=u.learn_more)==null?void 0:a.community_note_uri)!=null){var x,$,P,N,M,w,A,F,O,B,W,q,U,V,H,G,z;return d.jsx(r("CometInformLabelCommunityNote.react"),{bodyText:(x=u.body_text)!=null?x:"",communityNoteTruncatedUri:($=(P=u.learn_more)==null?void 0:P.community_note_truncated_uri)!=null?$:"",communityNoteUri:(N=(M=u.learn_more)==null?void 0:M.community_note_uri)!=null?N:"",communityNoteUriTitle:(w=(A=u.learn_more)==null?void 0:A.community_note_uri_title)!=null?w:"",heading:(F=u.heading)!=null?F:"",isCommunityNoteContributor:(O=(B=u.learn_more)==null?void 0:B.community_note_is_contributor)!=null?O:!1,loggingInfo:{content_id:(W=u.logging_info)==null?void 0:W.content_id,session_id:(q=u.logging_info)==null?void 0:q.session_id,story_id:(U=u.logging_info)==null?void 0:U.story_id,validator:(V=u.logging_info)==null?void 0:V.validator},metadata:(H=u.metadata)!=null?H:"",publishedTimeDetailed:(G=(z=u.learn_more)==null?void 0:z.published_time_detailed)!=null?G:""})}if(u.logging_info===null)throw r("FBLogger")("comet_cix").mustfixThrow("logging information cannot be nullish in CometInformLabel");var j=S(u,D),K=j.cardButtonAction,Q=j.cardLinkAction,X=j.closeButtonAction;if(T)return d.jsx(d.Fragment,{});var Y=function(){f.onReady(function(e){var t,n,r,o;e.logInformTreatmentEvent({action:"SEE_WHY",attribution_id_v2:E,contentIDRaw:(t=u.logging_info)==null?void 0:t.content_id,event:"action",objectionableCategory:(n=u.logging_info)==null?void 0:n.validator,renderingType:L,session_id:(r=u.logging_info)==null?void 0:r.session_id,storyID:(o=u.logging_info)==null?void 0:o.story_id,storyRenderLocation:k})})},J=function(){m!=null&&R({data:m,logAction:Y,onToastUndo:r("emptyFunction"),showContent:r("emptyFunction")})},Z=X?d.jsx(r("CometRowItem.react"),{xstyle:h.xButton,children:d.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Remove"),color_DEPRECATED:"secondary",icon:r("FDSCrossFilled16Icon"),onPress:X,size:28,type_DEPRECATED:"normal"})}):d.jsx(d.Fragment,{}),ee=u.show_chevron===!0?d.jsx(r("CometRowItem.react"),{verticalAlign:"center",children:d.jsx(r("FDSIcon.react"),{color:"secondary",icon:r("Locale").isRTL()?r("FDSChevronLeftFilled12Icon"):r("FDSChevronRightFilled12Icon")})}):null,te=d.jsx("div",{className:c?g:null,children:d.jsxs(r("CometRow.react"),{align:"start",paddingVertical:0,spacing:12,children:[d.jsx(r("CometRowItem.react"),{xstyle:X&&u.metadata==null?h.iconPaddingXButton:h.iconPadding,children:d.jsx(b,{informTreatmentViewModel:u,onMediaDarkMode:c})}),d.jsx(r("CometRowItem.react"),{expanding:!0,verticalAlign:"center",children:d.jsx(v,babelHelpers.extends({},u))}),ee,X&&d.jsx(r("CometRowItem.react"),{children:Z})]})});return d.jsx(r("CometPressable.react"),{linkProps:(Q==null?void 0:Q.url)!=null&&(Q==null?void 0:Q.url)!==""&&(Q==null?void 0:Q.ixt_action)===null&&m===null?{target:"_blank",url:Q==null?void 0:Q.url}:void 0,onPress:m!=null?J:K||r("emptyFunction"),testid:void 0,xstyle:[h.pressable,c?h.backgroundOnMedia:h.backgroundNonMedia],children:te})}C.displayName=C.name+" [from "+i.id+"]";function b(e){var t=o("react-compiler-runtime").c(3),n=e.informTreatmentViewModel,a=e.onMediaDarkMode,i=n.icon,l=r("useCurrentDisplayMode")(),s=a===!0||l==="dark";if(i!=null){var u;return t[0]!==s||t[1]!==i?(u=i.name==="app-facebook-circle"?d.jsx(r("FDSIcon.react"),{color:s?"white":"highlight",icon:r("FDSAppFacebookCircleFilled20Icon")}):d.jsx(r("FDSIcon.react"),{icon:new(r("TintableIconSource"))("FB",r("coerceRelayImage")(i),20)}),t[0]=s,t[1]=i,t[2]=u):u=t[2],u}return null}function v(e){var t=o("react-compiler-runtime").c(14),n=e.body_text,a=e.button_list,i=e.heading,l=e.metadata,s=e.show_chevron,u=a[0].label,c=l!=null&&(l==null?void 0:l.length)!==0,m=s===!0,p;t[0]!==i?(p=i!=null&&d.jsx(r("FDSText.react"),{type:"bodyLink4",children:i+" "}),t[0]=i,t[1]=p):p=t[1];var _;t[2]!==n||t[3]!==p?(_=d.jsxs(d.Fragment,{children:[p,n]}),t[2]=n,t[3]=p,t[4]=_):_=t[4];var f=c?l:null,g;t[5]!==_||t[6]!==f?(g=d.jsx(r("FDSTextPairing.react"),{body:_,level:4,meta:f}),t[5]=_,t[6]=f,t[7]=g):g=t[7];var y;t[8]!==u||t[9]!==m?(y=u!=null&&u!==""&&!m&&d.jsx(r("CometRowItem.react"),{xstyle:h.metadataLinkSpacing,children:d.jsx(r("FDSText.react"),{color:"blueLink",type:"bodyLink4",children:u})}),t[8]=u,t[9]=m,t[10]=y):y=t[10];var C;return t[11]!==g||t[12]!==y?(C=d.jsxs(d.Fragment,{children:[g,y]}),t[11]=g,t[12]=y,t[13]=C):C=t[13],C}var S=function(t,n){var e=t.button_list,a=t.logging_info,i=t.render_type,l=r("nullthrows")(r("getJSEnumSafe")(r("InformTreatmentRenderingType"),i)),s=null,u=null,c=null;return e.map(function(e){var t={action:r("getJSEnumSafe")(r("CIXWarningScreenActions"),e.action_type),buttonType:e.type,informTreatmentLogging:a,ixtTrigger:e.ixt_action,redirect_url:e.url||""};e.type==="CROSS"||e.type==="PERMANENTLY_CROSS"?c=o("CometInformLabelActions.react").useCometInformLabelActions(babelHelpers.extends({renderingType:l,setHidden:n},t)):(s=e,u=o("CometInformLabelActions.react").useCometInformLabelActions(babelHelpers.extends({},t,{renderingType:l})))}),{cardButtonAction:u,cardLinkAction:s,closeButtonAction:c}};l.default=C}),226);
__d("CometInformMediaLabelContainer_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformMediaLabelContainer_data",selections:[{args:null,kind:"FragmentSpread",name:"CometInformLabelRedesigned_data"}],type:"InformTreatmentViewModel",abstractKey:null};a.exports=e}),null);
__d("useLightWeightCardOffset",["CometRouteRenderType","CometWarningScreenContext","react","useCometUFIVideoPlayerStateAndController","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useMemo,m=s.useRef,p=s.useState,_=552,f=112,g=16,h=f+g,y=48,C=16,b=12,v=750,S=120,R=.7;function L(){var e=o("CometRouteRenderType").useIsPushView(),t=m(null),n=p(0),a=n[0],i=n[1],l=u(function(t){if(e){var n=Math.max(t-_,0),r=n/2,o=Math.max(f,Math.min(r,h)),a=(h-o)/g,l=a*y;i(l)}},[e,i]),s=r("useResizeObserver")(function(e){return l(e.width)});return s(t.current),{containerRef:t,vertical:a}}var E=function(t){return-Math.pow(2,-10*t)+1};function k(e,t,n,r){var o=Date.now(),a=null,i=function(o){var n=e+(t-e)*o;r(n)},l=function(){var e=Date.now()-o;i(E(Math.min(e/n,1))),a=window.requestAnimationFrame(l)};window.setTimeout(function(){window.cancelAnimationFrame(a),i(1)},n),l()}function I(){var e=r("useCometUFIVideoPlayerStateAndController")(),t=m(null),n=m(null),a=p(0),i=a[0],l=a[1],s=o("CometWarningScreenContext").useSetAdditionalRequiredHeight(),_=p(!1),f=_[0],g=_[1],h=u(function(e){var t=e.card,n=e.container;if(!f){var r=n.height-t.height,o=Math.max(S,R*n.height),a=Math.max(0,o-r);if(a<C){s(0),l(0);return}var i=a>n.height+2*b;i?(s(t.height+2*b),l(n.height+2*b)):(s(a-C),l(a))}},[f,s,l]),y=u(function(e){var t=e.card,n=e.container,r=i<n.height+2*b;r&&k(i,t.height+2*b,v,function(e){l(e),s(e-C)})},[s,l,i]),L=t.current,E=n.current;return c(function(){L!=null&&E!=null&&h({card:L.getBoundingClientRect(),container:E.getBoundingClientRect()})},[L,E,h]),d(function(t){var n;return t==null||t(),e==null||(n=e.controller)==null?void 0:n.observeOn().playRequest(function(){g(!0),L!=null&&E!=null&&y({card:L.getBoundingClientRect(),container:E.getBoundingClientRect()})})},[e,L,E,y]),{cardRef:t,containerRef:n,vertical:i}}l.useLightWeightCardOffsetForFullScreenMediaPlayerStyle=L,l.useLightWeightCardOffset=I}),98);
__d("CometInformMediaLabelContainer.react",["CometInformLabelRedesigned.react","CometInformMediaLabelContainer_data.graphql","CometRelay","CometStyleXSheet","react","react-compiler-runtime","useLightWeightCardOffset"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=16,m=(s=o("CometStyleXSheet").CometStyleXSheet==null?void 0:o("CometStyleXSheet").CometStyleXSheet.DARK_MODE_CLASS_NAME)!=null?s:"",p=552;function _(t){var a=o("react-compiler-runtime").c(6),i=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformMediaLabelContainer_data.graphql"),t.data),l=t.isFullScreenMediaPlayerStyle,s,u;a[0]!==i?(u=c.jsx(r("CometInformLabelRedesigned.react"),{informTreatmentViewModel:i}),a[0]=i,a[1]=u):u=a[1],s=u;var d;return a[2]!==l||a[3]!==s||a[4]!==t?(d=c.jsx(f,{forceDarkMode:l,props:t,children:s}),a[2]=l,a[3]=s,a[4]=t,a[5]=d):d=a[5],d}function f(e){var t=o("react-compiler-runtime").c(27),n=e.children,r=e.forceDarkMode,a=e.props,i=a.allowExpandingIfNecessary,l=a.isFullScreenMediaPlayerStyle,s=l?"TOP":"BOTTOM",u=o("useLightWeightCardOffset").useLightWeightCardOffsetForFullScreenMediaPlayerStyle(),d=o("useLightWeightCardOffset").useLightWeightCardOffset(),p;t[0]!==i||t[1]!==u||t[2]!==d||t[3]!==s?(p=s==="TOP"?u:i?d:{vertical:0},t[0]=i,t[1]=u,t[2]=d,t[3]=s,t[4]=p):p=t[4];var _=p,f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f="x1ey2m1c x78zum5 xdt5ytf xtijo5x x1o0tod x1plvlek xryxfnj x47corl x10l6tqk x13vifvy",t[5]=f):f=t[5];var g=_.containerRef,h=-_.vertical,y;t[6]!==_.vertical||t[7]!==h?(y={bottom:h,top:_.vertical},t[6]=_.vertical,t[7]=h,t[8]=y):y=t[8];var C;t[9]!==s?(C={0:{className:"x6s0dn4 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x1plvlek xryxfnj xyamay9 xv54qhq x1l90r2v xf7dkkf x71s49j x10l6tqk x1ey2m1c"},1:{className:"x6s0dn4 x78zum5 xdt5ytf xtijo5x x1o0tod xl56j7k x1plvlek xryxfnj xyamay9 xv54qhq x1l90r2v xf7dkkf x71s49j x10l6tqk x13vifvy"}}[(s==="TOP")<<0],t[9]=s,t[10]=C):C=t[10];var b;t[11]!==s?(b={0:{className:"xh8yej3"},1:{className:"x1gvqnck xh8yej3"}}[(s==="TOP")<<0],t[11]=s,t[12]=b):b=t[12];var v=r?m:null,S;t[13]!==n||t[14]!==v?(S=c.jsx("div",{className:v,children:n}),t[13]=n,t[14]=v,t[15]=S):S=t[15];var R;t[16]!==_.cardRef||t[17]!==b||t[18]!==S?(R=c.jsx("div",babelHelpers.extends({},b,{ref:_.cardRef,children:S})),t[16]=_.cardRef,t[17]=b,t[18]=S,t[19]=R):R=t[19];var L;t[20]!==R||t[21]!==C?(L=c.jsx("div",babelHelpers.extends({},C,{children:R})),t[20]=R,t[21]=C,t[22]=L):L=t[22];var E;return t[23]!==_.containerRef||t[24]!==L||t[25]!==y?(E=c.jsx("div",{className:f,ref:g,style:y,children:L}),t[23]=_.containerRef,t[24]=L,t[25]=y,t[26]=E):E=t[26],E}l.default=_}),98);
__d("CometInformTreatmentContainer_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformTreatmentContainer_data",selections:[{args:null,kind:"FragmentSpread",name:"CometInformWarningScreenSmall_data"},{alias:null,args:null,concreteType:"InformTreatmentViewModel",kind:"LinkedField",name:"inform_treatment_view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometInformMediaLabelContainer_data"},{args:null,kind:"FragmentSpread",name:"CometInformWarningScreenRedesigned_data"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null}],type:"OverlayWarningScreenViewModel",abstractKey:null};a.exports=e}),null);
__d("CometInformWarningScreenBackground.react",["FDSBlurredBackgroundImage.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.mediaUri,a=!r("gkx")("20935"),i=n,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={0:{className:"x1ey2m1c xtijo5x x1o0tod x47corl x10l6tqk x13vifvy x1rozsjd"},1:{className:"x1qufaae x1g61kyh x6nbuaw x10l6tqk xf9y8ew"}}[!!a<<0],t[0]=l):l=t[0];var u;t[1]!==i?(u=s.jsx(r("FDSBlurredBackgroundImage.react"),{src:i}),t[1]=i,t[2]=u):u=t[2];var c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx("div",{className:"x1ey2m1c xtijo5x x1o0tod x47corl x10l6tqk x13vifvy x18l40ae"}),t[3]=c):c=t[3];var d;return t[4]!==u?(d=s.jsxs("div",babelHelpers.extends({},l,{children:[u,c]})),t[4]=u,t[5]=d):d=t[5],d}l.default=u}),98);
__d("CometInformWarningScreenRedesigned_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformWarningScreenRedesigned_data",selections:[{alias:null,args:null,concreteType:"InformTreatmentLearnMoreViewModel",kind:"LinkedField",name:"learn_more",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometInformLearnMoreModal_data"}],storageKey:null},{alias:null,args:null,concreteType:"WarningScreenAction",kind:"LinkedField",name:"warning_screen_actions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"label",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometInformContentCover_data"}],type:"InformTreatmentViewModel",abstractKey:null};a.exports=e}),null);
__d("CometInformWarningScreenRedesigned.react",["CIXWarningScreenActions","CometInformContentCover.react","CometInformWarningScreenRedesigned_data.graphql","CometRelay","CometWarningScreenContext","FBLogger","JSResourceForInteraction","getJSEnumSafe","gkx","react","react-compiler-runtime","useCometLazyDialog","useCometUFIVideoPlayerStateAndController"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("JSResourceForInteraction")("CometInformLearnMoreModal.react").__setRef("CometInformWarningScreenRedesigned.react");function d(t){var a=o("react-compiler-runtime").c(25),i=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformWarningScreenRedesigned_data.graphql"),t.data),l=t.containerRefs,s=t.commonProps.logAction,d=r("useCometLazyDialog")(c),_=d[0],f=o("CometWarningScreenContext").useShowOverlay(),g=o("CometWarningScreenContext").useHasVideoController(),h=r("useCometUFIVideoPlayerStateAndController")(),y=i==null?void 0:i.learn_more,C=!r("gkx")("20935"),b,v;if(a[0]!==i){v=Symbol.for("react.early_return_sentinel");e:if(b=null,C)b="See post";else{var S,R;a[3]!==i.warning_screen_actions?(R=i.warning_screen_actions.find(p),a[3]=i.warning_screen_actions,a[4]=R):R=a[4];var L=R;if(b=L==null||(S=L.label)==null?void 0:S.text,b==null||i==null){r("FBLogger")("comet_warning_screens").mustfix("Empty data passed");var E;a[5]===Symbol.for("react.memo_cache_sentinel")?(E=u.jsx(u.Fragment,{}),a[5]=E):E=a[5],v=E;break e}}a[0]=i,a[1]=b,a[2]=v}else b=a[1],v=a[2];if(v!==Symbol.for("react.early_return_sentinel"))return v;var k;a[6]!==i.warning_screen_actions?(k=i.warning_screen_actions.find(m),a[6]=i.warning_screen_actions,a[7]=k):k=a[7];var I=k,T;a[8]!==s||a[9]!==f||a[10]!==g||a[11]!==(h==null?void 0:h.controller)?(T=function(){f(!1),s({action:"SHOW_CONTENT"}),g==null||g.play("warning_screen_uncover"),h==null||h.controller.play("warning_screen_uncover")},a[8]=s,a[9]=f,a[10]=g,a[11]=h==null?void 0:h.controller,a[12]=T):T=a[12];var D=T,x;a[13]!==(I==null?void 0:I.type)||a[14]!==y||a[15]!==s||a[16]!==D||a[17]!==b||a[18]!==_||a[19]!==f?(x=function(){if(y==null){r("FBLogger")("comet_warning_screens").mustfix("Empty showDialogAction passed");return}else _({data:y,logAction:s,onToastUndo:function(){return f(!0)},showContent:D,showContentLabel:b}),s({action:r("getJSEnumSafe")(r("CIXWarningScreenActions"),I==null?void 0:I.type)})},a[13]=I==null?void 0:I.type,a[14]=y,a[15]=s,a[16]=D,a[17]=b,a[18]=_,a[19]=f,a[20]=x):x=a[20];var $=x,P;return a[21]!==l||a[22]!==i||a[23]!==$?(P=u.jsx(r("CometInformContentCover.react"),{containerRefs:l,data:i,showDialogAction:$}),a[21]=l,a[22]=i,a[23]=$,a[24]=P):P=a[24],P}function m(e){var t=e.type;return t==="SEE_WHY"||t==="OPEN_MISINFO_SEE_WHY_DIALOG"}function p(e){var t=e.type;return t==="SHOW_CONTENT"}l.default=d}),98);
__d("CometInformWarningScreenSmall_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometInformWarningScreenSmall_data",selections:[{alias:null,args:[{kind:"Literal",name:"color",value:"fds-black"}],concreteType:"Image",kind:"LinkedField",name:"icon",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometInformIcon_data"}],storageKey:'icon(color:"fds-black")'},{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null}],type:"OverlayWarningScreenViewModel",abstractKey:null};a.exports=e}),null);
__d("CometInformWarningScreenSmall.react",["fbt","CometInformIcon.react","CometInformWarningScreenSmall_data.graphql","CometPressable.react","CometRelay","react","react-compiler-runtime","useCometRouterDispatcher"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=16,m={intercepter:{bottom:"x1ey2m1c",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",":active_transform":"x1pdlv7q",$$css:!0}};function p(t){var a=o("react-compiler-runtime").c(17),i=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformWarningScreenSmall_data.graphql"),t.data),l=r("useCometRouterDispatcher")(),u=i.icon;if(i.render_type==="LIGHTWEIGHT")return null;var d=t.containerRefs,p=t.contentPermalink,_=t.logAction,f;a[0]!==p||a[1]!==l||a[2]!==_?(f=p!=null&&c.jsx(r("CometPressable.react"),{"aria-label":s._(/*BTDS*/"Cover,sensitive content in album"),display:"block",hideHoverOverlay:!0,onPress:function(t){l!=null&&(_({action:"SHOW_CONTENT"}),l.go(p,{}),t.preventDefault())},xstyle:m.intercepter}),a[0]=p,a[1]=l,a[2]=_,a[3]=f):f=a[3];var g=f,h;a[4]===Symbol.for("react.memo_cache_sentinel")?(h={className:"x1ey2m1c x78zum5 xdt5ytf xtijo5x x1o0tod x1plvlek xryxfnj x10l6tqk x13vifvy x1rozsjd xexx8yu xyri2b x18d9i69 x1c1uobl x47corl"},a[4]=h):h=a[4];var y=d==null?void 0:d.overlayContainerRef,C;a[5]===Symbol.for("react.memo_cache_sentinel")?(C={className:"x6s0dn4 x78zum5 x1iyjqo2 xl56j7k"},a[5]=C):C=a[5];var b=d==null?void 0:d.contentContainerRef,v;a[6]!==u?(v=u&&c.jsx(r("CometInformIcon.react"),{color:"white",data:u}),a[6]=u,a[7]=v):v=a[7];var S;a[8]!==b||a[9]!==v?(S=c.jsx("div",babelHelpers.extends({},C,{ref:b,children:v})),a[8]=b,a[9]=v,a[10]=S):S=a[10];var R;a[11]!==y||a[12]!==S?(R=c.jsx("div",babelHelpers.extends({},h,{ref:y,children:S})),a[11]=y,a[12]=S,a[13]=R):R=a[13];var L;return a[14]!==g||a[15]!==R?(L=c.jsxs(c.Fragment,{children:[R,g]}),a[14]=g,a[15]=R,a[16]=L):L=a[16],L}l.default=p}),226);
__d("CometInformTreatmentContainer.react",["CometInformMediaLabelContainer.react","CometInformTreatmentContainer_data.graphql","CometInformWarningScreenBackground.react","CometInformWarningScreenRedesigned.react","CometInformWarningScreenSmall.react","CometRelay","CometWarningScreenContext","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useEffect;function d(t){var a=o("react-compiler-runtime").c(31),i=o("CometRelay").useFragment(e!==void 0?e:e=n("CometInformTreatmentContainer_data.graphql"),t.data),l=i.render_type!=="LIGHTWEIGHT",s=o("CometWarningScreenContext").useMakeContentVisibleDespiteOverlay(),d,m;a[0]!==s||a[1]!==l?(d=function(){s(!l)},m=[s,l],a[0]=s,a[1]=l,a[2]=d,a[3]=m):(d=a[2],m=a[3]),c(d,m);var p=o("CometWarningScreenContext").useIsOnFeedMedia();if(r("gkx")("23025")&&i.render_type==="LIGHTWEIGHT"&&p===!0){var _;return a[4]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(u.Fragment,{}),a[4]=_):_=a[4],_}var f=t.contentID,g=t.logAction,h=t.storyID,y;a[5]!==f||a[6]!==g||a[7]!==h?(y={contentID:f,logAction:g,storyID:h},a[5]=f,a[6]=g,a[7]=h,a[8]=y):y=a[8];var C=y,b;if(t.layout==="SMALL"){var v;a[9]!==i||a[10]!==t.containerRefs||a[11]!==t.contentPermalink||a[12]!==t.logAction?(v=u.jsx(r("CometInformWarningScreenSmall.react"),{containerRefs:t.containerRefs,contentPermalink:t.contentPermalink,data:i,logAction:t.logAction}),a[9]=i,a[10]=t.containerRefs,a[11]=t.contentPermalink,a[12]=t.logAction,a[13]=v):v=a[13],b=v}else if(i.render_type==="LIGHTWEIGHT"){var S=i.inform_treatment_view_model;if(S==null){var R;return a[14]===Symbol.for("react.memo_cache_sentinel")?(R=u.jsx(u.Fragment,{}),a[14]=R):R=a[14],R}var L;a[15]!==C||a[16]!==S||a[17]!==t.allowExpandingIfNecessary||a[18]!==t.isFullScreenMediaPlayerStyle?(L=u.jsx(r("CometInformMediaLabelContainer.react"),{allowExpandingIfNecessary:t.allowExpandingIfNecessary,commonProps:C,data:S,isFullScreenMediaPlayerStyle:t.isFullScreenMediaPlayerStyle}),a[15]=C,a[16]=S,a[17]=t.allowExpandingIfNecessary,a[18]=t.isFullScreenMediaPlayerStyle,a[19]=L):L=a[19],b=L}else{var E=i.inform_treatment_view_model;if(E==null){var k;return a[20]===Symbol.for("react.memo_cache_sentinel")?(k=u.jsx(u.Fragment,{}),a[20]=k):k=a[20],k}var I;a[21]!==C||a[22]!==E||a[23]!==t.containerRefs?(I=u.jsx(r("CometInformWarningScreenRedesigned.react"),{commonProps:C,containerRefs:t.containerRefs,data:E}),a[21]=C,a[22]=E,a[23]=t.containerRefs,a[24]=I):I=a[24],b=I}var T;a[25]!==t.mediaUri||a[26]!==l?(T=l&&u.jsx(r("CometInformWarningScreenBackground.react"),{mediaUri:t.mediaUri}),a[25]=t.mediaUri,a[26]=l,a[27]=T):T=a[27];var D;return a[28]!==T||a[29]!==b?(D=u.jsxs(u.Fragment,{children:[T,b]}),a[28]=T,a[29]=b,a[30]=D):D=a[30],D}l.default=d}),98);
__d("useInformTreatmentsVPVDlogger",["react","react-compiler-runtime","requireDeferred","useVPVDImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback,u=r("requireDeferred")("CometWarningScreenClientLogger").__setRef("useInformTreatmentsVPVDlogger");function c(e){var t=o("react-compiler-runtime").c(4),n;t[0]!==e?(n=function(n){var t=n.visibleDuration,r=babelHelpers.extends({vpvd:t.toString()},e);u.onReady(function(e){e.logInformTreatmentEvent(r)})},t[0]=e,t[1]=n):n=t[1];var a=n,i;return t[2]!==a?(i={onVPVDEnd:a},t[2]=a,t[3]=i):i=t[3],r("useVPVDImpression")(i)}l.default=c}),98);
__d("CometInformTreatmentsReadStateLoggingComponent.react",["react","react-compiler-runtime","useInformTreatmentsVPVDlogger","useMinifiedProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.read_state_event,i=r("useMinifiedProductAttribution")(),l;t[0]!==i||t[1]!==a?(l=babelHelpers.extends({attribution_id_v2:i,event:"vpvd"},a),t[0]=i,t[1]=a,t[2]=l):l=t[2];var u=l,c=r("useInformTreatmentsVPVDlogger")(u),d=c[0],m;return t[3]!==n||t[4]!==d?(m=s.jsx("div",{ref:d,children:n}),t[3]=n,t[4]=d,t[5]=m):m=t[5],m}l.default=u}),98);
__d("FDSEyeCrossFilled24Icon",["cr:13838"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:13838")}),98);
__d("CometInformWarningScreenUncovered.react",["fbt","CometRouteRenderType","CometWarningScreenContext","FBLogger","FDSCircleButton.react","FDSEyeCrossFilled24Icon","react","react-compiler-runtime","stylex","useCometRouterState","useCometUFIVideoPlayerStateAndController"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=16,m={showOverlayButton:{insetInlineEnd:"xdg88n9",left:null,right:null,pointerEvents:"x67bb7w",position:"x10l6tqk",top:"xomnu4r",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(11),a=t.logAction,i=t.xstyle,l=r("useCometUFIVideoPlayerStateAndController")(),u=o("CometWarningScreenContext").useHasVideoController(),d=o("CometWarningScreenContext").useShowOverlay(),p=r("useCometRouterState")();if(p==null)throw r("FBLogger")("comet_infra").mustfixThrow("Cannot render comet app with no route provider");var _=o("CometRouteRenderType").useIsPushView(),f=_&&i!=null?i:m.showOverlayButton,g;n[0]!==f?(g=(e||(e=r("stylex"))).props(f),n[0]=f,n[1]=g):g=n[1];var h;n[2]===Symbol.for("react.memo_cache_sentinel")?(h=s._(/*BTDS*/"Show overlay"),n[2]=h):h=n[2];var y;n[3]!==a||n[4]!==d||n[5]!==u||n[6]!==l?(y=c.jsx(r("FDSCircleButton.react"),{"aria-label":h,icon:r("FDSEyeCrossFilled24Icon"),onPress:function(){l?l.controller.pause("warning_screen_cover"):u&&u.pause("warning_screen_cover"),d(!0),a({action:"HIDE_CONTENT"})},size:40,testid:void 0,type_DEPRECATED:"dark-overlay"}),n[3]=a,n[4]=d,n[5]=u,n[6]=l,n[7]=y):y=n[7];var C;return n[8]!==g||n[9]!==y?(C=c.jsx("div",babelHelpers.extends({},g,{children:y})),n[8]=g,n[9]=y,n[10]=C):C=n[10],C}l.default=p}),226);
__d("CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker",[],(function(t,n,r,o,a,i){"use strict";var e=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():Object.freeze({});i.INDETERMINATE_ADJOINING_MEDIA_URL=e}),66);
__d("CometMediaViewerDispatcherContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(r("emptyFunction"));l.default=u}),98);
__d("CometMediaViewerNavigationTapTarget.react",["fbt","CometMediaViewerDispatcherContext","CometPressable.react","CometTrackingNodeProvider.react","CometVisualCompletionAttributes","FDSChevronLeftFilled24Icon","FDSChevronRightFilled24Icon","FDSProgressSkittleIndeterminate.react","FDSSkittleIcon.react","FocusWithinHandler.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.useContext,m={buttonContainerBackground:{backgroundColor:"xiwuv7k",$$css:!0},buttonContainerHoverLeft:{opacity:"x1hc1fzr",transform:"xs51lif",$$css:!0},buttonContainerHoverRight:{opacity:"x1hc1fzr",transform:"xzycz3q",$$css:!0},navButton:{alignItems:"x6s0dn4",display:"x78zum5",opacity:"x197sbye",paddingTop:"xyamay9",paddingInlineEnd:"xv54qhq",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",position:"x1n2onr6",transitionDuration:"x1k90msu",transitionProperty:"x6o7n8i",transitionTimingFunction:"x9lcvmn",willChange:"x6my1t9",$$css:!0},tapTargetOverlay:{height:"x5yr21d",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(20),a=t.direction,i=t.hoverOverlayHeight,l=t.isInert,u=t.isInvisible,p=t.isLoading,_=t.label,f=t.onClick,g=t.testid,h=t.trackingNode,y=i===void 0?"default":i,C=l===void 0?!1:l,b=u===void 0?!1:u,v=p===void 0?!1:p,S=d(r("CometMediaViewerDispatcherContext")),R;n[0]!==S?(R=function(){S({isHovered:!0,type:"SET_IS_HOVERED"})},n[0]=S,n[1]=R):R=n[1];var L=R,E;n[2]!==S?(E=function(){S({isHovered:!1,type:"SET_IS_HOVERED"})},n[2]=S,n[3]=E):E=n[3];var k=E,I;n[4]!==a||n[5]!==y||n[6]!==C||n[7]!==b||n[8]!==v||n[9]!==_||n[10]!==f||n[11]!==k||n[12]!==L||n[13]!==g||n[14]!==h?(I=function(n){return c.jsx("div",babelHelpers.extends({},r("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{className:{0:"x6s0dn4 x78zum5 xl56j7k x1hc1fzr x1n2onr6 x1ebt8du x1jl3cmp x1dhq9h xfwg19i x1vjfegm",2:"x6s0dn4 x78zum5 xl56j7k x1n2onr6 x1jl3cmp xfwg19i x1vjfegm xg01cxk xhb22t3 xls3em1 xlshs6z",1:"x6s0dn4 x78zum5 xl56j7k x1hc1fzr x1n2onr6 x1ebt8du x1jl3cmp x1dhq9h xfwg19i x1vjfegm x5yr21d",3:"x6s0dn4 x78zum5 xl56j7k x1n2onr6 x1jl3cmp xfwg19i x1vjfegm xg01cxk xhb22t3 xls3em1 xlshs6z x5yr21d"}[!!C<<1|(y==="default")<<0],"data-testid":void 0,onMouseEnter:L,onMouseLeave:k,children:c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:h,children:c.jsx(r("CometPressable.react"),{"aria-label":_,disabled:v,onPress:f,testid:void 0,xstyle:y==="default"&&m.tapTargetOverlay,children:function(o){var t=o.hovered;return c.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(m.navButton,y==="default"&&(!b||n)&&m.buttonContainerBackground,(t||n)&&!v&&(a==="previous"?m.buttonContainerHoverLeft:m.buttonContainerHoverRight)),{children:v?c.jsx(r("FDSProgressSkittleIndeterminate.react"),{"aria-label":s._(/*BTDS*/"Loading..."),size:48}):c.jsx("div",babelHelpers.extends({},{0:{},2:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p xpud6h4 x1iorvi4 x11lfxj5 xjkvuk6 x135b78x"},1:{className:"xzpqnlu x1hyvwdk xjm9jq1 x6ikm8r x10wlt62 x10l6tqk x1i1rx1s"},3:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p xpud6h4 x1iorvi4 x11lfxj5 xjkvuk6 x135b78x xzpqnlu x1hyvwdk xjm9jq1 x6ikm8r x10wlt62 x10l6tqk x1i1rx1s"}}[!!n<<1|!!(b&&!n)<<0],{children:c.jsx(r("FDSSkittleIcon.react"),{color:"primary-on-media",icon:r(a==="previous"?"FDSChevronLeftFilled24Icon":"FDSChevronRightFilled24Icon"),size:48})}))}))}})})}))},n[4]=a,n[5]=y,n[6]=C,n[7]=b,n[8]=v,n[9]=_,n[10]=f,n[11]=k,n[12]=L,n[13]=g,n[14]=h,n[15]=I):I=n[15];var T;return n[16]!==k||n[17]!==L||n[18]!==I?(T=c.jsx(r("FocusWithinHandler.react"),{onBlurWithin:k,onFocusWithin:L,children:I}),n[16]=k,n[17]=L,n[18]=I,n[19]=T):T=n[19],T}l.default=p}),226);
__d("CometMediaViewerRightRailUFIGlimmer.react",["FDSGlimmer.react","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={ufi:{display:"x78zum5",justifyContent:"x1l1ennw",paddingTop:"xyamay9",paddingInlineEnd:"xv54qhq",paddingBottom:"x1l90r2v",paddingInlineStart:"xf7dkkf",$$css:!0},ufiGlimmer:{borderStartStartRadius:"x13t61ll",borderStartEndRadius:"x1kchd1x",borderEndEndRadius:"x1u0fnx4",borderEndStartRadius:"xbxn0j6",height:"x170jfvy",width:"xge0ay3",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsxs(o("react-strict-dom").html.div,{style:u.ufi,children:[s.jsx(r("FDSGlimmer.react"),{index:1,xstyle:u.ufiGlimmer}),s.jsx(r("FDSGlimmer.react"),{index:2,xstyle:u.ufiGlimmer}),s.jsx(r("FDSGlimmer.react"),{index:3,xstyle:u.ufiGlimmer})]}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("CometMediaViewerViewStateContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isHovered:!1,prevMouseX:0,prevMouseY:0,prevScale:1,scale:1,translateX:0,translateY:0});l.default=u}),98);
__d("CometMediaViewerStageOld.react",["fbt","CometFullScreen","CometKeys","CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker","CometMediaViewerNavigationTapTarget.react","CometMediaViewerViewStateContext","CometProductTagFunnelIDContext","CometRouteRenderType","Locale","XCometHomeControllerRouteBuilder","cometGetKeyCommandConfig","gkx","promiseDone","react","useCometRoute","useCometRouterDispatcher","useDebouncedComet","useLayerKeyCommands"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useLayoutEffect,f=c.useMemo,g=c.useRef,h=c.useState,y=r("gkx")("22681"),C=r("gkx")("21034"),b=r("gkx")("24206"),v=320,S=2e3;function R(e){var t=e.backgroundColor,n=t===void 0?"default":t,a=e.disableNavigation,i=a===void 0?!1:a,l=e.hideArrows,c=l===void 0?!1:l,v=e.initialTracePolicy,R=e.isPlayable,L=R===void 0?!1:R,E=e.isUntagged,k=e.nextMediaURI,I=e.onNavigatePhoto,T=e.prevMediaURI,D=e.storyRenderLocation,x=e.subOrigin,$=e.useKeyCommands,P=$===void 0?!0:$,N=m(r("CometProductTagFunnelIDContext")),M=r("useCometRouterDispatcher")(),w=h(!1),A=w[0],F=w[1],O=m(r("CometMediaViewerViewStateContext")),B=g(!0),W=function(){return q.isPending()?U():q()},q=r("useDebouncedComet")(function(){F(!1),U()},{leading:!0,wait:S}),U=r("useDebouncedComet")(function(){j==null&&!O.isHovered&&F(!0),B.current=!1},{leading:!1,wait:S}),V=g(null),H=o("CometRouteRenderType").useIsPushView();_(function(){U(),V.current&&B.current&&V.current.focus()},void 0);var G=d(function(){if(M!=null&&(M.popPushView(),!H&&r("gkx")("19455"))){var e=r("XCometHomeControllerRouteBuilder").buildURL({});M.go(e,{})}},[M,H]),z=h(null),j=z[0],K=z[1],Q=d(function(){if(k===o("CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker").INDETERMINATE_ADJOINING_MEDIA_URL){K("next");return}M==null||typeof k!="string"||(I&&I(),M.go(k,{passthroughProps:{initialTracePolicy:v,isUntagged:E,productTagFunnelID:N,storyRenderLocation:D,subOrigin:x},target:"self",traceParams:{navigation_source:"CometMediaViewer_next"}}))},[k,M,I,v,N,D,E,x]),X=d(function(){if(T===o("CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker").INDETERMINATE_ADJOINING_MEDIA_URL){K("prev");return}M==null||typeof T!="string"||(I&&I(),M.go(T,{passthroughProps:{initialTracePolicy:v,isUntagged:E,productTagFunnelID:N,storyRenderLocation:D,subOrigin:x},target:"self",traceParams:{navigation_source:"CometMediaViewer_prev"}}))},[T,M,I,v,N,E,D,x]);p(function(){switch(j){case"next":k!==o("CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker").INDETERMINATE_ADJOINING_MEDIA_URL&&(K(null),U(),Q());break;case"prev":T!==o("CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker").INDETERMINATE_ADJOINING_MEDIA_URL&&(K(null),U(),X());break;default:break}},[Q,X,U,k,j,T]),r("useCometRoute")(typeof T=="string"?T:null),r("useCometRoute")(typeof k=="string"?k:null);var Y=s._(/*BTDS*/"Previous photo"),J=s._(/*BTDS*/"Next photo"),Z=d(function(){var e=o("CometFullScreen").getFullScreenElement();if(e==null){var t=document.documentElement;t!=null&&r("promiseDone")(o("CometFullScreen").requestFullScreen(t))}else r("promiseDone")(o("CometFullScreen").exitFullScreen())},[]),ee=k===o("CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker").INDETERMINATE_ADJOINING_MEDIA_URL||typeof k=="string"&&k!=="",te=T===o("CometMediaSetViewerIndeterminateAdjoiningMediaURLMarker").INDETERMINATE_ADJOINING_MEDIA_URL||typeof T=="string"&&T!=="",ne=!te||C||b,re=!ee||C||b,oe=f(function(){if(!P||C||b)return[];var e=[];return te&&!i&&(e.push({command:{key:r("CometKeys").PREVIOUS},description:Y,handler:X}),e.push(o("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("photoViewer","viewPrevious",X))),ee&&!i&&(e.push({command:{key:r("CometKeys").NEXT},description:J,handler:Q}),e.push(o("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("photoViewer","viewNext",Q))),i?e.push({command:{key:r("CometKeys").ESCAPE},description:s._(/*BTDS*/"Close"),handler:function(){}}):!H&&r("gkx")("19455")&&e.push({command:{key:r("CometKeys").ESCAPE},description:s._(/*BTDS*/"Close"),handler:G}),e.push(o("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("photoViewer","fullscreen",Z)),e},[P,te,i,ee,H,Z,Y,X,J,Q,G]);return r("useLayerKeyCommands")(oe),u.jsx("div",babelHelpers.extends({},{0:{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d x17upfok x1n2onr6 x1uvtmcs"},2:{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d x17upfok x1n2onr6 x1uvtmcs xal61yo"},1:{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d x17upfok x1n2onr6 x1uvtmcs xjb1437"},3:{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d x17upfok x1n2onr6 x1uvtmcs xjb1437"}}[(n==="default")<<1|(n==="dark")<<0],{onMouseMove:W,ref:V,children:u.jsxs("div",{className:"x6s0dn4 x78zum5 x1iyjqo2 x5yr21d xl56j7k x1n2onr6 x1uvtmcs",children:[u.jsxs("div",{className:"x6s0dn4 x1ey2m1c x78zum5 xtijo5x x1o0tod x1qughib x10l6tqk x13vifvy","data-name":"media-viewer-nav-container",children:[!y&&!i&&u.jsx("div",{"aria-hidden":!0,className:"x1ey2m1c x9f619 xtijo5x x1o0tod x10l6tqk x13vifvy","data-testid":void 0,onClick:G}),u.jsx(r("CometMediaViewerNavigationTapTarget.react"),{direction:r("Locale").isRTL()?"next":"previous",hoverOverlayHeight:L?"auto":"default",isInert:c||ne,isInvisible:A,isLoading:j==="prev",label:Y,onClick:X,testid:void 0,trackingNode:143}),u.jsx(r("CometMediaViewerNavigationTapTarget.react"),{direction:r("Locale").isRTL()?"previous":"next",hoverOverlayHeight:L?"auto":"default",isInert:c||re,isInvisible:A,isLoading:j==="next",label:J,onClick:Q,testid:void 0,trackingNode:142})]}),e.children]})}))}R.displayName=R.name+" [from "+i.id+"]",l.default=R}),226);
__d("CometMediaViewerStage.react",["CometMediaViewerStageOld.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));l.default=r("CometMediaViewerStageOld.react")}),98);
__d("CometNewsfeedKeyCommandWidget",["createKeyCommandWidget"],(function(t,n,r,o,a,i,l){"use strict";var e=r("createKeyCommandWidget")();l.default=e}),98);
__d("CometPhotoViewerContainerContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext();l.default=u}),98);
__d("CometPhotoViewerZoomUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return n[0]===0||n[1]===0?!1:n[1]<e.clientHeight*t||n[0]<e.clientWidth*t}i.isOverflown=e}),66);
__d("CometPhotoViewerZoom.react",["CometMediaViewerDispatcherContext","CometMediaViewerViewStateContext","CometPhotoViewerContainerContext","CometPhotoViewerZoomUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useRef;function p(e){var t=e.children,n=d(r("CometMediaViewerViewStateContext")),a=d(r("CometMediaViewerDispatcherContext")),i=d(r("CometPhotoViewerContainerContext")),l=m(null),u=c(function(){if(i!=null&&i.current!=null){var e=i.current.getBoundingClientRect();return{height:e.height,left:e.left,top:e.top,width:e.width}}return null},[i]),p=c(function(e){var t,n=(t=l.current)==null?void 0:t.getBoundingClientRect(),r=u();n&&r&&a({clientX:e.clientX,clientY:e.clientY,currentRectCoord:[n.top,n.left],currentRectSize:[n.width,n.height],height:r.height,type:"DRAG",width:r.width})},[a,u]),_=c(function(){window.removeEventListener("mouseup",_),window.removeEventListener("mousemove",p)},[p]),f=c(function(e){if(!(n.scale<=1)){var t=u();l&&l.current&&t&&!o("CometPhotoViewerZoomUtils").isOverflown(l.current,n.scale,[t.width,t.height])||(e.preventDefault(),a({clientX:e.clientX,clientY:e.clientY,type:"DRAG_START"}),window.addEventListener("mouseup",_),window.addEventListener("mousemove",p))}},[a,u,p,_,n.scale]);return s.jsx("div",{onMouseDown:f,children:s.jsx("div",{className:{0:"",1:"x1unhpq9 x11xpdln xz4gly6"}[(n.prevScale!==n.scale)<<0],ref:l,style:{transform:"translate("+n.translateX+"px, "+n.translateY+"px) scale("+n.scale+")"},children:t})})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("CometPhotoViewerResponsiveInnerWrapper.react",["BaseLoadingStateElement.react","CometPhotoViewerZoom.react","CometRouteRenderType","FDSGlimmer.react","cr:20438","gkx","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=52,d={backgroundContainerDialog:{"@media (max-width: 899px)_height":"x1rmlpev",$$css:!0},backgroundContainerDialogWithFooter:{height:"x4uq5q4","@media (max-width: 899px)_height":"xj0wjbl",$$css:!0},backgroundContainerResponsive:{alignItems:"x6s0dn4",display:"x78zum5",position:"x1n2onr6","@media (max-width: 899px)_height":"xiylbte",$$css:!0},backgroundContainerTabs:{height:"xtp0wl1","@media (max-width: 899px)_height":"xwot789",$$css:!0},backgroundContainerTabsWithFooter:{height:"xossbfl","@media (max-width: 899px)_height":"x7zj7kz",$$css:!0},glimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"x5yr21d",width:"xh8yej3",$$css:!0},glimmerWrapper:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",position:"x1n2onr6",width:"xh8yej3",$$css:!0},ie11minHeight:{minHeight:"x4zw9a1",$$css:!0},image:{maxWidth:"x193iq5w","@media (max-width: 899px)_maxHeight":"x4fas0m",$$css:!0},maxImageHeightDialog:{maxHeight:"x1bwycvy","@media (max-width: 899px)_maxHeight":"x6sdy9m",$$css:!0},maxImageHeightDialogWithFooter:{maxHeight:"x4ju7c5","@media (max-width: 899px)_maxHeight":"x9vb2y4",$$css:!0},maxImageHeightTabs:{maxHeight:"x85a59c","@media (max-width: 899px)_maxHeight":"x6sdy9m",$$css:!0},maxImageHeightTabsWithFooter:{maxHeight:"x1wlxzsl","@media (max-width: 899px)_maxHeight":"x1h9lmpj",$$css:!0},passthroughImage:{backgroundPosition:"x1lvsgvq",backgroundRepeat:"xiy17q3",backgroundSize:"x1tbiz1a",height:"x5yr21d",width:"xh8yej3",$$css:!0},placeholderContainer:{height:"x5yr21d",width:"xh8yej3",$$css:!0}};function m(t,n){var a=o("react-compiler-runtime").c(6),i=t===void 0?!1:t,l=n===void 0?!1:n,s=o("CometRouteRenderType").useIsPushView(),u=!i&&s&&d.backgroundContainerDialog,c=!i&&!s&&d.backgroundContainerTabs,m=i&&s&&d.backgroundContainerDialogWithFooter,p=i&&!s&&d.backgroundContainerTabsWithFooter,_=l&&d.placeholderContainer,f;return a[0]!==u||a[1]!==c||a[2]!==m||a[3]!==p||a[4]!==_?(f=(e||(e=r("stylex")))(d.backgroundContainerResponsive,u,c,m,p,_),a[0]=u,a[1]=c,a[2]=m,a[3]=p,a[4]=_,a[5]=f):f=a[5],f}function p(t,n){var a=o("react-compiler-runtime").c(7),i=o("CometRouteRenderType").useIsPushView(),l=!t&&i&&d.maxImageHeightDialog,s=!t&&!i&&d.maxImageHeightTabs,u=t&&i&&d.maxImageHeightDialogWithFooter,c=t&&!i&&d.maxImageHeightTabsWithFooter,m=n&&d.passthroughImage,p=!n&&d.image,_;return a[0]!==l||a[1]!==s||a[2]!==u||a[3]!==c||a[4]!==m||a[5]!==p?(_=(e||(e=r("stylex")))(l,s,u,c,m,p,r("gkx")("22681")&&d.ie11minHeight),a[0]=l,a[1]=s,a[2]=u,a[3]=c,a[4]=m,a[5]=p,a[6]=_):_=a[6],_}function _(e,t){var n=o("react-compiler-runtime").c(7),a=o("CometRouteRenderType").useIsPushView(),i=!e&&a&&d.maxImageHeightDialog,l=!e&&!a&&d.maxImageHeightTabs,s=e&&a&&d.maxImageHeightDialogWithFooter,u=e&&!a&&d.maxImageHeightTabsWithFooter,c=t&&d.passthroughImage,m=!t&&d.image,p;return n[0]!==i||n[1]!==l||n[2]!==s||n[3]!==u||n[4]!==c||n[5]!==m?(p=[i,l,s,u,c,m,r("gkx")("22681")&&d.ie11minHeight],n[0]=i,n[1]=l,n[2]=s,n[3]=u,n[4]=c,n[5]=m,n[6]=p):p=n[6],p}function f(e){var t=o("react-compiler-runtime").c(23),a=e.height,i=e.imageUri,l=e.ref,s=e.showPlaceholderImage,c=e.width,_=e.withFooter,f=s===void 0?!0:s,g=_===void 0?!1:_,h=p(g,!0),y=m(!1,!0),C=o("CometRouteRenderType").useIsPushView(),b;t[0]===Symbol.for("react.memo_cache_sentinel")?(b="x5yr21d xh8yej3",t[0]=b):b=t[0];var v=a!=null?a:"50%",S=c!=null?c:"50%",R;t[1]!==v||t[2]!==S?(R={height:v,width:S},t[1]=v,t[2]=S,t[3]=R):R=t[3];var L;t[4]===Symbol.for("react.memo_cache_sentinel")?(L=u.jsx(r("FDSGlimmer.react"),{index:0,xstyle:d.glimmer}),t[4]=L):L=t[4];var E;t[5]!==R?(E=u.jsx(r("BaseLoadingStateElement.react"),{xstyle:d.glimmerWrapper,children:u.jsx("div",{style:R,children:L})}),t[5]=R,t[6]=E):E=t[6];var k=l!=null?l:null,I;t[7]!==a||t[8]!==i||t[9]!==h||t[10]!==f||t[11]!==c?(I=i!=null&&f&&u.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1n2onr6 x5yr21d xh8yej3",children:u.jsx("div",{className:h,style:a!=null&&c!=null?{backgroundImage:"url("+i+")",maxHeight:a,maxWidth:c}:{backgroundImage:"url("+i+")"}},i)}),t[7]=a,t[8]=i,t[9]=h,t[10]=f,t[11]=c,t[12]=I):I=t[12];var T;t[13]!==y||t[14]!==I||t[15]!==k?(T=u.jsx("div",{className:y,ref:k,children:I}),t[13]=y,t[14]=I,t[15]=k,t[16]=T):T=t[16];var D;t[17]!==C?(D=!C&&n("cr:20438")!=null&&u.jsx("div",{className:"x1ypdohk x78zum5 x1o0tod xw7yly9 x1ys307a x1yztbdb xyqm7xq x10l6tqk x13vifvy xzkaem6",children:u.jsx(n("cr:20438"),{})}),t[17]=C,t[18]=D):D=t[18];var x;return t[19]!==T||t[20]!==D||t[21]!==E?(x=u.jsxs("div",{className:b,children:[E,T,D]}),t[19]=T,t[20]=D,t[21]=E,t[22]=x):x=t[22],x}function g(e){var t=o("react-compiler-runtime").c(11),n=e.imageComponent,a=e.imageComponentWithXStyle,i=e.ref,l=e.withFooter,s=l===void 0?!1:l,c=p(s,!1),d=_(s,!1),m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m={0:{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1n2onr6"},1:{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1n2onr6 xh8yej3"}}[!!r("gkx")("22681")<<0],t[0]=m):m=t[0];var f;t[1]!==n||t[2]!==a||t[3]!==c||t[4]!==d?(f=n!=null?n(c):a!=null?a(d):null,t[1]=n,t[2]=a,t[3]=c,t[4]=d,t[5]=f):f=t[5];var g;t[6]!==i||t[7]!==f?(g=u.jsx("div",babelHelpers.extends({},m,{ref:i,children:f})),t[6]=i,t[7]=f,t[8]=g):g=t[8];var h=g,y;return t[9]!==h?(y=u.jsx(r("CometPhotoViewerZoom.react"),{children:h}),t[9]=h,t[10]=y):y=t[10],y}l.useCometPhotoViewerContainerStyles=m,l.CometPhotoViewerPlaceholderWrapper=f,l.CometPhotoViewerImageWrapper=g}),98);
__d("CometWarningScreenOverlay_data.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlay_data",selections:[{args:null,kind:"FragmentSpread",name:"CometInformTreatmentContainer_data"},{alias:null,args:null,kind:"ScalarField",name:"content_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"container_story_id",storageKey:null},{alias:null,args:null,concreteType:"InformTreatmentViewModel",kind:"LinkedField",name:"inform_treatment_view_model",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"top_objectionable_category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inform_session_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_feed_simplification_design",storageKey:null}],type:"OverlayWarningScreenViewModel",abstractKey:null};a.exports=e}),null);
__d("useWarningScreenLayout",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useLayoutEffect,c=s.useRef,d=s.useState;function m(){var e=o("react-compiler-runtime").c(5),t=d("DEFAULT"),n=t[0],r=t[1],a=c(null),i=c(null),l,s;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(){a.current==null||i.current==null||a.current!=null&&i.current!=null&&i.current.clientHeight>0&&a.current.clientHeight-i.current.clientHeight<=0&&r("SMALL")},s=[a,i],e[0]=l,e[1]=s):(l=e[0],s=e[1]),u(l,s);var m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m={contentContainerRef:i,overlayContainerRef:a},e[2]=m):m=e[2];var p;return e[3]!==n?(p=[n,m],e[3]=n,e[4]=p):p=e[4],p}l.default=m}),98);
__d("CometWarningScreenOverlay.react",["CometInformTreatmentContainer.react","CometInformTreatmentsReadStateLoggingComponent.react","CometInformWarningScreenUncovered.react","CometRelay","CometStoryRenderLocationContext.react","CometWarningScreenContext","CometWarningScreenOverlay_data.graphql","InformTreatmentRenderingType","getJSEnumSafe","react","react-compiler-runtime","requireDeferred","useMinifiedProductAttribution","useWarningScreenLayout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useEffect,p=r("requireDeferred")("CometWarningScreenClientLogger").__setRef("CometWarningScreenOverlay.react");function _(t){var a,i,l=o("react-compiler-runtime").c(35),s=t.allowExpandingIfNecessary,c=t.allowReCoveringContent,_=t.alwaysShowCoverComponent,f=t.alwaysShowDetails,g=t.alwaysUseSmallLayout,h=t.data,y=t.integrityUIElement,C=t.isFullScreenMediaPlayerStyle,b=t.mediaUri,v=t.storyID,S=t.surface,R=t.url,L=t.xstyle,E=o("CometRelay").useFragment(e!==void 0?e:e=n("CometWarningScreenOverlay_data.graphql"),h),k=o("CometWarningScreenContext").useIsOverlayShown(),I=r("useWarningScreenLayout")(),T=I[0],D=I[1],x=(a=E.inform_treatment_view_model)==null?void 0:a.render_type,$;l[0]!==x?($=r("getJSEnumSafe")(r("InformTreatmentRenderingType"),x),l[0]=x,l[1]=$):$=l[1];var P=$,N=o("CometWarningScreenContext").useSetParentRenderInstructions(),M=r("useMinifiedProductAttribution")(),w=d(r("CometStoryRenderLocationContext.react")),A,F;l[2]!==P||l[3]!==N?(A=function(){N(P==="media_label"?"CLIP_TO_PARENT":"CLIP_TO_MEDIA")},F=[P,N],l[2]=P,l[3]=N,l[4]=A,l[5]=F):(A=l[4],F=l[5]),m(A,F);var O=v!=null?v:E.container_story_id,B;l[6]!==E.content_id||l[7]!==E.inform_session_id||l[8]!==E.top_objectionable_category||l[9]!==y||l[10]!==P||l[11]!==O||l[12]!==w||l[13]!==S?(B={contentIDRaw:E.content_id,integrityUIElement:y,objectionableCategory:E.top_objectionable_category,renderingType:P,session_id:E.inform_session_id,storyID:O,storyRenderLocation:w,surface:S},l[6]=E.content_id,l[7]=E.inform_session_id,l[8]=E.top_objectionable_category,l[9]=y,l[10]=P,l[11]=O,l[12]=w,l[13]=S,l[14]=B):B=l[14];var W=B,q;l[15]!==W||l[16]!==M?(q=function(t){var e=t.action,n=t.event;(e!=null||n!=null)&&p.onReady(function(t){t.logInformTreatmentEvent(babelHelpers.extends({},W,{action:e,attribution_id_v2:M,event:n!=null?n:"action"}))})},l[15]=W,l[16]=M,l[17]=q):q=l[17];var U=q;if(E.top_objectionable_category==null)return null;if(k||_===!0){var V=C!=null?C:!1,H=g===!0,G=f===!0,z=T;z=H?"SMALL":G?"DEFAULT":z;var j=H||G?void 0:D,K=s!=null?s:!0,Q;l[18]!==j||l[19]!==E||l[20]!==V||l[21]!==z||l[22]!==U||l[23]!==b||l[24]!==O||l[25]!==K||l[26]!==R?(Q=u.jsx(r("CometInformTreatmentContainer.react"),{allowExpandingIfNecessary:K,containerRefs:j,contentID:E.content_id,contentPermalink:R,data:E,isFullScreenMediaPlayerStyle:V,layout:z,logAction:U,mediaUri:b,storyID:O}),l[18]=j,l[19]=E,l[20]=V,l[21]=z,l[22]=U,l[23]=b,l[24]=O,l[25]=K,l[26]=R,l[27]=Q):Q=l[27];var X;return l[28]!==W||l[29]!==Q?(X=u.jsx(r("CometInformTreatmentsReadStateLoggingComponent.react"),{read_state_event:W,children:Q}),l[28]=W,l[29]=Q,l[30]=X):X=l[30],X}var Y=c!=null?c:!0,J=(i=E.use_feed_simplification_design)!=null?i:!1;if(Y&&P!=="media_label"&&J===!1){var Z;return l[31]!==U||l[32]!==L?(Z=u.jsx(r("CometInformWarningScreenUncovered.react"),{logAction:U,xstyle:L}),l[31]=U,l[32]=L,l[33]=Z):Z=l[33],Z}var ee;return l[34]===Symbol.for("react.memo_cache_sentinel")?(ee=u.jsx(u.Fragment,{}),l[34]=ee):ee=l[34],ee}l.default=_}),98);
__d("FDSEyeFilled12PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("491226"),12),u=e;l.default=u}),98);
__d("FDSFlameFilled12PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("490507"),12),u=e;l.default=u}),98);
__d("FDSResizeDownFilled20Icon",["cr:14080"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:14080")}),98);
__d("FDSResizeDownFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("517758"),20),u=e;l.default=u}),98);
__d("FDSTagStarFilled12PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("821484"),12),u=e;l.default=u}),98);
__d("FDSZoomInFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("927269"),20),u=e;l.default=u}),98);
__d("FDSZoomOutFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("927282"),20),u=e;l.default=u}),98);
__d("useMediaViewerVPVDLogger",["CometInteractionSourceContext","WebSession","gkx","react","react-compiler-runtime","requireDeferred","useVPVDImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=r("requireDeferred")("CometMediaVpvdFalcoEvent").__setRef("useMediaViewerVPVDLogger");function m(e,t){var n=o("react-compiler-runtime").c(9),a=c(r("CometInteractionSourceContext")),i=e.authorId,l=e.createdTime,s=e.fbid,u=e.source,m=e.storyContainerId,p;n[0]!==i||n[1]!==l||n[2]!==s||n[3]!==a||n[4]!==u||n[5]!==m?(p=function(t){var e=t.visibleDuration,n=t.visibleTime;if(s!=null){var r=u!=null?u:a,c={a:i!=null?i:"",ct:l!=null?l:0,d:e,i:s,s:r,si:m,sid:o("WebSession").getId(),vst:n};d.onReady(function(e){var t=e.log;return t(function(){return c})})}},n[0]=i,n[1]=l,n[2]=s,n[3]=a,n[4]=u,n[5]=m,n[6]=p):p=n[6];var _=p,f;return n[7]!==_?(f={onVPVDEnd:_},n[7]=_,n[8]=f):f=n[8],r("useVPVDImpression")(f)}l.default=m}),98);/*FB_PKG_DELIM*/
__d("LSMaxInt32",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("I64"))).of_int32(2147483647);l.default=s}),98);
__d("CreateDerivedKeys",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i,l){var u=o("CryptoLogger").CryptoLogger("create_derived_keys");if(l.length<1||l.some(function(e){return(s||(s=o("I64"))).gt(e,r("LSMaxInt32"))}))return u.mustfix("Invalid key lengths for derive keys"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult(void 0));var c=l.map((s||(s=o("I64"))).to_int32),d=l.map(s.to_int32).reduce(function(e,t){return e+t},0),m=function(t){for(var e=[],n=0,a=0,i=c.length;a<i;++a){var l=n+c[a];e.push(t.slice(n,l).buffer),n=l}return o("RetUtil").getNullableRetResult(r("LSVec").ofArray(e))};return o("XPlatReactCrypto").subtleImportKey("raw",i,"HKDF",!1,["deriveBits"]).then(function(e){return o("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:t,name:"HKDF",salt:a!=null?a:new Uint8Array(10).buffer},e,d*8)}).then(function(e){var t=new Uint8Array(e);return m(t)}).catch(function(e){return u.catching(e).mustfix("Failed to create derived keys"),o("RetUtil").getNullableRetResult()})}l.CreateDerivedKeys=u}),98);
__d("EBDBConsistencyApi",["$InternalEnum","EBDB","FBLogger","I64","QPLUserFlow","ReQL","getErrorSafe","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],u=null;function c(){return u}async function d(t,n){try{var a=await o("EBDB").getEBDB(),l=BigInt((e||(e=o("I64"))).to_string(n));await a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:l,env:t}])},"EBDB - AddDevice",i.id+":54"),u=l}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on EBDB - AddDevice")}}function m(e){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.secure_encrypted_backups_client_state)).then(function(e){return e==null?void 0:e.deviceId})}async function p(e,t,n){if(n!=null)return d(t,n);try{var o=await m(e);return o==null?void 0:d(t,o)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on fetching secure_encrypted_backups_client_state")}}async function _(e,t){r("QPLUserFlow").addPoint(t,"track_overprompting_start");try{var n=await o("EBDB").getEBDB(),a=!1;await n.runInTransaction(["device_state"],"readwrite",async function(t){var n=await t.stores.device_state.get(e);(n==null?void 0:n.deviceId)!=null&&(a=!0)},"EBDB - AddDevice",i.id+":107"),r("QPLUserFlow").addAnnotations(t,{bool:{overprompting:a}}),r("QPLUserFlow").addPoint(t,"track_overprompting_end")}catch(e){r("QPLUserFlow").addPoint(t,"track_overprompting_fail"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on track overpropting")}}var f=n("$InternalEnum")({Disabled:0,EbsmInconsistent:1,EbdbInconsistent:2,Enabled:3,Inconsistent:4});async function g(t){var n=await m(t),r=n!=null?BigInt((e||(e=o("I64"))).to_string(n)):null;return r==null&&u==null?f.Disabled:r==null&&u!=null?f.EbsmInconsistent:r!=null&&u==null?f.EbdbInconsistent:r===u?f.Enabled:f.Inconsistent}async function h(e,t,n,o){var a=1/r("justknobx")._("3914");if(!(Math.random()>=a)){var i=r("qpl")._(521471316,"2831");try{r("QPLUserFlow").start(i);var l=await g(e);o!=null&&r("QPLUserFlow").addAnnotations(i,o()),r("QPLUserFlow").endSuccess(i,{annotations:{int:{consistency:l,env:t,operation:n}}})}catch(e){r("QPLUserFlow").endFailure(i,"error"),r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("Error on trackConsistency in %s",t)}}}async function y(){await o("EBDB").clearDeviceState(),u=null}var C;async function b(t,n){C!=null&&C(),await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.encrypted_backups)).then(function(e){e!=null&&((e==null?void 0:e.backupId)==null||(e==null?void 0:e.isUserOptedOut)===!0)&&y()}).catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDBApi: EBLS error on fetching data from encrypted_backups")}),C=t.tables.encrypted_backups.subscribe(function(e,t){t.operation!=="delete"&&(t.value.backupId==null||t.value.isUserOptedOut===!0)&&y()});var a=await o("EBDB").getEBDB(),l=await a.runInTransaction(["device_state"],"readonly",function(e){return e.stores.device_state.get(n)},"EBDB - readDeviceState",i.id+":250").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: fetching device_state")});if(u=v(l==null?void 0:l.deviceId),u==null){var s=await m(t);if(s==null)return;var c=BigInt((e||(e=o("I64"))).to_string(s));u=c,await a.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.bulkPut([{deviceId:c,env:n}])},"EBDB - writeDeviceState",i.id+":272").catch(function(e){r("FBLogger")("wmi_eb").catching(e).mustfix("EBDB error: write device_state")})}}function v(t){if(t!=null){if(typeof t=="bigint")return t;if(typeof t=="number")return BigInt(t);if(typeof t=="string")try{return BigInt(t)}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing string as BigInt"),y();return}if(Array.isArray(t))try{return BigInt((e||(e=o("I64"))).to_string(t))}catch(e){r("FBLogger")("wmi_eb").catching(r("getErrorSafe")(e)).mustfix("EBDBApi: Parsing I64 as BigInt"),y();return}r("FBLogger")("wmi_eb").mustfix("EBDBApi: Parsing unknown as BigInt %s",String(t)),y()}}l.EB_STORES=s,l.getDeviceId=c,l.addNewDevice=p,l.trackOverprompting=_,l.EBConsistencyResult=f,l.checkRegistrationConsistency=g,l.trackConsistency=h,l.clearDeviceState=y,l.startListeningDeviceRegistrations=b}),98);
__d("EBEncryptMessageTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}function u(e){return e}function c(e){return e}function d(e){return e}function m(e){return e}function p(e){return e}function _(e){return e}function f(e){return e}function g(e){return e}function h(e){return e}function y(e){return e}i.unsafeCastToAAD=e,i.unsafeCastToSecretKey=l,i.unsafeCastToPlaintext=s,i.unsafeCastToCiphertext=u,i.unsafeCastToMsgData=c,i.unsafeCastToMacKey=d,i.unsafeCastToHmac=m,i.unsafeCastToEBCreateDerivedKeysIkm=p,i.unsafeCastToEBCreateDerivedKeysInfo=_,i.unsafeCastToEBCreateDerivedKeysSalt=f,i.unsafeCastToEBCreateDerivedKeyLength=g,i.unsafeCastToEBDerivedKey=h,i.castEBDerivedKeyToArrayBuffer=y}),66);
__d("EBMainThreadEBDBApiDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("EBMainThreadEBDBApi").__setRef("EBMainThreadEBDBApiDeferred");function s(){return e.load().then(function(e){return e.startListeningDeviceRegistrations()})}function u(t){return e.load().then(function(e){return e.trackOverprompting(t)})}function c(t){return e.load().then(function(e){return e.addNewDevice(t)})}function d(){return e.load().then(function(e){return e.getEBDBDump()})}function m(t,n){return e.load().then(function(e){return e.trackConsistency(t,n)})}l.startListeningDeviceRegistrations=s,l.trackOverprompting=u,l.addNewDevice=c,l.getEBDBDump=d,l.trackConsistency=m}),98);
__d("EBSMAPI",["EBDeps"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return e!=null||(e=o("EBDeps").getDeps().getEBSMAPI()),e}var u={addDeviceWithEBKeys:async function(){var e;return(e=await s()).addDeviceWithEBKeys.apply(e,arguments)},addDeviceWithRecoveryCode:async function(){var e;return(e=await s()).addDeviceWithRecoveryCode.apply(e,arguments)},addVirtualDevice:async function(){var e;return(e=await s()).addVirtualDevice.apply(e,arguments)},deleteBackupsOnClient:async function(){var e;return(e=await s()).deleteBackupsOnClient.apply(e,arguments)},deleteEncryptedBackup:async function(){var e;return(e=await s()).deleteEncryptedBackup.apply(e,arguments)},ebOptOut:async function(){var e;return(e=await s()).ebOptOut.apply(e,arguments)},fetchBackupIds:async function(){var e;return(e=await s()).fetchBackupIds.apply(e,arguments)},generateRecoveryCode:async function(){var e;return(e=await s()).generateRecoveryCode.apply(e,arguments)},getEBState:async function(){return(await s()).getEBState()},getLSVirtualDevices:async function(t){return(await s()).getLSVirtualDevices(t)},initializeBackup:async function(){var e;return(e=await s()).initializeBackup.apply(e,arguments)},isEbEnabled:async function(){var e;return(e=await s()).isEbEnabled.apply(e,arguments)},optOutOfBackup:function(){return Promise.resolve()},otcAddDevice:async function(){var e;return(e=await s()).otcAddDevice.apply(e,arguments)},repairEpochs:async function(){return(await s()).repairEpochs()},revokeVirtualDevice:async function(){var e;return(e=await s()).revokeVirtualDevice.apply(e,arguments)},syncEpochs:async function(){return(await s()).syncEpochs()}},c=u;l.default=c}),98);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(t,n,r,o,a,i){"use strict";var e=16,l=28,s=16,u=128;i.hChaCha20SubKeyNonceLengthInBytes=e,i.totalNonceLengthInBytes=l,i.aesGcmTagLengthInBytes=s,i.aesGcmTagLength=u}),66);
__d("HChaCha20",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}e.fromHexString=function(t){var e=t.match(/[A-Fa-f0-9]{1,2}/g);if(t.length===0||t.length%2!==0||e==null)throw r("err")('The string "'+t+'" is not valid hex.');return new Uint8Array(e.map(function(e){return parseInt(e,16)}))},e.bufferToUint32Array=function(t){for(var e=new DataView(t),n=[],r=t.byteLength/4,o=0;o<r;o++)n.push(new DataView(e.buffer.slice(o*4,o*4+4)).getInt32(0));return Uint32Array.from(n)},e.rotate=function(t,n){var e=t&4294967295,r=n&31;return(e<<r|e>>>32-r)>>>0},e.quarterRound=function(n,r,o,a){var t=n,i=r,l=o,s=a;return t=t+i&4294967295,s=e.rotate(s^t,16),l=l+s&4294967295,i=e.rotate(i^l,12),t=t+i&4294967295,s=e.rotate(s^t,8),l=l+s&4294967295,i=e.rotate(i^l,7),[t>>>0,i>>>0,l>>>0,s>>>0]};var t=e.prototype;return t.createHCtx=function(n,o){var t=new Uint32Array(16),a=e.fromHexString("657870616e642033322d62797465206b");if(a.byteLength!==16)throw r("err")("Could not create context. Invalid constant buffer length of "+a.byteLength+". Expected a length of 16");if(n.byteLength!==32)throw r("err")("Could not create context. Invalid key buffer length of "+n.byteLength+". Expected a length of 32");if(o.byteLength!==16)throw r("err")("Could not create context. Invalid nonce buffer length of "+o.byteLength+". Expected a length of 16");var i=e.bufferToUint32Array(a.buffer),l=e.bufferToUint32Array(n),s=e.bufferToUint32Array(o);return t.set(i),t.set(l,i.length),t.set(s,i.length+l.length),t.buffer},t.hChaCha20Bytes=function(n,r){for(var t=new DataView(this.createHCtx(r,n)),o=t.getInt32(0),a=t.getInt32(4),i=t.getInt32(8),l=t.getInt32(12),s=t.getInt32(16),u=t.getInt32(20),c=t.getInt32(24),d=t.getInt32(28),m=t.getInt32(32),p=t.getInt32(36),_=t.getInt32(40),f=t.getInt32(44),g=t.getInt32(48),h=t.getInt32(52),y=t.getInt32(56),C=t.getInt32(60),b=0;b<10;b++){var v=e.quarterRound(o,s,m,g);o=v[0],s=v[1],m=v[2],g=v[3];var S=e.quarterRound(a,u,p,h);a=S[0],u=S[1],p=S[2],h=S[3];var R=e.quarterRound(i,c,_,y);i=R[0],c=R[1],_=R[2],y=R[3];var L=e.quarterRound(l,d,f,C);l=L[0],d=L[1],f=L[2],C=L[3];var E=e.quarterRound(o,u,_,C);o=E[0],u=E[1],_=E[2],C=E[3];var k=e.quarterRound(a,c,f,g);a=k[0],c=k[1],f=k[2],g=k[3];var I=e.quarterRound(i,d,m,h);i=I[0],d=I[1],m=I[2],h=I[3];var T=e.quarterRound(l,s,p,y);l=T[0],s=T[1],p=T[2],y=T[3]}return Uint32Array.from([o,a,i,l,g,h,y,C]).buffer},e})();l.HChaCha20=e}),98);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(o,a,i){var t=Array.from(new Uint8Array(i)),l=t.map(function(e){return e.toString(16).padStart(2,"0")}),s=l.join("").toUpperCase();return(e||(e=n("Promise"))).resolve(r("LSResult")(s))};s.__nop_name__="LSBinaryToHex",l.default=s}),98);
__d("LSCreateDerivedKeys.nop",["CreateDerivedKeys","LSVec"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a,i,l,s){return o("CreateDerivedKeys").CreateDerivedKeys(a,i,l,r("LSVec").toArray(s))};e.__nop_name__="LSCreateDerivedKeys",l.default=e}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return new Uint8Array(e)}function s(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder;return t.encode(e)}function u(e){var t=new(o("XPlatReactTextDecoder")).TextDecoder;return t.decode(e)}function c(e){return u(new Uint8Array(e))}function d(e){return s(e).buffer}function m(e,t){var n=e.byteLength,o=t.byteLength;if(n!==o)throw r("FBLogger")("messenger_web").mustfixThrow("[LS] Mismatched lengths for modAdd, %d != %d",n,o);var a=new Uint8Array(n);return new Uint8Array(n).reduceRight(function(n,r,o){var i=e[o],l=t[o],s=i+l+n,u=s>255?[s-256,1]:[s,0];return a[o]=u[0],u[1]},0),a}l.bufToUint8=e,l.strToUint8=s,l.uint8ToStr=u,l.bufToStr=c,l.strToBuf=d,l.modAddBytes=m}),98);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","LSSynchronousPromise","XPlatReactTextEncoder","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a){var e=new(o("XPlatReactTextEncoder")).TextEncoder;try{var i=e.encode(a).buffer;return o("LSSynchronousPromise").makeSynchronousPromise(r("LSResult")(i))}catch(e){var l=r("getErrorSafe")(e),s=o("CryptoLogger").CryptoLogger("get_blob_from_string");throw s.catching(l).mustfix(l.message),l}};e.__nop_name__="LSGetBlobFromString",l.default=e}),98);
__d("LSLoadThreadPkFromThreadId",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadThreadPkFromThreadId] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.filter(t.db.table(173).fetch(),function(n){return t.i64.to_string(n.jid)===e[0]}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,100])),r[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[13].set("error_message",""),o=[void 0,r[13]],r[2]=o[0],r[3]=o[1]):(n=l.item,a=[n.clientThreadPk,void 0],r[2]=a[0],r[3]=a[1])})},function(e){var o,a,i,l;return t.i64.neq(r[2],void 0)?(o=[r[2],r[3]],r[5]=o[0],r[6]=o[1]):(r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,7])),r[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[13].set("error_message",""),t.i64.neq(void 0,void 0)?(a=[void 0,r[13]],r[14]=a[0],r[15]=a[1]):(r[16]=new t.Map,r[16].set("error_code",t.i64.cast([0,100])),r[16].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[16].set("error_message",""),i=[void 0,r[16]],r[14]=i[0],r[15]=i[1]),l=[r[14],r[15]],r[5]=l[0],r[6]=l[1]),r[7]=t.i64.of_float(Date.now()),r[8]=t.i64.random(),r[10]="Finishing execution. Execution time: ",r[11]=t.i64.to_string(t.i64.sub(r[7],r[0])),r[12]=" ms",r[9]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadThreadPkFromThreadId] ",r[9],r[10],r[9],r[11],r[9],r[12]].join("")),t.i64.eq(t.i64.mod_(r[8],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[13]=",",r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadThreadPkFromThreadId",[r[10],r[13],r[11],r[13],r[12]].join(""),r[14],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[5],r[6]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure",e.__tables__=["mi_act_mapping_table"],a.exports=e}),null);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop"),s=function(n,r,o,a,i,l,s,u){return e.load().then(function(e){return e.call(o,a,i,l,s,u)})};s.__nop_name__="LSLogWebQpl",l.default=s}),98);
__d("LSMEBTaskCreationSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,MEM_RECEIVE_PROTOBUF_ONLY_FBN:16,MEM_SEND_PROTOBUF_ONLY_FBN:17,MEM_PEER_SYNC_PROTOBUF_ONLY_FBN:18,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,NEW_MEMBER_EXPORT:59,THREAD_POINT_QUERY:76,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,EB_POINT_QUERY_BUMP_MESSAGES:60,EB_POINT_QUERY_IN_ACT_FOR_INCOMING_RETRY_RECEIPT:61,EB_POINT_QUERY_IN_ACT_FOR_REPORTING:62,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_STATUS_UPDATE:63,EB_POINT_QUERY_IN_ACT_FOR_REPL_TEST:64,EB_POINT_QUERY_IN_ACT_FOR_FACEBOOK_APP_NSE_NOTIFICATION_RENDERING:65,EB_POINT_QUERY_IN_ACT_FOR_MESSAGE_EXPORT_HANDLING:66,EB_POINT_QUERY_IN_ACT_FOR_TAM_ACT_PROXY:67,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_MESSAGE:68,EB_POINT_QUERY_IN_ACT_FOR_REALTIME_INCOMING_AI_BOT_MESSAGE:69,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_PERSISTENCE:70,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_INDEXING:71,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_NEW_MEMBER_HYDRATION:72,EB_POINT_QUERY_IN_ACT_FOR_ENCRYPTED_BACKUPS_RESTORE_FOR_ECHO_TO_PROTO_CONVERSION:73,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_HISTORICAL_FUTURE_PROOF:74,EB_POINT_QUERY_IN_ACT_FOR_PENDING_MESSAGE_RECOVERY_REALTIME_BLOCKED:75,EB_POINT_QUERY_TO_FETCH_SENDER_DEVICE_KEYS:77,RESONANCE_UTILS:80,MPS_RESTORE_REVERB_RESTORE:81,REPORTING:82,CLIENT_MESSAGE_TRUNCATION:83,CALLING_XMA:84,EB_ACT_ATTACHMENT_RESTORE:85,EB_MEB_ATTACHMENT_ACCESS_CONTROL_RESTORE:86,FORCE_CLIENT_MESSAGE_TRUNCATION:87,ACT_EDIT_MESSAGE_VALIDATION:88,ACT_REVOKE_MESSAGE_VALIDATION:89,REVERB_CLEANUP_HANDLER_SINGLE_MESSAGE_POINT_QUERY:90,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_BEFORE_QUERY:91,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_AFTER_QUERY:92,REVERB_CLEANUP_HANDLER_RESTORE_MESSAGES_SURROUNDING_QUERY:93,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_LOCAL_BACKUP_RESTORE:94,ACT_FETCH_LOCAL_ONLY_MESSAGE_PK_AND_ENCRYPTED_BACKUP_RESTORE:95,FILE_GALLERY_RESTORE:96});i.default=e}),66);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e<10)return 10-e;var t=Math.floor(Math.log2(e)),n=Math.floor(Math.log2(t))+1,r=t-n,o=(1<<r)-1,a=e+o&(o^-1);return a-e}function s(t){var n=Uint32Array.BYTES_PER_ELEMENT,r=t.byteLength,o=e(r),a=n+r+o,i=new DataView(new ArrayBuffer(a));i.setUint32(0,r);var l=new Uint8Array(i.buffer);return l.set(new Uint8Array(t),n),l.buffer}function u(e){var t=new(o("XPlatReactTextEncoder")).TextEncoder,n=t.encode(e).buffer;return s(n)}function c(e){var t=Uint32Array.BYTES_PER_ELEMENT,n=new DataView(e);if(!(n.byteLength<t)){var r=e.byteLength,o=n.getUint32(0),a=r-t;if(o>=0&&o<=a)return e.slice(t,t+o)}}l.getPaddingLength=e,l.padData=s,l.pad=u,l.stripPadding=c}),98);
__d("SymmetricEncryptionCreateDecryptedData",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_data"),u=function(r,a,i){if(i.byteLength<o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes)return s.mustfix("cipher text is invalid"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult());var t=new Uint8Array(i),l=t.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes),u=new(o("HChaCha20")).HChaCha20,c=t.slice(o("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer,d=u.hChaCha20Bytes(l.slice(0,o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,r);return o("XPlatReactCrypto").subtleImportKey("raw",d,"AES-GCM",!1,["decrypt"]).then(function(e){return o("XPlatReactCrypto").subtleDecrypt({additionalData:a,iv:new Uint8Array(l.slice(o("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:o("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},e,c)}).then(function(e){var t=o("SymmetricEncryptionPaddingUtils").stripPadding(e);return t==null&&s.mustfix("Failed to strip padding for symmetric decryption"),o("RetUtil").getNullableRetResult(t)}).catch(function(t){return o("CryptoLogger").captureError(s,t).mustfix("symmetric data decryption failed"),(e||(e=n("Promise"))).resolve(o("RetUtil").getNullableRetResult())})};l.default=u}),98);
__d("LSSymmetricEncryptionCreateDecryptedData.nop",["EBEncryptMessageTypes","SymmetricEncryptionCreateDecryptedData"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,a,i,l){return r("SymmetricEncryptionCreateDecryptedData")(o("EBEncryptMessageTypes").unsafeCastToSecretKey(a),o("EBEncryptMessageTypes").unsafeCastToAAD(i),o("EBEncryptMessageTypes").unsafeCastToCiphertext(l))};e.__nop_name__="LSSymmetricEncryptionCreateDecryptedData",l.default=e}),98);
__d("LSSymmetricEncryptionCreateDecryptedString.nop",["Base64Utils","CryptoLogger","LSResult","LSSymmetricEncryptionCreateDecryptedData.nop","XPlatReactTextDecoder"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("LSResult")(e)}var s=function(n,a,i,l,s){var t=o("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_string"),u=o("Base64Utils").toArrayBuffer(s);return r("LSSymmetricEncryptionCreateDecryptedData.nop")(n,a,i,l,u).then(function(e){var t=e[0];return t}).then(function(t){return t==null?e():e(new(o("XPlatReactTextDecoder")).TextDecoder().decode(t))}).catch(function(n){return o("CryptoLogger").captureError(t,n).mustfix("symmetric string decryption failed"),e()})};s.__nop_name__="LSSymmetricEncryptionCreateDecryptedString",l.default=s}),98);
__d("MAWBridgeSafeActionsWorkerAndUI",["ExecutionEnvironment","FBLogger","MAWBridge","Promise","ifRequireable"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().sendAndReceive("backend",t,a,i==null?void 0:i.isLoggingDisabled):new(e||(e=n("Promise")))(function(e,n){return r("ifRequireable")("MAWBridgeSendAndReceive",function(n){var r=n.sendAndReceive;return e(r("backend",t,a,i))},function(){return n("MAWBridgeSendAndReceive not available in UI ifRequired")})})}function c(e,t,n){return(s||(s=r("ExecutionEnvironment"))).isInWorker?o("MAWBridge").getBridge().fireAndForget("backend",e,t,n):r("ifRequireable")("MAWBridgeFireAndForget",function(r){var o=r.fireAndForget;return o("backend",e,t,n)},function(){throw r("FBLogger")("messenger_web").mustfixThrow("MAWBridgeFireAndForget not available in UI ifRequired")})}l.sendAndReceiveBackendWorkerAndUIShared=u,l.fireAndForgetBackendWorkerAndUIShared=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={dyi:r("justknobx")._("467"),frontloaded:20,initial:20,paginated:r("justknobx")._("3177"),point:1,search:r("justknobx")._("2477")};function c(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"paginated"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function d(t){var n=t.querySource,a=t.runningInWorker,i=t.taskSource,l=t.traceId;l!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:i,traceId:l,triggerType:"initial"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function m(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"dyi"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function p(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"frontloaded"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function _(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"point"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function f(t){var n=t.querySource,a=t.runningInWorker,i=t.traceId;i!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:i,triggerType:"search"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function g(t,n){t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLSuccessThroughBridge(r("qpl")._(521476165,"2432"),void 0,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endSuccess(r("qpl")._(521476165,"2432"),{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function h(t,n,a,i){a===void 0&&(a="restore_failure"),t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLFailThroughBridge(r("qpl")._(521476165,"2432"),a,i,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endFailure(r("qpl")._(521476165,"2432"),a,{annotations:i,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function y(e){L("protobuf",e)}function C(e){var t=e.querySource,n=e.runningInWorker,a=e.taskSource,i=e.traceId,l=e.triggerType;if(n!=null&&n){var s;o("MAWQplProxy").startQplUserFlow(r("qpl")._(521476165,"2432"),{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(s=u[l])!=null?s:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},{providedInstanceKey:o("WAHashStringToNumber").hashStringToNumber(i),providedTimeoutInMs:r("justknobx")._("2950")})}else{var c;r("QPLUserFlow").start(r("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(c=u[l])!=null?c:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},instanceKey:o("WAHashStringToNumber").hashStringToNumber(i),timeoutInMs:r("justknobx")._("2950")})}}function b(e){var t=e.pointName,n=e.traceId;r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function v(e){var t=e.annotations,n=e.pointName,a=e.traceId;r("QPLUserFlow").addAnnotations(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)}),r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),n,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function S(e){var t=e.annotations,n=e.pointName,a=e.traceId;a!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),n,{annotations:t,instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function R(e){var t=e.pointName,n=e.traceId;o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function L(t,n){var a=n?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):null;(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+t+"."+E(a))}function E(e){var t;return(t=e==null?void 0:e.toString())!=null?t:"unknown"}l.markEBRestorePaginated=c,l.markEBRestoreInitial=d,l.markEBRestoreDYI=m,l.markEBRestoreFrontloaded=p,l.markEBRestorePoint=_,l.markEBRestoreSearch=f,l.markEBRestoreSuccess=g,l.markEBRestoreFail=h,l.markEBRestoreProtobuf=y,l.addQPLRestorePoint=b,l.addQPLRestorePointWithAnnotations=v,l.addQPLRestorePointWithAnnotationsWorker=S,l.addQPLRestorePointWorker=R}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:c(t),tagLength:a*8};return r!=null&&(i.additionalData=c(r)),o("WACryptoDependencies").getCrypto().subtle.encrypt(i,await u(e),n)}async function s(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:c(t),tagLength:a*8};return r!=null&&(i.additionalData=c(r)),o("WACryptoDependencies").getCrypto().subtle.decrypt(i,await u(e),n)}function u(e){return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",e,"AES-GCM",!1,["encrypt","decrypt"])}function c(e){if(e instanceof Uint8Array)return e;if(typeof e=="string"){var t=new(o("WABinary")).Binary;return t.writeString(e),t.readByteArrayView()}return new Uint8Array(e)}l.gcmEncrypt=e,l.gcmDecrypt=s}),98);
__d("WATypedArraysCast",["WABase64"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t instanceof e?t:typeof t=="string"?new e(o("WABase64").decodeB64(t)):new e(t)}l.castTypedArrays=e}),98);
__d("WACryptoHmac",["WACryptoDependencies","WATypedArraysCast"],(function(t,n,r,o,a,i,l){"use strict";var e=32,s=new Uint8Array(e),u={name:"HMAC",hash:"SHA-256"},c={name:"HMAC",hash:"SHA-512"},d={name:"HMAC",hash:"SHA-1"};function m(e,t){var n=o("WATypedArraysCast").castTypedArrays(Uint8Array,t);return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",n,e,!1,["sign"]).then(function(t){return{key:t,algo:e}})}function p(e){return m(u,e)}function _(e,t,n){var r=e.key,a=e.algo;return o("WACryptoDependencies").getCrypto().subtle.sign(a,r,t).then(function(e){return n!=null&&n!==0?e.slice(0,n):e})}function f(e,t){return m(u,e!=null?e:s).then(function(e){return _(e,t)})}function g(e,t,n){return m(u,e).then(function(e){return _(e,t,n)})}function h(e,t,n){return m(c,e).then(function(e){return _(e,t,n)})}function y(e,t,n){return m(d,e).then(function(e){return _(e,t,n)})}l.SHA256_BYTE_LENGTH=e,l.DEFAULT_SALT=s,l.encodeKeySha256=p,l.sign=_,l.extractSha256=f,l.hmacSha256=g,l.hmacSha512=h,l.hmacSha1=y}),98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=255*o("WACryptoHmac").SHA256_BYTE_LENGTH;function u(t,a,i){if(i<0||i>s)return(e||(e=n("Promise"))).reject(r("err")("HKDF::expand given bad length "+i));for(var l,u=Math.ceil(i/o("WACryptoHmac").SHA256_BYTE_LENGTH),c=o("WABinary").Binary.build(a).readByteArrayView(),d=new(o("WABinary")).Binary,m=o("WACryptoHmac").encodeKeySha256(t).then(function(e){return l=e,new Uint8Array(0)}),p=function(t){m=m.then(function(e){return o("WACryptoHmac").sign(l,o("WABinary").Binary.build(e,c,t).readByteArrayView())}).then(function(e){var t=new Uint8Array(e);return d.writeByteArray(t),t})},_=1;_<=u;_++)p(_);return m.then(function(){return d.readBuffer(i)})}function c(e,t,n){return o("WACryptoHmac").extractSha256(null,e).then(function(e){return u(new Uint8Array(e),t,n)})}function d(e,t,n,r){return o("WACryptoHmac").extractSha256(t,e).then(function(e){return u(new Uint8Array(e),n,r)})}l.expand=u,l.extractAndExpand=c,l.extractWithSaltAndExpand=d}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit",MESSAGE_EDIT:"Message Edit"}),s=32;function u(e){var t=e.messageSecret,n=e.stanzaId,r=e.parentMsgOriginalSender,a=e.modificationSender,i=e.modificationType,l=o("WABinary").Binary.build(n,r,a,i).readBuffer();return o("WACryptoHkdf").extractAndExpand(t instanceof ArrayBuffer?new Uint8Array(t):t,l,s)}l.UseCaseSecretModificationType=e,l.createUseCaseSecret=u}),98);
__d("MAWGroupPollsDualEncryptionUtils",["MAWDbPoll","WABase64","WAConsumerApplication.pb","WACryptoAesGcm","WACryptoSha256","WAResultOrError","WAUseCaseSecret","decodeProtobuf","encodeProtobuf","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){if(e.encIv==null||e.encPayload==null)return o("WAResultOrError").makeError("invalid_poll_enc_value");var a=e.encIv,i=e.encPayload;try{var l=await o("WACryptoAesGcm").gcmDecrypt(t,a,i,n);return o("WAResultOrError").makeResult(l)}catch(e){return o("WAResultOrError").DEPRECATED_makeError("decryption_error",r("getErrorSafe")(e))}}async function s(e,t,n){try{var a=self.crypto.getRandomValues(new Uint8Array(12)),i=await o("WACryptoAesGcm").gcmEncrypt(t,a,e,n);return o("WAResultOrError").makeResult({encIv:a.buffer,encPayload:i})}catch(e){return o("WAResultOrError").DEPRECATED_makeError("encryption_error",r("getErrorSafe")(e))}}function u(e,t){var n=e+"\0"+t;return new TextEncoder().encode(n).buffer}async function c(e,t){var n=t.pollCreationMessageKey,r=t.pollCreationSenderJid,a=t.pollCreationStanzaId,i=t.pollUpdateSenderJid,l=t.pollUpdateStanzaId,c=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:n,modificationSender:i,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:r,stanzaId:a}),d=u(l,i),m=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,e).readBuffer();return s(m,c,d)}async function d(t,n){var a=n.pollCreationMessageKey,i=n.pollCreationSenderJid,l=n.pollCreationStanzaId,s=n.pollUpdateSenderJid,c=n.pollUpdateStanzaId,d=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:a,modificationSender:s,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:i,stanzaId:l}),m=u(c,s),p=await e(t,d,m);if(!p.success)return p;try{return o("WAResultOrError").makeResult(o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,p.value))}catch(e){return o("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",r("getErrorSafe")(e))}}async function m(e,t){var n=t.pollCreationMessageKey,r=t.pollCreationSenderJid,a=t.pollCreationStanzaId,i=t.pollUpdateSenderJid,l=t.pollUpdateStanzaId,c=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:n,modificationSender:i,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:r,stanzaId:a}),d=u(l,i),m=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,e).readBuffer();return s(m,c,d)}async function p(t,n){var a=n.pollCreationMessageKey,i=n.pollCreationSenderJid,l=n.pollCreationStanzaId,s=n.pollUpdateSenderJid,c=n.pollUpdateStanzaId,d=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:a,modificationSender:s,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:i,stanzaId:l}),m=u(c,s),p=await e(t,d,m);if(!p.success)return p;try{return o("WAResultOrError").makeResult(o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,p.value))}catch(e){return o("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",r("getErrorSafe")(e))}}async function _(e){var t=await o("WACryptoSha256").sha256(new TextEncoder("utf8").encode(e));return f(t)}function f(e){return o("MAWDbPoll").convertStringToOptionHash(o("WABase64").encodeB64(e))}l.encryptGroupPollVote=c,l.decryptGroupPollVote=d,l.encryptGroupPollAddOption=m,l.decryptGroupPollAddOption=p,l.getHashForOptionName=_,l.getBase64EncodedHash=f}),98);
__d("MAWMainTraceUtils",["LSRequestId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("LSRequestId").generate()}l.createTraceId=e}),98);
__d("MAWMediaGalleryEBTaggingUtils",["LSThreadMediaGalleryGroup","MAWMpsGating","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("13725")}function s(e){return u(e)!=null}function u(e){return e===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS:e===r("LSThreadMediaGalleryGroup").FILES_ONLY&&o("MAWMpsGating").isFileGalleryEBTaggingEnabled()?r("LSThreadMediaGalleryGroup").FILES_ONLY:void 0}l.isMediaGalleryEBTaggingRestoreEnabled=e,l.isMediaGalleryGroupSupportedForTaggedRestore=s,l.toMediaGalleryGroupForTaggedRestore=u}),98);
__d("MWChatEncryptedBackupsLogging",["MWEBODSCategory","MWEBODSEntityKey.enum","ODS","QPLUserFlow"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.cancelEndPoint,n=e.event,o=e.instanceKey,a=e.source;a!=null&&r("QPLUserFlow").addAnnotations(n,{string:{source:a}},{instanceKey:o}),r("QPLUserFlow").addPoint(n,"cancel",{instanceKey:o}),r("QPLUserFlow").addAnnotations(n,{string:{cancel_end_point:t}},{instanceKey:o}),r("QPLUserFlow").endCancel(n,{instanceKey:o})}function u(e){var t=e.event,n=e.instanceKey,o=e.onClose,a=e.source;a!=null&&r("QPLUserFlow").addAnnotations(t,{string:{source:a}},{instanceKey:n}),s({cancelEndPoint:"dialog_x_button",event:t,instanceKey:n}),o()}function c(t){var n=t.annotations,a=t.event,i=t.instanceKey,l=t.odsEntityName;r("QPLUserFlow").addPoint(a,"success",{instanceKey:i}),r("QPLUserFlow").endSuccess(a,{annotations:n,instanceKey:i}),l&&(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),l,r("MWEBODSEntityKey.enum").SUCCESS)}function d(t){var n=t.annotations,a=t.errorName,i=t.event,l=t.instanceKey,s=t.odsEntityKey,u=t.odsEntityName;r("QPLUserFlow").addPoint(i,"failure",{instanceKey:l}),r("QPLUserFlow").endFailure(i,a,{annotations:n,instanceKey:l}),u&&(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),u,s!=null?s:r("MWEBODSEntityKey.enum").FAIL)}l.cancelFlow=s,l.closeDialogCancelFlow=u,l.endSuccess=c,l.endFailure=d}),98);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CurrentMessengerUser").getAppID(),l=i!=null?i.toString():"unknown",s=t+"."+l;(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),s,n,a!=null?a:1),e.bumpEntityKey(r("MWEBODSCategory"),t,n,a!=null?a:1)}l.markODSForEB=s}),98);
__d("MWEncryptedBackupsInitializeRestoreDeferred",["MWChatEncryptedBackupsQPLEvents","QPLUserFlow","WALogger","promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("MWEncryptedBackupsInitializeRestore").__setRef("MWEncryptedBackupsInitializeRestoreDeferred");function u(t){var n=t.db,a=t.onFailure,i=t.onSuccess;s.onReady(function(t){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,"add_device_init_restore_sproc"),r("promiseDone")(t.initializeRestore(n),i,function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error initializing restore: ",""])),t),a==null||a("failed_to_initialize_restore")})})}l.encryptedBackupsInitializeRestoreDeferred=u}),98);
__d("MpsLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return r("FBLogger")("mps",t)};l.MpsLogger=e}),98);
__d("WebMpsReverbWrites",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n,r,o,a,i){var l=[o,r,n];return i(async function(i){var s,u=await i.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",l);if(!(((s=u==null?void 0:u.timestampMs)!=null?s:0)>=a)){var c={messageId:e,payload:t,supplementalKey:n,threadId:o,timestampMs:a,topLevelMessageId:r};await i.stores.supplemental.bulkUpsert("[threadId+topLevelMessageId+supplementalKey]",[{item:c,selector:l}])}})}function l(e,t,n){var r=e.messageId,o=e.threadId;return n(async function(n){var a,i=await n.stores.message.getByIndex("[threadId+messageId]",[o,r]);if(!(i!=null&&!i.isTransportErrorPlaceholder)&&!(i!=null&&i.isTransportErrorPlaceholder&&t.isTransportErrorPlaceholder)){var l=await n.stores.deleted.getByIndex("[threadId+deletedMessageId]",[e.threadId,e.messageId]),s=babelHelpers.extends({},e,{debugFlags:t.debugFlags,expiryTimestampMs:t.expiryTimestampMs,isLocalOnlyMessage:t.isLocalOnly,isTransportErrorPlaceholder:t.isTransportErrorPlaceholder,timestampMs:(a=i==null?void 0:i.timestampMs)!=null?a:e.timestampMs});if(l)l.payload=s.payload,await n.stores.deleted.bulkPut([l]),i!=null&&(i.timestampMs=e.timestampMs,await n.stores.message.bulkPut([i]));else{var u=await n.stores.message.bulkUpsert("[threadId+messageId]",[{item:s,selector:[o,r]}]),c=u[0],d=await n.stores.tags.readIndexRange("[threadId+messageId+tag]",{only:[o,r]});d.length>0&&await n.stores.tags.bulkDelete(d.map(function(e){return e.pk})),t.tags.length>0&&await n.stores.tags.bulkAdd(t.tags.map(function(e){return{messageId:s.messageId,messagePk:c,tag:e,threadId:s.threadId,timestampMs:s.timestampMs}}))}}})}i.upsertSupplementalToReverb=e,i.upsertTopLevelToReverb=l}),66);
__d("WormMemoryDriver",["WAResolvable","WormStoreFunctions","err"],(function(t,n,r,o,a,i,l){"use strict";var e=0;function s(){return e+=1,e}function u(){e=0}var c=(function(){function e(e){this.$2={},this.$3=Promise.resolve(),this.$1=e;for(var t of Object.keys(e))this.$2[t]=new Map}var t=e.prototype;return t.getSchema=function(){return this.$1},t.getDbAlias=function(){},t.runInTransaction=function(t,n,r,a){var e=this,i=new(o("WAResolvable")).Resolvable;return this.$3=this.$3.then(async function(){var o={};for(var a of Object.keys(e.$1))o[a]=new Map(e.$2[a]);var l=t.reduce(function(t,n){var r;return babelHelpers.extends({},t,(r={},r[n]=new d(o[n],e.$1[n]),r))},{}),s={abort:function(){},commit:function(){return i.promise.then(function(){})},stores:l},u=await r(s);n==="readwrite"&&(e.$2=o),i.resolve(u)}).catch(function(e){i.reject(e)}),i.promise},t.close=function(){},t.init=function(t){return Promise.resolve({isNewDb:!0,isUpgraded:!1})},e})(),d=(function(){function e(e,t){var n=this;this.readIndexRange=function(e,t,o){var a=n.$2.indexes;if(a==null)throw r("err")("No indexes found");var i=a[e];if(i==null)throw r("err")("Index not found");var l=Array.from(n.$1.values());if(t!=null){var s,u,c,d;l=p(l,(s=(u=t.lessThan)!=null?u:t.lessThanOrEqual)!=null?s:t.only,t.lessThanOrEqual!=null||t.only!=null,(c=(d=t.greaterThan)!=null?d:t.greaterThanOrEqual)!=null?c:t.only,t.greaterThanOrEqual!=null||t.only!=null,i)}return Promise.resolve(n.$4(l,o,e))},this.$1=e,this.$2=t}var t=e.prototype;return t.bulkAdd=function(t){var e=this;for(var n of t){if(this.$2.autoIncrement===!0&&n[this.$2.primaryKey]===void 0&&(n[this.$2.primaryKey]=s()),this.$1.has(n[this.$2.primaryKey]))throw r("err")("Item with key already exists");this.$3(n),this.$1.set(n[this.$2.primaryKey],n)}return Promise.resolve(t.map(function(t){return t[e.$2.primaryKey]}))},t.bulkPut=function(t){for(var e of t)this.$3(e),this.$1.set(e[this.$2.primaryKey],e);return Promise.resolve()},t.$3=function(t){var e=this,n=this.$2.indexes;if(n!=null){for(var o of Object.values(n))if(!(typeof o!="object"||o==null)){var a=o.fields,i=o.unique;if(i!==!1){var l=a.map(function(e){return t[e]}).join(":"),s=function(o){if(o[e.$2.primaryKey]===t[e.$2.primaryKey])return 1;var n=a.map(function(e){return o[e]}).join(":");if(l===n)throw r("err")("ConstraintError")};for(var u of this.$1.values())s(u)}}}},t.bulkGet=function(t){var e=this;return Promise.resolve(t.map(function(t){return e.$1.get(t)}))},t.get=function(t){return Promise.resolve(this.$1.get(t))},t.getByIndex=function(t,n,r){return o("WormStoreFunctions").getByIndex(this,t,n,r)},t.readByKeyRange=function(t,n){var e,r,o=m(Array.from(this.$1.values()),(e=t.lessThan)!=null?e:t.lessThanOrEqual,t.lessThanOrEqual!=null,(r=t.greaterThan)!=null?r:t.greaterThanOrEqual,t.greaterThanOrEqual!=null,this.$2.primaryKey);return Promise.resolve(this.$4(o,n))},t.bulkDelete=function(t){for(var e of t)this.$1.delete(e);return Promise.resolve()},t.delete=function(t){return this.$1.delete(t),Promise.resolve()},t.bulkUpsert=function(t,n){return o("WormStoreFunctions").bulkUpsert(this,this.$2,t,n)},t.readKeysByIndexRange=function(t,n,r){var e=this;return this.readIndexRange(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},t.getIndexRangeIterator=function(t,n,r,a){return o("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$2,t,n,r,a)},t.$4=function(t,n,r){var e=t;return(n==null?void 0:n.filter)!=null&&(e=e.filter(n.filter)),(n==null?void 0:n.order)!=null&&r!=null&&(e=e.sort(function(e,t){var o=e[r],a=t[r];return o===a?0:n.order==="desc"?a>o?1:-1:o>a?1:-1})),(n==null?void 0:n.limit)!=null&&(e=e.slice(0,n.limit)),e},t.readIndex=function(t,n,o){var e=this.$2.indexes;if(e==null)throw r("err")("No indexes found");var a=e[t];if(a==null)throw r("err")("Index not found");var i=Array.from(this.$1.values());return n!=null&&(i=i.filter(function(e){for(var t=0;t<a.fields.length;t++)if(e[a.fields[t]]!==n[t])return!1;return!0})),Promise.resolve(this.$4(i,o,t))},t.readIndexAnyOf=function(t,n,o){var e=this.$2.indexes;if(e==null)throw r("err")("No indexes found");var a=e[t];if(a==null)throw r("err")("Index not found");if(n.length===0)return Promise.resolve([]);var i=Array.from(this.$1.values());return i=i.filter(function(e){return n.some(function(t){for(var n=0;n<a.fields.length;n++)if(t[n]!==void 0&&e[a.fields[n]]!==t[n])return!1;return!0})}),Promise.resolve(this.$4(i,o,t))},t.readIndexKeys=function(t,n,r){var e=this;return this.readIndex(t,n,r).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},t.readAll=function(t){var e=this,n=Array.from(this.$1.values());return(t==null?void 0:t.filter)!=null&&(n=n.filter(t.filter)),(t==null?void 0:t.order)!=null&&(n=n.sort(function(n,r){var o=n[e.$2.primaryKey],a=r[e.$2.primaryKey];return o===a?0:t.order==="desc"?a>o?1:-1:o>a?1:-1})),(t==null?void 0:t.limit)!=null&&(n=n.slice(0,t.limit)),Promise.resolve(n)},t.readKeys=function(t){var e=this;return this.readAll(t).then(function(t){return t.map(function(t){return t[e.$2.primaryKey]})})},t.clear=function(){return this.$1.clear(),Promise.resolve()},t.count=function(){return Promise.resolve(this.$1.size)},e})();function m(e,t,n,r,o,a){return e.filter(function(e){return!(r!=null&&r>e[a]||t!=null&&t<e[a]||t!=null&&n===!1&&e[a]===t||r!=null&&o===!1&&e[a]===r)})}function p(e,t,n,r,o,a){return e.filter(function(e){for(var i=0;i<a.fields.length;i++)if(r!=null&&r[i]>e[a.fields[i]]||t!=null&&t[i]<e[a.fields[i]]||i===a.fields.length-1&&(t!=null&&n===!1&&e[a.fields[i]]===t[i]||r!=null&&o===!1&&e[a.fields[i]]===r[i]))return!1;return!0})}l.TEST_ONLY_resetPK=u,l.WormMemoryDriver=c,l.WormMemoryStore=d}),98);
__d("WebReverbSchema",["FBLogger","MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver","WormMemoryDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[threadId+messageId]":{fields:["threadId","messageId"],unique:!0},"[threadId+timestampMs+messageId]":{fields:["threadId","timestampMs","messageId"],unique:!1},expiryTimestampMs:{fields:["expiryTimestampMs"],unique:!1},messageId:{fields:["messageId"],unique:!1},timestampMs:{fields:["timestampMs"],unique:!1}},nonEncryptedFields:["timestampMs","expiryTimestampMs","messageId","debugFlags"],primaryKey:"pk",secure:!0},s={autoIncrement:!0,indexes:{"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!0}},nonEncryptedFields:["topLevelMessageId"],primaryKey:"pk",secure:!0},u={autoIncrement:!0,indexes:{"[threadId+deletedMessageId]":{fields:["threadId","deletedMessageId"],unique:!0},"[threadId+timestampMs+deletedMessageId]":{fields:["threadId","timestampMs","deletedMessageId"],unique:!0},"[threadId+topLevelMessageId+supplementalKey]":{fields:["threadId","topLevelMessageId","supplementalKey"],unique:!1},deletionTimestampMs:{fields:["deletionTimestampMs"],unique:!1}},nonEncryptedFields:["topLevelMessageId","deletionTimestampMs"],primaryKey:"pk",secure:!0},c={autoIncrement:!0,indexes:{"[threadId+messageId+tag]":{fields:["threadId","messageId","tag"],unique:!0},"[threadId+tag+timestampMs]":{fields:["threadId","tag","timestampMs"],unique:!1}},nonEncryptedFields:["messageId","timestampMs","messagePk","tag"],primaryKey:"pk",secure:!0},d={autoIncrement:!1,indexes:{},primaryKey:"pk",secure:!0},m={dbMetadata:d,deleted:u,message:e,supplemental:s,tags:c};function p(e,t,n,a,i){var l=o("WAHex").parseHex(t),s="reverb",u=new(o("WormEAR")).WormEAR(m,s,l),c=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,s,m,u,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:a,onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;r("FBLogger")("mps").mustfix("EAR decryption error in store: %s. Dropping corrupted entity %s",e.store,e.maybeHashedPk),c.runInTransaction([e.store],"readwrite",function(t){var n=t.stores[e.store];return e.maybeHashedPk!=null?n.delete(e.maybeHashedPk):n.clear()},"delete-corrupted-entity")}}}),i);return c}function _(e){return new(o("Worm")).WormDatabase(new(o("WormMemoryDriver")).WormMemoryDriver(m),e)}l.schema=m,l.makeWebReverbSchema=p,l.makeInMemoryReverbSchema_TEST_ONLY=_}),98);
__d("WebReverbDB",["MpsLogger","WAResolvable","WebReverbSchema","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;async function u(t,n,a,i,l){var u;try{var c=o("WebReverbSchema").makeWebReverbSchema(t,n,a,i,l);return e=c,u=await c.init(),s.resolve(c),u}catch(e){throw o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Error performing WebReverb init"),e}}function c(){if(e==null)throw r("err")("Reverb DB is not initialized");return e}function d(){return s.promise}function m(e){return"WebReverb - "+e}l.makeWebReverb=u,l.getWebReverbDB=c,l.getDbPromise=d,l.mpsOp=m}),98);
__d("WebMpsMigrationReverbTxns",["FBLogger","MpsTypes","WebMpsReverbWrites","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";var e=function(){return r("FBLogger")("mps").tags(["mps_migration"])};async function s(e,t){try{await o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",function(t){var n=function(n){return n(t)};return Promise.all(e.map(function(e){return u(e,n)}))},"mps-persist-messages-migrated-from-maw-db")}catch(e){throw t.endFail("reverb_write_failure"),e}}async function u(t,n){var r=[],a=[];r.push(o("WebMpsReverbWrites").upsertTopLevelToReverb(t.toplevelProtobuf,{actionType:o("MpsTypes").ActionType.UpsertTopLevel,debugFlags:["MAW_Migration"],isLocalOnly:!0,isTransportErrorPlaceholder:!1,tags:[],targetMessageId:t.toplevelProtobuf.messageId},n));for(var i of t.supplementalsToInsert.entries()){var l=i[0],s=i[1];r.push(o("WebMpsReverbWrites").upsertSupplementalToReverb(s.messageId,s.payload,l,t.toplevelProtobuf.messageId,t.toplevelProtobuf.threadId,s.timestampMs,n))}var u=await Promise.allSettled(r),c=u.filter(function(e){return e.status==="rejected"});for(var d of c)e().mustfix("Failed to upsert a row into Reverb: %s",d.reason);if(c.length>0)throw e().mustfixThrow("Reverb upsert failed");var m=async function(){var e=p[0],r=p[1];a.push(n(async function(n){var r=[t.toplevelProtobuf.threadId,t.toplevelProtobuf.messageId,e],o=await n.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",r);o!=null&&await n.stores.supplemental.bulkDelete([o.pk])}))};for(var p of t.supplementalsToDelete.entries())await m();var _=await Promise.allSettled(a),f=_.filter(function(e){return e.status==="rejected"});for(var g of f)e().mustfix("Failed to delete a row from Reverb: %s",g.reason);if(f.length>0)throw e().mustfixThrow("Reverb delete failed")}function c(){return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readonly",function(e){return e.stores.dbMetadata.get("db-info")},"mps-get-db-metadata")}function d(e,t){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",async function(t){await t.stores.dbMetadata.bulkAdd([babelHelpers.extends({},e,{pk:"db-info"})])},"mps-set-db-metadata")}catch(e){throw t.endFail("migration_state_write_failure"),e}}function m(t,n){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["dbMetadata"],"readwrite",async function(n){var r,o,a,i,l=await n.stores.dbMetadata.get("db-info");if(l==null)throw e().mustfixThrow("DB Metadata row does not exist, cannot update the cursor");var s=l,u=babelHelpers.extends({},s,{mawDBMigrationCurrentMessageId:(r=t.mawDBMigrationCurrentMessageId)!=null?r:s.mawDBMigrationCurrentMessageId,mawDBMigrationCurrentThread:(o=t.mawDBMigrationCurrentThread)!=null?o:s.mawDBMigrationCurrentThread,mawDBMigrationStartMs:(a=t.mawDBMigrationStartMs)!=null?a:s.mawDBMigrationStartMs,mawDBMigrationState:(i=t.mawDBMigrationState)!=null?i:s.mawDBMigrationState});await n.stores.dbMetadata.bulkPut([u])},"mps-update-db-metadata")}catch(e){throw n.endFail("migration_state_write_failure"),e}}l.persistMigratedMessagesFromMawDb=s,l.getMawMpsMigrationState=c,l.setInitialMawMpsMigrationState=d,l.setMawMpsMigrationState=m}),98);
__d("MpsReverbInit",["BrowserLockManager","MAWMpsMigrationStatus","MpsTypes","WebMpsMigrationReverbTxns","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";var e="wmi_mps_m4_non_migrated_status_lock",s="wmi_mps_new_db_status_lock",u;async function c(t){var n=await o("WebReverbDB").makeWebReverb(t.name,t.strEncKey,t.blockingErrorThreshold,t.onBlockingError,t.qplEvent),a=n.isNewDb,i;if(a)i=!0;else{var l=await o("WebMpsMigrationReverbTxns").getMawMpsMigrationState();i=(l==null?void 0:l.mawDBMigrationState)===o("MpsTypes").MawDBMigrationState.Completed}if(r("BrowserLockManager")==null){o("MAWMpsMigrationStatus").setStatus(i);return}var c=await r("BrowserLockManager").query(),d=c.held.some(function(e){return e.name===s});if(d){o("MAWMpsMigrationStatus").setStatus(!0);return}if(i===!0){var m=c.held.some(function(t){return t.name===e})||c.pending.some(function(t){return t.name===e});m?i=!1:a===!0&&(u=r("BrowserLockManager").request(s,function(){return new Promise(function(){})}))}i||(u=r("BrowserLockManager").request(e,function(){return new Promise(function(){})})),o("MAWMpsMigrationStatus").setStatus(i)}l.initReverb=c}),98);
__d("PakeCpaceUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function l(e,t){var n=new e.VectorInt;return t.forEach(function(e){n.push_back(e)}),n}i.typedArrayToBuffer=e,i.uint8ArrayToVectorInt=l}),66);
__d("UInt8Array",["XPlatReactCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.length;if(t>0&&t%2===0&&/^[\da-f]+$/gi.test(e)){for(var n=[],r=0,o=t/2|0;r<o;++r){var a=parseInt(e.substring(r<<1,(r<<1)+2|0),16);n.push(a)}return new Uint8Array(n)}}function s(e){return o("XPlatReactCrypto").getRandomValues(new Uint8Array(e)).buffer}function u(e){var t=e.filter(function(e){return e.byteLength!==0}),n=t.reduce(function(e,t){return e+t.byteLength|0},0),r=new Uint8Array(n);return t.reduce(function(e,t){return r.set(t,e),e+t.byteLength|0},0),r}l.fromHexString=e,l.getBufferWithRandomValuesFromLength=s,l.concatBytes=u}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e,s={scalarbase:(e=o("tweetnacl")).lowlevel.scalarbase,crypto_hash:e.lowlevel.crypto_hash,modL:e.lowlevel.modL,pack25519:e.lowlevel.pack25519,S:e.lowlevel.S,M:e.lowlevel.M,A:e.lowlevel.A,Z:e.lowlevel.Z,D:e.lowlevel.D,unpack25519:e.lowlevel.unpack25519,pow2523:e.lowlevel.pow2523,crypto_verify_32:e.lowlevel.crypto_verify_32,set25519:e.lowlevel.set25519,add:e.lowlevel.add,scalarmult:e.lowlevel.scalarmult};l.hash=e.hash,l.scalarMult=e.scalarMult,l.verify=e.verify,l.secretbox=e.secretbox,l.lowlevel=s,l.keypairFromSecretKey=e.box.keyPair.fromSecretKey,l.keyPair=e.box.keyPair,l.signDetachedVerify=e.sign.detached.verify}),98);
__d("WACryptoUtils",["WACryptoDependencies","WACryptoPrimitives","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return u(new Uint8Array(e),new Uint8Array(t))}function s(e,t){var n=new TextDecoder;return n.decode(e).toLowerCase()===n.decode(t).toLowerCase()}function u(e,t){return e.length===0&&t.length===0||o("WACryptoPrimitives").verify(e,t)}function c(e,t){return e.length===0&&t.length===0||o("WACryptoPrimitives").verify(e,t)}function d(e,t){return e.length===0&&t.length===0||o("WACryptoPrimitives").verify(e,t)}function m(e){if(e!==(e|0))throw r("err")("bound must be int32");if(e<=0)throw r("err")("bound must not be positive");for(var t=new Int32Array(1),n=-1>>>1,a=e*Math.floor(n/e),i=-1;i===-1;){o("WACryptoDependencies").getCrypto().getRandomValues(t);var l=t[0]>>>1;l<a&&(i=l%e)}return i}l.arrayBuffersEqual=e,l.arrayBuffersEqualCaseInsensitive=s,l.uint8ArraysEqual=u,l.rawKeysEqual=c,l.serializedPubKeysEqual=d,l.randomNumberLessThan=m}),98);
__d("WADeepEquals",[],(function(t,n,r,o,a,i){"use strict";function e(t,n){if(t===n)return!0;if(!t||!n||typeof t!="object"&&typeof n!="object")return!1;var r=Array.isArray(t),o=Array.isArray(n);if(r!==o)return!1;var a=!0;if(r){var i=t.length;if(i!==n.length)return!1;for(var l=0;a&&l<i;l++)a=e(t[l],n[l]);return a}for(var s=Object.keys(t),u=0;a&&u<s.length;u++){var c=s[u];a=n.propertyIsEnumerable(c)&&e(t[c],n[c])}return a&&Object.keys(n).length===s.length}i.deepEqual=e}),66);
__d("WAPREList",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",EBDB_INIT:"ebdb_init",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});i.PRE_METRIC=e}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=6e4,d=18e4,m=600*1e3,p=0;function _(){var t=[];function n(e){t.push(e)}function r(){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),t.length=0}function a(e){t.length===0&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),e.name,e.stage),t.forEach(function(t){t(e)})}return{subscribe:n,notify:a,clear:r}}var f=_(),g=f.notify,h=f.clear,y=f.subscribe,C;"FinalizationRegistry"in self&&"WeakRef"in self&&(C=new FinalizationRegistry(function(e){var t=e.event,n=e.eventFlow;if(n.isActive())try{o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),t)}catch(e){}}));var b=new Set([o("WAPREList").PRE_METRIC.SEND_MESSAGE,o("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function v(e,t,n,r){n==null&&p++;var o=n!=null?n:p,a="open";n==null?g({name:e,stage:"START",instanceKey:o,annotations:t,timeoutInMs:r}):g({name:e,stage:"RESUME",instanceKey:o,annotations:t});var i;function l(){if(i!=null){var e=i.deref();if(e!=null){var t;(t=C)==null||t.unregister(e)}}}var s={addPoint:function(n,r){g({name:e,stage:"POINT",reason:n,instanceKey:o,annotations:r})},addAnnotations:function(n){g({name:e,stage:"ANNOTATE",instanceKey:o,annotations:n})},endSuccess:function(n){g({name:e,stage:"SUCCESS",instanceKey:o,annotations:n}),a="closed",l()},endCancel:function(n){g({name:e,stage:"CANCEL",instanceKey:o,annotations:n}),l()},endFail:function(n,r){g({name:e,stage:"FAIL",reason:n,instanceKey:o,annotations:r}),a="closed",l()},getFlowDetails:function(){return{name:e,instanceKey:o}},isActive:function(){return a==="open"}};return C&&!b.has(e)&&n==null&&(C.register(s,{event:e,eventFlow:{endCancel:s.endCancel,isActive:s.isActive}}),i=new WeakRef(s)),s}l.QPL_DEFAULT_TIMEOUT_IN_MS=c,l.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=d,l.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=m,l.clear=h,l.subscribe=y,l.startMetric=v}),98);
__d("WAPromiseBackoffs",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){if(e===0)return 0;for(var n=g(t.algo),r=1;r<e;r++)n();return d(t,n())}function u(e){var t=e.relativeDelay,n=t===void 0?!1:t,r=null,o=g(e.algo);return function(){var t=r;if(t==null)return r=n?Date.now():0,0;var a=d(e,o());if(n){var i=Date.now(),l=i-t;l>0&&(a=Math.max(0,a-l)),r=i}return a}}function c(t){var r=u(t);return function(o){return new(e||(e=n("Promise")))(function(e){var t=r();t>0?setTimeout(e,t,o):e(o)})}}function d(e,t){var n=e.max,r=e.min,o=e.jitter,a=o===void 0?.1:o,i=t;return n!=null&&i>n&&(i=n),r!=null&&i<r&&(i=r),a!==0&&(i=Math.ceil(i*(1+a*Math.random()))),i}function m(e){var t=e.second-e.first,n=e.first-t;return function(){var e=t+n;return n=t,t=e,e}}function p(e){var t=e.base,n=t===void 0?2:t,r=e.first;return function(){var e=r;return r*=n,e}}function _(e){var t=e.delay;return function(){return t}}function f(e){var t=e.toMs,n=e.backoff,r=g(n);return function(){return t(r())}}function g(e){switch(e.type){case"fibonacci":return m(e);case"exponential":return p(e);case"constant":return _(e);case"adjust":return f(e);default:throw r("err")("makeTimeFunc unrecognized backoff "+e.type)}}l.getDelay=s,l.createTimer=u,l.createPromiseTimer=c}),98);
__d("WASortedLists",[],(function(t,n,r,o,a,i){"use strict";function e(){return[]}function l(){return[]}function s(e,t){return e.filter(t)}function u(e,t){return g(e.map(t))}function c(e,t){for(var n=e.length===t.length,r=0;n&&r<e.length;r++)e[r]!==t[r]&&(n=!1);return n}function d(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return e;return e.concat([t]).sort()}function m(e,t){if(e.length<t.length)return!1;for(var n=!0,r=0,o=0;n&&o<t.length;o++)do n=e[r]===t[o];while(!n&&++r<e.length);return n}function p(e,t){for(var n=[],r=0,o=0;r<e.length;r++){for(var a=e[r];o<t.length&&a>t[o];)o++;(o===t.length||a<t[o])&&n.push(a)}return n}function _(e,t){for(var n=[],r=0,o=0;r<e.length&&o<t.length;){var a=e[r],i=t[o];a<i?r++:(a===i&&(n.push(a),r++),o++)}return n}function f(e,t){for(var n=[],r=0,o=0;r<e.length&&o<t.length;)e[r]<t[o]?n.push(e[r++]):e[r]===t[o]?(n.push(e[r++]),o++):n.push(t[o++]);for(;r<e.length;)n.push(e[r++]);for(;o<t.length;)n.push(t[o++]);return n}function g(e){return h(e.slice().sort())}function h(e){for(var t=!1,n=0;n<e.length-1;n++)e[n]===e[n+1]&&(t=!0);if(!t)return e;for(var r=[],o=0;o<e.length-1;o++)e[o]!==e[o+1]&&r.push(e[o]);return r.push(e[e.length-1]),r}function y(e){return Array.from(e).sort()}function C(e){return e.slice().sort()}function b(e,t,n){for(var r=null,o=0;!r&&o<e.length;o++)e[o]===t&&(r=e.slice(),r[o]=n,r=h(r.sort()));return r||e}function v(e){return[e]}function S(e){return e.length<1}function R(e,t,n){return e.slice(t,n)}i.emptySet=e,i.emptyList=l,i.filter=s,i.map=u,i.areEqual=c,i.addToSet=d,i.contains=m,i.subtract=p,i.intersect=_,i.joinUniq=f,i.sortAndDedupe=g,i.asSortedSet=y,i.sort=C,i.swapIn=b,i.singleElement=v,i.isEmpty=S,i.slice=R}),66);
__d("WAWaitForComms",["WACommsConnectionState","WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAResolvable")).Resolvable;function s(){return e.promise}function u(){o("WACommsConnectionState").WACommsConnectionState.set(!1),e.isSettled&&(e=new(o("WAResolvable")).Resolvable)}function c(){o("WACommsConnectionState").WACommsConnectionState.set(!0),e.resolve()}function d(){return!e.resolveWasCalled()}function m(t){return e.reject(t)}l.waitForComms=s,l.commsConnectionLost=u,l.unblockComms=c,l.isStillWaitingForComms=d,l.failComms=m}),98);
__d("WAWaitForUserUnblocked",["WAResolvable","WorkerScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e=12e4,s=new(o("WAResolvable")).Resolvable,u=o("WorkerScheduler").makeScheduler("offline-queue",{concurrency:1,maxTaskLimit:1,defaultSamplingRate:1e3,timeoutMs:e});function c(){s.resolveWasCalled()&&(s=new(o("WAResolvable")).Resolvable,d())}function d(){u.runTask({name:"offline-queue",fn:function(){return s.promise},priority:o("WorkerScheduler").BLOCKING_PRIORITY})}function m(){return s.promise}function p(){s.resolve()}function _(){return!s.resolveWasCalled()}l.maybeResetWaitForUserUnblocked=c,l.markOfflineQueueAsStarted=d,l.waitForUserUnblocked=m,l.unblockUser=p,l.isStillWaitingForUserUnblocked=_}),98);
__d("groupBy",[],(function(t,n,r,o,a,i){function e(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}i.default=e}),66);
__d("isE2EEConversationSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);
__d("isInstamadilloEB",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("670")===!0}l.default=e}),98);
__d("isMAWUniversalSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);/*FB_PKG_DELIM*/
__d("QPLFlow",["QPLUserFlow","Random"],(function(t,n,r,o,a,i,l){"use strict";var e=0,s="FinalizationRegistry"in self?new FinalizationRegistry(function(e){var t=e.notClosedEvent;t()}):null;function u(e,t){if(s!=null){var n=s,o=e.getQPLAttrs().instanceKey;n.register(e,{notClosedEvent:function(){r("QPLUserFlow").endFailure(t,"event-not-closed",{instanceKey:o})}})}}function c(e,t){var n=m(e,t);return n.start(t==null?void 0:t.annotations),n}function d(e,t){return m(e,t)}function m(t,n){var o,a=(o=n==null?void 0:n.instanceKey)!=null?o:e++,i=n==null?void 0:n.timeoutInMs,l=!1,c={addAnnotations:function(n){r("QPLUserFlow").addAnnotations(t,n,{instanceKey:a})},addPoint:function(n,o){r("QPLUserFlow").addPoint(t,n,{instanceKey:a}),o!=null&&t!=null&&r("QPLUserFlow").addAnnotations(t,o,{instanceKey:a})},endCancel:function(n,o){r("QPLUserFlow").endCancel(t,{annotations:o,cancelReason:n,instanceKey:a}),l=!1,s==null||s.unregister(c)},endFail:function(n,o){r("QPLUserFlow").endFailure(t,n,{annotations:o,instanceKey:a}),l=!1,s==null||s.unregister(c)},endSuccess:function(n){r("QPLUserFlow").endSuccess(t,{annotations:n,instanceKey:a}),l=!1,s==null||s.unregister(c)},getQPLAttrs:function(){return{instanceKey:a}},isActive:function(){return l},start:function(n){l=!0,r("QPLUserFlow").start(t,{annotations:n,instanceKey:a,timeoutInMs:i!=null?i:void 0}),u(c,t)}};return c}function p(){var e=!0;return{addAnnotations:function(t){},addPoint:function(t,n){},endCancel:function(t){},endFail:function(n,r){e=!1},endSuccess:function(n){e=!1},getQPLAttrs:function(){return{instanceKey:0}},isActive:function(){return e},start:function(t){}}}function _(e,t,n){return o("Random").coinflip(t)?c(e,n):p()}var f=(function(){function e(e,t){this.qplFlow=e,this.subspanName=t}var t=e.prototype;return t.start=function(t){this.qplFlow.addPoint(this.subspanName+"_start",t)},t.end=function(t){this.qplFlow.addPoint(this.subspanName+"_end",t)},t.endFail=function(t){var e,n=babelHelpers.extends({},t,{bool:babelHelpers.extends({},t==null?void 0:t.bool,(e={},e[this.subspanName+"_failed"]=!0,e))});this.end(n)},e.start=function(n,r){var t=new e(n,r);return t.start(),t},e.wrapInSubspan=async function(n,r,o){var t=e.start(n,r);try{var a=await o();return t.end(),a}catch(e){throw t.endFail(),e}},e})();l.startQPLFlow=c,l.continueQPLFlow=d,l.makeQplFlow=m,l.startNoopQPLFlow=p,l.startQplFlowWithCoinflip=_,l.QplSubspan=f}),98);
__d("WormDump",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return"redacted:"+String(e).length}async function u(e,t,n){var o=await t.runInTransaction(n,"readonly",function(t){return Promise.all(n.map(async function(n){var o=e[n],a=await t.stores[n].readAll({limit:o==null?void 0:o.limit,order:"desc"});return[n,a.map(function(e){var t={};return Object.keys(e).forEach(function(n){var a,i=o==null||(a=o.customFields)==null?void 0:a[n];if(i)try{t[n]=i(e[n])}catch(e){r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Failed to process special handling for DB dump")}else t[n]=s(e[n])}),t})]}))},"dump"),a={};return o.forEach(function(e){var t=e[0],n=e[1];a[t]=n}),a}l.wormNonSensitiveField=e,l.wormRedact=s,l.dump=u}),98);
__d("Worm",["FBLogger","QPLFlow","WormDump","WormReadOnlyStoreAccessor","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=1e4,s=(function(){function t(e,t){this.$2=e,this.$1=t}var n=t.prototype;return n.init=function(t){return this.$2.init(t)},n.close=function(){this.$2.close()},n.store=function(t){return new(o("WormReadOnlyStoreAccessor")).ReadOnlyStoreAccessor(this.$2,t,this.$1)},n.dump=function(t){var e=Object.keys(this.$2.getSchema());return o("WormDump").dump(t,this,e)},n.runInTransaction=async function(n,a,i,l){var t=this.$1!=null?o("QPLFlow").startQPLFlow(this.$1,{annotations:{bool:{isReadonly:a==="readonly"},string:{dbAlias:this.$2.getDbAlias(),operationType:l}},timeoutInMs:e}):void 0;try{var s=await this.$2.runInTransaction(n,a,i,{eventFlow:t});return t==null||t.endSuccess(),s}catch(e){throw t==null||t.endFail("error"),r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Error performing %s",l),e}},t})();l.OP_TIMEOUT_MS=e,l.WormDatabase=s}),98);
__d("WormPromise",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=typeof self=="object"?self.Promise:typeof globalThis=="object"?globalThis.Promise:e||(e=n("Promise"));i.WormPromise=l}),66);
__d("WormRangeIterator",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=t.map(function(t){return e[t]});return n}function l(t,n,r,o){var a=t.at(0),i=t.at(-1);return{endCursor:i&&e(i,n),hasNext:r,hasPrevious:o,startCursor:a&&e(a,n)}}function s(e,t,n,r){var o=e.flatMap(function(e){return e.data}).sort(function(e,r){return u(e,r,t)*(n==="asc"?1:-1)}).slice(0,r+1),a=o.slice(0,r),i=o.length>r,s=e.some(function(e){return e.cursorInfo.hasPrevious}),c=l(a,t,i,s);return{cursorInfo:c,data:a}}function u(t,n,r){for(var o=e(t,r),a=e(n,r),i=0;i<o.length;i++)if(o[i]!==a[i]){var l=o[i]>a[i];return l?1:-1}return 0}i.makeCursor=e,i.makeCursorInfoFromList=l,i.mergeRanges=s}),66);
__d("WormStoreFunctions",["WormPromise","WormRangeIterator","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=[];return o("WormPromise").WormPromise.all(r.map(function(t){var r=t.selector;return e.getByIndex(n,r)})).then(function(n){var i=[],l=[];return n.forEach(function(e,n){var o=r[n].item;if(e){var s=babelHelpers.extends({},o),u=e[t.primaryKey];s[t.primaryKey]=u,i.push(s),a.push(u)}else l.push(o),a.push(null)}),o("WormPromise").WormPromise.all([e.bulkPut(i),e.bulkAdd(l).then(function(e){var t=0;a.forEach(function(n,r){n==null&&(a[r]=e[t++])})})])}).then(function(){return a.filter(Boolean)})}function s(e,t,n,r){return e.readIndex(t,n,babelHelpers.extends({},r,{limit:1})).then(function(e){var t;return(t=e[0])!=null?t:null})}var u=(function(){function e(e,t,n,r,o,a){this.query=e,this.indexName=n,this.storeSchema=t,this.order=r,this.filter=a,this.boundaries=o,(o==null?void 0:o.greaterThan)!=null?this.lowerBoundary={greaterThan:o.greaterThan}:(o==null?void 0:o.greaterThanOrEqual)!=null&&(this.lowerBoundary={greaterThanOrEqual:o.greaterThanOrEqual}),(o==null?void 0:o.lessThan)!=null?this.upperBoundary={lessThan:o.lessThan}:(o==null?void 0:o.lessThanOrEqual)!=null&&(this.upperBoundary={lessThanOrEqual:o.lessThanOrEqual})}var t=e.prototype;return t.read=async function(t,n){var e=this.order==="asc",a;t==null?a=this.boundaries:e?a=babelHelpers.extends({},this.upperBoundary,{greaterThan:t}):a=babelHelpers.extends({},this.lowerBoundary,{lessThan:t});var i=await this.query(a,{filter:this.filter,limit:n+1,order:this.order}),l,s=null;if(i.length<=n)l=i;else if(i.length===n+1)l=i.slice(0,n),s=i[n];else throw r("err")("unreachable");var u=o("WormRangeIterator").makeCursorInfoFromList(l,this.storeSchema.indexes[this.indexName].fields,s!=null,t!=null);return{cursorInfo:u,data:l}},e})();function c(e,t,n,o,a,i){var l=t.indexes;if(l==null)throw r("err")("No indexes found");var s=l[n];if(s==null)throw r("err")("Index not found");return new u(function(t,r){return e(n,t!=null?t:void 0,r)},t,n,o,a,i)}l.bulkUpsert=e,l.getByIndex=s,l.getIndexRangeIterator=c}),98);
__d("WormReadOnlyStoreAccessor",["FBLogger","QPLFlow","Worm","WormStoreFunctions","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.$4=async function(t,n){var e=this.$2+"."+n+"_inline",a=this.$3!=null?o("QPLFlow").startQPLFlow(this.$3,{annotations:{string:{operationType:e}},timeoutInMs:o("Worm").OP_TIMEOUT_MS}):void 0;try{var i=await this.$1.runInTransaction([this.$2],"readonly",t,{eventFlow:a});return a==null||a.endSuccess(),i}catch(t){a==null||a.endFail("error");var l=r("getErrorSafe")(t);throw r("FBLogger")("worm").catching(l).mustfix("Error performing %s",e),l}},t.bulkGet=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].bulkGet(t)},"bulkGet")},t.count=function(){var e=this;return this.$4(function(t){return t.stores[e.$2].count()},"count")},t.get=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].get(t)},"get")},t.getByIndex=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].getByIndex(t,n,r)},"getByIndex")},t.getIndexRangeIterator=function(t,n,r,a){var e=this;return o("WormStoreFunctions").getIndexRangeIterator(function(t,n,r){return e.$4(function(o){return o.stores[e.$2].readIndexRange(t,n,r)},"getIndexRangeIterator")},this.$1.getSchema()[this.$2],t,n,r,a)},t.readAll=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].readAll(t)},"readAll")},t.readByKeyRange=function(t,n){var e=this;return this.$4(function(r){return r.stores[e.$2].readByKeyRange(t,n)},"readByKeyRange")},t.readIndex=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndex(t,n,r)},"readIndex")},t.readIndexAnyOf=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndexAnyOf(t,n,r)},"readIndexAnyOf")},t.readIndexKeys=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndexKeys(t,n,r)},"readIndexKeys")},t.readIndexRange=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readIndexRange(t,n,r)},"readIndexRange")},t.readKeys=function(t){var e=this;return this.$4(function(n){return n.stores[e.$2].readKeys(t)},"readKeys")},t.readKeysByIndexRange=function(t,n,r){var e=this;return this.$4(function(o){return o.stores[e.$2].readKeysByIndexRange(t,n,r)},"readKeysByIndexRange")},e})();l.ReadOnlyStoreAccessor=e}),98);
__d("WACryptoSha256",["WABase64","WACryptoDependencies"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WACryptoDependencies").getCrypto().subtle.digest({name:"SHA-256"},e)}function s(t){return e(t).then(o("WABase64").encodeB64)}function u(e){return s(c(e))}function c(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return t}l.sha256=e,l.sha256Base64=s,l.sha256Str=u}),98);
__d("WACryptoSha256Builder",["WABinary"],(function(t,n,r,o,a,i,l){"use strict";var e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=64,u=4,c=(function(){function t(){this.h0=0,this.h1=0,this.h2=0,this.h3=0,this.h4=0,this.h5=0,this.h6=0,this.h7=0,this.tail=new Uint8Array(0),this.size=0,this.reset()}var n=t.prototype;return n.reset=function(){this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.tail=new Uint8Array(0),this.size=0},n.update=function(t){var e=new Uint8Array(this.tail.length+t.length);for(e.set(this.tail),e.set(t,this.tail.length),this.size+=t.length*8;e.length>=s;){var n=e.subarray(0,s);this.$1(n),e=e.slice(s)}return this.tail=e,this},n.$2=function(){var e=new Uint8Array(64);if(e.set(this.tail),e.set(new Uint8Array([128]),this.tail.length),this.tail.length+9>s){this.$1(e);var t=g(new Uint8Array(0),this.size);this.$1(t)}else{var n=g(e,this.size);this.$1(n)}},n.finish=function(){this.$2();var e=new(o("WABinary")).Binary;return e.writeUint32(this.h0),e.writeUint32(this.h1),e.writeUint32(this.h2),e.writeUint32(this.h3),e.writeUint32(this.h4),e.writeUint32(this.h5),e.writeUint32(this.h6),e.writeUint32(this.h7),this.reset(),e.readByteArrayView()},n.$1=function(n){for(var t=[],r=0;r<16;r++){var o=n.subarray(r*u,u*(r+1)),a=o[0]<<24|o[1]<<16|o[2]<<8|o[3];t.push(a)}for(var i=16;i<64;i++){var l=d(t[i-15]),s=m(t[i-2]),c=t[i-16]+(t[i-7]+l+s)>>>0;t.push(c)}for(var _=this.h0,f=this.h1,g=this.h2,h=this.h3,y=this.h4,C=this.h5,b=this.h6,v=this.h7,S=0;S<64;S++){var R=p(y,6)^p(y,11)^p(y,25),L=y&C^~y&b,E=p(_,2)^p(_,13)^p(_,22),k=_&f^_&g^f&g,I=v+R+L+e[S]+t[S],T=E+k;v=b,b=C,C=y,y=h+I>>>0,h=g,g=f,f=_,_=I+T>>>0}this.h0=this.h0+_>>>0,this.h1=this.h1+f>>>0,this.h2=this.h2+g>>>0,this.h3=this.h3+h>>>0,this.h4=this.h4+y>>>0,this.h5=this.h5+C>>>0,this.h6=this.h6+b>>>0,this.h7=this.h7+v>>>0},t})();function d(e){var t=p(e,7),n=p(e,18),r=_(e,3);return t^n^r}function m(e){var t=p(e,17),n=p(e,19),r=_(e,10);return t^n^r}function p(e,t){return e>>>t|e<<32-t}function _(e,t){return e>>>t}function f(e){return new Uint8Array(new Uint32Array([e]).buffer)}function g(e,t){var n=new Uint8Array(s);n.set(e);var r=f(t);return n.set(r.subarray(0,1),n.length-1),n.set(r.subarray(1,2),n.length-2),n.set(r.subarray(2,3),n.length-3),n.set(r.subarray(3,4),n.length-4),n.set(r.subarray(4,5),n.length-5),n.set(r.subarray(5,6),n.length-6),n.set(r.subarray(6,7),n.length-7),n.set(r.subarray(7,8),n.length-8),n}l.Sha256Builder=c,l.sigma0=d,l.sigma1=m,l.rotateRight=p,l.shiftRight=_}),98);
__d("WACryptoSha256HmacBuilder",["WACryptoSha256Builder"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=new(o("WACryptoSha256Builder")).Sha256Builder,this.$2=new Uint8Array(0),this.reset(e)}var t=e.prototype;return t.reset=function(t){this.$2=new Uint8Array(64),t.length>64?this.$2.set(new(o("WACryptoSha256Builder")).Sha256Builder().update(t).finish(),0):this.$2.set(t,0);var e=this.$2.map(function(e){return e^54});this.$1=new(o("WACryptoSha256Builder")).Sha256Builder().update(e)},t.update=function(t){return this.$1.update(t),this},t.finish=function(){var e=this.$2.map(function(e){return e^92}),t=this.$1.finish();return new(o("WACryptoSha256Builder")).Sha256Builder().update(e).update(t).finish()},e})();l.Sha256HMacBuilder=e}),98);
__d("WormEncoding",["msgpack-msgpack"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=new(o("msgpack-msgpack")).ExtensionCodec,t=0;e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)},encode:function(t){if(t instanceof ArrayBuffer)return o("msgpack-msgpack").encode(new Uint8Array(t))},type:t});var n=1;e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return new Uint8Array(e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset))},encode:function(t){if(t instanceof Uint8Array)return o("msgpack-msgpack").encode(t)},type:n});var r=2;e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return BigInt(e)},encode:function(t){if(typeof t=="bigint")return o("msgpack-msgpack").encode(String(t))},type:r});var a=3;return e.register({decode:function(t){var e=o("msgpack-msgpack").decode(t);return new Set(e)},encode:function(t){if(t instanceof Set)return o("msgpack-msgpack").encode(Array.from(t))},type:a}),{decode:function(n){return o("msgpack-msgpack").decode(n,{extensionCodec:e})},encode:function(n){return o("msgpack-msgpack").encode(n,{extensionCodec:e,ignoreUndefined:!0})}}}l.createEncoding=e}),98);
__d("WormIDbGetMinMaxKeySelector",[],(function(t,n,r,o,a,i){"use strict";var e=-1/0,l,s=function(){if(l!=null)return l;try{return IDBKeyRange.only([[]]),l=[[]],l}catch(t){var e="\uFFFF";return l=e,e}};i.MIN_KEY=e,i.getMaxSelector=s}),66);
__d("WormEAR",["FBLogger","WABinary","WACryptoDependencies","WACryptoSha256","WACryptoSha256HmacBuilder","WATimeUtils","WormEncoding","WormIDbGetMinMaxKeySelector","getErrorSafe","memoizeStringOnly","tweetnacl"],(function(t,n,r,o,a,i,l){"use strict";var e="_encryptedContent",s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="WormEAREncryptionError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),u=(function(e){function t(t,n,r){var o;return o=e.call(this,t)||this,o.name="WormEARDecryptionError",o.message=t,o.store=n,o.maybeHashedPk=r,o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function c(e,t,n){if(typeof e=="number")return e;var r=t.encode(e),a=new(o("WACryptoSha256HmacBuilder")).Sha256HMacBuilder(new Uint8Array(n)).update(r).finish();return a.buffer}var d=32,m=2,p=128,_=12,f=256,g=new Uint8Array(0).buffer,h="AES-GCM",y="HKDF",C="SHA-256",b=3600,v=24*b,S=0,R=v*30*6,L=(function(){function t(e,t,n,a){var i=this,l;this.$7=0,this.$9=!1,this.$10=!1,this.$11=r("memoizeStringOnly")(function(e){var t=i.$2[e].nonEncryptedFields;if(t!=null)return new Set(t)}),this.$2=e,this.$1=t,this.$8=(l=a==null?void 0:a.encKeyTtl)!=null?l:R,this.$3=o("WormEncoding").createEncoding(),this.$4=n,this.$6=crypto.subtle.importKey("raw",n,{name:h},!1,["encrypt","decrypt"]),this.$5=new Map}var n=t.prototype;return n.isSecureStore=function(t){return this.$2[t].secure!==!1},n.$12=async function(){return(await o("WACryptoSha256").sha256Base64(this.$4)).substring(0,5)},n.prepareNewKeyVersion=async function(){var e=o("WACryptoDependencies").getCrypto(),t=e.getRandomValues(new Uint8Array(d)).buffer,n=e.getRandomValues(new Uint8Array(d)).buffer,r=e.getRandomValues(new Uint8Array(_)),a=await this.$6,i=await e.subtle.encrypt({iv:r,name:h,tagLength:p},a,n);return{clientKey:t,expiration:o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+this.$8),keyHash:await this.$12(),salt:o("WABinary").Binary.build(r,i).readBuffer()}},n.init=async function(t,n,a){var e=this;this.$5=new Map,this.$7=0,this.$9=n.incorrectVersions,this.$10=n.versionsLoss;var i=o("WACryptoDependencies").getCrypto(),l=await this.$12(),s=!0;try{await Promise.all(t.map(function(t){s=s&&t.keyHash===l;var n=t.salt,r=n.slice(0,_),o=n.slice(_);return e.$6.then(function(e){return Promise.all([i.subtle.importKey("raw",t.clientKey,{name:y},!1,["deriveKey"]),i.subtle.decrypt({iv:new Uint8Array(r),name:h,tagLength:p},e,o)])}).then(function(e){var t=e[0],n=e[1];return i.subtle.deriveKey({hash:{name:C},info:g,name:y,salt:n},t,{length:f,name:h},!0,["encrypt","decrypt"])}).then(function(e){return i.subtle.exportKey("raw",e)}).then(function(n){e.$7=Math.max(e.$7,t.version),e.$5.set(t.version,n)})}))}catch(e){throw r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Error on keychain initialisation keyHashCheck: %s",s),e}finally{var u;a==null||(u=a.eventFlow)==null||u.addAnnotations({bool:{keyHashCheck:s}})}},n.$13=function(t){if(this.$7===0)throw new s("EAR.Encryption. EAR is not initialised ");var e=this.$5.get(this.$7);if(e==null)throw new s("EAR.Encryption.Key does not exist for version");var n=o("tweetnacl").randomBytes(o("tweetnacl").secretbox.nonceLength),r=o("tweetnacl").secretbox(t,n,new Uint8Array(e));return o("WABinary").Binary.build(S,this.$7,n,r).readBuffer()},n.$14=function(t,n,r){var e=t.slice(0,m),a=new DataView(e).getUint8(1),i=this.$5.get(a);if(i==null)throw new u("EAR.Decryption.Key does not exist for version: "+a+"; db: "+this.$1+"; store: "+n+"; incorrectVersions: "+this.$9.toString()+" versionsLoss: "+this.$10.toString(),n,r);var l=t.slice(m,m+o("tweetnacl").secretbox.nonceLength),s=t.slice(m+o("tweetnacl").secretbox.nonceLength),c=o("tweetnacl").secretbox.open(new Uint8Array(s),new Uint8Array(l),new Uint8Array(i));if(c==null)throw new u("EAR.Decryption. Unable to decrypt; db: "+this.$1+"; store: "+n+"; incorrectVersions: "+this.$9.toString()+" versionsLoss: "+this.$10.toString(),n,r);return c},n.encryptEntity=function(n,r){var t,o=this.$2[r],a=new Set;o.autoIncrement!==!0&&a.add(o.primaryKey);var i=o.indexes;if(i!=null)for(var l of Object.keys(i)){var s=i[l];for(var u of s.fields)a.add(u)}var d={};for(var m of a){var p;d[m]=(p=this.$11(r))!=null&&p.has(m)?n[m]:c(n[m],this.$3,this.$4)}return o.autoIncrement===!0&&n[o.primaryKey]!=null&&(d[o.primaryKey]=n[o.primaryKey]),babelHelpers.extends({},d,(t={},t[e]=this.$13(this.$3.encode(n)),t))},n.$15=function(n,o,a){if((n==null||typeof n!="object")&&r("FBLogger")("worm").mustfix("WORM.EAR: dbRecord is null or not object: %s, store: %s, reason %s",n,o,a),(n==null?void 0:n[e])!=null){var t=n[this.$2[o].primaryKey];return{encrypted:!0,encryptedEntity:n,pk:t}}else return{encrypted:!1,entity:n}},n.maybeDecrypt=function(n,r,o,a,i){if(n==null||this.isSecureStore(r)===!1)return n;var t=this.$15(n,r,o);if(!t.encrypted){if(i!=null&&i.shouldNotFailIfEntityIsNotEncrypted)return n;var l=n[this.$2[r].primaryKey];throw new u("EAR.Decryption. Attempt to decrypt malformed encrypted entity in  db: "+this.$1+", store: "+r+". Missing '"+e+"' property. Pk is "+(l==null?"empty":"not empty"),r,l)}a==null||a.addPoint("decrypt_start");var s=this.decryptEntity(t.encryptedEntity,r,t.pk);a==null||a.addPoint("decrypt_end");var c=this.$2[r];if(c.autoIncrement===!0){var d;return babelHelpers.extends({},s,(d={},d[c.primaryKey]=t.pk,d))}return s},n.maybeEncrypt=function(t,n,r){if(this.isSecureStore(n)===!1)return t;r==null||r.addPoint("encrypt_start");var e=this.encryptEntity(t,n);return r==null||r.addPoint("encrypt_end"),e},n.decryptEntity=function(n,r,o){return this.$3.decode(this.$14(n[e],r,o))},n.hashPk=function(t,n,r){var e;return(e=this.$11(t))!=null&&e.has(n)?r:c(r,this.$3,this.$4)},n.hashSelector=function(t,n,r){for(var e,a,i=[].concat(t),l=(e=(a=this.$2[n].indexes)==null||(a=a[r])==null?void 0:a.fields)!=null?e:[],s=0;s<i.length;s++){var u,d=i[s],m=l[s];d!==o("WormIDbGetMinMaxKeySelector").getMaxSelector()&&d!==-1/0&&((u=this.$11(n))!=null&&u.has(m)||(i[s]=c(d,this.$3,this.$4)))}return i},t})();l.ENCRYPTED_COLUMN_NAME=e,l.EncryptionError=s,l.DecryptionError=u,l.WormEAR=L}),98);
__d("WormIDbStore",["Promise","WormIDbGetMinMaxKeySelector","WormPromise","WormStoreFunctions","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){},u=(function(){function t(e,t,n,r,o){var a=this;this.readIndexRange=function(e,t,n){return t==null?a.$11(function(){return a.$1.index(e).openCursor(null,(n==null?void 0:n.order)==="desc"?"prev":"next")},n):a.$11(function(){return a.$1.index(e).openCursor(a.$12(t,e),(n==null?void 0:n.order)==="desc"?"prev":"next")},n)},this.$1=t.objectStore(e),this.$2=e,this.$3=r,this.$4=n,this.$5=o}var a=t.prototype;return a.$6=function(t,n){var e,r=(e=this.$4.eventFlow)!=null&&e.isActive()?this.$4.eventFlow:null;r==null||r.addPoint(n+"_start");var o=t();return r==null||r.addPoint(n+"_end"),o},a.$7=function(){return this.$3.isSecureStore(this.$2)},a.$8=function(t){var e=this;return this.$7()?this.$6(function(){return e.$3.hashPk(e.$2,e.$5.primaryKey,t)},"hashPk"):t},a.$9=function(t,n){var e=this;return!this.$7()||t==null?t:this.$6(function(){return e.$3.hashSelector(t,e.$2,n)},"hashSelector")},a.$10=function(t){var e=this;return new(o("WormPromise")).WormPromise(function(n,r){var o=t();o.onsuccess=function(){try{n(o.result.map(function(t){return e.$3.maybeDecrypt(t,e.$2,"readArray",e.$4.eventFlow)}))}catch(e){r(e)}},o.onerror=function(){return r(o.error)}})},a.$11=function(t,n){var e=this;return new(o("WormPromise")).WormPromise(function(r,o){var a,i=[],l=(n==null?void 0:n.limit)!=null,s=Math.max(0,(a=n==null?void 0:n.limit)!=null?a:0);if(l&&s===0){r(i);return}var u=t();u.onsuccess=function(){var t=u.result;if(t){var a;try{a=e.$3.maybeDecrypt(t.value,e.$2,"readCursor",e.$4.eventFlow)}catch(e){o(e);return}if((!(n!=null&&n.filter)||n.filter(a))&&i.push(a),l&&s===i.length){r(i);return}t.continue()}else r(i)},u.onerror=function(){return o(u.error)}})},a.bulkAdd=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o=t.$1.add(t.$3.maybeEncrypt(e,t.$2,t.$4.eventFlow));o.onsuccess=function(){t.$5.autoIncrement===!0?n(o.result):n(e[t.$5.primaryKey])},o.onerror=function(){return r(o.error)}})}))},a.bulkPut=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o,a=t.$1.put(t.$3.maybeEncrypt(e,t.$2,(o=t.$4.eventFlow)!=null?o:void 0));a.onsuccess=n,a.onerror=function(){return r(a.error)}})})).then(s)},a.bulkUpsert=function(t,n){return o("WormStoreFunctions").bulkUpsert(this,this.$5,t,n)},a.bulkGet=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o=t.$1.get(t.$8(e));o.onsuccess=function(){try{var e;n(t.$3.maybeDecrypt(o.result,t.$2,"bulkGet",(e=t.$4.eventFlow)!=null?e:void 0))}catch(e){r(e)}},o.onerror=function(){return r(o.error)}})}))},a.get=function(t){return this.bulkGet([t]).then(function(e){return e[0]})},a.getByIndex=function(t,n,r){return o("WormStoreFunctions").getByIndex(this,t,n,r)},a.readByKeyRange=function(t,n){var e=this;return t==null?this.$11(function(){return e.$1.openCursor(null,(n==null?void 0:n.order)==="desc"?"prev":"next")},n):this.$11(function(){return e.$1.openCursor(e.$12(t,e.$5.primaryKey),(n==null?void 0:n.order)==="desc"?"prev":"next")},n)},a.$13=function(t,n,a){if(this.$5.indexes==null)throw r("err")("No indexes found for store");var e=this.$5.indexes[t].fields;if(n.length===e.length)return n;var i=e.map(function(e,t){var r;return(r=n[t])!=null?r:a==="max"?o("WormIDbGetMinMaxKeySelector").getMaxSelector():o("WormIDbGetMinMaxKeySelector").MIN_KEY});return i},a.$12=function(t,n){var e,o,a=n===this.$5.primaryKey;if(t.only!=null){if(this.$5.indexes==null)throw r("err")("No indexes found for store");var i=this.$5.indexes[n].fields;return t.only.length===i.length?IDBKeyRange.only(this.$9(t.only,n)):IDBKeyRange.bound(a?this.$8(t.only):this.$9(this.$13(n,t.only,"min"),n),a?this.$8(t.only):this.$9(this.$13(n,t.only,"max"),n),!0,!0)}var l=(e=t.lessThan)!=null?e:t.lessThanOrEqual,s=(o=t.greaterThan)!=null?o:t.greaterThanOrEqual;if(l!=null)return s!=null?IDBKeyRange.bound(a?this.$8(s):this.$9(this.$13(n,s,"min"),n),a?this.$8(l):this.$9(this.$13(n,l,"max"),n),t.greaterThan!=null,t.lessThan!=null):IDBKeyRange.upperBound(a?this.$8(l):this.$9(this.$13(n,l,"max"),n),t.lessThan!=null);if(s!=null)return IDBKeyRange.lowerBound(a?this.$8(s):this.$9(this.$13(n,s,"min"),n),t.greaterThan!=null);throw r("err")("Invalid range")},a.readIndex=function(t,n,r){var e=this;return(r==null?void 0:r.filter)==null&&(r==null?void 0:r.order)!=="desc"?this.$10(function(){var o;return e.$1.index(t).getAll(e.$9(n,t),(o=r==null?void 0:r.limit)!=null?o:void 0)}):this.$11(function(){return e.$1.index(t).openCursor(e.$9(n,t),(r==null?void 0:r.order)==="desc"?"prev":"next")},r)},a.readIndexAnyOf=function(t,n,a){var e=this;return new(o("WormPromise")).WormPromise(function(i,l){var s,u;if(n.length===0){i([]);return}var c=(a==null?void 0:a.limit)!=null,d=Math.max(0,(s=a==null?void 0:a.limit)!=null?s:0);if(c&&d===0){i([]);return}var m=(u=e.$5.indexes)==null||(u=u[t])==null?void 0:u.fields;if(!m){l(r("err")("No index fields found"));return}var p=n.every(function(e){return Array.isArray(e)?e.length===m.length:!0});if(p){var _=n.map(function(n){return e.$10(function(){return e.$1.index(t).getAll(e.$9(n,t),c?d:void 0)})});o("WormPromise").WormPromise.all(_).then(function(e){var t=e.flat();a!=null&&a.filter&&(t=t.filter(a.filter)),i(t)}).catch(l)}else{var f=n.map(function(n){return e.readIndexRange(t,{only:n},a)});o("WormPromise").WormPromise.all(f).then(function(t){var n=t.flat(),r=new Set;n=n.filter(function(t){var n=t[e.$5.primaryKey];return r.has(n)?!1:(r.add(n),!0)}),i(n)}).catch(l)}})},a.readIndexKeys=function(t,n,r){var e=this;return this.readIndex(t,n,r).then(function(t){return t.map(function(t){return t[e.$5.primaryKey]})})},a.readKeysByIndexRange=function(t,n,r){var e=this;return this.readIndexRange(t,n,r).then(function(t){return t.map(function(t){return t[e.$5.primaryKey]})})},a.getIndexRangeIterator=function(t,n,r,a){return o("WormStoreFunctions").getIndexRangeIterator(this.readIndexRange,this.$5,t,n,r,a)},a.readAll=function(t){var e=this;return(t==null?void 0:t.filter)===null&&(t==null?void 0:t.order)!=="desc"?this.$10(function(){var n;return e.$1.getAll((n=t==null?void 0:t.limit)!=null?n:void 0)}):this.$11(function(){return e.$1.openCursor(null,(t==null?void 0:t.order)==="desc"?"prev":"next")},t)},a.readKeys=function(t){var e=this;return this.readAll(t).then(function(t){return t.map(function(t){return t[e.$5.primaryKey]})})},a.bulkDelete=function(r){var t=this;return(e||(e=n("Promise"))).all(r.map(function(e){return new(o("WormPromise")).WormPromise(function(n,r){var o=t.$1.delete(t.$8(e));o.onsuccess=n,o.onerror=function(){return r(o.error)}})})).then(s)},a.delete=function(t){var e=this;return new(o("WormPromise")).WormPromise(function(n,r){var o=e.$1.delete(e.$8(t));o.onsuccess=function(){return n()},o.onerror=function(){return r(o.error)}})},a.clear=function(){var e=this;return new(o("WormPromise")).WormPromise(function(t,n){var r=e.$1.clear();r.onsuccess=t,r.onerror=function(){return n(r.error)}}).then(s)},a.count=function(){var e=this;return new(o("WormPromise")).WormPromise(function(t,n){var r=e.$1.count();r.onsuccess=function(){return t(r.result)},r.onerror=function(){return n(r.error)}})},t})();l.WormIDbStore=u}),98);
__d("WormIDbTransaction",["WAResolvable","WormIDbStore"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){var t,n="WormUnknownError";return t=e.call(this,n)||this,t.name=n,t.message=n,t}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),s=(function(e){function t(){var t,n="WormUnknownAbortError";return t=e.call(this,n)||this,t.name=n,t.message=n,t}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),u=(function(){function t(t,n,r,a,i){var l=this;this.$1=t,this.$2=new(o("WAResolvable")).Resolvable,this.$1.oncomplete=function(){l.$2.resolve()},this.$1.onerror=function(t){var n,r,o,a=(n=(r=(o=t.target)==null?void 0:o.error)!=null?r:l.$1.error)!=null?n:new e;l.$2.reject(a)},this.$1.onabort=function(e){var t,n,r,o=(t=(n=(r=e.target)==null?void 0:r.error)!=null?n:l.$1.error)!=null?t:new s;l.$2.reject(o)},this.$3=a.reduce(function(e,t){var a;return babelHelpers.extends({},e,(a={},a[t]=new(o("WormIDbStore")).WormIDbStore(t,l.$1,n,r,i[t]),a))},{})}var n=t.prototype;return n.commit=function(){var e,t;return(e=(t=this.$1).commit)==null||e.call(t),this.$2.promise},n.abort=function(){this.$2.isSettled||this.$1.abort()},babelHelpers.createClass(t,[{key:"stores",get:function(){return this.$3}}])})();l.WormIDbTransaction=u}),98);
__d("WormIDbTypes",[],(function(t,n,r,o,a,i){"use strict";var e="_worm_db_version_",l="_worm_ear_",s="schema_hash",u="creation_ts",c={indexes:{},primaryKey:"key"},d={indexes:{},primaryKey:"version"},m={_worm_db_version_:c,_worm_ear_:d};i.DB_VERSION_STORE=e,i.EAR_STORE=l,i.SCHEMA_HASH_KEY=s,i.DB_CREATION_TS=u,i.sysSchema=m}),66);
__d("WAIDBTypes",[],(function(t,n,r,o,a,i){"use strict";function e(){return indexedDB}i.idb=e}),66);
__d("WormIDbUtils",["Promise","WAIDBTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return new(e||(e=n("Promise")))(function(e,n){t.onsuccess=function(){return e(t.result)},t.onerror=function(){return n(t.error)}})}function u(t,a,i){var l=a.onBecomeStale,s=a.onClose,u=a.onError,c=a.onUpgrade;return new(e||(e=n("Promise")))(function(e,n){var a=o("WAIDBTypes").idb().open(t,i);c!=null&&(a.onupgradeneeded=function(){if(a.transaction==null)throw r("err")("Transaction is null on upgradeneeded event");c(a.result,a.transaction)}),a.onsuccess=function(){var t=a.result;s!=null&&(t.onclose=s),t.onversionchange=function(){t.close(),l!=null&&l()},e(t)},a.onerror=function(){n(a.error),u!=null&&u(a.error)}})}l.promisifyIDbRequest=s,l.openIDb=u}),98);
__d("WormIDbUpgrade",["WATimeUtils","WormIDbTypes","WormIDbUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=[],o=[],a=new Map,i=Array.from(Object.keys(n)).map(function(e){return e.toString()}),l=new Set(i);for(var s of Object.keys(n))if(!e.objectStoreNames.contains(s))r.push(s);else{var u,c=n[s],d=(u=c.indexes)!=null?u:{},m=t.objectStore(s),p=m.indexNames,_=new Set(Object.keys(d)),f=[],g=[];for(var h of _)p.contains(h)?m.index(h).unique!==d[h].unique&&(f.push(h),g.push(h)):f.push(h);for(var y=0;y<p.length;y++){var C=p[y];_.has(C)||g.push(C)}(f.length>0||g.length>0)&&a.set(s,{indexesToCreate:f,indexesToDelete:g})}for(var b=0;b<e.objectStoreNames.length;b++){var v=e.objectStoreNames[b];l.has(v)||o.push(v)}return{storesToCreate:r,storesToDelete:o,storesToModify:a}}async function s(e,t){if(!e.objectStoreNames.contains(o("WormIDbTypes").DB_VERSION_STORE))return{isNewDb:!0,shouldUpgrade:!0};var n=e.transaction(o("WormIDbTypes").DB_VERSION_STORE,"readonly"),r=await o("WormIDbUtils").promisifyIDbRequest(n.objectStore(o("WormIDbTypes").DB_VERSION_STORE).get(o("WormIDbTypes").SCHEMA_HASH_KEY));return{isNewDb:!1,shouldUpgrade:(r==null?void 0:r.value)!==t}}function u(e,t,n){for(var r of n){var o=t[r],a=e.createObjectStore(r,{autoIncrement:!!o.autoIncrement,keyPath:o.primaryKey}),i=o.indexes;if(i!=null)for(var l of Object.keys(i)){var s=i[l];a.createIndex(l,s.fields.map(function(e){return e.toString()}),{unique:s.unique})}}}function c(t,n,r,a,i){var l=e(t,n,r),s=l.storesToCreate,c=l.storesToDelete,d=l.storesToModify;if(u(t,r,s),!i.onlyCreateNewStores){for(var m of c)i.safeToDeleteStores.has(m)&&t.deleteObjectStore(m);var p=function(){var e=f[0];_=f[1];var t=_.indexesToCreate,o=_.indexesToDelete;for(var a of o)n.objectStore(e).deleteIndex(a);var l=r[e].indexes;if(l==null)return 1;var s=!1;for(var u of t){var c=l[u];n.objectStore(e).createIndex(u,[].concat(c.fields),{unique:c.unique}),s=!0}if(s&&r[e].secure===!0&&i.maybeEar!=null){var d=e,m=i.maybeEar,p=n.objectStore(d).getAll();p.onsuccess=function(){var t=p.result;t.forEach(function(t){t!=null&&n.objectStore(e).put(m.maybeEncrypt(m.maybeDecrypt(t,d,"dbUpgrade",void 0,{shouldNotFailIfEntityIsNotEncrypted:!0}),d,void 0))})}}},_;for(var f of d)p();n.objectStore(o("WormIDbTypes").DB_VERSION_STORE).put({key:o("WormIDbTypes").SCHEMA_HASH_KEY,value:a}),i.isNewDbInstance&&n.objectStore(o("WormIDbTypes").DB_VERSION_STORE).put({key:o("WormIDbTypes").DB_CREATION_TS,value:o("WATimeUtils").performanceAbsoluteNow()})}}l.shouldUpgradeDb=s,l.createNewStores=u,l.upgradeDb=c}),98);
__d("WormIDbDriver",["FBLogger","WACryptoSha256","WAResolvable","WATimeUtils","WormIDbTransaction","WormIDbTypes","WormIDbUpgrade","WormIDbUtils","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,o,a,i){var l=this,s,u,c;this.$5=null,this.$8=[],this.$13=function(){l.$12.log(l.$3+".error.db_stale")},this.$14=function(){l.$12.log(l.$3+".error.db_close")},this.$15=function(e){r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("Unexpected error  %s",l.$3)},this.$2=e,this.$3=t,this.$4=n,this.$6=(s=i==null?void 0:i.safeToDeleteStores)!=null?s:new Set,this.$9=i==null?void 0:i.blockingErrorThreshold,this.$10=(u=i==null?void 0:i.onBlockingError)!=null?u:function(){},this.$11=(c=i==null?void 0:i.onTransactionError)!=null?c:function(){},this.$7=o,this.$12=a}var t=e.prototype;return t.getDbAlias=function(){return this.$3},t.getSchema=function(){return this.$4},t.$16=async function(t,n,a,i){if(this.$5!=null&&await this.$5.promise,this.$1==null)throw r("err")("IDB is not initialised: "+this.$3);var e=new(o("WormIDbTransaction")).WormIDbTransaction(this.$1.transaction(t.map(function(e){return e.toString()}),n,{durability:"relaxed"}),i,this.$7,t,this.$4),l;try{l=await a(e),await e.commit()}catch(t){throw e.abort(),t}return l},t.$17=function(t){var e,n,o;if(this.$9!=null){var a=this.$9,i=(e=(n=(o=t==null?void 0:t.name)!=null?o:t==null?void 0:t.message)!=null?n:t==null?void 0:t.toString())!=null?e:"unknown";if(this.$8.push(i),!(this.$8.length<Math.max(a,1))){var l=this.$8[this.$8.length-1],s=this.$8.every(function(e){return e===l})?l:"mixed";r("FBLogger")("worm").mustfix("Unrecoverable error (%s): %s",this.$3,s),this.$10(s),this.$8=[]}}},t.$18=async function(t,n,o,a){if(this.$1==null){var e,i;(e=a.eventFlow)==null||e.addPoint("db_reinit_start",{bool:{isDbNull:!0}}),await this.$19(),(i=a.eventFlow)==null||i.addPoint("db_reinit_end")}var l;try{l=await this.$16(t,n,o,a)}catch(e){var s=r("getErrorSafe")(e);if(s.name==="InvalidStateError"||s.name==="NotFoundError"||s.name==="UnknownError"){var u,c;(u=a.eventFlow)==null||u.addPoint("db_reinit_start",{bool:{isDbInvalid:!0}}),await this.$19({forceUpgrade:s.name==="NotFoundError"}),(c=a.eventFlow)==null||c.addPoint("db_reinit_end"),l=await this.$16(t,n,o,a)}else throw e}return l},t.runInTransaction=async function(t,n,o,a){var e;try{e=await this.$18(t,n,o,a),this.$8=[]}catch(e){var i=r("getErrorSafe")(e);throw this.$11(i),this.$17(i),e}return e},t.close=function(){var e;(e=this.$1)==null||e.close()},t.init=async function(t){var e;try{var n;e=await this.$19({eventFlow:(n=t==null?void 0:t.eventFlow)!=null?n:void 0})}catch(t){var o=r("getErrorSafe")(t);if((o==null?void 0:o.name)==="InvalidStateError")e=await this.$19();else throw t}return e},t.$20=function(t,n){var e=t.version;return t.close(),o("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$13,onClose:this.$14,onError:this.$15,onUpgrade:function(t,r){return o("WormIDbUpgrade").upgradeDb(t,r,o("WormIDbTypes").sysSchema,n,{isNewDbInstance:!1,maybeEar:null,onlyCreateNewStores:!0,safeToDeleteStores:new Set})}},e+1)},t.$19=async function(t){var e=this,n=!1;if(this.$5)return n=!0,this.$5.promise;this.$5=new(o("WAResolvable")).Resolvable;var a=!1;this.$1!=null&&(this.$1.close(),this.$1=null,a=!0);var i=!0;try{var l,s,u,c,d=babelHelpers.extends({},this.$4,o("WormIDbTypes").sysSchema),m=JSON.stringify(d);if(m==null)throw r("err")("DB schema cannot be serialized: "+this.$3);var p=await o("WACryptoSha256").sha256Str(m),_=null,f=await o("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$13,onClose:this.$14,onError:this.$15,onUpgrade:function(n,r){return _={isNewDb:!0,shouldUpgrade:!1},o("WormIDbUpgrade").upgradeDb(n,r,d,p,{isNewDbInstance:!0,maybeEar:null,onlyCreateNewStores:!1,safeToDeleteStores:e.$6})}});try{if(Object.keys(o("WormIDbTypes").sysSchema).some(function(e){return f.objectStoreNames.contains(e)===!1})){var g,h;t==null||(g=t.eventFlow)==null||g.addPoint("ear_schema_recovery_start"),f=await this.$20(f,p),t==null||(h=t.eventFlow)==null||h.addPoint("ear_schema_recovery_end")}}catch(e){var y;t==null||(y=t.eventFlow)==null||y.addPoint("ear_schema_recovery_fail"),r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("EAR initialization error")}this.$1=f,t==null||(l=t.eventFlow)==null||l.addPoint("ear_init_start");try{var C,b,v;await this.$21((C=(b=_)==null?void 0:b.isNewDb)!=null?C:!1,{eventFlow:(v=t==null?void 0:t.eventFlow)!=null?v:void 0})}catch(e){var S;throw t==null||(S=t.eventFlow)==null||S.addPoint("ear_init_err"),r("FBLogger")("worm").catching(r("getErrorSafe")(e)).mustfix("EAR initialization error"),e}t==null||(s=t.eventFlow)==null||s.addPoint("ear_init_end");var R=_!=null?_:await o("WormIDbUpgrade").shouldUpgradeDb(f,p);if(i=R.shouldUpgrade||((u=t==null?void 0:t.forceUpgrade)!=null?u:!1),i){this.$1=null;var L=f.version;f.close(),this.$1=await o("WormIDbUtils").openIDb(this.$2,{onBecomeStale:this.$13,onClose:this.$14,onError:this.$15,onUpgrade:function(n,r){return o("WormIDbUpgrade").upgradeDb(n,r,d,p,{isNewDbInstance:R.isNewDb,maybeEar:e.$7,onlyCreateNewStores:!1,safeToDeleteStores:e.$6})}},L+1)}var E={isNewDb:R.isNewDb,isUpgraded:i};return(c=this.$5)==null||c.resolve(E),E}catch(e){var k;throw(k=this.$5)==null||k.reject(e),e}finally{var I;t==null||(I=t.eventFlow)==null||I.addAnnotations({bool:{isClosingDb:a,isCompetingInit:n,shouldUpgrade:i}}),this.$5=null}},t.$21=async function(t,n){var e=this,a=await this.$7.prepareNewKeyVersion(),i=!1,l=!1,u=await new Promise(function(n,u){if(e.$1==null)throw r("err")("IDB is not initialised: "+e.$3);var c=[],d=e.$1.transaction(o("WormIDbTypes").EAR_STORE,"readwrite");d.oncomplete=function(){return n(c)},d.onerror=d.onabort=function(){return u(d.error)};var m=d.objectStore(o("WormIDbTypes").EAR_STORE),p=m.getAll();p.onsuccess=function(){var e,r=(e=p.result)!=null?e:[];c=r.filter(s),i=r.length!==c.length,c.sort(function(e,t){return e.version-t.version});var u=c.length===0||!o("WATimeUtils").isInFuture(c[c.length-1].expiration);if(!u){n(c);return}var d=c.length===0?0:c[c.length-1].version;l=!t&&d===0;var _=babelHelpers.extends({},a,{version:d+1});m.add(_),c.push(_)},p.onerror=function(){return u(p.error)}});await this.$7.init(u,{incorrectVersions:i,versionsLoss:l},{eventFlow:n==null?void 0:n.eventFlow})},e})();function s(e){return!(e==null||e.version==null||e.expiration==null||e.clientKey==null||e.clientKey.byteLength===0||e.salt==null||e.salt.byteLength===0)}l.WormIDbDriver=e}),98);
__d("EBDB",["$InternalEnum","QPLFlow","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum")({UI:0,Worker:1}),u={auto_restore_opt_out:{indexes:{},primaryKey:"optOutKey"},device_metadata:{indexes:{},primaryKey:"pk"},device_state:{indexes:{},primaryKey:"env"},encrypted_backups:{indexes:{},primaryKey:"pk"},encrypted_backups_virtual_devices:{indexes:{},primaryKey:"pk"},experiences_shared_state:{indexes:{},primaryKey:"stateKey"},secure_encrypted_backups_client_state:{indexes:{},primaryKey:"backupId"},secure_encrypted_backups_epochs:{indexes:{},primaryKey:"epochId"},secure_encrypted_backups_recovery_code_status:{indexes:{},primaryKey:"pk"}},c=1e4,d=new(o("WAResolvable")).Resolvable;async function m(t,n,r,a,i){var l=o("QPLFlow").startQPLFlow(n,{annotations:{int:{env:a},string:{operationType:"initEBDB"}},timeoutInMs:c});try{var s="ebdb",m=new(o("WormEAR")).WormEAR(u,s,r),p=new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(t,s,u,m,i,{onTransactionError:function(t){if(t instanceof o("WormEAR").DecryptionError){var e=t;if(e.store==="device_state"){_();return}else f()}},safeToDeleteStores:new Set(["migration"])}),n);await p.init({eventFlow:l}),l.endSuccess(),d.resolve(p)}catch(t){throw l.endFail("error"),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error performing makeEBDB: ",""])),t),d.reject(t),t}}function p(){return d.promise}async function _(){var e=await p();return e.runInTransaction(["device_state"],"readwrite",function(e){return e.stores.device_state.clear()},"EBDB - clearDeviceState")}async function f(){var e=await p();await e.runInTransaction(["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],"readwrite",function(e){return Promise.all([e.stores.encrypted_backups_virtual_devices.clear(),e.stores.secure_encrypted_backups_recovery_code_status.clear(),e.stores.device_metadata.clear(),e.stores.secure_encrypted_backups_epochs.clear(),e.stores.secure_encrypted_backups_client_state.clear(),e.stores.encrypted_backups.clear(),e.stores.experiences_shared_state.clear(),e.stores.auto_restore_opt_out.clear()])},"EBDB - clearEbStores")}async function g(){var e=await p();await e.runInTransaction(["device_state","encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],"readwrite",function(e){return Promise.all([e.stores.device_state.clear(),e.stores.encrypted_backups_virtual_devices.clear(),e.stores.secure_encrypted_backups_recovery_code_status.clear(),e.stores.device_metadata.clear(),e.stores.secure_encrypted_backups_epochs.clear(),e.stores.secure_encrypted_backups_client_state.clear(),e.stores.encrypted_backups.clear(),e.stores.experiences_shared_state.clear(),e.stores.auto_restore_opt_out.clear()])},"EBDB - clearAll")}l.EBDBEnvironment=s,l.schema=u,l.makeEBDB=m,l.getEBDB=p,l.clearDeviceState=_,l.clearEbStores=f,l.clearAll=g}),98);
__d("EBSMProperties",[],(function(t,n,r,o,a,i){"use strict";var e=["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","auto_restore_opt_out"],l=new Set(["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"]),s={dbVersion:5,mandatoryTables:l,persistedTables:new Set(e),persistedTablesArray:e},u=s;i.default=u}),66);
__d("LSE2EEMetadataSyncGroupUtils",["gkx","isArmadillo","isInstamadillo","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=r("isArmadillo")()||r("gkx")("23910")===!0&&!r("isInstamadillo")(),s=r("qex")._("923")===!0&&!r("isInstamadillo")();function u(){return e}function c(){return e?{groupId:95}:null}function d(){return s?{groupId:95}:null}l.shouldAlwaysResetE2EEMetadata=u,l.getE2EEMetadataSyncGroup=c,l.getE2EEMetadataSyncGroupForIGDSyncGroup=d}),98);
__d("LSInternetConnectionState",[],(function(t,n,r,o,a,i){var e=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});i.default=e}),66);
__d("LSPlatformErrorChannel",["FBLogger","ODS","XPlatReactEventEmitter"],(function(t,n,r,o,a,i,l){"use strict";var e,s="onLSError",u=new(r("XPlatReactEventEmitter")),c=0,d=null;function m(t){d===null&&((e||(e=o("ODS"))).bumpEntityKey(3185,"lsplatform_error","first_error_emitted_to_"+c+"listeners"),c===0&&r("FBLogger")("messenger_web").mustfix("No listeners when emitting LS error %s",t.name)),d=t,u.emit(s,t)}function p(e){var t=u.addListener(s,e);return c++,function(){return t.remove()}}function _(){return d}function f(){u.removeAllListeners(s),d=null}var g={TEST_ONLY_clear:f,emit:m,lastError:_,subscribe:p};l.default=g}),98);
__d("MAWAppVersion",["SiteData"],(function(t,n,r,o,a,i,l){"use strict";function e(){return"302.0."+r("SiteData").client_revision}function s(){return{primary:302,secondary:0,tertiary:r("SiteData").client_revision}}l.getVersionNumber=e,l.getAppVersionParts=s}),98);
__d("MAWConsoleLogger",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("2656");function s(t,n,r){if(e){var o=r.map(function(e){return"["+e+"]"}).join("");if(t==="count"){console.count(o+" "+String(n));return}for(var a=arguments.length,i=new Array(a>3?a-3:0),l=3;l<a;l++)i[l-3]=arguments[l];if(o){var s;(s=console)[t].apply(s,[o,n].concat(i))}else{var u;(u=console)[t].apply(u,[n].concat(i))}}}l.logToConsole=s}),98);
__d("MAWDeleteOldLogsFromDisk",["Deferred","MAWLogIndexedDb","MAWSaveLogToDisk","MAWTransactionMode","WALogger","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("justknobx")._("1400"),m=r("justknobx")._("1401"),p=r("justknobx")._("1402"),_=(u=o("MAWLogIndexedDb")).makeLogMsgrTransactor("logs",(c=o("MAWTransactionMode")).READONLY)(function(e){var t=new(r("Deferred")),n=e(),o=n.count();return o.onsuccess=function(e){var n=e.target.result;t.resolve(n)},o.onerror=function(e){t.reject(e)},t.getPromise()}),f=u.makeLogMsgrTransactor("logs",c.READONLY)(function(e,t){var n=new(r("Deferred")),o=e(),a=[],i=o.index("date"),l=i.openCursor();return l.onsuccess=function(e){var r=e.target.result;if(r==null||!t(r.value,a)){n.resolve(a);return}a.push(r.value.id),r.continue()},l.onerror=function(e){n.reject(e)},n.getPromise()}),g=u.makeLogMsgrTransactor("logs",c.READWRITE)(function(e){var t=new(r("Deferred")),n=e(),a=n.clear();return a.onsuccess=function(){return t.resolve()},a.onerror=function(e){return t.reject(e)},o("MAWSaveLogToDisk").clearLogEntryCache(),t.getPromise()}),h=u.makeLogMsgrTransactor("logs",c.READWRITE)(function(e,t){var n=new(r("Deferred")),o=e();return t.forEach(function(e){return o.delete(e)}),o.transaction.oncomplete=function(){return n.resolve()},o.transaction.onerror=function(e){return n.reject(e)},n.getPromise()});function y(e,t){var n=Date.now()-p;return e!=null&&e.date<=n}function C(e){return function(t,n){return n.length<e}}async function b(){try{var t=await _();if(t===0)return;var n=t-m;if(n>0){var r=await f(C(n));await h(r);return}var a=await f(y);a.length>0&&await h(a)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete old logs: ",""])),t)}}async function v(){try{var e=await _();if(e===0)return;if(e>=d){await g();return}}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete old logs: ",""])),e)}}l.clearLogs=g,l.deleteOldLogs=b,l.deleteOldLogsOnStartup=v}),98);
__d("MAWIndexedDBDeletion",["CurrentMessengerUser","FBLogger","MAWIndexedDbMetadata"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return indexedDB==null||e==null?Promise.resolve():new Promise(function(n,o){var a=indexedDB.deleteDatabase(e);a.onsuccess=function(){r("FBLogger")("maw_db").warn("%s db was deleted",t),n()},a.onblocked=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db: blocked. Make sure DB is closed.",t)},a.onerror=function(){r("FBLogger")("maw_db").mustfix("Cannot delete %s db",t),o(a.error)}})}async function s(){var t,n=o("CurrentMessengerUser").getID();await Promise.all([e((t=o("MAWIndexedDbMetadata")).dbName(n),"maw_v1"),e(t.restoreDbName2(n),"maw_v3"),e(t.jobsDbName(n),"signal"),e(t.logDbName(n),"logDb")])}l.deleteDB=e,l.deleteMAWPersistence=s}),98);
__d("MWLocalStorageErrorHandler",["cr:3449"],(function(t,n,r,o,a,i,l){"use strict";function e(){n("cr:3449")&&n("cr:3449").clearLocalStorageBigValues()}l.onQuotaExceeded=e}),98);
__d("MAWLocalStorage",["LocalStorageWrapper","MWLocalStorageErrorHandler","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){o("WALogger").LOG([e])}function u(e){o("WALogger").ERROR([e])}function c(){return o("LocalStorageWrapper").getStorage(s)}function d(){return o("LocalStorageWrapper").isLocalStorageAvailable(s)}function m(e,t,n){return o("LocalStorageWrapper").setItemGuarded(e,t,n,u,o("MWLocalStorageErrorHandler").onQuotaExceeded)}function p(t,n){t==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["not storage found"]))):t.removeItem(n)}l.getStorage=c,l.isLocalStorageAvailable=d,l.setItemGuarded=m,l.removeItemGuarded=p}),98);
__d("MAWMainThreadLogger",["CurrentMessengerUser","FBLogger","MAWAppVersion","MAWConsoleLogger","MAWDeleteOldLogsFromDisk","MAWLeakDetection","MAWLoggerUtils","MAWLoggingSwitches","MAWSaveLogToDisk","WAJids","WATagsLogger","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(){e=!1}function u(){e||(e=!0,o("WATagsLogger").initializeWaLogger(C))}var c=function(){return r("FBLogger")("messenger_web")};function d(e,t){var n=m(e);n!=null&&o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function m(e){if(!(!o("CurrentMessengerUser").isEmployee()&&!o("CurrentMessengerUser").isTestUser())){var t=o("WAJids").maybeSanitizeLogLineText(e);return t=o("MAWLeakDetection").maybeReplaceVaultedString(t),t}}function p(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function _(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),o("MAWLoggerUtils").logToHistory("log",n,t,!1)}function f(e,t){var n=o("WAJids").maybeSanitizeLogLineText(e);n=o("MAWLeakDetection").maybeReplaceVaultedString(n),c().tags(t.map(function(e){return String(e)})).warn(n)}function g(e,t,n,o,a,i){var l=r("err")(n);l.stack=o,r("promiseDone")(y(e,t,l,a,i))}async function h(e,t){var n=o("MAWLeakDetection").maybeReplaceVaultedString(o("WAJids").maybeSanitizeLogLineText(e)),r=o("MAWLoggingSwitches").removeLoggingFromBridge?o("MAWSaveLogToDisk").getLastNEntries(t):Promise.resolve([]),a=t===0?[]:[].concat((await r).map(function(e){return e.args}));return{logs:[].concat(a),sanitizedMessage:n}}async function y(e,t,n,a,i){var l,s,u=o("MAWLeakDetection").maybeReplaceVaultedString(o("WAJids").maybeSanitizeLogLineText(e)),d=n!=null?n:r("err")(u),m=a!=null?a:n==null?2:0,p=i!=null?i:0,_=await h(d.message,p),f=_.logs,g=_.sanitizedMessage,y=r("getErrorSafe")(d);try{d.message=g}catch(e){y=r("err")(g,d.fileName,d.lineNumber)}m!==0&&(y.framesToPop=m),(l=c())==null||(s=l.addMetadata("MESSENGER_E2EE_WEB","APP_VERSION",o("MAWAppVersion").getVersionNumber()).tags(t.map(function(e){return String(e)})).catching(y)).mustfix.apply(s,[g].concat(f))}var C={count:function(t,n){o("MAWConsoleLogger").logToConsole("count",t,n)},debug:function(t,n){o("MAWConsoleLogger").logToConsole("log",t,n)},devConsole:function(t,n,r){for(var e=arguments.length,a=new Array(e>3?e-3:0),i=3;i<e;i++)a[i-3]=arguments[i];switch(t){case"COUNT":o("MAWConsoleLogger").logToConsole.apply(void 0,["count",n,r].concat(a));break;case"DEV":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r].concat(a));break;case"DEV_XMPP":o("MAWConsoleLogger").logToConsole.apply(void 0,["log",n,r].concat(a));break;case"LOG":o("MAWConsoleLogger").logToConsole.apply(void 0,["info",n,r].concat(a));break;case"WARN":o("MAWConsoleLogger").logToConsole.apply(void 0,["warn",n,r].concat(a));break;case"ERROR":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r].concat(a));break;case"CATCHING":o("MAWConsoleLogger").logToConsole.apply(void 0,["error",n,r].concat(a));break}},error:function(t,n,a){r("promiseDone")(y(t,n,a)),o("MAWConsoleLogger").logToConsole("error",t,n)},info:function(t,n){_(t,n),o("MAWConsoleLogger").logToConsole("info",t,n)},logRestricted:function(t,n){d(t,n),o("MAWConsoleLogger").logToConsole("log",t,n)},warn:function(t,n){f(t,n),o("MAWConsoleLogger").logToConsole("warn",t,n)}};function b(){return o("MAWLoggingSwitches").removeLoggingFromBridge?o("MAWSaveLogToDisk").getEntriesFromDb():Promise.resolve([])}async function v(){o("MAWLoggingSwitches").removeLoggingFromBridge&&await o("MAWDeleteOldLogsFromDisk").clearLogs()}function S(e){return new Date(typeof e=="string"?parseInt(e,10):e).toISOString().replace("T"," ").replace("Z","")}function R(e){return e.map(function(e){try{var t=S(e.date);return[t,e.level,e.category,e.event,e.args].join(" | ")}catch(e){var n=r("getErrorSafe")(e);return[S(Date.now()),"error","LOGGER","Error formatting log: "+((n==null?void 0:n.message)||"")].join(" | ")}}).filter(Boolean).join(`
`)}l.__testClearLoggerSetup=s,l.setupMainWaLogger=u,l.logRestricted=d,l.count=p,l.info=_,l.warn=f,l.logError=g,l.getEntries=b,l.clearEntries=v,l.formatEntries=R}),98);
__d("MAWOneTimeCodeGating",["gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("1910")&&r("justknobx")._("1601")}l.isOneTimeCodeEnabled=e}),98);
__d("MAWVaultMaterialsStorage",["MAWVaultMaterials","MWFBLogger","Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="mw_exchange_vm";function u(){var t=o("MAWVaultMaterials").generateNewVaultMaterials(),a="newly-generated";return new(e||(e=n("Promise")))(function(e){r("WebAsyncStorage").getOrSetItem(s,t,function(n,r){if(n!=null){var i=o("MWFBLogger").MWLogger();if(n instanceof Error)throw i.catching(n).mustfixThrow("Failed to store Vaulting Materials. %s",n.toString());i.mustfix("Failed to store Vaulting Materials.")}r!==null&&(t=r,a="storage"),e(o("MAWVaultMaterials").initializeVaultMaterials(t,a))})})}function c(){return o("MAWVaultMaterials").hasVaultBeenSetup()?(e||(e=n("Promise"))).resolve(o("MAWVaultMaterials").getVaultMaterials()):u()}l.setupVaultMaterials=c}),98);
__d("MAWWormOdsLogger",["WABridge","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e={log:function(t){return o("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:o("WAOdsEnums").Entity.WORM,key:t})}};l.wormOdsWorkerLogger=e}),98);
__d("MNetRankType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNDEFINED_RANKING_TYPE:-1,INBOX_ACTIVE_NOW:0,MESSENGER_USER_SEARCH:1,MONTAGE_USER:2,BROADCAST_FLOW_TOP_CONTACTS:3,BROADCAST_FLOW_NEEDY_CONTACTS:4,MESSENGER_GROUP_SEARCH:5,RTC_TOP_CONTACTS:6,PSTN_TOP_CONTACTS:7,MESSENGER_NON_CONTACT_SEARCH:8,MESSENGER_SEARCH_BOOTSTRAP:9,ACTIVE_BEEPER:10,MONTAGE_AND_ACTIVE_NOW:11,MESSENGER_PAGE_SEARCH:12,MESSENGER_GAME_SEARCH:13,WWW_NULLSTATE:14,RTC_GROWTH:15,MESSENGER_OMNIPICKER_NULLSTATE:16,RTC_SEQUENTIAL_TOP_CONTACTS:17,MESSENGER_USER_SEARCH_NULLSTATE:18,MLITE_DIODE_PROMOTION:19,MESSENGER_PENDING_REQUEST:20,MESSENGER_CLOSE_CONNECTION:21,MESSENGER_MONTAGE_SEEN_SHEET:22,MESSENGER_OMNIPICKER_KEYPRESS:23,MESSENGER_NOTIF_QP_TARGETING_UPSELL_TYPE:24,CONTACT_TAB_ACTIVE_NOW:26,MESSENGER_UNIV_NULLSTATE_BLEND:27,MESSENGER_INBOX_THREADS:28,INBOX_ACTIVE_NOW_NO_BOOSTING:29,BROADCAST_FLOW_TOP_CONTACTS_FB_SHARE:30,BROADCAST_FLOW_TOP_CONTACTS_MESSENGER_SHARE:31,BROADCAST_FLOW_TOP_CONTACTS_EXTERNAL_SHARE:32,MESSENGER_TRENDING_STICKERS:33,MESSENGER_BROADCAST_FLOW_TOP_THREADS:34,MESSENGER_SENDS_28D:35,MESSENGER_ROOM_INVITE:36,MESSENGER_ROOM_INVITE_SEARCH:37,INBOX_ACTIVE_NOW_PREFETCH:38,MESSENGER_BLENDED_KEYPRESS:39,MESSENGER_BLENDED_NULLSTATE:40,MESSENGER_CARRIER_MESSAGING:41,MESSENGER_ROOM_INVITE_GROUP:42,MESSENGER_INBOX_BIRTHDAY_ITEM:43,INSTAGRAM_DIRECT_SEARCH_NULLSTATE:44,BROADCAST_FLOW_TOP_CONTACTS_AND_TOP_THREAD_FB_SHARE:45,BROADCAST_FLOW_TOP_THREADS_FB_SHARE:46,FB_H_SCROLL_RANKING:47,FB_MESSAGING_USER_SEARCH:48,FB_MESSAGING_USER_SEARCH_NULLSTATE:49,MESSENGER_ACTIVE_NOW_TRAY_ACTIVE_CC:50,MESSENGER_SHARE_SHEET:51,MESSENGER_COMMUNITY_TAB_UNJOINED_COMMUNITIES:52,MESSENGER_BCF_FREQUENTS:53,FB_ORIGINAL_PRIVATE_SHARING:54,MESSENGER_SEARCH_NULLSTATE_FOLLOWER:55,MESSENGER_SEARCH_NULL_STATE_UNBLENDED:56,MESSENGER_SEARCH_QUERY_STATE_BLENDED:57,MESSENGER_INBOX_TRAY_SUPER_MODEL:58,MESSENGER_INBOX_TRAY_SMART_BLENDING:59,MESSENGER_PRESENCE_POLLING_PERSONALIZATION:60});i.default=e}),66);
__d("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="31918369997811363"}),null);
__d("MWEBODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EB_PIN_RESTORE_AUTH:"mw_eb_pin_restore_auth",MW_EB_RC_RESTORE_AUTH:"mw_eb_rc_restore_auth",MW_EB_AUTO_RESTORE_AUTH:"mw_eb_auto_restore_auth",MW_EB_OTC_AUTH:"mw_eb_otc_auth",MW_EB_ONBOARDING_AUTH:"mw_eb_onboarding_auth",MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_CORRUPTION_RELOAD:"mw_ebsm_corruption_reload",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EBSM_WORKER_SUFFIX:"_worker",MW_EBSM_COUNTERS:"mw_ebsm_counters",MW_EBSM_FETCH_BACKUP_IDS:"mw_ebsm_fetch_backup_ids",MW_EB_SWITCH_CONSISTENCY:"mw_eb_switch_consistency",MAW_EB_UPLOAD_TRACKING:"maw_eb_upload_tracking",MAW_EB_UPLOAD_COUNTER:"maw_eb_upload_counter",MAW_EB_RESTORE_COUNTER:"maw_eb_restore_counter",EB_SYMMETRIC_ENCRYPTION_JS_RUST_SHADOW_TEST:"eb_symmetric_encryption_js_rust_shadow_test",MAW_EB_FRONTEND_QPL_IN_WORKER:"maw_eb_frontend_qpl_in_worker",MW_EB_RETROACTIVE_BACKUP:"mw_eb_retroactive_backup"}),l=e;i.default=l}),66);
__d("MWEBUseLocalStorage",["WALogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=t,i=n!=null?n:"true";if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var l;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Encrypted Backups key "," written to local storage"])),a),(l=(s||(s=r("WebStorage"))).getLocalStorage())==null||l.setItem(a,i)}}function c(e){var t=e;if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var n;(n=(s||(s=r("WebStorage"))).getLocalStorage())==null||n.removeItem(t)}}function d(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return(t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n)}return null}function m(e){if(o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported()){var t,n=e;return((t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(n))!=null}return!0}l.mwEBCreateLocalStorageEntry=u,l.mwEBDeleteLocalStorageEntry=c,l.mwEBGetLocalStorageEntryValue=d,l.mwEBGetIsLocalStorageEntryValuePresent=m}),98);
__d("MWLSDatabaseNames",[],(function(t,n,r,o,a,i){"use strict";var e="LightSpeed",l=e+"V3";i.name=e,i.lightspeedPrefix=l}),66);
__d("MWLSIndexedDBName",["MAWCurrentUser","MWLSDatabaseNames"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWCurrentUser").getID();return o("MWLSDatabaseNames").lightspeedPrefix+e}l.dbName=e}),98);
__d("ReStoreDecryptionFailure",[],(function(t,n,r,o,a,i){"use strict";var e="ReStoreDecryptionFailure",l=(function(t){function n(n,r){var o,a=n+" - Encrypted Restore was unable to decrypt an entity for table "+r;return o=t.call(this,a)||this,o.message=a,o.name=e,o.tableName=r,o}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.getTableName=function(){return this.tableName},n})(babelHelpers.wrapNativeSuper(Error));i.ERROR_NAME=e,i.ReStoreDecryptionFailure=l}),66);
__d("ReStoreEARSetupFailure",[],(function(t,n,r,o,a,i){"use strict";var e="Encryption keychain could not be setup",l="ReStoreEARSetupFailure",s=(function(t){function n(n){var r,o=e+": "+n;return r=t.call(this,o)||this,r.message=o,r.name=l,r}return babelHelpers.inheritsLoose(n,t),n})(babelHelpers.wrapNativeSuper(Error));i.ERROR_MESSAGE=e,i.ERROR_NAME=l,i.ReStoreEARSetupFailure=s}),66);
__d("ReStoreInstrumentation",["JSONStringifyBigIntSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){return e.set(t.uniqueId,{instance:t,persistence:t.persistence,tableNames:t.getTableData().tableNames}),t}function u(){return Array.from(e.entries()).map(function(e){var t=e[0],n=e[1];return{key:t,value:JSON.parse(r("JSONStringifyBigIntSafe")(n.tableNames))}})}l.instrument=s,l.getReStoreTables=u,l.reStoreInstancesMap=e}),98);
__d("ReStoreTabNotifier",["CurrentMessengerUser","FBLogger","MWBroadcastChannel","MWLSIndexedDBName","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("CurrentMessengerUser").getIDorEIMU();function s(t){var n=o("MWBroadcastChannel").MWBroadcastChannel(t==="restore-table-"+e+"-"+o("MWLSIndexedDBName").dbName()?"mwChat-"+e:t);function a(e,t){try{n.postMessage([e,t])}catch(e){r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).warn("Failed to broadcast changes")}}function i(e,t){n.addEventListener("message",function(n){var r=n.data,o=r[0];o===e&&t(r[1])})}return{onEventReceive:i,postMessage:a}}l.default=s}),98);
__d("WAPromiseQueue",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(t){t===void 0&&(t=-1),this.$1=(e||(e=n("Promise"))).resolve(),this.$3=0,this.$2=t}var r=t.prototype;return r.wait=function(){return this.$1},r.enqueueHandlers=function(t,n,r){var e=this;this.$3++;var o=this.$1.then(function(){return t}).then(n,r),a=o.then();return this.$1=u(o,this.$2).finally(function(){e.$3--}),a},r.enqueue=function(t){var e=this;this.$3++;var n=this.$1.then(t),r=n.then();return this.$1=u(n,this.$2).finally(function(){e.$3--}),r},r.size=function(){return this.$3},t})(),s=(function(){function t(e){e===void 0&&(e=-1),this.$1=new Map,this.$2=e}var r=t.prototype;return r.waitIfPending=function(t){return this.$1.get(t)},r.wait=function(r){return this.$1.get(r)||(e||(e=n("Promise"))).resolve()},r.enqueueHandlers=function(t,n,r,o){var e=this.wait(t).then(function(){return n}).then(r,o);return this.$3(t,e)},r.enqueue=function(t,n){var e=this.wait(t).then(n);return this.$3(t,e)},r.$3=function(t,n){var e=this,r=n.then(),o,a=function(){e.$1.get(t)===o&&e.$1.delete(t)};return o=u(n,this.$2).then(a,a),this.$1.set(t,o),r},t})();function u(t,r){return r>=0?new(e||(e=n("Promise")))(function(e){var n=function(){return void e()};t.then(n,n),setTimeout(n,r)}):t.then(c,c)}function c(){}i.PromiseQueue=l,i.PromiseQueueMap=s}),66);