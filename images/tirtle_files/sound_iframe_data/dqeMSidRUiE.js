;/*FB_PKG_DELIM*/

__d("BDSignalBufferData",[],(function(t,n,r,o,a,i){"use strict";var e={},l=e;i.default=l}),66);
__d("SignalValueContext",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.cn=e}var t=e.prototype;return t.getSignalValueContextName=function(){return this.cn},e})();i.default=e}),66);
__d("BDSignalCollectorBase",["BDSignalBufferData","SignalValueContext","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.signalType=e}var t=e.prototype;return t.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")},t.executeAsyncSignalCollection=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield this.executeSignalCollection();return e});function t(){return e.apply(this,arguments)}return t})(),e.getSanitizedURI=function(){var e=window.location.href,t=e.indexOf("?");return t<0?e:e.substring(0,t)},t.getContext=function(){return new(r("SignalValueContext"))(e.getSanitizedURI())},t.throwIfNotInitialized=function(){if(!(this.signalType in r("BDSignalBufferData")))throw new Error("Signal is not intialized")},e})();l.default=e}),98);
__d("BDBiometricSignalCollectorBase",["BDSignalCollectorBase","err"],(function(t,n,r,o,a,i,l){"use strict";var e="biometric_signal_collected",s=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.listenForSignals=function(){throw r("err")("Child class responsibility to implement listenForSignals")},n.executeSignalCollection=function(){throw r("err")("executeAsyncSignalCollection and executeSignalCollection should not be called on biometric signals")},t})(r("BDSignalCollectorBase"));l.BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME=e,l.BDBiometricSignalCollectorBase=s}),98);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.signalFlags=e,this.signalType=t}var t=e.prototype;return t.getSignalCollector=function(){return r("SignalCollectorMap").get(this.signalType)},t.getBufferConfig=function(){return r("BDSignalBufferData")[this.signalType]},e})();l.default=e}),98);
__d("BDLoggingConstants",[],(function(t,n,r,o,a,i){"use strict";var e={ERROR:"error",WARNING:"warning",INFO:"info"},l={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",BIOMETRIC_SIGNAL_COLLECTION_STARTED:"biometric_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"},s="JS";i.LEVELS=e,i.OPERATIONS=l,i.COMPONENT_NAME=s}),66);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1={}}var t=e.prototype;return t.log=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,n("Banzai").BASIC,t)},t.logVital=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,n("Banzai").VITAL,t)},t.logImmediately=function(t){n("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0},t)},t.clear=function(){return this.$1={},this},t.getData=function(){return babelHelpers.extends({},this.$1)},t.updateData=function(t){return this.$1=babelHelpers.extends({},this.$1,t),this},t.setBdSessionID=function(t){return this.$1.bd_session_id=t,this},t.setComponent=function(t){return this.$1.component=t,this},t.setDurationUs=function(t){return this.$1.duration_us=t,this},t.setExceptionMessage=function(t){return this.$1.exception_message=t,this},t.setExceptionStackTrace=function(t){return this.$1.exception_stack_trace=t,this},t.setExceptionType=function(t){return this.$1.exception_type=t,this},t.setIntValue=function(t){return this.$1.int_value=t,this},t.setLevel=function(t){return this.$1.level=t,this},t.setOperation=function(t){return this.$1.operation=t,this},t.setOperationInfo=function(t){return this.$1.operation_info=n("GeneratedLoggerUtils").serializeMap(t),this},t.setSessionlets=function(t){return this.$1.sessionlets=n("GeneratedLoggerUtils").serializeVector(t),this},e})(),l={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,operation:!0,operation_info:!0,sessionlets:!0};i.default=e}),66);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.INFO,t,n,r)}function s(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.WARNING,t,n,r)}function u(e,t,n,r){c(e,o("BDLoggingConstants").LEVELS.ERROR,t,n,r)}function c(e,t,n,a,i){if(a===void 0&&(a={}),o("Random").coinflip(d(n))){if(a===null)throw new Error("opeartion info null");a.source=e,new(r("BDOperationTypedLogger"))().setLevel(t).setDurationUs(i).setOperation(n).setComponent(o("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(a).log()}}function d(e){var t=o("BDLoggingConstants").OPERATIONS;switch(e){case t.APPEND_SIGNAL:case t.HB_COLLECTED:case t.GET_LOCAL_STORAGE_ERROR:case t.WEB_STORAGE:case t.SIGNAL_NOT_IMPLEMENTED:case t.BIOMETRIC_SIGNAL_COLLECTION_STARTED:return 1e3;default:return 1}}l.logInfo=e,l.logWarning=s,l.logError=u,l.log=c,l.getFlipSamplingByOperation=d}),98);
__d("SignalErrorValueTypeDef",[],(function(t,n,r,o,a,i){"use strict";var e="ec",l="en",s="es",u=500,c=(function(){function t(e,t,n){this.$1=e,this.$2=t,n!=null&&(this.$3=n.substr(0,u))}var n=t.prototype;return n.getErrorCode=function(){return this.$1},n.getErrorName=function(){return this.$2},n.getErrorDetails=function(){return this.$3},n.isEqual=function(t){return this.$1===t.getErrorCode()&&this.$3===t.getErrorDetails()&&this.$2===t.getErrorName()},n.toJSON=function(){var t={};switch(t[e]=this.$1,this.$1){case 0:t[l]=this.$2,t[s]=this.$3;break}return t},t})();i.SignalErrorValueTypeDef=c}),66);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e="SignalValueTypeDef",s="t",u="ctx",c="v",d="e",m={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"},p=(function(){function t(e,t,n,r,o){this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=o!=null?o:0}var n=t.prototype;return n.getTimeStampMS=function(){return this.$1},n.getSignalContext=function(){return this.$2},n.getSignalValue=function(){return this.$3},n.getSignalValueType=function(){return this.$4},n.isEqual=function(n,r){if(n==null)return o("BDOperationLogHelper").logWarning(e,o("BDLoggingConstants").OPERATIONS.SIGNAL_VALUE_NULL),!1;if(this.getSignalValueType()!==n.getSignalValueType())return!1;if(this.getSignalValueType()===m.ERROR&&n.getSignalValueType()===m.ERROR)return this.equalValue(n);var t=!1;return r.has(128)&&(t=this.equalValue(n)),r.has(256)&&(t=t&&this.getSignalContext()!=null&&n.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===n.getSignalContext().getSignalValueContextName()),r.has(512)&&(t=t&&Math.abs(this.getTimeStampMS()-n.getTimeStampMS())<=this.$5),t},n.equalValue=function(t){if(this.isPrimitiveType())return this.getSignalValue()===t.getSignalValue();throw new Error("Must implement in the subclasses")},n.toJSON=function(t){var e={};return t&&(e[s]=this.$1/1e3,this.$2!=null&&(e[u]=this.$2)),this.$3==null?e[d]=new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(2):this.addValueOrErrorToJSON(e),e},n.addValueOrErrorToJSON=function(t){if(this.isPrimitiveType())t[c]=this.$3;else throw new Error("Must implement in the subclasses")},n.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}},t})();l.BD_VALUE=c,l.BD_ERROR=d,l.VALUE_TYPES=m,l.SignalValueTypeDef=p}),98);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.equalValue=function(t){return this.getSignalValue().isEqual(t.getSignalValue())},n.addValueOrErrorToJSON=function(t){t[o("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()},t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e;if(navigator.connection!=null&&navigator.connection.rtt!=null){var t=navigator.connection.rtt;e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),t)}else e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.connection.rtt not supported"));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30004,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.equalValue=function(t){return this.getSignalValue().isEqual(t.getSignalValue())},n.addValueOrErrorToJSON=function(t){t[o("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()},t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("HeartbeatObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.isAppForeground=!0}var t=e.prototype;return t.toJSON=function(){return{f:this.isAppForeground}},t.isEqual=function(t){return!1},e})();i.default=e}),66);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("HeartbeatObject")));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:38e3,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("KeyDownUpObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.action=null,this.key_code=null,this.action=e,this.key_code=t}var t=e.prototype;return t.toJSON=function(){return{action:this.action,key_code:this.key_code}},t.isEqual=function(n){return n instanceof e?this.action===n.action&&this.key_code===n.key_code:!1},e})();i.default=e}),66);
__d("BDKeyDownUpSignalCollector",["BDBiometricSignalCollectorBase","CustomObjectSignalValueType","KeyDownUpObject","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.listenForSignals=function(){var e=this;r("gkx")("21049")&&(document.addEventListener("keydown",function(t){return e.collectSignals(2)}),document.addEventListener("keyup",function(t){return e.collectSignals(1)}))},n.collectSignals=function(t){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("KeyDownUpObject"))(t,0)),n={signalId:this.signalType,data:{valueOrError:e}};window.dispatchEvent(new CustomEvent(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:n}))},t})(o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase),s=null,u={signalType:30100,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("StringArrayObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.strings=[],this.strings=e}var t=e.prototype;return t.toJSON=function(){return this.strings},t.isEqual=function(n){if(!(n instanceof e))return!1;if(n.strings===this.strings)return!0;if(n.strings.length!==this.strings.length)return!1;for(var t=0;t<this.strings.length;t++)if(this.strings[t]!==n.strings[t])return!1;return!0},e})();i.default=e}),66);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=[].concat(navigator.languages),t=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("StringArrayObject"))(e));return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30003,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.mimeTypes?navigator.mimeTypes.length:-1,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30002,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDTouchOrMouseSignalCollectorBase",["BDBiometricSignalCollectorBase","BDLoggingConstants","BDOperationLogHelper","BooleanSignalValueType","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e="BDTouchOrMouseSignalCollectorBase",s=(function(t){function n(e,n,r){var o;return o=t.call(this,e)||this,o.eventsToSubscribe=[],o.pauseTimeout=36e5,o.eventsToSubscribe=n,o.pauseTimeout=r,o.handler=function(e){return o.collectSignals(e)},o}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.listenForSignals=function(){this.collectSignals(),this.addListeners()},a.addListeners=function(){var t=this;this.eventsToSubscribe.forEach(function(n){try{document.addEventListener(n,t.handler)}catch(t){var a=r("getErrorSafe")(t);o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:a.message})}})},a.pauseListeners=function(){var e=this;this.eventsToSubscribe.forEach(function(t){document.removeEventListener(t,e.handler)}),window.setTimeout(function(){return e.addListeners()},this.pauseTimeout)},a.collectSignals=function(t){var e=t!=null;e&&this.pauseListeners();var n=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),e),a={signalId:this.signalType,data:{valueOrError:n}};window.dispatchEvent(new CustomEvent(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))},n})(o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase);l.default=s}),98);
__d("BDMousePresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(t,n,r,o,a,i,l){"use strict";var e=36e5,s=(function(t){function n(){return t.call(this,c.signalType,["mousedown","mousemove"],e)||this}return babelHelpers.inheritsLoose(n,t),n})(r("BDTouchOrMouseSignalCollectorBase")),u=null,c={signalType:30106,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n,r){return e.call(this,t,n,r,o("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return babelHelpers.inheritsLoose(t,e),t})(o("SignalValueTypeDef").SignalValueTypeDef);l.default=e}),98);
__d("BDNavigatorAppVersionSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.appVersion,t=new(r("StringSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30013,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorHardwareConcurrencySignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),(e=navigator.hardwareConcurrency)!=null?e:0);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30018,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorMaxTouchPointSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),navigator.maxTouchPoints);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30093,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.executeAsyncSignalCollection=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;try{if(navigator.permissions){var t=yield navigator.permissions.query({name:"notifications"});e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),t.state)}else e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.permissions not supported"))}catch(t){e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"notifications cannot be queried from navigator.permissions"))}return{valueOrError:e}});function t(){return e.apply(this,arguments)}return t})(),t})(r("BDSignalCollectorBase")),s=null,u={signalType:30008,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30015,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorPluginsFileExtensionsSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringArrayObject"],(function(t,n,r,o,a,i,l){"use strict";var e=10,s=(function(t){function n(){return t.call(this,c.signalType)||this}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.executeSignalCollection=function(){var t=null;try{for(var n=navigator.plugins?navigator.plugins.length:0,a=new Set,i=0;i<n;i++){var l=navigator.plugins[i].filename;if(l){var s=l.indexOf(".");if(!(s==-1||s==l.length-1)&&(a.add(l.substr(s+1)),a.size>=e))break}}a.size&&(t=new(r("StringArrayObject"))(Array.from(a)))}catch(e){t=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"navigator.plugins is not defined"))}return{valueOrError:t}},n})(r("BDSignalCollectorBase")),u=null,c={signalType:30019,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDNavigatorUserAgentSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),navigator.userAgent);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30094,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.vendor,t=new(r("StringSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30012,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e;return window.Notification?e=new(r("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):e=new(r("ErrorSignalValueType"))(Date.now(),this.getContext(),new(o("SignalErrorValueTypeDef")).SignalErrorValueTypeDef(3,"Notification not supported")),{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30007,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=navigator.plugins?navigator.plugins.length:-1,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30001,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDTimezoneOffsetSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e,t=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),(e=new Date().getTimezoneOffset())!=null?e:999);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30040,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDTouchPresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(t,n,r,o,a,i,l){"use strict";var e=36e5,s=(function(t){function n(){return t.call(this,c.signalType,["touchstart","touchcancel"],e)||this}return babelHelpers.inheritsLoose(n,t),n})(r("BDTouchOrMouseSignalCollectorBase")),u=null,c={signalType:30107,get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=!!navigator.webdriver,t=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),e);return{valueOrError:t}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:3e4,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDWebglSupportSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}var n=!!t,o=new(r("BooleanSignalValueType"))(Date.now(),this.getContext(),n);return{valueOrError:o}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30022,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDWindowHistoryLengthSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("NumberSignalValueType"))(Date.now(),this.getContext(),window.history?window.history.length:0);return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30095,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("DimensionObject",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.width=null,this.height=null,this.width=e,this.height=t}var t=e.prototype;return t.toJSON=function(){return{w:this.width,h:this.height}},t.isEqual=function(n){return n instanceof e?this.width===n.width&&this.height===n.height:!1},e})();i.default=e}),66);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=window.innerHeight,t=window.innerWidth,n=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("DimensionObject"))(t,e));return{valueOrError:n}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:30005,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("SignalCollectorMap",["BDConnectionRTTSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector","BDKeyDownUpSignalCollector","BDLanguagesSignalCollector","BDMimeTypeCountSignalCollector","BDMousePresenceSignalCollector","BDNavigatorAppVersionSignalCollector","BDNavigatorHardwareConcurrencySignalCollector","BDNavigatorMaxTouchPointSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorPlatformSignalCollector","BDNavigatorPluginsFileExtensionsSignalCollector","BDNavigatorUserAgentSignalCollector","BDNavigatorVendorSignalCollector","BDNotificationPermissionSignalCollector","BDPluginCountSignalCollector","BDTimezoneOffsetSignalCollector","BDTouchPresenceSignalCollector","BDWebdriverSignalCollector","BDWebglSupportSignalCollector","BDWindowHistoryLengthSignalCollector","BDWindowOuterDimensionSignalCollector"],(function(t,n,r,o,a,i,l){"use strict";var e={get:function(t){switch(t){case 3e4:return r("BDWebdriverSignalCollector").get();case 30001:return r("BDPluginCountSignalCollector").get();case 30002:return r("BDMimeTypeCountSignalCollector").get();case 30003:return r("BDLanguagesSignalCollector").get();case 30004:return r("BDConnectionRTTSignalCollector").get();case 30005:return r("BDWindowOuterDimensionSignalCollector").get();case 30007:return r("BDNotificationPermissionSignalCollector").get();case 30008:return r("BDNavigatorNotificationPermissionSignalCollector").get();case 30012:return r("BDNavigatorVendorSignalCollector").get();case 30013:return r("BDNavigatorAppVersionSignalCollector").get();case 30015:return r("BDNavigatorPlatformSignalCollector").get();case 30018:return r("BDNavigatorHardwareConcurrencySignalCollector").get();case 30019:return r("BDNavigatorPluginsFileExtensionsSignalCollector").get();case 30022:return r("BDWebglSupportSignalCollector").get();case 30040:return r("BDTimezoneOffsetSignalCollector").get();case 30093:return r("BDNavigatorMaxTouchPointSignalCollector").get();case 30094:return r("BDNavigatorUserAgentSignalCollector").get();case 30095:return r("BDWindowHistoryLengthSignalCollector").get();case 30100:return r("BDKeyDownUpSignalCollector").get();case 30106:return r("BDMousePresenceSignalCollector").get();case 30107:return r("BDTouchPresenceSignalCollector").get();case 38e3:return r("BDHeartbeatSignalCollector").get();case 38001:return r("BDHeartbeatV2SignalCollector").get()}}},s=e;l.default=s}),98);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.id="",n.id=t,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toJSON=function(){return{f:this.isAppForeground,id:this.id}},t})(r("HeartbeatObject"));l.default=e}),98);
__d("BDHeartbeatV2SignalCollector",["BDClientConfig","BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatV2Object"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,u.signalType)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.executeSignalCollection=function(){var e=new(r("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(r("HeartbeatV2Object"))(r("BDClientConfig").get().getHeartbeatVersion()));return{valueOrError:e}},t})(r("BDSignalCollectorBase")),s=null,u={signalType:38001,get:function(){return s==null&&(s=new e),s}},c=u;l.default=c}),98);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(t,n,r,o,a,i,l){"use strict";var e="BDClientConfig",s=(function(){function t(){this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.biometricSignalsMap=new Map,this.heartbeatSignal=new(r("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.sid=-1,this.hbVersion="",this.bufferSizeBySignalIdMap[38001]=1}var n=t.prototype;return n.setStaticSignalBufferSize=function(n){return n>0?this.staticSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"s"}),this},n.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize},n.setDynamicSignalBufferSize=function(n){return n>1?this.dynamicSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"d"}),this},n.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize},n.setBiometricSignalBufferSize=function(n){return n>1?this.biometricSignalBufferSize=n:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:n.toString(),type:"b"}),this},n.setSID=function(t){return this.sid=t,this},n.setHeartbeatVersion=function(t){return this.hbVersion=t,this},n.getHeartbeatVersion=function(){return this.hbVersion},n.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize},n.setConfigGenerationTimeStamp=function(t){return this.signalConfigGenerationTimeStampMs=t,this},n.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs},n.setHeartbeatIntervalMinutes=function(t){return this.heartbeatIntervalMs=t*60*1e3,this},n.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs},n.setSuspiciousTiersFlushDurationMinutes=function(n){return n>0?this.suspiciousTiersFlushDurationMs=n*60*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"fds"}),this},n.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs},n.setAllTiersFlushDurationMinutes=function(n){return n>0?this.allTiersFlushDurationMs=n*60*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"fda"}),this},n.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs},n.addMultipleSignalsToClientConfig=function(t){var e=this;return t.forEach(function(t){return e.addSignalToClientConfig(t)}),this},n.addSignalToClientConfig=function(t){var e=t.getSignalFlags(),n=t.getSignalId();if(n===38e3)return this;var o=new(r("BDSignalWrapper"))(e,n);return n===38001?(this.heartbeatSignal=o,this):(e.includes(2)?e.includes(4)?this.biometricSignals.push(o):this.dynamicSignals.push(o):this.staticSignals.push(o),t.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[t.getSignalId()]=t.getBufferSize()),this)},n.setPeriodicCollectionIntervalSeconds=function(n){return n>0?this.periodicCollectionIntervalMs=n*1e3:o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:n.toString(),type:"pi"}),this},n.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs},n.getDynamicSignals=function(){return this.dynamicSignals},n.getStaticSignals=function(){return this.staticSignals},n.getBiometricSignals=function(){return this.biometricSignals},n.getBiometricSignalsMap=function(){return this.biometricSignalsMap.size===0&&this.biometricSignals.length>0&&(this.biometricSignalsMap=this.biometricSignals.reduce(function(e,t){return e.set(t.signalType,t)},new Map)),this.biometricSignalsMap},n.getHeartbeatSignal=function(){return this.heartbeatSignal},n.getBufferSizeBySignalId=function(t){return this.bufferSizeBySignalIdMap[t]},n.setParsingDone=function(t){this.parsingDone=t},n.isParsingDone=function(){return this.parsingDone},t})(),u=null,c={get:function(){return u==null&&(u=new s),u}},d=c;l.default=d}),98);
__d("BDCollectionTypeEnum",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});i.default=e}),66);
__d("BotDetection_SignalFlags",[],(function(t,n,r,o,a,i){var e=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072});i.default=e}),66);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(t,n,r,o,a,i,l){"use strict";var e="BDServerSignalConfig",s=(function(){function t(e,t,n){this.parsedSignalFlags=[],this.signalId=e,this.signalFlags=t,this.bufferSize=n}var n=t.prototype;return n.getSignalId=function(){return this.signalId},n.getSignalFlags=function(){var t=this;if(this.parsedSignalFlags.length===0){var n=Object.keys(r("BotDetection_SignalFlags"));n.forEach(function(e){(r("BotDetection_SignalFlags")[e]&t.signalFlags)===r("BotDetection_SignalFlags")[e]&&t.parsedSignalFlags.push(r("BotDetection_SignalFlags")[e])})}return this.parsedSignalFlags.length===0&&o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()}),this.parsedSignalFlags},n.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0},t})();l.default=s}),98);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(t,n,r,o,a,i,l){"use strict";var e="BDServerConfig";function s(t){var n=[];try{var a=JSON.parse(t.sc),i=new Map(a.c);if(i.forEach(function(e,t){return n.push(new(r("BDServerSignalConfig"))(t,e))}),i.size===0){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.EMPTY_SIGNAL_CONFIG);return}var l=r("BDClientConfig").get();l.setPeriodicCollectionIntervalSeconds(t.i).addMultipleSignalsToClientConfig(n).setConfigGenerationTimeStamp(a.t).setAllTiersFlushDurationMinutes(t.fda).setSuspiciousTiersFlushDurationMinutes(t.fds).setHeartbeatIntervalMinutes(t.hbi).setStaticSignalBufferSize(t.sbs).setDynamicSignalBufferSize(t.dbs).setBiometricSignalBufferSize(t.bbs).setSID(t.sid).setHeartbeatVersion(t.hbv).setParsingDone(!0)}catch(t){o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{e:t})}}l.parseConfig=s}),98);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(t,n,r,o,a,i,l){"use strict";var e="BDSignalBuffer";function s(e,t,n){if(!(e in r("BDSignalBufferData"))){var o=1;t!==void 0&&(o=t),r("BDSignalBufferData")[e]={values:[],max_buffer_size:o,signal_flags:n!=null?n:[]}}}function u(e){if(e in r("BDSignalBufferData"))r("BDSignalBufferData")[e].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")}function c(t,n){if(t in r("BDSignalBufferData")){var a=r("BDSignalBufferData")[t],i=a.max_buffer_size;a.values.length>=i&&a.values.shift(),a.values.push(n),o("BDOperationLogHelper").logInfo(e,o("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL,{id:t.toString()})}else throw o("BDOperationLogHelper").logError(e,o("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL_FAIL,{id:t.toString()}),new Error("Tried to append signal that was not intialized:")}function d(){var e=r("BDClientConfig").get(),t=e.getBiometricSignals();t.forEach(function(e){e.signalType in r("BDSignalBufferData")&&u(e.signalType)})}function m(e){var t,n=r("BDSignalBufferData")[e],o=n==null||(t=n.values)==null?void 0:t.length;return o!=null&&o>0?n.values[o-1]:{valueOrError:void 0}}function p(e){return r("BDSignalBufferData")[e].values}function _(e){var t={};for(var n of e)n in r("BDSignalBufferData")&&(t[n]=p(n).map(function(e){return e.valueOrError}));return t}function f(e){var t=g(e);return JSON.stringify(_(t))}function g(e){var t=r("BDClientConfig").get(),n=[];return e.forEach(function(e){switch(e){case r("BDCollectionTypeEnum").STATIC:n=[].concat(n,t.getStaticSignals());break;case r("BDCollectionTypeEnum").DYNAMIC:n=[].concat(n,t.getDynamicSignals());break;case r("BDCollectionTypeEnum").BIOMETRIC:n=[].concat(n,t.getBiometricSignals());break}}),n.map(function(e){return e.signalType})}l.initialize=s,l.clearBuffer=u,l.appendSignal=c,l.clearBiometricSignals=d,l.getLastSignalFormatBySignalId=m,l.retrieveSignal=p,l.retrieveSignals=_,l.getSignalsAsJSONString=f,l._getSignalIdsByCollectionType=g}),98);
__d("BDUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}i.uuid=e}),66);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743095"),s=o("FalcoLoggerInternal").create("bd_pdc_signals",e),u=s;l.default=u}),98);
__d("SignalCollectionManager",["BDBiometricSignalCollectorBase","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s="SignalCollectionManager",u=(function(){function t(){var e=this;this.$1=!1,this.$6=function(t){if(t instanceof CustomEvent&&t.detail!=null&&t.detail.data!=null){var n=r("BDClientConfig").get().getBiometricSignalsMap().get(t.detail.signalId);n!=null&&e.$4(t.detail.data,n)}}}var a=t.prototype;return a.collectSignals=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=this,o=[];t.forEach(function(e){e.signalFlags.includes(4)?r.$2(e):o.push(r.$3(e))}),yield(e||(e=n("Promise"))).all(o)});function r(e){return t.apply(this,arguments)}return r})(),a.isEqualToLastCollectedSignal=function(t,n){var e=o("BDSignalBuffer").getLastSignalFormatBySignalId(n.signalType);return e.valueOrError==null?!1:t.isEqual(e.valueOrError,new Set(n.signalFlags))},a.getCircularBufferSize=function(t){var e=r("BDClientConfig").get(),n=e.getBufferSizeBySignalId(t.signalType);return n!=null&&e.getBufferSizeBySignalId(t.signalType)>0?n:t.signalFlags.includes(2)?t.signalFlags.includes(4)?e.getBiometricSignalBufferSize():e.getDynamicSignalBufferSize():e.getStaticSignalBufferSize()},a.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.getSignalCollector();if(t!=null)try{var n=yield t.executeAsyncSignalCollection();this.$4(n,e)}catch(e){o("BDOperationLogHelper").logError(s,o("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:e})}});function t(t){return e.apply(this,arguments)}return t})(),a.$2=function(t){this.$5();var e=t.getSignalCollector();e!=null&&e instanceof o("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase&&e.listenForSignals()},a.$5=function(){this.$1||(window.addEventListener(o("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,this.$6),this.$1=!0)},a.$4=function(t,n){n.getBufferConfig()==null&&o("BDSignalBuffer").initialize(n.signalType,this.getCircularBufferSize(n),n.signalFlags),t.valueOrError&&!this.isEqualToLastCollectedSignal(t.valueOrError,n)&&o("BDSignalBuffer").appendSignal(n.signalType,t)},t})(),c=null,d={get:function(){return c==null&&(c=new u),c}},m=d;l.default=m}),98);
__d("BDClientSignalCollectionTrigger",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDServerConfig","BDSignalBuffer","BDUtils","BdPdcSignalsFalcoEvent","Promise","SignalCollectionManager","WebStorage","asyncToGeneratorRuntime","getErrorSafe","javascript-blowfish"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="BDClientSignalCollectionTrigger",c="signal_flush_timestamp",d=!1,m=!1,p=!1,_=!1,f=0,g=0,h=0,y=30,C=5,b,v,S=o("BDUtils").uuid(),R=r("BDClientConfig").get(),L=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),E={startSignalCollection:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(R.setSID(e.sid),!d){if(d=!0,o("BDServerConfig").parseConfig(e),!R.isParsingDone()){o("BDOperationLogHelper").logError(u,o("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{config:JSON.stringify(e)}),d=!1;return}e!=null&&(g=e.hbcbc&&e.hbcbc>0?e.hbcbc:g,h=e.hbvbc&&e.hbvbc>0?e.hbvbc:h,y=e.hbbi&&e.hbbi>0?e.hbbi:y),E.startHeartbeatDelayed(),v=new(s||(s=n("Promise")))(function(e,t){try{R.getDynamicSignals().length>0&&(E.collectDynamicSignals(),o("BDOperationLogHelper").logInfo(u,o("BDLoggingConstants").OPERATIONS.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),R.getBiometricSignals().length>0&&(E.collectBiometricSignals(),o("BDOperationLogHelper").logInfo(u,o("BDLoggingConstants").OPERATIONS.BIOMETRIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),e()}catch(e){t(e)}}),yield v,yield E.startSignalPosting()}d&&!p&&!_&&C>0&&(C-=1,o("BDOperationLogHelper").logWarning(u,o("BDLoggingConstants").OPERATIONS.TRY_RESTARTING_HB),E.startHeartbeatDelayed())});function t(t){return e.apply(this,arguments)}return t})(),retrieveSignals:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield v,yield E.postSignals([r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").BIOMETRIC,r("BDCollectionTypeEnum").STATIC])});function t(){return e.apply(this,arguments)}return t})(),postSignals:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield E.collectStaticSignals(),E._postSignalsHelper(o("BDSignalBuffer").getSignalsAsJSONString(e),L.NONE)&&E.setTimestampInStorage(Date.now(),c)});function t(t){return e.apply(this,arguments)}return t})(),_postSignalsHelper:function(t,n){if(t.length<=2)return!1;var e=R.getConfigGenerationTimeStamp(),a=E.encryptDataUsingAsid(S,t),i=function(){return{asid:S,ct:e,sjd:a,sid:R.sid}},l=!1;try{n===L.CRITICAL?r("BdPdcSignalsFalcoEvent").logCritical(i):n===L.VITAL?r("BdPdcSignalsFalcoEvent").logImmediately(i):r("BdPdcSignalsFalcoEvent").log(i),l=!0}catch(e){var s=r("getErrorSafe")(e);o("BDOperationLogHelper").logError(u,o("BDLoggingConstants").OPERATIONS.BANZAI_LOG_ERROR,{error:s.message}),l=!1}finally{return l}},getInitialVector:function(t){if(t.length!==16)return o("BDOperationLogHelper").logError(u,o("BDLoggingConstants").OPERATIONS.INVALID_LENGTH),"";for(var e="",n=0;n<8;n++)e+=String.fromCharCode(t.charCodeAt(n)^t.charCodeAt(8+n));return e},encryptDataUsingAsid:function(t,n){if(t.length!==36)return o("BDOperationLogHelper").logError(u,o("BDLoggingConstants").OPERATIONS.INVALID_GUID),n;var e=t.slice(19,23)+t.slice(24,36),a=E.getInitialVector(e),i=new(r("javascript-blowfish"))(e,"cbc");return i.base64Encode(i.encrypt(n,a))},startSignalPosting:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=E.getTimestampInStorage(c),t=Date.now()-e;t>=R.getAllTiersFlushDurationMs()?yield E.postSignalsIntermittently():window.setTimeout(function(){E.postSignalsIntermittently()},R.getAllTiersFlushDurationMs()-t)});function t(){return e.apply(this,arguments)}return t})(),postSignalsIntermittently:function(){E.postSignals([r("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){E.postSignals([r("BDCollectionTypeEnum").STATIC,r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").BIOMETRIC])},R.getAllTiersFlushDurationMs())},setTimestampInStorage:function(n,a){var t=(e||(e=r("WebStorage"))).getLocalStorage();if(!t){o("BDOperationLogHelper").logWarning(u,o("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return}var i=e.setItemGuarded(t,a,n.toString());i!=null&&o("BDOperationLogHelper").logWarning(u,o("BDLoggingConstants").OPERATIONS.WEB_STORAGE,{error:i.message})},getTimestampInStorage:function(n){var t=(e||(e=r("WebStorage"))).getLocalStorage();if(!t)return o("BDOperationLogHelper").logWarning(u,o("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR),0;var a=t.getItem(n);if(a==null)return 0;var i=Number.parseInt(a,10);return Number.isFinite(i)?i:0},resetHeartbeatStartedForTest:function(){p=!1,_=!1},startHeartbeatDelayed:function(){if(!(p||_)){var e=E.getTimestampInStorage(E.HEARTBEAT_TIMESTAMP_STORAGE_KEY),t=Date.now()-e;try{t>=R.getHeartbeatIntervalMs()?E.startHeartbeat():(window.setTimeout(function(){return E.startHeartbeat()},R.getHeartbeatIntervalMs()-t),_=!0)}catch(e){var n=r("getErrorSafe")(e);o("BDOperationLogHelper").logError(u,o("BDLoggingConstants").OPERATIONS.HB_START_FAILURE,{lastBeatSince:t.toString(),hbi:R.getHeartbeatIntervalMs().toString(),error:n.message})}}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!p&&R.getHeartbeatIntervalMs()>0&&(E.collectHeartbeatTimes(g,h),f!==0&&(window.clearInterval(f),o("BDOperationLogHelper").logWarning(u,o("BDLoggingConstants").OPERATIONS.HB_ALREADY_RUNNING)),f=window.setInterval(function(){return E.collectHeartbeatTimes(g,h)},R.getHeartbeatIntervalMs()),p=!0)},collectHeartbeatTimes:function(t,n){t<=0&&n<=0||(t>0&&E.collectHeartbeat(L.CRITICAL),n>0&&E.collectHeartbeat(L.VITAL),(t>1||n>1)&&window.setTimeout(function(){return E.collectHeartbeatTimes(t-1,n-1)},y*1e3))},collectHeartbeat:function(t){var e,n=R==null||(e=R.getHeartbeatSignal())==null||(e=e.getSignalCollector())==null?void 0:e.executeSignalCollection();if(n==null){o("BDOperationLogHelper").logError(u,o("BDLoggingConstants").OPERATIONS.HB_COLLECTION_FAILED,{urgency:t.toString()});return}else o("BDOperationLogHelper").logInfo(u,o("BDLoggingConstants").OPERATIONS.HB_COLLECTED,{urgency:t.toString()});E.postHeartbeat(t,n)&&E.setTimestampInStorage(Date.now(),E.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(t,n){var e={};e[38001]=[n==null?void 0:n.valueOrError];var r=JSON.stringify(e);return E._postSignalsHelper(r,t)},collectStaticSignals:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield E.collectSignalsOneTime(R.getStaticSignals())});function t(){return e.apply(this,arguments)}return t})(),collectDynamicSignals:function(){E.stopDynamicSignalCollection(),b=window.setInterval(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield E.collectSignalsOneTime(R.getDynamicSignals())}),R.getPeriodicCollectionIntervalMs())},collectBiometricSignals:function(){E.collectSignalsOneTime(R.getBiometricSignals())},stopDynamicSignalCollection:function(){b!=null&&(window.clearInterval(b),b=null)},collectSignalsOneTime:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield r("SignalCollectionManager").get().collectSignals(e)});function t(t){return e.apply(this,arguments)}return t})(),startLoginTimeSignalCollection:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){m||(m=!0,o("BDServerConfig").parseConfig(e),yield E.collectSignalsOneTime(R.getDynamicSignals()),yield E.collectSignalsOneTime(R.getBiometricSignals()),yield E.collectSignalsOneTime(R.getStaticSignals()))});function t(t){return e.apply(this,arguments)}return t})(),getSignalsAsJSONString:function(){return o("BDSignalBuffer").getSignalsAsJSONString([r("BDCollectionTypeEnum").DYNAMIC,r("BDCollectionTypeEnum").STATIC,r("BDCollectionTypeEnum").BIOMETRIC])}},k=E;l.default=k}),98);